(this["webpackJsonpchess-frontend"]=this["webpackJsonpchess-frontend"]||[]).push([[0],{129:function(e,n){},150:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),a=t(42),o=t.n(a),i=(t(95),t(3)),u=t(13),l=t(12),b=t(4),d=t(23),f=t(83),s=t(0),p=t(14),m=t(27),v=t(15);function x(){var e=Object(i.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    height: 90%;\n    overflow-y: scroll;\n    background-color: rgb(0,0,0, 0.2);\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.4);\n"]);return x=function(){return e},e}function h(){var e=Object(i.a)(["\n    \n"]);return h=function(){return e},e}function O(){var e=Object(i.a)(["\n    \n"]);return O=function(){return e},e}function j(){var e=Object(i.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 24%;\n    height: 300px;\n    background-color: rgb(0,0,0, 0.4);\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.6);\n    cursor: pointer;\n    \n    & + & {\n        margin-left: 13%;\n    }\n\n    &:active {\n        background-color: rgb(0,0,0, 0.6);\n        box-shadow: 5px 5px 5px rgb(0,0,0,0.8);\n    }\n"]);return j=function(){return e},e}function E(){var e=Object(i.a)(["\n    display: flex;\n    width: 85%;\n\n    & + & {\n        margin-top: 50px;\n    }\n\n    &:first-child {\n        margin-top: 50px;\n    }\n\n    &:last-child {\n        margin-bottom: 50px;\n    }\n"]);return E=function(){return e},e}var g=b.b.div(E()),y=b.b.div(j()),k=b.b.div(O()),w=b.b.div(h()),C=c.a.memo((function(e){var n=e.room,t=Object(p.a)(e,["room"]);return console.dir("room~"),c.a.createElement(y,t,c.a.createElement(k,null,n.name),c.a.createElement(w,null,n.participant))})),I=b.b.div(x()),T=c.a.memo((function(e){var n=e.room,t=e.onRoomClick;if(!n)return c.a.createElement(I,null);for(var r=Object(v.a)(n),a=[],o=Math.floor(r.length/3),i=0;i<=o;++i)a.push(c.a.createElement(g,{key:"GridRowBlock_".concat(i)},r.splice(0,3).map((function(e){return c.a.createElement(C,{key:"GridBox".concat(e.name),room:e,onClick:function(n){return t(n,e.key)}})}))));return c.a.createElement(I,null,a)})),N=function(e){return c.a.createElement(T,e)},A=t(5),L=t.n(A);function S(){var e=Object(i.a)(["\n    ","\n    margin-left: 20px;\n"]);return S=function(){return e},e}function _(){var e=Object(i.a)(["\n    ","\n"]);return _=function(){return e},e}function V(){var e=Object(i.a)(["\n    outline: none;\n    background-color: rgb(0,0,0, 0.2);\n    padding: 0px;\n    border: none;\n    width: 200px;\n    height: 30px;\n    cursor: pointer;\n    box-shadow: 5px 5px 5px rgb(0,0,0, 0.6);;\n\n    &:hover {\n        background-color: rgb(0,0,0, 0.8);\n        color: white;\n        box-shadow: 5px 5px 5px rgb(0,0,0, 0.2);\n    }\n"]);return V=function(){return e},e}function U(){var e=Object(i.a)(["\n    display: flex;\n"]);return U=function(){return e},e}var D=b.b.form(U()),z=Object(b.a)(V()),M=b.b.button(_(),z),P=b.b.button(S(),z),R=c.a.memo((function(e){var n=e.onConfirmClick,t=e.onCancelClick;return c.a.createElement(D,{onSubmit:n},c.a.createElement(M,{type:"submit"},"Create Room"),c.a.createElement(P,{type:"button",onClick:t},"Cancel"))})),K=t(9),Z=t(7),B=t(152),F=t(151),G=t(8),W=t(45),H=t(81),q=t.n(H),X=L.a.mark($),J=L.a.mark(Q);function $(e){return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(W.b)((function(n){return e.on("connect",(function(t){n({type:"socket",socket:e.id})})),e.on("message",(function(e){n(e)})),function(){e.close()}})));case 1:case"end":return n.stop()}}),X)}function Q(e){var n,t,r,c,a,o,i,u,l;return L.a.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.url,r=e.initializeSocket,c=e.initializeValue,a=e.changeValue,o=e.updateValue,i=e.query,console.dir(t),console.dir(i),b.prev=3,u=q()(t,{query:i,reconnection:!1,secure:!0}),b.next=7,Object(G.b)($,u);case 7:n=b.sent;case 8:return b.next=11,Object(G.g)(n);case 11:l=b.sent,b.t0=l.type,b.next="socket"===b.t0?15:"initialize"===b.t0?18:"change"===b.t0?21:"update"===b.t0?24:27;break;case 15:return b.next=17,Object(G.f)(r(l));case 17:return b.abrupt("break",28);case 18:return b.next=20,Object(G.f)(c(l));case 20:return b.abrupt("break",28);case 21:return b.next=23,Object(G.f)(a(l));case 23:return b.abrupt("break",28);case 24:return b.next=26,Object(G.f)(o(l));case 26:return b.abrupt("break",28);case 27:console.dir(l);case 28:b.next=8;break;case 30:b.next=35;break;case 32:b.prev=32,b.t1=b.catch(3),console.dir(b.t1);case 35:return b.prev=35,b.next=38,Object(G.d)();case 38:if(!b.sent){b.next=40;break}n.close();case 40:return b.finish(35);case 41:case"end":return b.stop()}}),J,null,[[3,32,35,41]])}var Y=function(e){return[e,"".concat(e,"_SUCCESS"),"".concat(e,"_FAILURE")]};function ee(e,n){var t="".concat(e,"_SUCCESS"),r="".concat(e,"_FAILURE");return function(e){return function(c){var a;return L.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,L.a.awrap(n(e));case 3:return a=o.sent,c({type:t,payload:a.data}),o.abrupt("return",a.data);case 8:throw o.prev=8,o.t0=o.catch(0),c({type:r,payload:o.t0,error:!0}),o.t0;case 12:case"end":return o.stop()}}),null,null,[[0,8]])}}}var ne,te=t(26),re=t.n(te),ce=L.a.mark(he),ae=L.a.mark(Oe),oe="room/CONNECT_WEBSOCKET",ie="room/DISCONNECT_WEBSOCKET",ue=Object(B.a)(oe),le=Object(B.a)(ie),be=Object(B.a)("room/INITIALIZE_SOCKET",(function(e){return e})),de=Object(B.a)("room/INITIALIZE_VALUE",(function(e){return e})),fe=Y("room/CREATE_ROOM"),se=Object(u.a)(fe,3),pe=se[0],me=se[1],ve=se[2],xe=ee(pe,(function(){return re.a.post("/api/room")}));function he(){var e;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(G.e)(Q,{url:"/room",initializeSocket:be,initializeValue:de});case 2:return e=n.sent,n.next=5,Object(G.g)(ie);case 5:return n.next=7,Object(G.c)(e);case 7:case"end":return n.stop()}}),ce)}function Oe(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.h)(oe,he);case 2:case"end":return e.stop()}}),ae)}var je=Object(F.a)((ne={},Object(K.a)(ne,"room/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(Z.a)({},e,{socket:t})})),Object(K.a)(ne,"room/INITIALIZE_VALUE",(function(e,n){var t=n.payload.room;return Object(Z.a)({},e,{room:t})})),Object(K.a)(ne,me,(function(e){return e})),Object(K.a)(ne,ve,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{error:t})})),ne),{socket:null,room:null,error:null}),Ee=Object(m.f)((function(e){var n=e.history,t=e.onCancelClick,a=Object(p.a)(e,["history","onCancelClick"]),o=Object(l.b)(),i=Object(r.useCallback)((function(e){e.preventDefault(),function(){var e;L.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return o(le()),r.next=3,L.a.awrap(o(xe()));case 3:e=r.sent,t(),n.push("/game/".concat(e));case 6:case"end":return r.stop()}}))}()}),[o,n,t]);return c.a.createElement(R,Object.assign({},a,{onConfirmClick:i,onCancelClick:t}))}));function ge(){var e=Object(i.a)(["\n    position: fixed;\n    top: 20%;\n    left: 20%;\n    height: 60%;\n    width: 60%;\n    padding: 2%;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    justify-content: space-between;\n    background-color: rgb(245,245,245, 0.8);\n    box-shadow: 10px 10px 10px;\n    z-index: 1000;\n"]);return ge=function(){return e},e}function ye(){var e=Object(i.a)(["\n        opacity: 1;\n        visibility: visible;\n    "]);return ye=function(){return e},e}function ke(){var e=Object(i.a)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgb(0,0,0, 0.5);\n    z-index: 100;\n    opacity: 0;\n    visibility: hidden;\n    transition: 1s;\n\n    ","\n"]);return ke=function(){return e},e}var we=b.b.div(ke(),(function(e){return e.open&&Object(b.a)(ye())})),Ce=b.b.div(ge()),Ie=c.a.memo((function(e){var n=e.onBackgroundClick,t=e.onContentClick,r=e.onRoomClick,a=e.room,o=Object(p.a)(e,["onBackgroundClick","onContentClick","onRoomClick","room"]);return console.dir("room mooooodal"),c.a.createElement(we,Object.assign({},o,{onClick:n}),c.a.createElement(Ce,{onClick:t},c.a.createElement(N,{room:a,onRoomClick:r}),c.a.createElement(Ee,{onCancelClick:n})))})),Te=Object(m.f)((function(e){var n=e.history,t=e.openModal,a=e.setOpenModal,o=Object(p.a)(e,["history","openModal","setOpenModal"]),i=Object(r.useState)(!1),b=Object(u.a)(i,2),d=b[0],f=b[1],s=Object(l.c)((function(e){return{room:e.room.room}})).room,m=Object(l.b)(),v=Object(r.useCallback)((function(e){f(!1),a(!1),m(le())}),[m,a]),x=Object(r.useCallback)((function(e){e.stopPropagation()}),[]),h=Object(r.useCallback)((function(e,t){f(!1),a(!1),m(le()),n.push("/game/".concat(t))}),[m,n,a]);return Object(r.useEffect)((function(){f(t)}),[t]),console.dir("roommodal"),Object(r.useEffect)((function(){return function(){m(le())}}),[m]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Ie,Object.assign({},o,{room:s,open:d,onBackgroundClick:v,onContentClick:x,onRoomClick:h})))}));function Ne(){var e=Object(i.a)(["\n    display: flex;\n    align-items: center;\n    margin-right: 8%;\n    \n"]);return Ne=function(){return e},e}function Ae(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n    text-decoration: none;\n"]);return Ae=function(){return e},e}function Le(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n"]);return Le=function(){return e},e}function Se(){var e=Object(i.a)(["\n    margin-left: 30px;\n    display: flex;\n"]);return Se=function(){return e},e}function _e(){var e=Object(i.a)(["\n    display: flex;\n    align-items: center;\n    margin-left: 8%;\n"]);return _e=function(){return e},e}function Ve(){var e=Object(i.a)(["\n    ","\n    color: rgb(0, 0, 0, 0.4);\n"]);return Ve=function(){return e},e}function Ue(){var e=Object(i.a)(["\n    ","\n    color: rgb(0, 0, 0, 0.6);\n"]);return Ue=function(){return e},e}function De(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n    height: 40px;\n    background-color: transparent;\n    cursor: pointer;\n    font-size: 30px;\n    text-decoration: none;\n    text-shadow: 2px 2px 2px rgb(0, 0, 0, 0.2);\n    font-style: italic;\n"]);return De=function(){return e},e}function ze(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 50px;\n"]);return ze=function(){return e},e}var Me=b.b.div(ze()),Pe=Object(b.a)(De()),Re=Object(b.b)(d.b)(Ue(),Pe),Ke=Object(b.b)(d.b)(Ve(),Pe),Ze=b.b.div(_e()),Be=b.b.div(Se()),Fe=b.b.div(Le()),Ge=Object(b.b)(d.b)(Ae()),We=function(e){return e.to?c.a.createElement(Ge,{to:e.to},e.children):c.a.createElement(Fe,e,e.children)},He=b.b.div(Ne()),qe=c.a.memo((function(e){var n=e.onToggle,t=e.openModal,r=e.setOpenModal;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Me,null,c.a.createElement(Ze,null,c.a.createElement(Re,{to:"/"},"chessup"),c.a.createElement(Ke,{to:"/"},".com"),c.a.createElement(Be,null,c.a.createElement(We,{onClick:n},"Play"),c.a.createElement(We,{to:"/"},"Record"),c.a.createElement(We,{to:"/"},"Community"))),c.a.createElement(He,null,c.a.createElement(s.b.Provider,{value:{style:{cursor:"pointer",width:"15px",height:"15px"}}},c.a.createElement(f.a,null)),c.a.createElement(We,null,"Login"))),c.a.createElement(Te,{openModal:t,setOpenModal:r}))})),Xe=function(){var e=Object(r.useState)(!1),n=Object(u.a)(e,2),t=n[0],a=n[1],o=Object(l.b)(),i=Object(r.useCallback)((function(){a(!0),o(ue())}),[o]);return c.a.createElement(qe,{onToggle:i,openModal:t,setOpenModal:a})};function Je(e,n){switch(n.type){case"LOADING":return{loading:!0,data:null,error:null};case"SUCCESS":return{loading:!1,data:n.data,error:null};case"FAILURE":return{loading:!1,data:null,error:n.error};default:throw new Error("Unhandled action type Error")}}var $e,Qe=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=Object(r.useReducer)(Je,{loading:!1,data:null,error:!1}),c=Object(u.a)(t,2),a=c[0],o=c[1],i=function(){var n;return L.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return o({type:"LOADING"}),t.prev=1,t.next=4,L.a.awrap(e());case 4:n=t.sent,o({type:"SUCCESS",data:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o({type:"FAILURE",error:t.t0});case 11:case"end":return t.stop()}}),null,null,[[1,8]])};return Object(r.useEffect)((function(){i()}),n),[a,i]},Ye=L.a.mark(pn),en=L.a.mark(mn),nn="auth/CONNECT_WEBSOCKET",tn="auth/DISCONNECT_WEBSOCKET",rn=Object(B.a)(nn),cn=Object(B.a)(tn),an=Object(B.a)("auth/INITIALIZE_SOCKET",(function(e){return e})),on=Object(B.a)("auth/INITIALIZE_VALUE",(function(e){return e})),un=Y("auth/SET_SESSION"),ln=Object(u.a)(un,3),bn=ln[0],dn=ln[1],fn=ln[2],sn=ee(bn,(function(){return re.a.get("/api/auth/getSession")}));function pn(e){var n,t,r;return L.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,t="key=".concat(n),c.next=4,Object(G.e)(Q,{url:"/auth",initializeSocket:an,initializeValue:on,query:t});case 4:return r=c.sent,c.next=7,Object(G.g)(tn);case 7:return c.next=9,Object(G.c)(r);case 9:case"end":return c.stop()}}),Ye)}function mn(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.h)(nn,pn);case 2:case"end":return e.stop()}}),en)}var vn=Object(F.a)(($e={},Object(K.a)($e,"auth/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(Z.a)({},e,{socket:t})})),Object(K.a)($e,"auth/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(p.a)(t,["type"]));return Object(Z.a)({},e,{tempAuth:Object(Z.a)({},r)})})),Object(K.a)($e,dn,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{session:t})})),Object(K.a)($e,fn,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{session:null,error:t})})),$e),{socket:null,tempAuth:null,session:null,error:null});function xn(){var e=Object(i.a)(["\n    width: 100%;\n    height: 800px;\n"]);return xn=function(){return e},e}var hn=b.b.div(xn()),On=function(){return c.a.createElement(hn,null)},jn=function(){var e=Object(l.b)(),n=Qe((function(){return L.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,L.a.awrap(e(sn()));case 2:return n.abrupt("return",!0);case 3:case"end":return n.stop()}}))}),[e]),t=Object(u.a)(n,1)[0],r=t.loading,a=t.data,o=t.error;return r?null:o?null:a?c.a.createElement(On,null):null},En=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Xe,null),c.a.createElement(jn,null))},gn=t(28),yn={pawn:gn.d,king:gn.b,queen:gn.e,bishop:gn.a,knight:gn.c,rook:gn.f,covered:gn.g},kn={white:{color:"white",style:{filter:"drop-shadow(1px 1px 1px white)",width:"80%",height:"80%"}},black:{color:"black",style:{filter:"drop-shadow(1px 1px 1px black)",width:"80%",height:"80%"}},covered0:{style:{filter:"drop-shadow(1px 1px 1px black)",width:"30%",height:"30%",color:"rgb(130, 151, 105)"}},covered1:{style:{filter:"drop-shadow(1px 1px 1px black)",width:"30%",height:"30%",color:"rgb(100, 111, 64)"}}};function wn(){var e=Object(i.a)(["\n        pointer-events: none;\n    "]);return wn=function(){return e},e}function Cn(){var e=Object(i.a)(["\n    ","\n"]);return Cn=function(){return e},e}function In(){var e=Object(i.a)(["\n            background-color: rgb(132, 121, 78);\n        "]);return In=function(){return e},e}function Tn(){var e=Object(i.a)(["\n            background-color: rgb(174, 177, 135);\n        "]);return Tn=function(){return e},e}function Nn(){var e=Object(i.a)(["\n        background-color: rgb(170, 162, 58);\n    "]);return Nn=function(){return e},e}function An(){var e=Object(i.a)(["\n        background-color: rgb(205, 210, 106);\n    "]);return An=function(){return e},e}function Ln(){var e=Object(i.a)(["\n        background-color: rgb(100, 111, 64);\n    "]);return Ln=function(){return e},e}function Sn(){var e=Object(i.a)(["\n        background-color: rgb(130, 151, 105);\n    "]);return Sn=function(){return e},e}function _n(){var e=Object(i.a)(["\n        background-color: rgb(181, 136, 99);\n    "]);return _n=function(){return e},e}function Vn(){var e=Object(i.a)(["\n        background-color: rgb(240, 217, 181);\n    "]);return Vn=function(){return e},e}function Un(){var e=Object(i.a)(["\n    display: flex;\n    cursor: pointer;\n    justify-content: center;\n    align-items: center;\n    width: 90px;\n    height: 90px;\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    &:hover {\n        ","\n\n        ","  \n    }\n"]);return Un=function(){return e},e}function Dn(){var e=Object(i.a)(["\n    display: flex;\n"]);return Dn=function(){return e},e}function zn(){var e=Object(i.a)(["\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return zn=function(){return e},e}var Mn,Pn=function(e){var n=e.piece,t=e.owner,r=e.covered,a=e.cellNum,o=null;if(r){var i=yn.covered;o=c.a.createElement(s.b.Provider,{value:kn["covered".concat(a)]},c.a.createElement(i,null))}if(!n||!t)return o;var u=yn[n],l=o?{opacity:.5,filter:"black"===t?"drop-shadow(1px 1px 1px white)":"drop-shadow(1px 1px 1px black)"}:null,b=Object(Z.a)({},kn[t],{style:Object(Z.a)({},kn[t].style,{},l)});return c.a.createElement(s.b.Provider,{value:b},c.a.createElement(u,null))},Rn=b.b.div(zn()),Kn=b.b.div(Dn()),Zn=b.b.div(Un(),(function(e){return 0===e.cellNum&&Object(b.a)(Vn())}),(function(e){return 1===e.cellNum&&Object(b.a)(_n())}),(function(e){return 0===e.cellNum&&e.clicked&&Object(b.a)(Sn())}),(function(e){return 1===e.cellNum&&e.clicked&&Object(b.a)(Ln())}),(function(e){return 0===e.cellNum&&e.tracked&&Object(b.a)(An())}),(function(e){return 1===e.cellNum&&e.tracked&&Object(b.a)(Nn())}),(function(e){return 0===e.cellNum&&e.covered&&Object(b.a)(Tn())}),(function(e){return 1===e.cellNum&&e.covered&&Object(b.a)(In())})),Bn=c.a.memo((function(e){var n=e.row,t=e.y,r=e.onClickCell,a=e.pieceConverter;return c.a.createElement(Kn,null,n.map((function(e,n){return c.a.createElement(Fn,{key:"cell_".concat(t,"_").concat(n),onClick:r.bind(null,{y:t,x:n}),pieceConverter:a,cellNum:(n+t)%2,cell:e})})))}),(function(e,n){return e.row===n.row})),Fn=c.a.memo((function(e){var n=e.cell,t=e.onClick,r=e.cellNum,a=e.pieceConverter;return c.a.createElement(Zn,Object.assign({onClick:t,cellNum:r},n),a({piece:n.piece,owner:n.owner,covered:n.covered,cellNum:r}))}),(function(e,n){return e.cell===n.cell})),Gn=b.b.div(Cn(),(function(e){return e.blocked&&Object(b.a)(wn())})),Wn=function(e){var n=e.board,t=e.blocked,a=e.onClick,o=Object(r.useCallback)((function(e){var n=e.y,t=e.x;a(n,t)}),[a]);return c.a.createElement(Gn,{blocked:t},n.map((function(e,n){return c.a.createElement(Bn,{key:"row_".concat(n),row:e,y:n,onClickCell:o,pieceConverter:Pn})})))},Hn=c.a.memo((function(e){return c.a.createElement(Rn,null,c.a.createElement(Wn,e))})),qn=[[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}]],Xn={pawn:{type:"onetime",move:[{dy:-1,dx:0,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!n[t][r].piece}},{dy:-2,dx:0,except:function(e){var n=e.board,t=e.y,r=e.x,c=e.owner;return!("black"===c&&1!==t||"white"===c&&6!==t)&&(!("black"===c&&n[2][r].piece||"white"===c&&n[5][r].piece)&&!("black"===c&&n[3][r].piece||"white"===c&&n[4][r].piece))}},{dy:-1,dx:-1,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!!n[t][r].piece}},{dy:-1,dx:1,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!!n[t][r].piece}}]},knight:{type:"onetime",move:[{dy:-2,dx:-1},{dy:-2,dx:1},{dy:2,dx:-1},{dy:2,dx:1},{dy:-1,dx:-2},{dy:-1,dx:2},{dy:1,dx:-2},{dy:1,dx:2}]},king:{type:"onetime",move:[{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:1},{dy:0,dx:-1},{dy:-1,dx:1},{dy:-1,dx:-1},{dy:1,dx:-1},{dy:1,dx:1}]},bishop:{type:"multitime",move:[{dy:1,dx:-1},{dy:1,dx:1},{dy:-1,dx:-1},{dy:-1,dx:1}]},rook:{type:"multitime",move:[{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:-1},{dy:0,dx:1}]},queen:{type:"multitime",move:[{dy:1,dx:-1},{dy:1,dx:1},{dy:-1,dx:-1},{dy:-1,dx:1},{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:-1},{dy:0,dx:1}]}},Jn=(t(84),function(e,n,t){var r=e[n][t],c=r.piece,a=r.owner,o={board:e,y:n,x:t,owner:a};if(c){var i=Xn[c],u=i.type,l=i.move;return"onetime"===u?l.reduce((function(r,c){var i=n+("black"===a?-c.dy:+c.dy),u=t+c.dx;return i<0||u<0||i>7||u>7?r:(o=Object(Z.a)({},o,{dy:i,dx:u}),(!c.except||c.except&&c.except(o))&&(e[i][u].owner&&e[n][t].owner===e[i][u].owner||r.push({dy:i,dx:u})),r)}),[]):l.flatMap((function(r){for(var c=0,o=[];;){++c;var i=n+c*("black"===a?-r.dy:+r.dy),u=t+c*r.dx;if(i<0||u<0||i>7||u>7)break;if(e[i][u].owner&&e[i][u].owner===a)break;if(o.push({dy:i,dx:u}),e[i][u].owner&&e[i][u].owner!==a)break}return o}))}}),$n=L.a.mark(xt),Qn=L.a.mark(ht),Yn="canvas/CONNECT_WEBSOCKET",et="canvas/DISCONNECT_WEBSOCKET",nt=Object(B.a)(Yn,(function(e){return e})),tt=Object(B.a)(et),rt=Object(B.a)("canvas/INITIALIZE_SOCKET",(function(e){return e})),ct=Object(B.a)("canvas/INITIALIZE_VALUE",(function(e){return e})),at=Object(B.a)("canvas/CHANGE_VALUE",(function(e){return e})),ot=Object(B.a)("canvas/CLEAR_VALUE"),it=Object(B.a)("canvas/INITIALIZE_BLOCKED",(function(e){return e})),ut=Object(B.a)("canvas/CHANGE_BLOCKED",(function(e){return e})),lt=Y("canvas/SET_MOVE_PIECE"),bt=Object(u.a)(lt,3),dt=bt[0],ft=bt[1],st=bt[2],pt=ee(dt,(function(e){return re.a.post("/api/canvas/movePiece",e)})),mt=function(e){var n=e.move;return function(e,t){var r=n.prev,c=n.next,a=t(),o=a.canvas.board,i=a.auth.tempAuth,u=a.game.turn;i&&("white"===i.role&&u%2===0||"black"===i.role&&u%2===1?e(ut({blocked:!1})):e(ut({blocked:!0})));var l=o[r.y][r.x],b=vt(Object(v.a)(o),["covered","clicked","tracked"]);b[c.y]=Object(v.a)(b[c.y]),b[c.y][c.x]=Object(Z.a)({},l,{tracked:!0,dirty:!0}),b[r.y]=Object(v.a)(b[r.y]),b[r.y][r.x]={covered:!1,tracked:!0};var d=b[c.y][c.x],f=d.owner,s=d.piece;("white"===f&&"pawn"===s&&0===c.y||"black"===f&&"pawn"===s&&7===c.y)&&(b[c.y][c.x]=Object(Z.a)({},b[c.y][c.x],{piece:"queen"})),e(at({board:b,clicked:null}))}},vt=function(e,n){for(var t=[],r=e.length,c=function(c){for(var a=function(r){var a=!1;n.forEach((function(n){a|=e[c][r][n]})),a&&t.push({y:c,x:r})},o=0;o<r;++o)a(o)},a=0;a<r;++a)c(a);return t.forEach((function(t){e[t.y]=Object(v.a)(e[t.y]);var r=e[t.y][t.x],c=Object(Z.a)({},r);n.forEach((function(e){c[e]=!1})),e[t.y].splice(t.x,1,c)})),e};function xt(e){var n,t,r;return L.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,t="key=".concat(n),c.next=4,Object(G.e)(Q,{url:"/canvas",initializeSocket:rt,initializeValue:ct,changeValue:mt,query:t});case 4:return r=c.sent,c.next=7,Object(G.g)(et);case 7:return c.next=9,Object(G.c)(r);case 9:case"end":return c.stop()}}),$n)}function ht(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.h)(Yn,xt);case 2:case"end":return e.stop()}}),Qn)}var Ot,jt={socket:null,error:null,board:qn,clicked:null,blocked:!1},Et=Object(F.a)((Mn={},Object(K.a)(Mn,"canvas/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(Z.a)({},e,{socket:t})})),Object(K.a)(Mn,"canvas/INITIALIZE_VALUE",(function(e,n){var t=n.payload.board;return Object(Z.a)({},e,{board:t})})),Object(K.a)(Mn,"canvas/CHANGE_VALUE",(function(e,n){var t=n.payload,r=t.board,c=t.clicked;return Object(Z.a)({},e,{board:r,clicked:c})})),Object(K.a)(Mn,"canvas/CLEAR_VALUE",(function(e){return jt})),Object(K.a)(Mn,"canvas/INITIALIZE_BLOCKED",(function(e,n){var t=n.payload.blocked;return Object(Z.a)({},e,{blocked:t})})),Object(K.a)(Mn,"canvas/CHANGE_BLOCKED",(function(e,n){var t=n.payload.blocked;return Object(Z.a)({},e,{blocked:t})})),Object(K.a)(Mn,ft,(function(e){return e})),Object(K.a)(Mn,st,(function(e){return e})),Mn),jt),gt=function(){var e=Object(l.c)((function(e){var n=e.canvas,t=e.auth,r=e.game;return{board:n.board,blocked:n.blocked,turn:r.turn,tempAuth:t.tempAuth}})),n=e.board,t=e.blocked,a=e.turn,o=e.tempAuth,i=Object(l.b)();Object(r.useEffect)((function(){o&&("white"===o.role&&a%2===0||"black"===o.role&&a%2===1?i(it({blocked:!1})):i(it({blocked:!0})))}),[i,a,o]),Object(r.useEffect)((function(){return function(){i(ot())}}),[i]);var u=Object(r.useCallback)((function(e,n){i(function(e){var n=e.y,t=e.x;return function(e,r){var c=r(),a=c.canvas,o=a.board,i=a.clicked;c.game.turn;if(i&&o[n][t].covered){var u=r().canvas.socket;e(pt({socket:u,move:{prev:i,next:{y:n,x:t}}}))}else{var l=Jn(o,n,t),b=vt(Object(v.a)(o),["covered","clicked"]);l.forEach((function(e){b[e.dy]=Object(v.a)(b[e.dy]);var n=b[e.dy][e.dx];b[e.dy].splice(e.dx,1,Object(Z.a)({},n,{covered:!0}))})),b[n]=Object(v.a)(b[n]),b[n][t]=Object(Z.a)({},b[n][t],{clicked:!0}),e(at({board:b,clicked:{y:n,x:t}}))}}}({y:e,x:n}))}),[i]);return c.a.createElement(Hn,{board:n,blocked:t,onClick:u})},yt=L.a.mark(Rt),kt=L.a.mark(Kt),wt="chat/CONNECT_WEBSOCKET",Ct="chat/DISCONNECT_WEBSOCKET",It=Object(B.a)(wt,(function(e){return e})),Tt=Object(B.a)(Ct),Nt=Object(B.a)("chat/INITIALIZE_SOCKET",(function(e){return e})),At=Object(B.a)("chat/INITIALIZE_VALUE",(function(e){return e})),Lt=Object(B.a)("chat/CHANGE_VALUE",(function(e){return e})),St=Object(B.a)("chat/CHANGE_TEXTFIELD",(function(e){return e})),_t=Object(B.a)("chat/INITIALIZE_TEXTFIELD"),Vt=Y("chat/SEND_MESSAGE"),Ut=Object(u.a)(Vt,3),Dt=Ut[0],zt=Ut[1],Mt=Ut[2],Pt=ee(Dt,(function(e){return re.a.post("/api/chat/sendMessage",e)}));function Rt(e){var n,t,r;return L.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,t="key=".concat(n),c.next=4,Object(G.e)(Q,{url:"/chat",initializeSocket:Nt,initializeValue:At,changeValue:Lt,query:t});case 4:return r=c.sent,c.next=7,Object(G.g)(Ct);case 7:return c.next=9,Object(G.c)(r);case 9:case"end":return c.stop()}}),yt)}function Kt(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.h)(wt,Rt);case 2:case"end":return e.stop()}}),kt)}var Zt=Object(F.a)((Ot={},Object(K.a)(Ot,"chat/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(Z.a)({},e,{socket:t})})),Object(K.a)(Ot,"chat/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=t.nickname,c=t.color,a=t.message;return Object(Z.a)({},e,{messages:[{nickname:r,color:c,message:a}]})})),Object(K.a)(Ot,"chat/CHANGE_VALUE",(function(e,n){var t=n.payload,r=t.nickname,c=t.color,a=t.message;return Object(Z.a)({},e,{messages:[].concat(Object(v.a)(e.messages),[{nickname:r,color:c,message:a}])})})),Object(K.a)(Ot,zt,(function(e){return e})),Object(K.a)(Ot,Mt,(function(e){return e})),Object(K.a)(Ot,"chat/INITIALIZE_TEXTFIELD",(function(e){return Object(Z.a)({},e,{text:""})})),Object(K.a)(Ot,"chat/CHANGE_TEXTFIELD",(function(e,n){var t=n.payload;return Object(Z.a)({},e,{text:t})})),Ot),{socket:null,messages:[],text:""}),Bt=t(44);function Ft(){var e=Object(i.a)(["\n        background: rgb(247,246,245);\n\n        &:after {\n            content: '';\n            position: absolute;\n            left: 0;\n            top: 50%;\n            width: 0;\n            height: 0;\n            border: 8px solid transparent;\n            border-top: 0;\n            margin-top: -5px;\n            border-right-color: rgb(247,246,245);\n            border-left: 0;\n            margin-left: -8px;\n        }\n    "]);return Ft=function(){return e},e}function Gt(){var e=Object(i.a)(["\n    position: relative;\n    background: #ffff80;\n    padding: 5px;\n\n    &:after {\n        content: '';\n        position: absolute;\n        right: 0;\n        top: 50%;\n        width: 0;\n        height: 0;\n        border: 8px solid transparent;\n        border-left-color: #ffff80;\n        border-right: 0;\n        border-top: 0;\n        margin-top: -5px;\n        margin-right: -8px;\n    }\n\n    \n    ","\n"]);return Gt=function(){return e},e}function Wt(){var e=Object(i.a)(["\n        justify-content: center;\n    "]);return Wt=function(){return e},e}function Ht(){var e=Object(i.a)(["\n        justify-content: flex-start;\n    "]);return Ht=function(){return e},e}function qt(){var e=Object(i.a)(["\n        justify-content: flex-end;\n    "]);return qt=function(){return e},e}function Xt(){var e=Object(i.a)(["\n    display: flex;\n    align-items: center;\n    width: 90%;\n    height : 36px;\n    min-height : 36px;\n    font-size : 12px;\n    background-color: white;\n\n    ",";\n\n    ",";\n\n    ",";\n"]);return Xt=function(){return e},e}function Jt(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 20%;\n    font-size: 12px;\n    background-color: rgb(247,246,245);\n    border: none;\n    cursor: pointer;\n\n    &:hover, &:focus {\n        background-color: #D3D3D3;\n    } \n"]);return Jt=function(){return e},e}function $t(){var e=Object(i.a)(["\n    outline: none;\n    border: none;\n    align-items : center;\n    color: black;\n    background-color: transparent;\n    font-size: 12px;\n    width: 80%;\n    height : 30px;\n    padding-left: 10px;\n"]);return $t=function(){return e},e}function Qt(){var e=Object(i.a)(["\n    position: absolute;\n    width: 100%;\n    display: flex;\n    background-color: white;\n    top: 365px;\n    /* box-shadow: rgba(0,0,0,0.05) 0px -2px 2px 0px, rgba(0,0,0,0.08) 0px -3px 1px -2px, rgba(0,0,0,0.04) 0px -1px 5px 0px; */\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\n"]);return Qt=function(){return e},e}function Yt(){var e=Object(i.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 360px;\n    width: 100%;\n    padding-right: 20px;\n    overflow-y: overlay;\n"]);return Yt=function(){return e},e}function er(){var e=Object(i.a)(["\n    height: 360px;\n    width: 100%;\n    overflow: hidden;\n"]);return er=function(){return e},e}function nr(){var e=Object(i.a)(["\n    position: relative;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return nr=function(){return e},e}function tr(){var e=Object(i.a)(["\n"]);return tr=function(){return e},e}var rr=b.b.form(tr()),cr=b.b.div(nr()),ar=b.b.div(er()),or=b.b.div(Yt()),ir=b.b.div(Qt()),ur=b.b.input($t()),lr=b.b.button(Jt()),br=b.b.div(Xt(),(function(e){return"my"===e.owner&&Object(b.a)(qt())}),(function(e){return"other"===e.owner&&Object(b.a)(Ht())}),(function(e){return"server"===e.owner&&Object(b.a)(Wt())})),dr=b.b.div(Gt(),(function(e){return"other"===e.owner&&Object(b.a)(Ft())})),fr=function(e){var n,t=e.owner,r=e.children;return"my"===t?n=c.a.createElement(dr,{owner:t},r):"other"===t?n=c.a.createElement(dr,{owner:t},r):"server"===t&&(n=c.a.createElement(c.a.Fragment,null,r)),c.a.createElement(c.a.Fragment,null,n)},sr=c.a.memo((function(e){var n=e.message,t=e.myName,r=Object(p.a)(e,["message","myName"]),a=n.nickname?n.nickname===t?"my":"other":"server",o="other"===a?n.nickname+" : "+n.message:n.message;return c.a.createElement(br,Object.assign({},r,{color:n.color,owner:a}),c.a.createElement(fr,{owner:a},o))})),pr=c.a.memo((function(e){var n=e.messages,t=e.onSubmit,a=e.onChange,o=e.text,i=e.tempAuth,u=Object(r.useRef)();return Object(r.useEffect)((function(){u.current.scrollTop=u.current.scrollHeight}),[n]),c.a.createElement(c.a.Fragment,null,c.a.createElement(rr,{onSubmit:t},c.a.createElement(cr,null,c.a.createElement(ar,null,c.a.createElement(or,{ref:u},n.map((function(e){return c.a.createElement(sr,{myName:i.nickname,message:e})})))),c.a.createElement(ir,null,c.a.createElement(ur,{onChange:a,value:o}),c.a.createElement(lr,{onSubmit:t},c.a.createElement(s.b.Provider,{value:{style:{width:"40%",height:"40%"}}},c.a.createElement(Bt.b,null)))))))})),mr=function(){var e=Object(l.b)(),n=Object(l.c)((function(e){var n=e.chat,t=e.auth;return{socket:n.socket,messages:n.messages,text:n.text,tempAuth:t.tempAuth}})),t=n.socket,a=n.messages,o=n.text,i=n.tempAuth,u=Object(r.useCallback)((function(n){n.preventDefault(),e(Pt({socket:t,message:o})),e(_t())}),[e,o,t]),b=Object(r.useCallback)((function(n){e(St(n.target.value))}),[e]);return c.a.createElement(pr,{messages:a,onSubmit:u,onChange:b,text:o,tempAuth:i})};function vr(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 100%;\n    width: 6%;\n    color: black;\n    opacity: 0.5;\n    font-size: 50px;\n"]);return vr=function(){return e},e}function xr(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 47%;\n    color: black;\n    font-size: 50px;\n"]);return xr=function(){return e},e}function hr(){var e=Object(i.a)(["\n        background-color: rgb(230, 153, 153);\n    "]);return hr=function(){return e},e}function Or(){var e=Object(i.a)(["\n        background-color: rgb(208, 224, 189);\n    "]);return Or=function(){return e},e}function jr(){var e=Object(i.a)(["\n    width: 50%;\n    height: 60px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    background-color: white;\n    ","\n    ","\n"]);return jr=function(){return e},e}var Er=b.b.div(jr(),(function(e){return e.color&&Object(b.a)(Or())}),(function(e){return e.time<=1e4&&Object(b.a)(hr())})),gr=b.b.div(xr()),yr=b.b.div(vr()),kr=function(e){var n="";return n+=String(Math.floor(e/10)),n+=String(Math.floor(e%10))},wr=function(e){var n=e.time,t=e.color,r=Math.floor(n/1e3),a=Math.floor(n%1e3/10);return void 0==n||null===n?c.a.createElement(Er,null):c.a.createElement(Er,{time:n,color:t?1:0},c.a.createElement(gr,null,kr(r)),c.a.createElement(yr,null,":"),c.a.createElement(gr,null,kr(a)))},Cr=function(e){var n=e.white,t=Object(l.c)((function(e){var n=e.record,t=e.game;return{whiteTime:n.whiteTime,blackTime:n.blackTime,start:t.start,order:t.order}})),r=t.whiteTime,a=t.blackTime,o=t.start,i=t.order,u=n?r:a,b=n?o&&"white"===i:o&&"black"===i;return c.a.createElement(wr,{time:u,color:b})},Ir=t(21);function Tr(){var e=Object(i.a)(["\n    font-size: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Tr=function(){return e},e}function Nr(){var e=Object(i.a)(["\n        margin-top: 30px;\n    "]);return Nr=function(){return e},e}function Ar(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 30px;\n    background-color: white;\n\n    ","\n"]);return Ar=function(){return e},e}var Lr=b.b.div(Ar(),(function(e){return e.white&&Object(b.a)(Nr())})),Sr=b.b.div(Tr()),_r=c.a.memo((function(e){var n=e.light,t=e.name,r=e.white,a={style:{height:"15px",width:"10%",color:"green",display:"flex",justifyContent:"center",alignItems:"center"}};return c.a.createElement(Lr,{white:r?1:0},n?c.a.createElement(s.b.Provider,{value:a},c.a.createElement(Ir.a,null)):c.a.createElement(s.b.Provider,{value:{style:Object(Z.a)({},a.style,{color:"black"})}},c.a.createElement(Ir.g,null)),c.a.createElement(Sr,null,t))})),Vr=function(e){var n=e.black,t=e.white,r=Object(l.c)((function(e){var n=e.game;return{blackNick:n.black,whiteNick:n.white,participant:n.participant}})),a=r.blackNick,o=r.whiteNick,i=r.participant,u=new Set(i),b=t&&u.has(o)||n&&u.has(a),d=t&&o||n&&a;return c.a.createElement(_r,{light:b,name:d,white:t})};function Ur(){var e=Object(i.a)(["\n    width: 20%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 18px;\n    background-color: rgb(247, 246, 245);\n"]);return Ur=function(){return e},e}function Dr(){var e=Object(i.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20%;\n    font-size: 18px;\n"]);return Dr=function(){return e},e}function zr(){var e=Object(i.a)(["\n    width: 80%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    &:hover {\n        background-color: rgb(209, 228, 246);\n    }\n"]);return zr=function(){return e},e}function Mr(){var e=Object(i.a)(["\n    width: 100%;\n    height: 30px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n\n    &:first-child {\n        margin-top: 30px;\n    }\n"]);return Mr=function(){return e},e}function Pr(){var e=Object(i.a)(["\n    height: 270px;\n    width: 100%;\n    overflow-y: overlay;\n    padding-right: 20px;\n"]);return Pr=function(){return e},e}function Rr(){var e=Object(i.a)(["\n    height: 270px;\n    width: 100%;\n    overflow: hidden;\n"]);return Rr=function(){return e},e}var Kr=b.b.div(Rr()),Zr=b.b.div(Pr()),Br=b.b.div(Mr()),Fr=function(e){var n=e.x,t=e.y;return String.fromCharCode(97+n)+(8-t)},Gr=b.b.div(zr()),Wr=b.b.div(Dr()),Hr=b.b.div(Ur()),qr=c.a.memo((function(e){var n=e.move,t=e.index,r=e.onClickBlock;console.dir("PieceMove"),console.dir(n);var a,o,i=yn[n.prevPiece.piece],u={color:n.prevPiece.owner,style:{width:"10%",filter:"drop-shadow(1px 1px 1px ".concat("white"===n.prevPiece.owner?"black":"white",")")}},l=c.a.createElement(s.b.Provider,{value:u},c.a.createElement(i,null)),b=c.a.createElement("div",{style:{width:"10%"}});return n.nextPiece.piece&&(a=yn[n.nextPiece.piece],o={color:n.nextPiece.owner,style:{width:"10%",filter:"drop-shadow(1px 1px 1px ".concat("white"===n.nextPiece.owner?"black":"white",")")}},b=c.a.createElement(s.b.Provider,{value:o},c.a.createElement(a,null))),c.a.createElement(Br,null,c.a.createElement(Hr,null,t+1),c.a.createElement(Gr,{onClick:r},l,c.a.createElement(Wr,null,Fr(n.prev)),c.a.createElement(s.b.Provider,{value:{style:{color:"rgb(169,169,169)"}}},c.a.createElement(Bt.a,null)),c.a.createElement(Wr,null,Fr(n.next)),b))})),Xr=c.a.memo((function(e){var n=e.pieceMove,t=e.onClickBlock,a=Object(r.useRef)();return Object(r.useEffect)((function(){a.current.scrollTop=a.current.scrollHeight}),[n]),c.a.createElement(Kr,null,c.a.createElement(Zr,{ref:a},n.map((function(e,n){return c.a.createElement(qr,{onClick:t,move:e,index:n})}))))})),Jr=function(){var e=Object(l.c)((function(e){return{pieceMove:e.record.pieceMove}})).pieceMove,n=Object(r.useCallback)((function(){}),[]);return c.a.createElement(Xr,{onClickBlock:n,pieceMove:e})};function $r(){var e=Object(i.a)(["\n        background-color: red;\n    "]);return $r=function(){return e},e}function Qr(){var e=Object(i.a)(["\n    position: absolute;\n    height: 2px;\n    background-color: green;\n    transition-duration: 1s;\n    transition-timing-function: linear;\n\n    width: ",";\n    ","\n"]);return Qr=function(){return e},e}var Yr,ec=b.b.div(Qr(),(function(e){return 100*e.time+"%"}),(function(e){return e.time<=.1&&Object(b.a)($r())})),nc=c.a.memo((function(e){var n=e.time;return c.a.createElement(ec,{time:n})})),tc=L.a.mark(pc),rc=L.a.mark(mc),cc="record/CONNECT_WEBSOCKET",ac="record/DISCONNECT_WEBSOCKET",oc=Object(B.a)(cc),ic=Object(B.a)(ac),uc=Object(B.a)("record/INITIALIZE_SOCKET",(function(e){return e})),lc=Object(B.a)("record/INITIALIZE_VALUE",(function(e){return e})),bc=Object(B.a)("record/CHANGE_VALUE",(function(e){return e})),dc=Object(B.a)("record/UPDATE_VALUE",(function(e){return e})),fc=Object(B.a)("record/CLEAR_VALUE"),sc=function(e){return function(n,t){var r=t().record,c=Object(Z.a)({},r);Object.keys(e).forEach((function(n){"object"===typeof e[n]&&(c=Object(Z.a)({},c,Object(K.a)({},n,[].concat(Object(v.a)(c[n]),[e[n]]))))})),n(dc({record:c}))}};function pc(e){var n,t,r;return L.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,t="key=".concat(n),c.next=4,Object(G.e)(Q,{url:"/record",initializeSocket:uc,initializeValue:lc,changeValue:bc,updateValue:sc,query:t});case 4:return r=c.sent,c.next=7,Object(G.g)(ac);case 7:return c.next=9,Object(G.c)(r);case 9:case"end":return c.stop()}}),tc)}function mc(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.h)(cc,pc);case 2:case"end":return e.stop()}}),rc)}var vc={socket:null,error:null,startTime:null,endTime:null,blackTime:null,whiteTime:null,blackMaxTime:null,whiteMaxTime:null,whiteRatio:0,blackRatio:0,pieceMove:[]},xc=Object(F.a)((Yr={},Object(K.a)(Yr,"record/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(Z.a)({},e,{socket:t})})),Object(K.a)(Yr,"record/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(p.a)(t,["type"]));return Object(Z.a)({},e,{},r)})),Object(K.a)(Yr,"record/CHANGE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(p.a)(t,["type"]));return Object(Z.a)({},e,{},r)})),Object(K.a)(Yr,"record/UPDATE_VALUE",(function(e,n){var t=n.payload.record;return Object(Z.a)({},t)})),Object(K.a)(Yr,"record/CLEAR_VALUE",(function(e){return vc})),Yr),vc),hc=function(e){var n=e.white,t=e.black,a=Object(l.c)((function(e){var n=e.record,t=e.game;return{whiteRatio:n.whiteRatio,blackRatio:n.blackRatio,whiteNick:t.white,blackNick:t.black,participant:t.participant}})),o=a.whiteRatio,i=a.blackRatio,u=a.whiteNick,b=a.blackNick,d=a.participant,f=Object(l.b)();Object(r.useEffect)((function(){return function(){f(fc())}}),[f]);var s=new Set(d),p=0;return(n&&s.has(u)||t&&s.has(b))&&(p=n?o:i),p=Math.min(p,1),c.a.createElement(nc,{time:p})};function Oc(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n"]);return Oc=function(){return e},e}function jc(){var e=Object(i.a)(["\n    position: absolute;\n    top: 300px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    background-color: rgb(247, 246, 245);\n    z-index: 10;\n    box-shadow: rgba(0, 0, 0, 0.14) 0px -2px 2px 0px, rgba(0, 0, 0, 0.2) 0px -3px 1px -2px, rgba(0, 0, 0, 0.12) 0px -1px 5px 0px;\n"]);return jc=function(){return e},e}var Ec=b.b.div(jc()),gc=b.b.div(Oc()),yc={style:{color:"#4d4d4d",width:"50%",height:"50%",backgroundColor:"transparent"}},kc=c.a.memo((function(){return c.a.createElement(Ec,null,c.a.createElement(gc,null,c.a.createElement(s.b.Provider,{value:yc},c.a.createElement(Ir.c,null))),c.a.createElement(gc,null,c.a.createElement(s.b.Provider,{value:yc},c.a.createElement(Ir.h,null))),c.a.createElement(gc,null,c.a.createElement(s.b.Provider,{value:yc},c.a.createElement(Ir.i,null))),c.a.createElement(gc,null,c.a.createElement(s.b.Provider,{value:yc},c.a.createElement(Ir.d,null))))})),wc=function(){return c.a.createElement(kc,null)},Cc=t(85);function Ic(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n"]);return Ic=function(){return e},e}function Tc(){var e=Object(i.a)(["\n    position: absolute;\n    top: 30px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    z-index: 10;\n    background-color: rgb(247, 246, 245);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Tc=function(){return e},e}var Nc=b.b.div(Tc()),Ac=b.b.div(Ic()),Lc={style:{color:"#4d4d4d",width:"50%",height:"50%",backgroundColor:"transparent"}},Sc=c.a.memo((function(){return c.a.createElement(Nc,null,c.a.createElement(Ac,null,c.a.createElement(s.b.Provider,{value:{style:Object(Z.a)({},Lc.style,{width:"60%",height:"60%"})}},c.a.createElement(Ir.b,null))),c.a.createElement(Ac,null,c.a.createElement(s.b.Provider,{value:{style:Object(Z.a)({},Lc.style,{width:"80%",height:"80%"})}},c.a.createElement(Cc.a,null))),c.a.createElement(Ac,null,c.a.createElement(s.b.Provider,{value:Lc},c.a.createElement(Ir.f,null))),c.a.createElement(Ac,null,c.a.createElement(s.b.Provider,{value:Lc},c.a.createElement(Ir.e,null))))})),_c=function(){return c.a.createElement(Sc,null)};function Vc(){var e=Object(i.a)(["\n    position: relative;\n    width: 100%;\n    height: 360px;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Vc=function(){return e},e}var Uc=b.b.div(Vc()),Dc=c.a.memo((function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Cr,{black:!0}),c.a.createElement(Uc,null,c.a.createElement(hc,{black:!0}),c.a.createElement(Vr,{black:!0}),c.a.createElement(_c,null),c.a.createElement(Jr,null),c.a.createElement(wc,null),c.a.createElement(Vr,{white:!0}),c.a.createElement(hc,{white:!0})),c.a.createElement(Cr,{white:!0}))})),zc=function(){return c.a.createElement(Dc,null)};function Mc(){var e=Object(i.a)(["\n    ","\n    margin-left: 1%;\n"]);return Mc=function(){return e},e}function Pc(){var e=Object(i.a)(["\n    ","\n    margin-right: 1%;\n"]);return Pc=function(){return e},e}function Rc(){var e=Object(i.a)(["\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n"]);return Rc=function(){return e},e}function Kc(){var e=Object(i.a)(["\n    height: 800px;\n    width: 100%;\n    background-color: rgb(237, 235, 233);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Kc=function(){return e},e}var Zc,Bc=b.b.div(Kc()),Fc=Object(b.a)(Rc()),Gc=b.b.div(Pc(),Fc),Wc=b.b.div(Mc(),Fc),Hc=c.a.memo((function(e){return c.a.createElement(Bc,null,c.a.createElement(Gc,null,c.a.createElement(mr,null)),c.a.createElement(gt,e),c.a.createElement(Wc,null,c.a.createElement(zc,null)))})),qc=L.a.mark(ta),Xc=L.a.mark(ra),Jc="game/CONNECT_WEBSOCKET",$c="game/DISCONNECT_WEBSOCKET",Qc=Object(B.a)(Jc),Yc=Object(B.a)($c),ea=Object(B.a)("game/INITIALIZE_SOCKET",(function(e){return e})),na=Object(B.a)("game/INITIALIZE_VALUE",(function(e){return e}));function ta(e){var n,t,r;return L.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,t="key=".concat(n),c.next=4,Object(G.e)(Q,{url:"/game",initializeSocket:ea,initializeValue:na,query:t});case 4:return r=c.sent,c.next=7,Object(G.g)($c);case 7:return c.next=9,Object(G.c)(r);case 9:case"end":return c.stop()}}),qc)}function ra(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.h)(Jc,ta);case 2:case"end":return e.stop()}}),Xc)}var ca=Object(F.a)((Zc={},Object(K.a)(Zc,"game/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(Z.a)({},e,{socket:t})})),Object(K.a)(Zc,"game/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(p.a)(t,["type"]));return Object(Z.a)({},e,{},r)})),Zc),{socket:null,error:null,participant:[]}),aa=function(e){var n=e.gameId,t=Object(l.b)();Object(r.useEffect)((function(){return function(){t(cn()),t(Yc()),t(Tt()),t(tt()),t(ic())}}),[t]);var a=Qe((function(){return L.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.awrap(t(sn()));case 2:return t(cn()),t(Yc()),t(Tt()),t(tt()),t(ic()),setTimeout((function(){t(rn(n)),t(Qc(n)),t(It(n)),t(nt(n)),t(oc(n))}),0),e.abrupt("return",!0);case 9:case"end":return e.stop()}}))}),[t,n]),o=Object(u.a)(a,1)[0],i=o.loading,b=o.data,d=o.error;return i?null:d?null:b?c.a.createElement(Hc,null):null},oa=Object(m.f)((function(e){var n=e.history,t=e.match;if(Object(r.useEffect)((function(){t.params.id||n.push("/")}),[n,t]),!t.params.id)return null;var a=t.params.id;return a?c.a.createElement(c.a.Fragment,null,c.a.createElement(Xe,null),c.a.createElement(aa,{gameId:a})):null})),ia=function(){return c.a.createElement(zc,null)};function ua(){var e=Object(i.a)(["\n    width: 100%;\n    height: 100px;\n"]);return ua=function(){return e},e}var la=b.b.tr(ua()),ba=function(e){var n=e.title,t=e.count,r=e.comments,a=e.time;return c.a.createElement(la,null,c.a.createElement("td",null,n),c.a.createElement("td",null,t),c.a.createElement("td",null,r),c.a.createElement("td",null,a))};function da(){var e=Object(i.a)(["\n    width: 100%;\n    background-color: #F1F1F1;\n"]);return da=function(){return e},e}function fa(){var e=Object(i.a)(["\n    width: 100%;\n    height: 700px;\n    background-color: white;\n"]);return fa=function(){return e},e}function sa(){var e=Object(i.a)(["\n    width: 100%;\n    height: 50px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return sa=function(){return e},e}function pa(){var e=Object(i.a)(["\n    width: 100%;\n    height: 150px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin: 0px 0px 0px 0px;\n"]);return pa=function(){return e},e}function ma(){var e=Object(i.a)(["\n    width: 80%;\n    height: 1000px;\n    background-color:lightblue;\n    display: flex;\n    flex-direction: column;\n"]);return ma=function(){return e},e}function va(){var e=Object(i.a)(["\n    width: 100%;\n    height: 1000px;\n    background-color:#EDEBE9;\n    display: flex;\n    justify-content: center;\n    /* flex-direction: column; */\n"]);return va=function(){return e},e}var xa=b.b.div(va()),ha=b.b.main(ma()),Oa=b.b.h1(pa()),ja=b.b.div(sa()),Ea=b.b.table(fa()),ga=b.b.thead(da()),ya=function(){return c.a.createElement(xa,null,c.a.createElement(ha,null,c.a.createElement(Oa,null,"General Chess Discussion"),c.a.createElement(ja,null,"< 1 2 3 4 ... >"),c.a.createElement(Ea,null,c.a.createElement(ga,null,c.a.createElement("tr",{height:"60px"},c.a.createElement("th",{width:"70%"}),c.a.createElement("th",null,"\uc870\ud68c"),c.a.createElement("th",null,"\ub2f5\uae00"),c.a.createElement("th",null,"\ucd5c\uadfc \uae00"))),[{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5441",count:250,comments:7,time:"1\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5442",count:251,comments:8,time:"2\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5443",count:252,comments:9,time:"3\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5444",count:253,comments:10,time:"4\uc2dc\uac04 \uc804"}].map((function(e){return c.a.createElement(ba,{title:e.title,count:e.count,comments:e.comments,time:e.time})}))),c.a.createElement(ja,null,"< 1 2 3 4 ... >")))},ka=function(){return c.a.createElement(ya,null)},wa=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Xe,null),c.a.createElement(ka,null))};function Ca(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 200px;\n  font-size: 50px;\n"]);return Ca=function(){return e},e}var Ia=b.b.div(Ca()),Ta=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.c,null,c.a.createElement(m.a,{component:En,path:"/",exact:!0}),c.a.createElement(m.a,{component:oa,path:"/game/:id",exact:!0}),c.a.createElement(m.a,{component:ia,path:"/record",exact:!0}),c.a.createElement(m.a,{component:wa,path:"/community",exact:!0}),c.a.createElement(m.a,{render:function(e){e.location;return c.a.createElement(Ia,null,c.a.createElement("h1",null,"404 Error"),c.a.createElement("p",null,"\uc694\uccad\ud55c \ud398\uc774\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Na=t(24),Aa=t(86),La=L.a.mark(Sa);function Sa(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.a)([Oe(),mn(),ra(),ht(),Kt(),mc()]);case 2:case"end":return e.stop()}}),La)}var _a=Object(Na.combineReducers)({room:je,auth:vn,game:ca,canvas:Et,chat:Zt,record:xc}),Va=t(87),Ua=Object(W.a)(),Da=Object(Na.createStore)(_a,Object(Va.composeWithDevTools)(Object(Na.applyMiddleware)(Aa.a,Ua)));Ua.run(Sa),o.a.render(c.a.createElement(l.a,{store:Da},c.a.createElement(d.a,null,c.a.createElement(Ta,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,n,t){e.exports=t(150)},95:function(e,n,t){}},[[90,1,2]]]);
//# sourceMappingURL=main.7f646b0c.chunk.js.map