{"version":3,"sources":["static/image/ranking.svg","static/image/spinner.svg","components/common/Header.js","lib/websocket/websocket.js","lib/createRequestThunk.js","lib/storage/storage.js","modules/sessionAuth.js","lib/api/auth.js","containers/common/HeaderContainer.js","lib/hook/useAsync.js","components/main/List.js","containers/main/ListContainer.js","components/main/Ranking.js","containers/main/RankingContainer.js","lib/base/pieceConverter.js","components/gameplay/Canvas.js","containers/main/BillBoardCanvasWrapperContainer.js","components/main/BillBoard.js","containers/main/BillBoardContainer.js","components/main/MainLayout.js","modules/ranking.js","lib/base/genBoard.js","modules/billBoard.js","containers/main/MainLayoutContainer.js","components/common/Footer.js","containers/common/FooterContainer.js","pages/MainPage.js","components/auth/AuthForm.js","containers/auth/LoginContainer.js","pages/LoginPage.js","containers/auth/RegisterContainer.js","pages/RegisterPage.js","lib/base/board.js","lib/base/rules.js","lib/base/validation.js","modules/record.js","lib/api/record.js","modules/canvas.js","lib/api/canvas.js","containers/gameplay/CanvasContainer.js","components/game/CanvasWrapper.js","containers/game/CanvasWrapperContainer.js","components/game/GridBox.js","containers/game/GridBoxContainer.js","components/game/GridLayout.js","containers/game/GridLayoutContainer.js","components/game/Summary.js","containers/game/SummaryContainer.js","containers/HOC/CheckOutsideOfComponent.js","components/game/Selection.js","modules/create.js","containers/game/SelectionContainer.js","components/game/Slider.js","containers/game/SliderContainer.js","components/game/Icon.js","containers/game/IconContainer.js","components/game/Creation.js","modules/games.js","lib/api/games.js","containers/game/CreationContainer.js","components/game/GameLayout.js","containers/game/GameLayoutContainer.js","pages/GamePage.js","modules/chat.js","lib/api/chat.js","components/gameplay/Chat.js","containers/gameplay/ChatContainer.js","components/gameplay/Timer.js","containers/gameplay/TimerContainer.js","components/gameplay/Status.js","containers/gameplay/StatusContainer.js","components/gameplay/PieceMoveList.js","containers/gameplay/PieceMoveListContainer.js","components/gameplay/TimeLine.js","containers/gameplay/TimeLineContainer.js","components/gameplay/UndoRedo.js","containers/gameplay/UndoRedoContainer.js","components/gameplay/ToolTip.js","containers/gameplay/ToolTipContainer.js","components/gameplay/Util.js","containers/gameplay/UtilContainer.js","components/gameplay/Record.js","containers/gameplay/RecordContainer.js","components/gameplay/GamePlayLayout.js","modules/socketAuth.js","modules/game.js","containers/gameplay/GamePlayLayoutContainer.js","pages/GamePlayPage.js","components/community/Pagination.js","modules/community.js","lib/api/community.js","containers/community/PaginationContainer.js","components/community/List.js","containers/community/ListContainer.js","components/community/Write.js","containers/community/WriteContainer.js","components/community/Post.js","containers/community/PostContainer.js","components/community/CommunityLayout.js","containers/community/CommunityLayoutContainer.js","pages/CommunityPage.js","App.js","modules/index.js","serviceWorker.js","components/common/FixSize.js","index.js"],"names":["module","exports","HeaderBlock","styled","div","titleStyle","css","TitleBlock","Link","TitleFadeBlock","ControllBlock","GroupBlock","TabBlock","TabLinkBlock","props","hidden","Tab","to","children","AuthBlock","UserWelcomeBlock","React","memo","username","onRecord","onLogout","onLogin","tempAuth","auth","nickname","onClick","createEventChannel","connectNamespace","io","eventChannel","emit","on","socket","type","id","console","dir","message","close","params","url","query","initializeSocket","initializeValue","changeValue","updateValue","clearValue","notifyRequest","SocketIo","secure","call","channel","take","put","cancelled","createRequestActionTypes","createRequestThunk","request","SUCCESS","FAILURE","dispatch","a","response","payload","data","error","setLocalStorage","rest","Object","keys","forEach","key","localStorage","setItem","JSON","stringify","e","getLocalStorage","parse","getItem","removeLocalStorage","removeItem","clearLocalStorage","clear","connectWebsocketSaga","sessionAuthSaga","connectWebsocket","createAction","disconnectWebsocket","SET_SESSION","SET_SESSION_SUCCESS","SET_SESSION_FAILURE","setSessionThunk","axios","get","LOGIN","LOGIN_SUCCESS","LOGIN_FAILURE","REGISTER","REGISTER_SUCCESS","REGISTER_FAILURE","LOGOUT","LOGOUT_SUCCESS","LOGOUT_FAILURE","CHECK","CHECK_SUCCESS","CHECK_FAILURE","loginThunk","password","post","registerThunk","logoutThunk","checkThunk","changeField","clearField","clearSpecificField","fork","socketTask","cancel","takeEvery","initialState","authError","login","register","passwordConfirm","handleActions","state","form","value","produce","draft","withRouter","history","useSelector","sessionAuth","useDispatch","useCallback","getState","alert","push","useEffect","reducer","action","loading","Error","useAsync","callback","deps","useReducer","fetchData","ListBlock","ListCellBlock","index","TextBlock","elo","mail","header","ListCell","cell","ratio","win","lose","BorderBlock","HeaderCell","HeaderCellBlock","list","listArr","map","borderArr","leng","reduce","acc","cur","i","ListContainer","RankingBlock","BackgroundBlock","img","rank","src","RankImage","RankingContainer","ranking","useState","setRank","prevState","stable","revisedState","filter","internalCell","findIndex","externalCell","init","newlyPushed","sort","b","length","setTimeout","copiedRanking","splice","pieceMapper","GiChessPawn","GiChessKing","GiChessQueen","GiChessBishop","GiChessKnight","GiChessRook","GiPlainCircle","playerMapper","color","style","width","height","pieceConverter","piece","owner","covered","cellNum","coveredCanvas","Component","Provider","capturedObject","opacity","styleObject","CanvasBlock","replayMode","CanvasRowBlock","CanvasCellBlock","cellSize","clicked","tracked","CanvasRow","row","y","onClickCell","x","CanvasCell","bind","prevProps","nextProps","CanvasContentBlock","blocked","CanvasContent","board","ReplayBlock","onContextMenu","billBoard","BillBoardCanvasWrapperContainer","roomKey","boards","preventDefault","BillBoardFrameBlock","BillBoardBlock","InformFrameBlock","PlayerBlock","BillBoard","inform","player","split","BillBoardContainer","informs","MainLayoutBlock","sideBlockStyle","LeftSideBlock","RightSideBlock","rankingSaga","genBoard","prev","next","tempBoard","_","cloneDeep","pieceStore","dirty","genClearBoard","arr","j","pass","param","popedCell","newCell","billBoardSaga","changeValueThunk","move","clearBoard","revisedBoards","slice","MainLayoutContainer","connection","disconnectRankingWebsocket","disconnectBillBoardWebsocket","Promise","resolve","then","connectRankingWebsocket","connectBillBoardWebsocket","clearRankingValue","clearBillBoardValue","FooterBlock","Footer","FooterContainer","MainPage","AuthFrameBlock","AuthFormBlock","InputFrameBlock","InputFormBlock","blink","inputStyle","EmailInputBlock","input","PasswordInputBlock","OptionFormBlock","SaveInputFormBlock","SaveInputBlock","SaveInputTextBlock","ForgetBlock","SubmitFrameBlock","SubmitBlock","button","CreateFormBlock","CreateBlock","CreateButtonBlock","ErrorBlock","onSubmit","onChange","onRegister","ref","useRef","tag","current","focus","autoComplete","autoCorrect","autoCapitalize","spellCheck","count","cursor","name","placeholder","el","setError","target","nextError","schema","Joi","object","string","max","email","minDomainAtoms","required","min","result","validate","abortEarly","details","detail","path","errorMention","LoginPage","any","valid","RegisterPage","rules","pawn","dy","dx","except","knight","king","enemy","coveredAxisBundle","checkPlayersEveryMove","axis","bishop","rook","queen","deduplicate","axisArr","axisSet","Set","add","parseInt","castling","coveredAxis","checkCovered","checkSafeMove","clonedBoard","playerKing","findKingLocation","movable","flatMap","counter","coveredArr","recordSaga","changeReverse","clearToolTip","setRequestModal","setRequestMessage","setBanClick","setShowIndex","ASKING","ASKING_SUCCESS","ASKING_FAILURE","ANSWERING","ANSWERING_SUCCESS","ANSWERING_FAILURE","askingThunk","answeringThunk","notifyRequestThunk","genre","modal","open","updateValueThunk","record","newRecord","startTime","endTime","blackTime","whiteTime","blackMaxTime","whiteMaxTime","whiteRatio","blackRatio","pieceMove","reversed","banClick","showIndex","undo","draw","surrender","canvasSaga","initializeBlocked","changeBlocked","SET_MOVE_PIECE","SET_MOVE_PIECE_SUCCESS","SET_MOVE_PIECE_FAILURE","setMovePieceThunk","updateReverseBoard","prevReverseBoard","nextOriginBoard","nextReverseBoard","reverseBoard","reverse","makeReverseBoard","nextPiece","prevPiece","every","replayValueThunk","diff","canvas","role","socketAuth","turn","game","nextBoard","prevIndex","nextIndex","beforeIndex","beforePiece","afterIndex","afterPiece","prevY","prevX","nextY","nextX","genReplayBoard","CanvasContainer","glanceAt","setInit","cy","cx","reversal","clickPieceThunk","servedBoard","defaultBoard","CanvasWrapperBlock","UnClickableBlock","CanvasWrapperContainer","gameKey","GridBoxBlock","BoxTitleBlock","BoxContentBlock","onMouseEnter","onMouseLeave","participant","setCanvas","gameId","GridRowBlock","GridLayoutFrameBlock","GridLayoutHiddenBlock","GridLayoutBlock","games","onGameClick","gridArr","rowSize","Math","floor","position","top","left","zIndex","GridLayoutContainer","SummaryBlock","SummaryContainer","CheckOutsideOfComponent","componentState","setComponentState","checkClickOutside","contains","document","addEventListener","removeEventListener","SelectionFrameBlock","NameBlock","SelectionBlock","SelecitonToolTipFrameBlock","SelectionToolTipBlock","kind","reference","onClickSelection","onClickOption","optionName","mapList","mode","modeList","defaultTime","extraTime","config","step","SelecitonContainer","create","SliderFrameBlock","SliderBoxBlock","SliderBlock","ValueBlock","substring","SliderContainer","IconBlock","checked","styleObj","IconContainer","white","black","CreationBlock","SelectionBundleBlock","SliderBundleBlock","IconBundleBlock","ConfirmFrameBlock","ConfirmBlock","SelectionContainer","gamesSaga","CREATE_GAME","CREATE_GAME_SUCCESS","CREATE_GAME_FAILURE","createGameThunk","GameLayoutBlock","GameLayoutContainer","GamePage","chatSaga","changeTextfield","initializeTextfield","SEND_MESSAGE","SEND_MESSAGE_SUCCESS","SEND_MESSAGE_FAILURE","sendMessageThunk","messages","text","ChatSubmitBlock","ChatFrameBlock","ChatHiddenBlock","ChatBlock","ChatFormBlock","ChatInputBlock","ChatButtonBlock","MessageBlock","BalloonBlock","Balloon","ballonBlock","Message","myName","scrollTop","scrollHeight","ChatContainer","chat","TimerBlock","time","TimeSliceBlock","ColonBlock","timeConverter","timeSlice","convertedTime","String","Timer","minute","second","undefined","TimerContainer","start","order","StatusBlock","beneath","light","iconStyle","display","justifyContent","alignItems","StatusContainer","blackNick","whiteNick","participantSet","has","PieceMoveListHiddenBlock","PieceMoveListBlock","PieceMoveBlock","moveConverter","fromCharCode","MoveBlock","IndexBlock","PieceMove","NextComponent","nextStyle","PrevComponent","prevStyle","listRef","PieceMoveListContainer","TimeLineBlock","TimeLineContainer","setTime","nextTime","UndoRedoBlock","ButtonBlock","buttonStyle","backgroundColor","onStepUndo","onStepRedo","onFastUndo","onFastRedo","UndoRedoContainer","ToolTipBlock","SpinnerFrameBlock","SpinnerBlock","restrict","race","ToolTip","content","Spinner","ToolTipContainer","suggestion","setRace","setRestrict","UtilBlock","onReverse","UtilContainer","RecordBlock","RecordContainer","GamePlayLayoutBlock","socketAuthSaga","gameSaga","GamePlayLayoutContainer","disconnectGameWebsocket","disconnectAuthWebsocket","disconnectChatWebsocket","disconnectCanvasWebsocket","disconnectRecordWebsocket","tabKey","uuid","connectGameWebsocket","connectAuthWebsocket","connectChatWebsocket","connectCanvasWebsocket","connectRecordWebsocket","clearAuthValue","clearGameValue","match","PaginationBlock","page","size","onForwardClick","onBackwardClick","firstBlock","lastBlock","buttons","disabled","CREATE_POST","CREATE_POST_SUCCESS","CREATE_POST_FAILURE","LIST_POST","LIST_POST_SUCCESS","LIST_POST_FAILURE","READ_POST","READ_POST_SUCCESS","READ_POST_FAILURE","DELETE_POST","DELETE_POST_SUCCESS","DELETE_POST_FAILURE","UPDATE_POST","UPDATE_POST_SUCCESS","UPDATE_POST_FAILURE","clearAll","setMenu","setStatus","setForm","clearForm","clearFormAll","createPostThunk","listPostThunk","queryString","qs","readPostThunk","deletePostThunk","delete","updatePostThunk","patch","status","menu","posts","write","modify","title","PaginationContainer","community","pageNum","PostNoticeBlock","PostWrapper","PostCompressionBlock","NumberBlock","EllipsisBlock","CommentCounter","UserBlock","DateBlock","PaginationFrameBlock","PostCompression","createdAt","Date","date","getFullYear","getMonth","getDate","_id","num","user","criteria","find","QuillFrameBlock","QuillWrapperBlock","WriteBlock","TitleInputBlock","holding","quillElement","onChangeTitle","onCancel","WriteLayoutContainer","quillInstance","mounted","setHolding","Quill","theme","modules","toolbar","quill","delta","oldDelta","source","root","innerHTML","PostBlock","PostTitleFrameBlock","PostTitleBlock","PostAuthFrameBlock","PostAuthBlock","PostDateBlock","PostContentBlock","onUpdate","onDelete","dangerouslySetInnerHTML","__html","PostContainer","CommunityLayoutFrameBlock","CommunityLayoutBlock","SubTitleBlock","MovingUnderline","checkedIndex","ContentBlock","WriteEventBlock","BackEventBlock","BackBlock","onCreatePost","onGoBack","WriteContainer","CommunityLayoutContainer","revisedMenu","setMenuThunk","CommunityPage","ErrorPageDiv","App","component","exact","GamePlayPage","render","location","rootSaga","all","rootReducer","combineReducers","Boolean","window","hostname","FixSizeBlock","FixSize","sagaMiddleware","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","ReduxThunk","run","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"2GAAAA,EAAOC,QAAU,IAA0B,qC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,u+ECI3C,IAAMC,EAAcC,IAAOC,IAAV,KAQXC,EAAaC,YAAH,KAaVC,EAAaJ,YAAOK,IAAPL,CAAH,IACVE,GAIAI,EAAiBN,YAAOK,IAAPL,CAAH,IACdE,GAIAK,EAAgBP,IAAOC,IAAV,KAMbO,EAAaR,IAAOC,IAAV,KAKVQ,EAAWT,IAAOC,IAAV,KAYRS,EAAeV,YAAOK,IAAPL,CAAH,KAYZ,SAAAW,GAAK,OAAIA,EAAMC,QAAUT,YAAhB,QAMTU,EAAM,SAAAF,GACR,OAAGA,EAAMG,GAED,kBAACJ,EAAiBC,EACbA,EAAMI,UAKX,kBAACN,EAAaE,EACTA,EAAMI,WAMjBC,EAAYhB,IAAOC,IAAV,KAMTgB,EAAmBjB,IAAOC,IAAV,KAuFPiB,MAAMC,MA3EN,SAAC,GAMT,IACCC,EANJC,EAKE,EALFA,SACAC,EAIE,EAJFA,SACAC,EAGE,EAHFA,QACAC,EAEE,EAFFA,SACAC,EACE,EADFA,KAYA,OARGD,IACCJ,EAAWI,EAASE,UAGrBD,IACCL,EAAWK,EAAKL,UAIhB,oCACI,kBAACrB,EAAD,KACI,kBAACQ,EAAD,KACI,kBAACH,EAAD,CAAYU,GAAG,KAAf,YAGA,kBAACR,EAAD,CAAgBQ,GAAG,KAAnB,QAGA,kBAACN,EAAD,KACI,kBAAC,EAAD,CAAKM,GAAG,SAAR,QAGA,kBAAC,EAAD,CAAKA,GAAG,cAAR,eAKR,kBAACE,EAAD,KACI,kBAAC,EAAD,CAAKW,QAASN,GAAd,UAGCI,EACG,oCACI,kBAAC,EAAD,CAAKE,QAASN,GAAd,WAGA,kBAAC,EAAD,CAAKM,QAASN,GAAd,UAGA,kBAAC,EAAD,CAAKM,QAASL,GAAd,SAEI,kBAACL,EAAD,KACKG,KAKb,kBAAC,EAAD,CAAKO,QAASJ,GAAd,QAEI,kBAACN,EAAD,KACKG,U,oFCpKvBQ,I,WAwBOC,IAxBjB,SAAUD,GAAmBE,GAA7B,0FACWC,aAAa,SAAAC,GAiBhB,OAhBAF,EAAGG,GAAG,WAAW,SAAAC,GACbF,EAAK,CACDG,KAAM,SACND,OAAQJ,EAAGM,QAKnBN,EAAGG,GAAG,aAAa,WACfI,QAAQC,IAAR,yBAGJR,EAAGG,GAAG,WAAW,SAAAM,GACbP,EAAKO,MAGF,WACHT,EAAGU,aAnBf,uCAwBO,SAAUX,GAAiBY,GAA3B,2FAqBW,OAjBVC,EAQAD,EARAC,IACAC,EAOAF,EAPAE,MACAC,EAMAH,EANAG,iBACAC,EAKAJ,EALAI,gBACAC,EAIAL,EAJAK,YACAC,EAGAN,EAHAM,YACAC,EAEAP,EAFAO,WACAC,EACAR,EADAQ,cAXD,SAeOnB,EAAKoB,IAASR,EAAK,CACrBC,QAEAQ,QAAQ,IAlBb,SAqBiBC,YAAKxB,GAAoBE,GArB1C,OAqBCuB,EArBD,cAwBqB,OAxBrB,SAwB2BC,YAAKD,GAxBhC,OAwBWd,EAxBX,YAyBYA,EAAQJ,KAzBpB,OA0Bc,WA1Bd,QA+Bc,eA/Bd,QAkCc,WAlCd,QAqCc,WArCd,QAwCc,UAxCd,QA2Cc,WA3Cd,6BA2BgBS,EA3BhB,iBA4BiB,OA5BjB,UA4BuBW,YAAIX,EAAiBL,IA5B5C,4CAgCa,OAhCb,UAgCmBgB,YAAIV,EAAgBN,IAhCvC,4CAmCa,OAnCb,UAmCmBgB,YAAIT,EAAYP,IAnCnC,4CAsCa,OAtCb,UAsCmBgB,YAAIR,EAAYR,IAtCnC,4CAyCa,OAzCb,UAyCmBgB,YAAIP,EAAWT,IAzClC,4CA4Ca,OA5Cb,UA4CmBgB,YAAIN,EAAcV,IA5CrC,4CA+CaF,QAAQC,IAAIC,GA/CzB,iFAmDCF,QAAQC,IAAR,MAnDD,QAqDK,OArDL,oBAqDWkB,cArDX,oCAsDKH,EAAQb,QAtDb,wF,cC7BMiB,GAA2B,SAAAtB,GAGpC,MAAO,CAAEA,EAFI,UAAMA,EAAN,YACA,UAAMA,EAAN,cAIF,SAASuB,GAAoBvB,EAAMwB,GAC9C,IAAMC,EAAO,UAAMzB,EAAN,YACP0B,EAAO,UAAM1B,EAAN,YACb,OAAO,SAAAM,GAAM,8CAAI,WAAMqB,GAAN,eAAAC,EAAA,+EAEcJ,EAAQlB,GAFtB,cAEHuB,EAFG,OAGTF,EAAS,CACL3B,KAAMyB,EACNK,QAASD,EAASE,OALb,kBAOFF,EAASE,MAPP,sCAST7B,QAAQC,IAAR,MACAwB,EAAS,CACL3B,KAAM0B,EACNI,QAAQ,EAAD,GACPE,OAAO,IAbF,8DAAJ,uD,2BCTJC,GAAkB,SAAC,GAAiB,IAAZC,EAAW,oBAC5C,IACIC,OAAOC,KAAKF,GAAMG,SAAQ,SAAAC,GACtBC,aAAaC,QAAQF,EAAKG,KAAKC,UAAUR,EAAKI,QAEpD,MAAMK,GACJzC,QAAQC,IAAI,2BACZD,QAAQC,IAAIwC,KAIPC,GAAkB,SAAAN,GAC3B,IACI,OAAOG,KAAKI,MAAMN,aAAaO,QAAQR,IACzC,MAAMK,GACJzC,QAAQC,IAAI,2BACZD,QAAQC,IAAIwC,KAIPI,GAAqB,SAAAT,GAC9B,IACIC,aAAaS,WAAWV,GAC1B,MAAMK,GACJzC,QAAQC,IAAI,8BACZD,QAAQC,IAAIwC,KAIPM,GAAoB,WAC7B,IACIV,aAAaW,QACf,MAAMP,GACJzC,QAAQC,IAAI,6BACZD,QAAQC,IAAIwC,K,YCqCVQ,I,YAYOC,IAxEJC,GAAmBC,YAFN,iCAGbC,GAAsBD,YAFN,oCAMhB5C,GAAkB4C,YAFN,gCAEqC,SAAAxB,GAAO,OAAIA,KAC5DjB,GAAayC,YAFN,2B,GAI8ChC,GAAyB,2B,qBAAnFkC,G,MAAaC,G,MAAqBC,G,MAC7BC,GAAkBpC,GAAmBiC,IClBxB,kBACtBI,KAAMC,IAAI,2B,GDmBkCvC,GAAyB,qB,qBAAjEwC,G,MAAOC,G,MAAeC,G,SAC2B1C,GAAyB,wB,qBAA1E2C,G,MAAUC,G,MAAkBC,G,SACe7C,GAAyB,sB,qBAApE8C,G,MAAQC,G,MAAgBC,G,SACgBhD,GAAyB,qB,qBAAjEiD,G,MAAOC,G,MAAeC,G,MACjBC,GAAanD,GAAmBuC,ICrBxB,SAAC,GAAD,IAAG7E,EAAH,EAAGA,SAAU0F,EAAb,EAAaA,SAAb,OACjBf,KAAMgB,KAAK,kBAAoB,CAAE3F,WAAU0F,gBDqBlCE,GAAgBtD,GAAmB0C,IChBxB,SAAC,GAAD,IAAGhF,EAAH,EAAGA,SAAU0F,EAAb,EAAaA,SAAb,OACpBf,KAAMgB,KAAK,qBAAuB,CAAE3F,WAAU0F,gBDgBrCG,GAAcvD,GAAmB6C,ICpBxB,kBAClBR,KAAMgB,KAAK,uBDoBFG,GAAaxD,GAAmBgD,ICfxB,kBACjBX,KAAMC,IAAI,sBDmBDmB,GAAc1B,YAHN,4BAGiC,SAAAxB,GAAO,OAAIA,KACpDmD,GAAa3B,YAHN,2BAGgC,SAAAxB,GAAO,OAAIA,KAClDoD,GAAqB5B,YAHL,oCAGwC,SAAAxB,GAAO,OAAIA,KAmChF,SAAUqB,KAAV,uEAEuB,OAFvB,SAE6BgC,YAAKzF,GAAkB,CAC5Ca,IAAK,eACLG,mBACAG,gBALR,OAQI,OANMuE,EAFV,gBAQUjE,YArEmB,oCA6D7B,OASI,OATJ,SASUkE,YAAOD,GATjB,wCAYO,SAAUhC,KAAV,iEACH,OADG,SACGkC,YA3EgB,gCA2EanC,IADhC,wCAIP,IAAMoC,GAAe,CACjBlG,SAAU,KACVC,KAAM,KACNkG,UAAW,KACXC,MAAO,CACHxG,SAAU,GACV0F,SAAU,IAEde,SAAU,CACNzG,SAAU,GACV0F,SAAU,GACVgB,gBAAiB,KAIVC,gBAAa,qBAxFH,gCAyFD,SAACC,EAAD,WAAU/D,QAAoBI,GAA9B,EAAqBlC,KAArB,+CACb6F,EADa,CAEhBvG,KAAK,eAAM4C,QAHS,eAvFR,2BA4FD,SAAA2D,GAAK,sBACbN,GADa,CAEhBlG,SAAUwG,EAAMxG,cAPI,eASvBoE,IAAsB,SAACoC,EAAD,OAAmBxG,EAAnB,EAAUyC,QAAV,sBAChB+D,EADgB,CAEnBxG,gBAXoB,eAavBqE,IAAsB,SAACmC,EAAD,OAAmB7D,EAAnB,EAAUF,QAAV,sBAChB+D,EADgB,CAEnBxG,SAAU,KACV2C,aAhBoB,eAvEP,4BAyFD,SAAC6D,EAAD,WAAU/D,QAAWgE,EAArB,EAAqBA,KAAMxD,EAA3B,EAA2BA,IAAKyD,EAAhC,EAAgCA,MAAhC,OACZC,aAAQH,GAAO,SAAAI,GACXA,EAAMH,GAAMxD,GAAOyD,QApBH,eAtER,2BA4FD,SAACF,EAAD,SAAqBC,EAArB,EAAUhE,QAAWgE,KAArB,sBACRD,GADQ,mBAEVC,EAAOP,GAAaO,IAFV,0BAGAP,GAAaC,WAHb,OAtBS,eArEC,oCAgGD,SAACK,EAAD,aAAU/D,QAAWgE,EAArB,EAAqBA,KAAMxD,EAA3B,EAA2BA,IAA3B,sBACjBuD,GADiB,mBAEnBC,EAFmB,eAGbD,EAAMC,GAHO,eAIfxD,EAAMiD,GAAaO,GAAMxD,MAJV,0BAMTiD,GAAaC,WANJ,OA3BA,eAmCvBzB,IAAgB,SAAC8B,EAAD,OAAmBvG,EAAnB,EAAUwC,QAAV,sBACV+D,EADU,CAEbvG,OACAkG,UAAW,UAtCS,eAwCvBxB,IAAgB,SAAC6B,EAAD,OAAmBL,EAAnB,EAAU1D,QAAV,sBACV+D,EADU,CAEbvG,KAAM,KACNkG,iBA3CoB,eA6CvBtB,IAAmB,SAAC2B,EAAD,OAAmBvG,EAAnB,EAAUwC,QAAV,sBACb+D,EADa,CAEhBvG,OACAkG,UAAW,UAhDS,eAkDvBrB,IAAmB,SAAC0B,EAAD,OAAmBL,EAAnB,EAAU1D,QAAV,sBACb+D,EADa,CAEhBvG,KAAM,KACNkG,iBArDoB,eAuDvBnB,IAAiB,SAAAwB,GAAK,sBAChBA,EADgB,CAEnBvG,KAAM,KACNkG,UAAW,UA1DS,eA4DvBlB,IAAiB,SAAEuB,EAAF,OAAoBL,EAApB,EAAW1D,QAAX,sBACX+D,EADW,CAEdvG,KAAM,KACNkG,iBA/DoB,eAiEvBhB,IAAgB,SAAEqB,EAAF,OAAoBvG,EAApB,EAAWwC,QAAX,sBACV+D,EADU,CAEbvG,OACAkG,UAAW,UApES,eAsEvBf,IAAgB,SAAEoB,EAAF,OAAoBL,EAApB,EAAW1D,QAAX,sBACV+D,EADU,CAEbvG,KAAM,KACNkG,iBAzEoB,IA2EzBD,IEjIYW,gBAzCS,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACVC,aAAY,gBAAGC,EAAH,EAAGA,YAAH,MAAsB,CACzDhH,SAAUgH,EAAYhH,SACtBC,KAAM+G,EAAY/G,SAFdD,EAD6B,EAC7BA,SAAUC,EADmB,EACnBA,KAIZqC,EAAW2E,cAEXnH,EAAWoH,uBAAY,WACzB5E,EF+C0B,uCAAM,WAAOA,EAAU6E,GAAjB,SAAA5E,EAAA,+EAE1BD,EAASmD,MAFiB,OAGhC/B,GAAmB,QAHa,+CAKhC7C,QAAQC,IAAI,iBALoB,wDAAN,2DE9C3B,CAACwB,IAEEzC,EAAWqH,uBAAY,WACzBE,MAAM,cACP,IAIGrH,EAAUmH,uBAAY,WACxB5E,EAASsD,GAAW,CAAEa,KAAM,WAC5BK,EAAQO,KAAK,YACd,CAAC/E,EAAUwE,IAUd,OAPAQ,qBAAU,WAEN,OADAhF,EAAS0B,MACF,WACH1B,EAAS4B,SAEd,CAAC5B,IAGA,kBAAC,EAAD,CACIzC,SAAUA,EACVC,SAAUA,EACVC,QAASA,EACTC,SAAUA,EACVC,KAAMA,OCzClB,SAASsH,GAAQf,EAAOgB,GACpB,OAAQA,EAAO7G,MACX,IAAK,UACD,MAAO,CACH8G,SAAS,EACT/E,KAAM,KACNC,MAAO,MAEf,IAAK,UACD,MAAO,CACH8E,SAAS,EACT/E,KAAM8E,EAAO9E,KACbC,MAAO,MAEf,IAAK,UACD,MAAO,CACH8E,SAAS,EACT/E,KAAM,KACNC,MAAO6E,EAAO7E,OAEtB,QACI,MAAM,IAAI+E,MAAM,gCA6BbC,OAzBf,SAAkBC,GAAsB,IAAZC,EAAW,uDAAJ,GAAI,EACPC,qBAAWP,GAAS,CAC5CE,SAAS,EACT/E,KAAM,KACNC,OAAO,IAJwB,mBAC3B6D,EAD2B,KACpBlE,EADoB,KAO7ByF,EAAS,uCAAG,4BAAAxF,EAAA,6DACdD,EAAS,CAAE3B,KAAM,YADH,kBAGSiH,IAHT,OAGJlF,EAHI,OAIVJ,EAAS,CAAE3B,KAAM,UAAW+B,SAJlB,gDAMVJ,EAAS,CAAE3B,KAAM,UAAWgC,MAAM,EAAD,KANvB,yDAAH,qDAef,OALA2E,qBAAU,WACNS,MAEDF,GAEI,CAACrB,EAAOuB,I,++CC9CnB,IAAMC,GAAYxJ,IAAOC,IAAV,MAQTwJ,GAAgBzJ,IAAOC,IAAV,MAOR,SAAAU,GAAK,OAAmB,GAAdA,EAAM+I,MAAa,GAAM,QASxCC,GAAY3J,IAAOC,IAAV,MAOT,SAAAU,GAAK,OAAIA,EAAMiJ,KAAOzJ,YAAb,SAIT,SAAAQ,GAAK,OAAIA,EAAMkJ,MAAQ1J,YAAd,SAKT,SAAAQ,GAAK,OAAIA,EAAMmJ,QAAU3J,YAAhB,SAMT4J,GAAW7I,IAAMC,MAAK,YAAe,IAAZ6I,EAAW,EAAXA,KAC3B,OACI,kBAACP,GAAD,CAAeC,MAAOM,EAAKN,OACvB,kBAACC,GAAD,KACKK,EAAKN,MAAQ,GAElB,kBAACC,GAAD,CAAWE,MAAI,GACVG,EAAK5I,UAEV,kBAACuI,GAAD,CAAWC,KAAG,GACTI,EAAKJ,KAEV,kBAACD,GAAD,KACKK,EAAKC,OAEV,kBAACN,GAAD,KACKK,EAAKE,KAEV,kBAACP,GAAD,KACKK,EAAKG,UAMhBC,GAAcpK,IAAOC,IAAV,MAKN,SAAAU,GAAK,OAAmB,GAAdA,EAAM+I,MAAa,EAAI,GAAM,QAI5CW,GAAanJ,IAAMC,MAAK,WAC1B,OACI,kBAACmJ,GAAD,KACI,kBAACX,GAAD,aAGA,kBAACA,GAAD,CAAWE,MAAM,EAAMC,QAAQ,GAA/B,SAGA,kBAACH,GAAD,CAAWC,KAAK,GAAhB,OAGA,kBAACD,GAAD,cAGA,kBAACA,GAAD,YAGA,kBAACA,GAAD,iBAONW,GAAkBtK,IAAOC,IAAV,MA6CNiB,OAAMC,MAnCR,SAAC,GAAc,IAAZoJ,EAAW,EAAXA,KACNC,EAAUD,GAAQA,EACnBE,KAAI,SAAAT,GAAI,OACD,kBAACD,GAAD,CACItF,IAAKuF,EAAK5I,SACV4I,KAAMA,OAKhBU,EAAY,GAClB,GAAGH,EAKC,IAJA,IAAMI,EAAOJ,EAAKK,QAAO,SAACC,EAAKC,GAC3B,OAAOD,GAAOC,EAAIpB,MAAQ,GAAK,EAAI,KACpC,GAEKqB,EAAE,EAAGA,EAAEJ,IAAQI,EACnBL,EAAU7B,KACN,kBAACuB,GAAD,CACI3F,IAAG,iBAAYsG,GACfrB,MAAOqB,KAMvB,OACI,kBAACvB,GAAD,KACI,kBAACa,GAAD,MACCG,EACAE,MCzIEM,GAPO,SAAC,GAAc,IAAZT,EAAW,EAAXA,KAErB,OACI,kBAAC,GAAD,CAAMA,KAAMA,K,glBCFpB,IAAMU,GAAejL,IAAOC,IAAV,MAYZiL,GAAkBlL,IAAOmL,IAAV,MAmBNjK,OAAMC,MATL,SAAC,GAAc,IAAZiK,EAAW,EAAXA,KACf,OACI,kBAACH,GAAD,KACI,kBAACC,GAAD,CAAiBG,IAAKC,OACtB,kBAAC,GAAD,CAAef,KAAMa,QC2ElBG,GApGU,WAAO,IACpBC,EAAYjD,aAAY,kBAAkB,CAC9CiD,QAD4B,EAAGA,QACdA,YADbA,QADmB,EAKDC,qBALC,mBAKnBL,EALmB,KAKbM,EALa,KA+F3B,OAxFA5C,qBAAU,WACH0C,GACCE,GAAQ,SAAAC,GAEJ,IAAIA,EACA,OAAOH,EACFf,KAAI,SAACe,EAAS9B,GAAV,sBACE8B,EADF,CAED9B,aAKZ,IAAMkC,EAAS,GACTC,EAAeF,EAChBG,QAAO,SAAA9B,GAAI,OAvBd,KAuBkBA,EAAKN,SACpBe,KAAI,SAAAsB,GACD,IAAMrC,EAAQ8B,EAAQQ,WAAU,SAAAC,GAAY,OAAIA,EAAa7K,WAAa2K,EAAa3K,YACvF,OAAGsI,GAAS,GACRkC,EAAO/C,KAAKa,GAET9E,KAAKC,UAAL,eAAoB2G,EAAQ9B,GAA5B,CAAoCA,YAAY9E,KAAKC,UAAUkH,GACvDA,EAEJ,eACAP,EAAQ9B,GADf,CAEIA,WAGG,eACAqC,EADP,CAEIrC,MAvCd,QA6CEwC,EAAO,EACLC,EAAc,GAuCpB,OAtCAP,EACKQ,MAAK,SAACrI,EAAGsI,GAAJ,OAAUtI,EAAIsI,KACnBzB,QAAO,SAACC,EAAKC,GACV,IAAI,IAAIC,EAAEmB,EAAMnB,EAAED,IAAOC,EACrBF,EAAIhC,KAAKkC,GAGb,OADAmB,EAAOpB,EAAM,EACND,IACR,IACFrG,SAAQ,SAAAkF,GACLmC,EAAahD,KAAb,eACO2C,EAAQ9B,GADf,CAEIA,MA3DV,MA6DMyC,EAAYtD,KAAZ,eACO2C,EAAQ9B,GADf,CAEIA,cAITkC,EAAOU,OAAS,GACfC,YAAW,WACPb,GAAQ,SAAAC,GACJ,IAAMa,EAAa,aAAQb,GAU3B,OATAQ,EAAY3H,SAAQ,SAAAyH,GAChB,IAAMvC,EAAQ8C,EAAcR,WAAU,SAAAD,GAAY,OAAIA,EAAa3K,WAAa6K,EAAa7K,YAC1FsI,GACC8C,EAAcC,OAAO/C,EAAO,EAA5B,eACOuC,OAKRO,OAEZ,GAGAX,OAGhB,CAACL,IAEJ1C,qBAAU,WACN,OAAO,WACH4C,EAAQ,SAEb,IAGC,kBAAC,GAAD,CAASN,KAAMA,K,iBCnGVsB,GAAc,CACvB,KAAQC,KACR,KAAQC,KACR,MAASC,KACT,OAAUC,KACV,OAAUC,KACV,KAAQC,KACR,QAAWC,MAGFC,GAAe,CACxB,MAAS,CACLC,MAAO,QACPC,MAAO,CACHtB,OAAO,iCACPuB,MAAO,MACPC,OAAQ,QAGhB,MAAS,CACLH,MAAO,QACPC,MAAO,CACHtB,OAAO,iCACPuB,MAAO,MACPC,OAAQ,QAGhB,SAAY,CACRF,MAAO,CACHtB,OAAO,iCACPuB,MAAO,MACPC,OAAQ,MACRH,MAAO,uBAIf,SAAY,CACRC,MAAO,CACHtB,OAAO,iCACPuB,MAAO,MACPC,OAAQ,MACRH,MAAO,uB,wlFCvCnB,IAAMI,GAAiB,SAAC,GAAwC,IAAtCC,EAAqC,EAArCA,MAAOC,EAA8B,EAA9BA,MAAOC,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,QACzCC,EAAgB,KAEpB,GAAGF,EAAS,CACR,IAAMG,EAAYnB,GAAW,QAE7BkB,EACI,kBAAC,KAAYE,SAAb,CAAsB5F,MAAOgF,GAAa,UAAD,OAAWS,KAChD,kBAAC,EAAD,OAKZ,IAAIH,IAAUC,EACV,OAAOG,EAGX,IAAMC,EAAYnB,GAAYc,GACxBO,EAAiBH,EAAgB,CACnCI,QAAS,GACTlC,OAAkB,UAAV2B,EAAA,mEACR,KAEEQ,EAAW,eACVf,GAAaO,GADH,CAEbL,MAAM,eACCF,GAAaO,GAAOL,MADtB,GAEEW,KAIX,OACI,kBAAC,KAAYD,SAAb,CAAsB5F,MAAO+F,GACzB,kBAACJ,EAAD,QAKNK,GAAclO,IAAOC,IAAV,MAKX,SAAAU,GAAK,OAAIA,EAAMwN,YAAchO,YAApB,SAKTiO,GAAiBpO,IAAOC,IAAV,MAIdoO,GAAkBrO,IAAOC,IAAV,MAQR,SAAAU,GACL,OAAGA,EAAM2N,SACE3N,EAAM2N,SAEV,UAGD,SAAA3N,GACN,OAAGA,EAAM2N,SACE3N,EAAM2N,SAEV,UAGT,SAAA3N,GAAK,OAAsB,IAAlBA,EAAMgN,SAAiBxN,YAAvB,SAIT,SAAAQ,GAAK,OAAsB,IAAlBA,EAAMgN,SAAiBxN,YAAvB,SAIT,SAAAQ,GAAK,OAAsB,IAAlBA,EAAMgN,SAAiBhN,EAAM4N,SAAWpO,YAAxC,SAIT,SAAAQ,GAAK,OAAsB,IAAlBA,EAAMgN,SAAiBhN,EAAM4N,SAAWpO,YAAxC,SAIT,SAAAQ,GAAK,OAAsB,IAAlBA,EAAMgN,SAAiBhN,EAAM6N,SAAWrO,YAAxC,SAIT,SAAAQ,GAAK,OAAsB,IAAlBA,EAAMgN,SAAiBhN,EAAM6N,SAAWrO,YAAxC,SAKL,SAAAQ,GAAK,OAAsB,IAAlBA,EAAMgN,SAAiBhN,EAAM+M,SAAWvN,YAAxC,SAIT,SAAAQ,GAAK,OAAsB,IAAlBA,EAAMgN,SAAiBhN,EAAM+M,SAAWvN,YAAxC,SAMbsO,GAAYvN,IAAMC,MAAK,YAAwD,IAArDuN,EAAoD,EAApDA,IAAKC,EAA+C,EAA/CA,EAAGL,EAA4C,EAA5CA,SAAUM,EAAkC,EAAlCA,YAAarB,EAAqB,EAArBA,eAE3D,OACI,kBAACa,GAAD,KACKM,EAAIjE,KAAI,SAACT,EAAM6E,GAAP,OACL,kBAACC,GAAD,CACIrK,IAAG,eAAUkK,EAAV,YAAeE,GAClBlN,QAASiN,EAAYG,KAAK,KAAM,CAACJ,IAAGE,MACpCtB,eAAgBA,EAChBI,SAAUkB,EAAIF,GAAK,EACnBL,SAAUA,EACVtE,KAAMA,EACN2E,EAAGA,EACHE,EAAGA,WAKpB,SAACG,EAAWC,GACX,OAAOD,EAAUN,MAAQO,EAAUP,OAGjCI,GAAa5N,IAAMC,MAAK,YAAiE,IAA9D6I,EAA6D,EAA7DA,KAAMsE,EAAuD,EAAvDA,SAAUX,EAA6C,EAA7CA,QAAShM,EAAoC,EAApCA,QAAS4L,EAA2B,EAA3BA,eAA2B,EAAXoB,EAAW,EAARE,EAElF,OACI,kBAACR,GAAD,eACI1M,QAASA,EACTgM,QAASA,EACTW,SAAUA,GACNtE,GAEHuD,EAAe,CACZC,MAAOxD,EAAKwD,MACZC,MAAOzD,EAAKyD,MACZC,QAAS1D,EAAK0D,QACdC,gBAIb,SAACqB,EAAWC,GACX,OAAOD,EAAUhF,OAASiF,EAAUjF,QAGlCkF,GAAqBlP,IAAOC,IAAV,MAClB,SAAAU,GAAK,OAAIA,EAAMwO,SAAWhP,YAAjB,SAKTiP,GAAgB,SAAC,GAA2C,IAAzCC,EAAwC,EAAxCA,MAAOF,EAAiC,EAAjCA,QAASb,EAAwB,EAAxBA,SAAU3M,EAAc,EAAdA,QAEzCiN,EAAclG,uBAAY,YAAa,IAAXiG,EAAU,EAAVA,EAAGE,EAAO,EAAPA,EACjClN,EAAQgN,EAAGE,KACZ,CAAClN,IAaJ,OACI,kBAACuN,GAAD,CAAoBC,QAASA,GACxBE,GAASA,EAAM5E,KAAI,SAACiE,EAAKC,GAAN,OAChB,kBAACF,GAAD,CACIhK,IAAG,cAASkK,GACZD,IAAKA,EACLC,EAAGA,EACHL,SAAUA,EACVM,YAAaA,EACbrB,eAAgBA,UAO9B+B,GAActP,IAAOC,IAAV,MAiBX,SAAAU,GAAK,OAAIA,EAAMwN,YAAchO,YAApB,SA4BAe,OAAMC,MAfN,SAAC,GAAuD,IAArDoO,EAAoD,EAApDA,cAAepB,EAAqC,EAArCA,WAA0B9J,GAAW,EAAzBmL,UAAyB,2DAClE,OACI,oCAEI,kBAACtB,GAAD,CACIC,WAAYA,EACZoB,cAAeA,GAEf,kBAAC,GAAkBlL,GACnB,kBAACiL,GAAD,CAAanB,WAAYA,GAAzB,eCnNDsB,GApByB,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,QAASpB,EAAe,EAAfA,SACxCe,EAAU9G,aAAY,kBAAoB,CAC9C8G,MAD0B,EAAGG,UACZG,OAAOD,OADpBL,MAIFE,EAAgB7G,uBAAY,SAAA5D,GAC9BA,EAAE8K,mBACH,IAEH,OACI,kBAAC,GAAD,CACIP,MAAOA,EACPG,WAAW,EACXL,SAAS,EACTI,cAAeA,EACfjB,SAAUA,K,k7CCftB,IAAMuB,GAAsB7P,IAAOC,IAAV,MAoBnB6P,GAAiB9P,IAAOC,IAAV,MASd8P,GAAmB/P,IAAOC,IAAV,MAShB+P,GAAchQ,IAAOC,IAAV,MAcX0J,GAAY3J,IAAOC,IAAV,MAsBAgQ,GAlBG,SAAC,GAAyB,IAAvBP,EAAsB,EAAtBA,QAASQ,EAAa,EAAbA,OAC1B,OACI,kBAACL,GAAD,KACI,kBAACC,GAAD,KACI,kBAAC,GAAD,CAAiCJ,QAASA,KAE9C,kBAACK,GAAD,KACKG,GAAUA,EAAOzF,KAAI,SAAC0F,EAAQzG,GAAT,OAClB,kBAACsG,GAAD,CAAavL,IAAKiL,EAAU,IAAMhG,EAAQ,IAAMyG,EAAO/O,UACnD,kBAAC,GAAD,KAAY+O,EAAO/O,SAASgP,MAAM,KAAK,IACvC,kBAAC,GAAD,KAAYD,EAAOvG,YCpD5ByG,GAbY,SAAC,GAAiB,IAAfX,EAAc,EAAdA,QAClBQ,EAAW3H,aAAY,kBAAoB,CAC/C2H,OAD2B,EAAGV,UACZc,QAAQZ,OADtBQ,OAIR,OACI,kBAAC,GAAD,CACIR,QAASA,EACTQ,OAAQA,K,umBCPpB,I,GAAMK,GAAkBvQ,IAAOC,IAAV,MAQfuQ,GAAiBrQ,YAAH,MASdsQ,GAAgBzQ,IAAOC,IAAV,KACbuQ,IAIAE,GAAiB1Q,IAAOC,IAAV,KACduQ,IAoBStP,OAAMC,MAhBF,WACf,OACI,kBAACoP,GAAD,KACI,kBAACE,GAAD,KACI,kBAAC,GAAD,CAAoBf,QAAS,IAC7B,kBAAC,GAAD,CAAoBA,QAAS,KAEjC,kBAAC,GAAD,MACA,kBAACgB,GAAD,KACI,kBAAC,GAAD,CAAoBhB,QAAS,IAC7B,kBAAC,GAAD,CAAoBA,QAAS,S,YC1BnCpK,I,YAWOqL,IArBJnL,GAAmBC,YAFN,6BAGbC,GAAsBD,YAFN,gCAOhB7C,GAAmB6C,YAFN,6BAGb5C,GAAkB4C,YAJN,4BAKZzC,GAAayC,YAHN,uBAKpB,SAAUH,KAAV,uEACuB,OADvB,SAC6BgC,YAAKzF,GAAkB,CAC5Ca,IAAK,WACLE,oBACAC,qBAJR,OAOI,OANM0E,EADV,gBAOUjE,YAlBmB,gCAW7B,OAQI,OARJ,SAQUkE,YAAOD,GARjB,wCAWO,SAAUoJ,KAAV,iEACH,OADG,SACGlJ,YAxBgB,4BAwBanC,IADhC,wCAIP,I,GAAMoC,GAAe,CACjBxF,OAAQ,KACRsJ,QAAS,KACTrH,MAAO,MAGI4D,gBAAa,kBAAC,GA3BH,6BA4BD,SAACC,EAAD,OAAqB9F,EAArB,EAAU+B,QAAW/B,OAArB,sBACd8F,EADc,CAEjB9F,cAHoB,YAAC,GA5BJ,4BAiCD,SAAC8F,EAAD,WAAU/D,QAAoBI,GAA9B,EAAqBlC,KAArB,+CACb6F,EADa,GAEb3D,MAPiB,YAAC,GA1BT,uBAmCD,SAAA2D,GAAK,OAAIN,MATA,IAUzBA,I,oBC9CUkJ,GAAW,SAACvB,EAAOwB,EAAMC,GAClC,IAAMC,EAAYC,KAAEC,UAAU5B,GAExB6B,EAAU,eAAQH,EAAUF,EAAKlC,GAAGkC,EAAKhC,IAC/CkC,EAAUF,EAAKlC,GAAGkC,EAAKhC,GAAK,CACxBnB,SAAS,GAEbqD,EAAUD,EAAKnC,GAAGmC,EAAKjC,GAAvB,eACOqC,EADP,CAEIC,OAAO,IATgC,MAalBJ,EAAUD,EAAKnC,GAAGmC,EAAKjC,GAAxCpB,EAbmC,EAanCA,MAAOD,EAb4B,EAa5BA,MASf,IARc,UAAVC,GAA+B,SAAVD,GAA+B,IAAXsD,EAAKnC,GAAuB,UAAVlB,GAA+B,SAAVD,GAA+B,IAAXsD,EAAKnC,KACzGoC,EAAUD,EAAKnC,GAAGmC,EAAKjC,GAAvB,eACOkC,EAAUD,EAAKnC,GAAGmC,EAAKjC,GAD9B,CAEIrB,MAAO,WAKwB,SAApCuD,EAAUD,EAAKnC,GAAGmC,EAAKjC,GAAGrB,MAAkB,CAC3C,GAAGsD,EAAKjC,EAAIgC,EAAKhC,IAAM,EAAG,CACtB,IAAMqC,EAAU,eAAQH,EAAUF,EAAKlC,GAAGkC,EAAKhC,EAAE,IACjDkC,EAAUF,EAAKlC,GAAGkC,EAAKhC,EAAE,GAAK,CAC1BnB,SAAS,GAEbqD,EAAUF,EAAKlC,GAAGkC,EAAKhC,EAAE,GAAzB,eACOqC,EADP,CAEIC,OAAO,IAIf,GAAGL,EAAKjC,EAAIgC,EAAKhC,KAAO,EAAG,CACvB,IAAMqC,EAAU,eAAQH,EAAUF,EAAKlC,GAAGkC,EAAKhC,EAAE,IACjDkC,EAAUF,EAAKlC,GAAGkC,EAAKhC,EAAE,GAAK,CAC1BnB,SAAS,GAEbqD,EAAUF,EAAKlC,GAAGkC,EAAKhC,EAAE,GAAzB,eACOqC,EADP,CAEIC,OAAO,KAKnB,OAAOJ,GAGEK,GAAgB,SAAC/B,EAAO5M,GAIjC,IAHA,IAAM4O,EAAM,GAEN1G,EAAO0E,EAAM/C,OAHyB,WAIpCvB,GACJ,IALwC,eAKhCuG,GACJ,IAAIC,GAAO,EACX9O,EAAO+B,SAAQ,SAAAgN,GACXD,GAAQlC,EAAMtE,GAAGuG,GAAGE,MAErBD,GACCF,EAAIxI,KAAK,CACL8F,EAAG5D,EACH8D,EAAGyC,KARPA,EAAE,EAAGA,EAAE3G,IAAQ2G,EAAI,EAAnBA,IADJvG,EAAE,EAAGA,EAAEJ,IAAQI,EAAI,EAAnBA,GA4BR,OAbAsG,EAAI7M,SAAQ,SAAAwF,GACRqF,EAAMrF,EAAK2E,GAAX,aAAqBU,EAAMrF,EAAK2E,IAChC,IAAM8C,EAAYpC,EAAMrF,EAAK2E,GAAG3E,EAAK6E,GAC/B6C,EAAO,eACND,GAEPhP,EAAO+B,SAAQ,SAAAgN,GACXE,EAAQF,IAAS,KAGrBnC,EAAMrF,EAAK2E,GAAGlC,OAAOzC,EAAK6E,EAAG,EAAG6C,MAG7BrC,G,YCGD/J,I,YAeOqM,IA7FJnM,GAAmBC,YAFN,+BAGbC,GAAsBD,YAFN,kCAQhB7C,GAAmB6C,YAHN,+BAGsC,SAAAxB,GAAO,OAAIA,KAC9DpB,GAAkB4C,YALN,8BAKqC,SAAAxB,GAAO,OAAIA,KAC5DjB,GAAayC,YAJN,yBAKP3C,GAAc2C,YAJN,0BAMRmM,GAAmB,SAAC,GAAD,IAAGlC,EAAH,EAAGA,QAASmC,EAAZ,EAAYA,KAAZ,OAAuB,SAAE/N,EAAU6E,GAAe,IACtEkI,EAAegB,EAAfhB,KAAMC,EAASe,EAATf,KACOnB,EACbhH,IADA6G,UAAaG,OAGfN,EAAQM,EAAOD,GACrB,GAAIL,EAAJ,CAEA,IAAMrF,EAAOqF,EAAMwB,EAAKlC,GAAGkC,EAAKhC,GAC1BiD,EAAaV,GAAc,aAAI/B,GAAQ,CACzC,YAGJyC,EAAWhB,EAAKnC,GAAhB,aAA0BmD,EAAWhB,EAAKnC,IAC1CmD,EAAWhB,EAAKnC,GAAGmC,EAAKjC,GAAxB,eACO7E,EADP,CAEIwE,SAAS,EACT2C,OAAO,IAGXW,EAAWjB,EAAKlC,GAAhB,aAAyBmD,EAAWjB,EAAKlC,IACzCmD,EAAWjB,EAAKlC,GAAGkC,EAAKhC,GAAK,CACzBL,SAAS,GAtBgE,MA0BpDsD,EAAWhB,EAAKnC,GAAGmC,EAAKjC,GAAzCpB,EA1BqE,EA0BrEA,MAAOD,EA1B8D,EA0B9DA,MASf,IARc,UAAVC,GAA+B,SAAVD,GAA+B,IAAXsD,EAAKnC,GAAuB,UAAVlB,GAA+B,SAAVD,GAA+B,IAAXsD,EAAKnC,KACzGmD,EAAWhB,EAAKnC,GAAGmC,EAAKjC,GAAxB,eACOiD,EAAWhB,EAAKnC,GAAGmC,EAAKjC,GAD/B,CAEIrB,MAAO,WAKyB,SAArCsE,EAAWhB,EAAKnC,GAAGmC,EAAKjC,GAAGrB,MAAkB,CAC5C,GAAGsD,EAAKjC,EAAIgC,EAAKhC,IAAM,EAAG,CACtBiD,EAAWjB,EAAKlC,GAAhB,aAA0BmD,EAAWjB,EAAKlC,IAE1C,IAAMuC,EAAU,eAAQY,EAAWjB,EAAKlC,GAAGkC,EAAKhC,EAAE,IAClDiD,EAAWjB,EAAKlC,GAAGkC,EAAKhC,EAAE,GAAK,GAC/BiD,EAAWjB,EAAKlC,GAAGkC,EAAKhC,EAAE,GAA1B,eACOqC,EADP,CAEIC,OAAO,IAIf,GAAGL,EAAKjC,EAAIgC,EAAKhC,KAAO,EAAG,CACvBiD,EAAWjB,EAAKlC,GAAhB,aAA0BmD,EAAWjB,EAAKlC,IAE1C,IAAMuC,EAAU,eAAQY,EAAWjB,EAAKlC,GAAGkC,EAAKhC,EAAE,IAClDiD,EAAWjB,EAAKlC,GAAGkC,EAAKhC,EAAE,GAAK,GAC/BiD,EAAWjB,EAAKlC,GAAGkC,EAAKhC,EAAE,GAA1B,eACOqC,EADP,CAEIC,OAAO,KAKnB,IAAMY,EAAa,uBAAQpC,EAAOqC,MAAM,EAAGtC,IAAxB,CAAkCoC,GAAlC,aAAiDnC,EAAOqC,MAAMtC,EAAQ,KAEzF5L,EAAShB,GAAY,CACjB6M,OAAQoC,QAIhB,SAAUzM,GAAsB0D,GAAhC,yEAGuB,OAFbrG,EAAQqG,EAAO/E,QADzB,SAG6BqD,YAAKzF,GAAkB,CAC5Ca,IAAK,aACLE,oBACAC,mBACAC,YAAa8O,GACbjP,UARR,OAWI,OARM4E,EAHV,gBAWUjE,YA1FmB,kCA+E7B,OAYI,OAZJ,SAYUkE,YAAOD,GAZjB,wCAeO,SAAUoK,KAAV,iEACH,OADG,SACGlK,YAhGgB,8BAgGanC,IADhC,wCAIP,IAAMoC,GAAe,CACjBiI,OAAQ,CAAC,KAAM,KAAM,KAAM,MAC3BW,QAAS,CAAC,KAAM,KAAM,KAAM,OAGjBvI,gBAAa,kBAAC,GAlGH,+BAmGD,SAACC,EAAD,OAAqB9F,EAArB,EAAU+B,QAAW/B,OAArB,sBACd8F,EADc,CAEjB9F,cAHoB,YAAC,GAnGJ,8BAwGD,SAAC8F,EAAD,WAAU/D,QAAiByL,GAA3B,EAAqBvN,KAArB,EAA2BuN,SAASQ,EAApC,EAAoCA,OAAQb,EAA5C,EAA4CA,MAA5C,sBACbrH,EADa,CAEhB2H,OAAO,GAAD,oBAAO3H,EAAM2H,OAAOqC,MAAM,EAAGtC,IAA7B,CAAuCL,GAAvC,aAAiDrH,EAAM2H,OAAOqC,MAAMtC,EAAQ,KAClFY,QAAQ,GAAD,oBAAOtI,EAAMsI,QAAQ0B,MAAM,EAAGtC,IAA9B,CAAwCQ,GAAxC,aAAmDlI,EAAMsI,QAAQ0B,MAAMtC,EAAQ,UARlE,YAAC,GAhGR,0BA0GD,SAAC1H,EAAD,OAAqB2H,EAArB,EAAU1L,QAAW0L,OAArB,sBACT3H,EADS,CAEZ2H,cAZoB,YAAC,GAjGT,yBA+GD,SAAA3H,GAAK,OAAIN,MAdA,IAezBA,IC5DYuK,GA/Ca,WACxB,IAAMnO,EAAW2E,cAEXyJ,EAAU,uCAAG,sBAAAnO,EAAA,sEACTD,EAASgC,MADA,cAGfhC,EAASqO,MACTrO,EAASsO,MAJM,SAKTC,QAAQC,UAAUC,MAAK,WACzBzO,EAAS0O,MACT1O,EAAS2O,SAPE,iCAUR,GAVQ,2CAAH,qDAahB3J,qBAAU,WACN,OAAO,WACHhF,EAASqO,MACTrO,EAASsO,MACTtO,EAAS4O,MACT5O,EAAS6O,SAEd,CAAC7O,IAvB0B,MA6BdqF,GAAS+I,EAAY,CAAEpO,IAAhCkE,EA7BuB,oBA+BGA,EAAzBiB,QAAyBjB,EAAhB9D,KAAgB8D,EAAV7D,MAWvB,OACI,kBAAC,GAAD,O,0YC1DR,IAAMyO,GAAc5S,IAAOC,IAAV,MAWX0J,GAAY3J,IAAOC,IAAV,MAkBA4S,GAbA,WACX,OACI,kBAACD,GAAD,KACI,kBAAC,GAAD,mDAGA,kBAAC,GAAD,6DChBGE,GANS,WACpB,OACI,kBAAC,GAAD,OCWOC,GAXE,WAEb,OACI,oCACI,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,Q,itJCLZ,I,GAAMC,GAAiBhT,IAAOiI,KAAV,MAQdgL,GAAgBjT,IAAOC,IAAV,MAUbG,GAAaJ,IAAOC,IAAV,MAUViT,GAAkBlT,IAAOC,IAAV,MASfkT,GAAiBnT,IAAOC,IAAV,MAyBd,SAAAU,GAAK,OAAIA,EAAMyS,OAASjT,YAAf,SAKTkT,GAAalT,YAAH,MAQVmT,GAAkBtT,IAAOuT,MAAV,KACfF,IAGAG,GAAqBxT,IAAOuT,MAAV,KAClBF,IAGAI,GAAkBzT,IAAOC,IAAV,MASfyT,GAAqB1T,IAAOC,IAAV,MAOlB0T,GAAiB3T,IAAOuT,MAAV,MAMdK,GAAqB5T,IAAOC,IAAV,MAUlB4T,GAAc7T,IAAOC,IAAV,MAMX6T,GAAmB9T,IAAOC,IAAV,MAShB8T,GAAc/T,IAAOgU,OAAV,MAcXC,GAAkBjU,IAAOC,IAAV,MAOfiU,GAAclU,IAAOC,IAAV,MAKXkU,GAAoBnU,IAAOgU,OAAV,MAWjBI,GAAapU,IAAOC,IAAV,MA0JDiB,OAAMC,MAtIJ,SAAC,GAAsE,IAApEyG,EAAmE,EAAnEA,MAAOC,EAA4D,EAA5DA,SAAUI,EAAkD,EAAlDA,KAAM9D,EAA4C,EAA5CA,MAAOkQ,EAAqC,EAArCA,SAAUC,EAA2B,EAA3BA,SAAUC,EAAiB,EAAjBA,WAC5DC,EAAMC,iBAAO,IAEb9S,EAAU+G,uBAAY,SAAAgM,GACxBF,EAAIG,QAAQD,GAAKE,UAClB,IAEH,OACI,kBAAC5B,GAAD,CACI6B,aAAa,MACbC,YAAY,MACZC,eAAe,MACfC,WAAW,QACXX,SAAUA,GAEV,kBAACpB,GAAD,KACI,kBAAC,GAAD,KACMrL,EAAQ,UAAcC,EAAW,UAAY,MAEnD,kBAACqL,GAAD,KACI,kBAACC,GAAD,CACIxR,QAASA,EAAQoN,KAAK,KAAM,YAC5BqE,MAAOjP,EAAM/C,SACbqD,IAAG,mBAAcN,EAAM8Q,QAEvB,kBAAC,KAAYnH,SAAb,CAAsB5F,MAAO,CAAEkF,MAAO,CAAEC,MAAO,OAAQC,OAAQ,OAAQ4H,OAAQ,aAC3E,kBAAC,KAAD,OAEJ,kBAAC5B,GAAD,CACInR,KAAK,OACLgT,KAAK,WACLC,YAAY,QACZd,SAAUA,EACVpM,MAAOD,EAAK7G,SACZoT,IAAK,SAAAa,GAAE,OAAIb,EAAIG,QAAQvT,SAAWiU,KAEtC,kBAACjB,GAAD,KACKjQ,EAAM/C,WAGf,kBAAC+R,GAAD,CACIxR,QAASA,EAAQoN,KAAK,KAAM,YAC5BqE,MAAOjP,EAAM2C,SACbrC,IAAG,mBAAcN,EAAM8Q,QAEvB,kBAAC,KAAYnH,SAAb,CAAsB5F,MAAO,CAAEkF,MAAO,CAAEC,MAAO,OAAQC,OAAQ,OAAQ4H,OAAQ,aAC3E,kBAAC,KAAD,OAEJ,kBAAC1B,GAAD,CACIrR,KAAK,WACLgT,KAAK,WACLC,YAAY,WACZd,SAAUA,EACVpM,MAAOD,EAAKnB,SACZ0N,IAAK,SAAAa,GAAE,OAAIb,EAAIG,QAAQ7N,SAAWuO,KAEtC,kBAACjB,GAAD,KACKjQ,EAAM2C,WAGde,EACG,kBAACsL,GAAD,CACIxR,QAASA,EAAQoN,KAAK,KAAM,mBAC5BqE,MAAOjP,EAAM2D,gBACbrD,IAAG,0BAAqBN,EAAM8Q,QAE9B,kBAAC,KAAYnH,SAAb,CAAsB5F,MAAO,CAAEkF,MAAO,CAAEC,MAAO,OAAQC,OAAQ,OAAQ4H,OAAQ,aAC3E,kBAAC,KAAD,OAEJ,kBAAC1B,GAAD,CACIrR,KAAK,WACLgT,KAAK,kBACLC,YAAY,mBACZd,SAAUA,EACVpM,MAAOD,EAAKH,gBACZ0M,IAAK,SAAAa,GAAE,OAAIb,EAAIG,QAAQ7M,gBAAkBuN,KAE7C,kBAACjB,GAAD,KACKjQ,EAAM2D,kBAGhB,KACFF,EACG,kBAAC6L,GAAD,KACI,kBAACC,GAAD,KACI,kBAACC,GAAD,CACIxR,KAAK,aAET,kBAACyR,GAAD,qBAIJ,kBAACC,GAAD,0BAIL,MAEP,kBAACC,GAAD,KACI,kBAACC,GAAD,CACI5R,KAAK,UADT,UAKCyF,EACG,kBAACqM,GAAD,KACI,kBAACC,GAAD,+BAGA,kBAACC,GAAD,CACIhS,KAAK,SACLR,QAAS4S,GAFb,WAQJ,kBAACN,GAAD,KACI,kBAACC,GAAD,+BAGA,kBAACC,GAAD,CACIhS,KAAK,UADT,iBC9KbkG,gBArIQ,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACFC,aAAY,gBAAGC,EAAH,EAAGA,YAAH,MAAsB,CAChEP,KAAMO,EAAYZ,MAClBnG,KAAM+G,EAAY/G,KAClBkG,UAAWa,EAAYb,cAHnBM,EAD4B,EAC5BA,KAAMxG,EADsB,EACtBA,KAAMkG,EADgB,EAChBA,UAMd7D,EAAW2E,cAPmB,EASRgD,mBAAS,CACjCrK,SAAU,GACV0F,SAAU,KAXsB,mBAS5B3C,EAT4B,KASrBmR,EATqB,KAc9BhB,EAAW5L,uBAAY,SAAA5D,GAAM,IAAD,EACNA,EAAEyQ,OAAlBJ,EADsB,EACtBA,KAAMjN,EADgB,EAChBA,MACK,KAAhB/D,EAAMgR,IACLG,GAAS,SAAA3J,GAAS,sBACXA,EADW,eAEbwJ,EAAO,QAGhBrR,EAASqD,GAAY,CACjBc,KAAM,QACNxD,IAAK0Q,EACLjN,aAEL,CAACpE,EAAUK,IAERkQ,EAAW3L,uBAAY,SAAA5D,GACzBA,EAAE8K,iBAD4B,IAEtBxO,EAAuB6G,EAAvB7G,SAAU0F,EAAamB,EAAbnB,SAGd0O,EAAYlR,OAAOC,KAAK0D,GACvB2C,QAAO,SAACC,EAAKpG,GAAN,sBAEGoG,EAFH,eAGCpG,GAAM,MACR,IAGXH,OAAOC,KAAKiR,GACP1J,QAAO,SAAArH,GAAG,MAAkB,KAAdwD,EAAKxD,MACnBD,SAAQ,SAAAC,GACL+Q,EAAS,eACFA,EADE,eAEJ/Q,EAAM,sBAInB,ItBnByB+M,EsBmBnBiE,EAASC,KAAIC,SAASpR,KAAK,CAC7BnD,SAAUsU,KAAIE,SAASC,IAAI,IAAIC,MAAM,CAAEC,eAAgB,IAAKC,WAAW7R,OAAM,iBAAO,CAAE5B,QAAS,mBAC/FuE,SAAU4O,KAAIE,SAASK,IAAI,GAAGJ,IAAI,IAAIG,WAAW7R,OAAM,iBAAO,CAAE5B,QAAS,sBAGvE2T,EAASR,KAAIS,SAASlO,EAAMwN,EAAQ,CAAEW,YAAY,IAaxD,GAXGF,EAAO/R,OACN+R,EAAO/R,MAAMkS,QAAQ7R,SAAQ,SAAA8R,GACrBd,EAAUc,EAAOC,KAAK,MACtBf,EAAS,eACFA,EADE,eAEJc,EAAOC,KAAK,GAAKD,EAAO/T,cAMtC+B,OAAOC,KAAKiR,GAAW1J,QAAO,SAAArH,GAAG,OAAI+Q,EAAU/Q,MAAM6H,OAAS,EAY7D,OAXAgJ,GAAS,SAAA3J,GAAS,sBACX6J,EADW,CAEdP,MAAOtJ,EAAUsJ,MAAQ,YAE7B3Q,OAAOC,KAAKiR,GAAWhR,SAAQ,SAAAC,GAExB+Q,EAAU/Q,IACTX,EAASuD,GAAmB,CAAEY,KAAM,QAASxD,YAOzDX,GtBpDyB0N,EsBoDE,CAAEpQ,WAAU0F,YtBpDT,uCAAI,WAAQhD,EAAU6E,GAAlB,eAAA5E,EAAA,+EAEfD,EAAS+C,GAAW2K,IAFL,QAE5B/P,EAF4B,SAI9B2C,GAAgB,CAAE3C,SAJY,gDAOlCY,QAAQC,IAAI,gBAPsB,yDAAJ,0DsBqD9BwB,EAASsD,GAAW,CAAEa,KAAM,aAC7B,CAACnE,EAAUmE,IAEda,qBAAU,WACN,GAAGnB,EAAW,CACV,IAAI6N,EAAY,GACVgB,EAAe7O,EAAU3D,SAASE,KAWxC,OAVAI,OAAOC,KAAKiS,GAAchS,SAAQ,SAAAC,GAC9B+Q,EAAS,eACFA,EADE,eAEJ/Q,EAAM+R,EAAa/R,aAK5B6Q,EAASE,GAKV/T,GACC6G,EAAQO,KAAK,OAElB,CAACP,EAAS7G,EAAMkG,IAEnBmB,qBAAU,WACN,OAAO,WACHhF,EAASsD,GAAW,CAAEa,KAAM,cAEjC,CAACnE,IAEJ,IAAMyQ,EAAa7L,uBAAY,WAC3B5E,EAASsD,GAAW,CAAEa,KAAM,cAC5BK,EAAQO,KAAK,eACd,CAAC/E,EAAUwE,IAEd,OACI,kBAAC,GAAD,CACIV,OAAK,EACLyM,SAAUA,EACVC,SAAUA,EACVrM,KAAMA,EACN9D,MAAOA,EACPoQ,WAAYA,OCnHTkC,GAbG,WACd,OACI,oCACI,kBAAC,IAAD,KACI,+DAEJ,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,QCwHGpO,gBAhIW,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACLC,aAAY,gBAAGC,EAAH,EAAGA,YAAH,MAAsB,CAChEP,KAAMO,EAAYX,SAClBpG,KAAM+G,EAAY/G,KAClBkG,UAAWa,EAAYb,cAHnBM,EAD+B,EAC/BA,KAAMxG,EADyB,EACzBA,KAAMkG,EADmB,EACnBA,UAMd7D,EAAW2E,cAPsB,EASXgD,mBAAS,CACjCrK,SAAU,GACV0F,SAAU,GACVgB,gBAAiB,KAZkB,mBAS/B3D,EAT+B,KASxBmR,EATwB,KAejChB,EAAW5L,uBAAY,SAAA5D,GAAM,IAAD,EACNA,EAAEyQ,OAAlBJ,EADsB,EACtBA,KAAMjN,EADgB,EAChBA,MACK,KAAhB/D,EAAMgR,IACLG,GAAS,SAAA3J,GAAS,sBACXA,EADW,eAEbwJ,EAAO,QAGhBrR,EAASqD,GAAY,CACjBc,KAAM,WACNxD,IAAK0Q,EACLjN,aAEL,CAACpE,EAAUK,IAERkQ,EAAW3L,uBAAY,SAAA5D,GACzBA,EAAE8K,iBAD4B,IAEtBxO,EAAuB6G,EAAvB7G,SAAU0F,EAAamB,EAAbnB,SAGb0O,EAAYlR,OAAOC,KAAK0D,GAC3B2C,QAAO,SAACC,EAAKpG,GAAN,sBAEGoG,EAFH,eAGCpG,GAAM,MACR,IAGRH,OAAOC,KAAKiR,GACP1J,QAAO,SAAArH,GAAG,MAAkB,KAAdwD,EAAKxD,MACnBD,SAAQ,SAAAC,GACL+Q,EAAS,eACFA,EADE,eAEJ/Q,EAAM,sBAInB,IxBT4B+M,EwBStBiE,EAASC,KAAIC,SAASpR,KAAK,CAC7BnD,SAAUsU,KAAIE,SAASC,IAAI,IAAIC,MAAM,CAAEC,eAAgB,IAAKC,WAAW7R,OAAM,iBAAO,CAAE5B,QAAS,mBAC/FuE,SAAU4O,KAAIE,SAASK,IAAI,GAAGJ,IAAI,IAAIG,WAAW7R,OAAM,iBAAO,CAAE5B,QAAS,oBACzEuF,gBAAiB4N,KAAIgB,MAAMC,MAAMjB,KAAIlB,IAAI,aAAawB,WAAW7R,OAAM,iBAAO,CAAE5B,QAAS,0BAGvF2T,EAASR,KAAIS,SAASlO,EAAMwN,EAAQ,CAAEW,YAAY,IAaxD,GAXGF,EAAO/R,OACN+R,EAAO/R,MAAMkS,QAAQ7R,SAAQ,SAAA8R,GACrBd,EAAUc,EAAOC,KAAK,MACtBf,EAAS,eACFA,EADE,eAEJc,EAAOC,KAAK,GAAKD,EAAO/T,cAMtC+B,OAAOC,KAAKiR,GAAW1J,QAAO,SAAArH,GAAG,OAAI+Q,EAAU/Q,MAAM6H,OAAS,EAW7D,OAVAgJ,GAAS,SAAA3J,GAAS,sBACX6J,EADW,CAEdP,MAAOtJ,EAAUsJ,MAAQ,YAE7B3Q,OAAOC,KAAKiR,GAAWhR,SAAQ,SAAAC,GACxB+Q,EAAU/Q,IACTX,EAASuD,GAAmB,CAAEY,KAAM,WAAYxD,YAO5DX,GxB1C4B0N,EwB0CE,CAAEpQ,WAAU0F,YxB1CT,uCAAI,WAAQhD,EAAU6E,GAAlB,eAAA5E,EAAA,+EAElBD,EAASkD,GAAcwK,IAFL,QAE/B/P,EAF+B,SAIjC2C,GAAgB,CAAE3C,SAJe,gDAOrCY,QAAQC,IAAI,mBAPyB,yDAAJ,0DwB2CjCwB,EAASsD,GAAW,CAAEa,KAAM,gBAC7B,CAACnE,EAAUmE,IA8Bd,OA5BAa,qBAAU,WACN,GAAGnB,EAAW,CACV,IAAI6N,EAAY,GACVgB,EAAe7O,EAAU3D,SAASE,KAWxC,OAVAI,OAAOC,KAAKiS,GAAchS,SAAQ,SAAAC,GAC9B+Q,EAAS,eACFA,EADE,eAEJ/Q,EAAM+R,EAAa/R,aAK5B6Q,EAASE,GAKV/T,GACC6G,EAAQO,KAAK,OAElB,CAACP,EAAS7G,EAAMkG,IAEnBmB,qBAAU,WACN,OAAO,WACHhF,EAASsD,GAAW,CAAEa,KAAM,iBAEjC,CAACnE,IAGA,kBAAC,GAAD,CACI+D,UAAQ,EACRwM,SAAUA,EACVC,SAAUA,EACVrM,KAAMA,EACN9D,MAAOA,OC7GJyS,GAdM,WAEjB,OACI,oCACI,kBAAC,IAAD,KACI,+DAEJ,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,QCLGvH,GAXD,CACV,CAAE,CAAC3B,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,KC8Q/HmJ,GApRD,CACVC,KAAM,CACF3U,KAAM,UACN0P,KAAM,CACF,CACIkF,IAAK,EACLC,GAAI,EACJC,OAAQ,SAAStW,GAAQ,IACb0O,EAAkB1O,EAAlB0O,MAAO0H,EAAWpW,EAAXoW,GAAIC,EAAOrW,EAAPqW,GACnB,OAAG3H,EAAM0H,GAAIC,GAAIxJ,QAMzB,CACIuJ,IAAK,EACLC,GAAI,EACJC,OAAQ,SAAStW,GAAQ,IACb0O,EAAuB1O,EAAvB0O,MAAOV,EAAgBhO,EAAhBgO,EAAGE,EAAalO,EAAbkO,EAAGpB,EAAU9M,EAAV8M,MACrB,QAAc,UAAVA,GAA2B,IAANkB,GAAuB,UAAVlB,GAA2B,IAANkB,OAC7C,UAAVlB,GAAqB4B,EAAM,GAAGR,GAAGrB,OAAqB,UAAVC,GAAqB4B,EAAM,GAAGR,GAAGrB,UACnE,UAAVC,GAAqB4B,EAAM,GAAGR,GAAGrB,OAAqB,UAAVC,GAAqB4B,EAAM,GAAGR,GAAGrB,UAIzF,CACIuJ,IAAK,EACLC,IAAK,EACLC,OAAQ,SAAStW,GAAQ,IACb0O,EAAkB1O,EAAlB0O,MAAO0H,EAAWpW,EAAXoW,GAAIC,EAAOrW,EAAPqW,GACnB,QAAG3H,EAAM0H,GAAIC,GAAIxJ,QAMzB,CACIuJ,IAAK,EACLC,GAAI,EACJC,OAAQ,SAAStW,GAAQ,IACb0O,EAAkB1O,EAAlB0O,MAAO0H,EAAWpW,EAAXoW,GAAIC,EAAOrW,EAAPqW,GACnB,QAAG3H,EAAM0H,GAAIC,GAAIxJ,UAQjC0J,OAAQ,CACJ/U,KAAM,UACN0P,KAAM,CACF,CACIkF,IAAK,EACLC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,KAIhBG,KAAM,CACFhV,KAAM,UACN0P,KAAM,CACF,CACIkF,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,GAER,CACID,IAAK,EACLC,IAAK,GAET,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,GAER,CACID,GAAI,EACJC,GAAI,EACJC,OAAQ,SAAStW,GAAQ,IACb0O,EAAuB1O,EAAvB0O,MAAOV,EAAgBhO,EAAhBgO,EAAGE,EAAalO,EAAbkO,EACZuI,EAAmB,UADMzW,EAAV8M,MACe,QAAU,QAG9C,IAAI4B,EAAMV,GAAGE,GAAGrB,OAAS6B,EAAMV,GAAGE,GAAGsC,MACjC,OAAO,EAIX,IAAI9B,EAAMV,GAAGE,EAAE,GAAGrB,OAAS6B,EAAMV,GAAGE,EAAE,GAAGsC,MACrC,OAAO,EAIX,GAAG9B,EAAMV,GAAGE,EAAE,GAAGrB,OAAS6B,EAAMV,GAAGE,EAAE,GAAGrB,MACpC,OAAO,EAMX,IAFA,IAAM6J,EAAoBC,GAAsBF,EAAO/H,GAAO,GACxD/C,EAAS+K,EAAkB/K,OACzBvB,EAAE,EAAGA,EAAEuB,IAAUvB,EAAG,CACxB,IAAMwM,EAAOF,EAAkBtM,GAC/B,GAAGwM,EAAKR,KAAOpI,IAAM4I,EAAKP,KAAOnI,GAAK0I,EAAKP,KAAOnI,EAAE,GAAK0I,EAAKP,KAAOnI,EAAE,GACnE,OAAO,EAKf,OAAO,IAGf,CACIkI,GAAI,EACJC,IAAK,EACLC,OAAQ,SAAStW,GAAQ,IACb0O,EAAuB1O,EAAvB0O,MAAOV,EAAgBhO,EAAhBgO,EAAGE,EAAalO,EAAbkO,EACZuI,EAAmB,UADMzW,EAAV8M,MACe,QAAU,QAG9C,IAAI4B,EAAMV,GAAGE,GAAGrB,OAAS6B,EAAMV,GAAGE,GAAGsC,MACjC,OAAO,EAIX,IAAI9B,EAAMV,GAAGE,EAAE,GAAGrB,OAAS6B,EAAMV,GAAGE,EAAE,GAAGsC,MACrC,OAAO,EAIX,GAAG9B,EAAMV,GAAGE,EAAE,GAAGrB,OAAS6B,EAAMV,GAAGE,EAAE,GAAGrB,OAAS6B,EAAMV,GAAGE,EAAE,GAAGrB,MAC3D,OAAO,EAMX,IAFA,IAAM6J,EAAoBC,GAAsBF,EAAO/H,GAAO,GACxD/C,EAAS+K,EAAkB/K,OACzBvB,EAAE,EAAGA,EAAEuB,IAAUvB,EAAG,CACxB,IAAMwM,EAAOF,EAAkBtM,GAC/B,GAAGwM,EAAKR,KAAOpI,IAAM4I,EAAKP,KAAOnI,GAAK0I,EAAKP,KAAOnI,EAAE,GAAK0I,EAAKP,KAAOnI,EAAE,GACnE,OAAO,EAIf,OAAO,MAKvB2I,OAAQ,CACJrV,KAAM,YACN0P,KAAM,CACF,CACIkF,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,KAIhBS,KAAM,CACFtV,KAAM,YACN0P,KAAM,CACF,CACIkF,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,KAIhBU,MAAO,CACHvV,KAAM,YACN0P,KAAM,CACF,CACIkF,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,MC9PPW,GAAc,SAAAC,GACvB,GAAsB,IAAnBA,EAAQtL,OAAc,OAAOsL,EAEhC,IAAMC,EAAU,IAAIC,IAEpB,OADAF,EAAQpT,SAAQ,SAAA+S,GAAI,OAAIM,EAAQE,IAAc,GAAVR,EAAKR,GAAUQ,EAAKP,OACjD,aAAKa,GAAUpN,KAAI,SAAAhG,GAAG,MAAK,CAAEsS,GAAIiB,SAASvT,EAAM,IAAKuS,GAAIvS,EAAM,QAG7D6S,GAAwB,SAACnH,EAAQd,EAAO4I,GAEjD,IADA,IAAIZ,EAAoB,GAChBtM,EAAE,EAAGA,EAAE,IAAKA,EAChB,IAAI,IAAIuG,EAAE,EAAGA,EAAE,IAAKA,EAChB,GAAGjC,EAAMtE,GAAGuG,GAAG7D,QAAU0C,EAAQ,CAC7B,IAAM+H,EAAcC,GAAa9I,EAAOtE,EAAGuG,EAAG2G,GAC9CZ,EAAiB,uBAAQA,GAAR,aAA8Ba,IAK3D,OAAOP,GAAYN,IAGVe,GAAgB,SAACjI,EAAQd,GAClC,IAAM+H,EAAmB,UAAXjH,EAAqB,QAAU,QACvCkI,EAAcrH,KAAEC,UAAU5B,GAE1BiJ,EAvCsB,SAACnI,EAAQd,GACrC,IAAI,IAAItE,EAAE,EAAGA,EAAE,IAAKA,EAChB,IAAI,IAAIuG,EAAE,EAAGA,EAAE,IAAKA,EAChB,GAAGjC,EAAMtE,GAAGuG,GAAG7D,QAAU0C,GAAgC,SAAtBd,EAAMtE,GAAGuG,GAAG9D,MAC3C,MAAO,CACHmB,EAAG5D,EACH8D,EAAGyC,GAiCAiH,CAAiBpI,EAAQkI,GAW5C,OAV0Bf,GAAsBF,EAAOiB,GAErC7T,SAAQ,SAAA+S,GACtBc,EAAYd,EAAKR,IAAIQ,EAAKP,IAA1B,eACOqB,EAAYd,EAAKR,IAAIQ,EAAKP,IADjC,CAEIwB,SAAS,QAKdH,EAAYC,EAAW3J,GAAG2J,EAAWzJ,GAAG2J,SA0BlCL,GAAe,SAAC9I,EAAOV,EAAGE,EAAGoJ,GAAc,IAAD,EAC1B5I,EAAMV,GAAGE,GAA1BrB,EAD2C,EAC3CA,MAAOC,EADoC,EACpCA,MACXyC,EAAS,CAAEb,QAAOV,IAAGE,IAAGpB,SAC5B,GAAID,EAAJ,CAHmD,MAK7BqJ,GAAMrJ,GAApBrL,EAL2C,EAK3CA,KAAM0P,EALqC,EAKrCA,KACVqG,EAAc,GAoClB,OAjCIA,EADQ,YAAT/V,EACe0P,EAAKjH,QAAO,SAACC,EAAKC,GAC5B,IAAMiM,EAAKpI,GAAe,UAAVlB,GAAqB3C,EAAIiM,IAAKjM,EAAIiM,IAC5CC,EAAKnI,EAAI/D,EAAIkM,GACnB,OAAGD,EAAK,GAAKC,EAAK,GAAKD,EAAK,GAAKC,EAAK,IAEtC9G,EAAM,eAAQA,EAAR,CAAgB6G,KAAIC,OAEtBlM,EAAImM,SAAuB,SAAVzJ,GAAoByK,IAAanN,EAAImM,SAAUnM,EAAImM,OAAO/G,KACvEb,EAAM0H,GAAIC,GAAIvJ,OAAS4B,EAAMV,GAAGE,GAAGpB,QAAU4B,EAAM0H,GAAIC,GAAIvJ,OAC3D5C,EAAIhC,KAAK,CAACkO,KAAIC,QAN0BnM,IAWjD,IAEWgH,EAAK4G,SAAQ,SAAA3N,GAGvB,IAFA,IAAI4N,EAAU,EACVC,EAAa,KACL,GACND,EACF,IAAM3B,EAAKpI,EAAI+J,GAAqB,UAAVjL,GAAqB3C,EAAIiM,IAAKjM,EAAIiM,IACtDC,EAAKnI,EAAI6J,EAAU5N,EAAIkM,GAE7B,GAAGD,EAAK,GAAKC,EAAK,GAAKD,EAAK,GAAKC,EAAK,EAAG,MACzC,GAAG3H,EAAM0H,GAAIC,GAAIvJ,OAAS4B,EAAM0H,GAAIC,GAAIvJ,QAAUA,EAAO,MAEzD,GADAkL,EAAW9P,KAAK,CAACkO,KAAIC,OAClB3H,EAAM0H,GAAIC,GAAIvJ,OAAS4B,EAAM0H,GAAIC,GAAIvJ,QAAUA,EAAO,MAE7D,OAAOkL,KAIRhB,GAAYO,K,YC1Cb5S,I,YAiBOsT,IA1FJpT,GAAmBC,YAFN,4BAGbC,GAAsBD,YAFN,+BAShB7C,GAAmB6C,YAJN,4BAIsC,SAAAxB,GAAO,OAAIA,KAC9DpB,GAAkB4C,YANN,2BAMqC,SAAAxB,GAAO,OAAIA,KAC5DnB,GAAc2C,YALN,uBAKiC,SAAAxB,GAAO,OAAIA,KACpDlB,GAAc0C,YALN,uBAKiC,SAAAxB,GAAO,OAAIA,KACpDjB,GAAayC,YALN,sBAaPoT,GAAgBpT,YANN,yBAMmC,SAAAxB,GAAO,OAAIA,KACxD6U,GAAerT,YANN,wBAOTsT,GAAkBtT,YANL,4BAMqC,SAAAxB,GAAO,OAAIA,KAC7D+U,GAAoBvT,YANL,8BAMuC,SAAAxB,GAAO,OAAIA,KACjEgV,GAAcxT,YANN,uBAORyT,GAAezT,YANN,wBAMkC,SAAAxB,GAAO,OAAIA,K,GAEhBR,GAAyB,iB,qBAApE0V,G,MAAQC,G,MAAgBC,G,SAC4B5V,GAAyB,oB,qBAA7E6V,G,MAAWC,G,MAAmBC,G,MACzBC,GAAc/V,GAAmByV,ICnCxB,SAAA1W,GAAM,OACxBsD,KAAMgB,KAAK,qBAAsBtE,MDmCxBiX,GAAiBhW,GAAmB4V,ICjCxB,SAAA7W,GAAM,OAC3BsD,KAAMgB,KAAK,wBAAyBtE,MDkC3BkX,GAAqB,SAAC,GAAD,IAAUxX,EAAV,EAAGyX,MAAaC,EAAhB,EAAgBA,MAAOC,EAAvB,EAAuBA,KAAMvX,EAA7B,EAA6BA,QAA7B,OAA2C,SAAEuB,EAAU6E,GAU7E7E,EATLgW,EACKvX,EAQSyW,GAAkB,CACvB7W,OACAI,YARKwW,GAAgB,CACrB5W,OACA0X,UAYCf,QAKJiB,GAAmB,SAAAtX,GAAM,OAAI,SAAEqB,EAAU6E,GAAe,IACzDqR,EAAWrR,IAAXqR,OACJC,EAAS,eAAQD,GACrB1V,OAAOC,KAAK9B,GAAQ+B,SAAQ,SAAAC,GACE,kBAAhBhC,EAAOgC,KACbwV,EAAS,eACFA,EADE,eAEJxV,EAFI,uBAGEwV,EAAUxV,IAHZ,CAIDhC,EAAOgC,WAMvBX,EAASf,GAAY,CAAEiX,OAAQC,OAGnC,SAAU3U,GAAsB0D,GAAhC,yEAGuB,OAFbrG,EAAQqG,EAAO/E,QADzB,SAG6BqD,YAAKzF,GAAkB,CAC5Ca,IAAK,UACLE,oBACAC,mBACAC,eACAC,YAAagX,GACb9W,cAAe0W,GACfhX,UAVR,OAaI,OAVM4E,EAHV,gBAaUjE,YAvFmB,+BA0E7B,OAcI,OAdJ,SAcUkE,YAAOD,GAdjB,wCAiBO,SAAUqR,KAAV,iEACH,OADG,SACGnR,YA7FgB,2BA6FanC,IADhC,wCAIP,I,GAAMoC,GAAe,CACjBxF,OAAQ,KACRiC,MAAO,KACP+V,UAAW,KACXC,QAAS,KACTC,UAAW,KACXC,UAAW,KACXC,aAAc,KACdC,aAAc,KACdC,WAAY,EACZC,WAAY,EACZC,UAAW,GACXC,UAAU,EACVxL,SAAS,EACTyL,UAAU,EACVC,UAAW,KACX1M,YAAY,EACZ2M,KAAM,CACFvY,QAAS,KACTsX,MAAO,MAEXkB,KAAM,CACFxY,QAAS,KACTsX,MAAO,MAEXmB,UAAW,CACPzY,QAAS,KACTsX,MAAO,OAIA9R,gBAAa,kBAAC,GAzHH,4BA0HD,SAACC,EAAD,OAAqB9F,EAArB,EAAU+B,QAAW/B,OAArB,sBACd8F,EADc,CAEjB9F,cAHoB,YAAC,GA1HJ,2BA+HD,SAAC8F,EAAD,WAAU/D,QAAoBI,GAA9B,EAAqBlC,KAArB,+CACb6F,EADa,GAEb3D,EAFa,CAGhBwW,UAAWxW,EAAKqW,UAAUpO,OAAS,OARf,YAAC,GAxHR,uBAkID,SAACtE,EAAD,WAAU/D,QAAoBI,GAA9B,EAAqBlC,KAArB,+CACT6F,EADS,GAET3D,MAZiB,YAAC,GAvHR,uBAqID,SAAC2D,EAAD,OAAqBgS,EAArB,EAAU/V,QAAW+V,OAArB,sBACTA,MAfiB,YAAC,GAtHT,sBAuID,SAAAhS,GAAK,OAAIN,MAjBA,YAAC,GA/GN,yBAiID,SAACM,EAAD,OAAqB2S,EAArB,EAAU1W,QAAW0W,SAArB,sBACX3S,EADW,CAEd2S,gBApBoB,YAAC,GA1GP,wBAgID,SAAC3S,EAAD,WAAW/D,QAAW4W,EAAtB,EAAsBA,UAAW1M,EAAjC,EAAiCA,WAAjC,sBACVnG,EADU,CAEb6S,YACA1M,kBAzBoB,YAAC,GA2BxBgL,IAAS,SAAAnR,GAAK,OAAIA,KA3BK,YAAC,GA4BxBoR,IAAiB,SAAApR,GAAK,OAAIA,KA5BH,YAAC,GA6BxBqR,IAAiB,SAAArR,GAAK,OAAIA,KA7BH,YAAC,GA8BxBsR,IAAY,SAAAtR,GAAK,OAAIA,KA9BE,YAAC,GA+BxBuR,IAAoB,SAAAvR,GAAK,OAAIA,KA/BN,YAAC,GAgCxBwR,IAAoB,SAAAxR,GAAK,OAAIA,KAhCN,YAAC,GA9GP,wBA+ID,SAACA,GAAD,sBACVA,EADU,CAEb8S,KAAMpT,GAAY,KAClBqT,KAAMrT,GAAY,KAClBsT,UAAWtT,GAAY,UACvByH,SAAS,EACTyL,UAAU,OAvCU,YAAC,GA3GR,uBAoJD,SAAC5S,GAAD,sBACTA,EADS,CAEZ4S,UAAU,OA3CU,YAAC,GA7GH,4BA0JD,SAAC5S,EAAD,aAAU/D,QAAW9B,EAArB,EAAqBA,KAAM0X,EAA3B,EAA2BA,MAA3B,sBACd7R,GADc,mBAEhB7F,EAFgB,eAGV6F,EAAM7F,GAHI,CAIb0X,WAJa,yBAMR,GANQ,OA7CG,YAAC,GA5GD,8BAiKD,SAAC7R,EAAD,aAAU/D,QAAW9B,EAArB,EAAqBA,KAAMI,EAA3B,EAA2BA,QAA3B,sBAChByF,GADgB,mBAElB7F,EAFkB,eAGZ6F,EAAM7F,GAHM,CAIfI,aAJe,yBAMV,GANU,OArDC,IA6DzBmF,I,YE0BOpC,I,YAeO2V,IA3NJzV,GAAmBC,YAFN,4BAEsC,SAAAxB,GAAO,OAAIA,KAC9DyB,GAAsBD,YAFN,+BAUhB7C,GAAmB6C,YANN,4BAMsC,SAAAxB,GAAO,OAAIA,KAC9DpB,GAAkB4C,YANN,2BAMqC,SAAAxB,GAAO,OAAIA,KAC5DnB,GAAc2C,YANN,uBAMiC,SAAAxB,GAAO,OAAIA,KACpDjB,GAAayC,YANN,sBAOPyV,GAAoBzV,YANN,6BAMuC,SAAAxB,GAAO,OAAIA,KAChEkX,GAAgB1V,YANN,yBAMmC,SAAAxB,GAAO,OAAIA,K,GAGMR,GAAyB,yB,qBAA5F2X,G,MAAgBC,G,MAAwBC,G,MACnCC,GAAoB7X,GAAmB0X,IChC3B,SAAA3Y,GAAM,OAC3BsD,KAAMgB,KAAK,wBAAyBtE,MD2ClC+Y,GAAqB,SAACC,EAAkBC,GAC1C,IAAMC,EAXe,SAAAtM,GACrB,IAAMuM,EAAe5K,KAAEC,UAAU5B,GAMjC,OALAuM,EAAaC,UACbD,EAAapX,SAAQ,SAAAkK,GACjBA,EAAImN,aAGDD,EAIkBE,CAAiBJ,GAC1CD,EAAgB,aAAQA,GAExB,IAJ8D,eAItD1Q,GACJ,IAL0D,eAKlDuG,GACJ,IAAMyK,EAAYJ,EAAiB5Q,GAAGuG,GAChC0K,EAAYP,EAAiB1Q,GAAGuG,GAKtChN,OAAOC,KAAKwX,GAAWE,OAAM,SAAAxX,GAEzB,SAAIuX,EAAUvX,IAAQuX,EAAUvX,KAASsX,EAAUtX,MAG/CgX,EAAiB1Q,GAAjB,aAA2B0Q,EAAiB1Q,IAC5C0Q,EAAiB1Q,GAAGuG,GAApB,eACOyK,IAEA,OAhBXzK,EAAE,EAAGA,EAAE,IAAKA,EAAI,EAAhBA,IADJvG,EAAE,EAAGA,EAAE,IAAKA,EAAI,EAAhBA,GAwBR,OAAO0Q,GAmBES,GAAmB,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAMzS,EAAT,EAASA,MAAT,OAAqB,SAAE5F,EAAU6E,GAAe,IAAD,EAMvEA,IANuE,IAEvEyT,OAAU/M,EAF6D,EAE7DA,MAAOuM,EAFsD,EAEtDA,aAFsD,IAGvE5B,OAAUa,EAH6D,EAG7DA,UAAWH,EAHkD,EAGlDA,UACP2B,EAJyD,EAIvEC,WAAcD,KACNE,EAL+D,EAKvEC,KAAQD,KAOZ,GAJIJ,IACAA,EAAOzS,EAAQmR,GAGP,IAATsB,KACAtB,EAAUsB,GAAQ,GAAKtB,EAAUsB,GAAQzB,EAAUpO,QAAtD,CAEA,IAAMmQ,EhBtBoB,SAACpN,EAAOqL,EAAWgC,EAAWC,GAExD,IAAMF,EAAYrL,GAAc,aAAI/B,GAAQ,CACxC,UACA,UACA,YAGJ,GAAGqN,EAAYC,EACX,IAAI,IAAI5R,EAAE2R,EAAU,EAAG3R,GAAG4R,IAAa5R,EAAG,CACtC,IAAM6R,EAAclC,EAAU3P,GAAG8F,KAC3BgM,EAAcnC,EAAU3P,GAAGiR,UAC3Bc,EAAapC,EAAU3P,GAAG+F,KACb4J,EAAU3P,GAAGgR,UAChCU,EAAUG,EAAYjO,GAAtB,aAAgC8N,EAAUG,EAAYjO,IACtD8N,EAAUG,EAAYjO,GAAGiO,EAAY/N,GAAK,CAAEnB,SAAS,GACrD+O,EAAUK,EAAWnO,GAArB,aAA+B8N,EAAUK,EAAWnO,IACpD8N,EAAUK,EAAWnO,GAAGmO,EAAWjO,GAAnC,eAA6CgO,EAA7C,CAA0D1L,OAAO,IAR3B,MAWbsL,EAAUK,EAAWnO,GAAGmO,EAAWjO,GAApDpB,EAX8B,EAW9BA,MAAOD,EAXuB,EAWvBA,MASf,IARc,UAAVC,GAA+B,SAAVD,GAAqC,IAAjBsP,EAAWnO,GAAuB,UAAVlB,GAA+B,SAAVD,GAAqC,IAAjBsP,EAAWnO,KACrH8N,EAAUK,EAAWnO,GAAGmO,EAAWjO,GAAnC,eACO4N,EAAUK,EAAWnO,GAAGmO,EAAWjO,GAD1C,CAEIrB,MAAO,WAKoC,SAAhDiP,EAAUK,EAAWnO,GAAGmO,EAAWjO,GAAGrB,MAAkB,CACvD,GAAGsP,EAAWjO,EAAI+N,EAAY/N,IAAM,EAAG,CACnC4N,EAAUG,EAAYjO,GAAtB,aAAgC8N,EAAUG,EAAYjO,IAEtD,IAAMuC,EAAU,eAAQuL,EAAUG,EAAYjO,GAAGiO,EAAY/N,EAAE,IAC/D4N,EAAUG,EAAYjO,GAAGiO,EAAY/N,EAAE,GAAK,CACxCnB,SAAS,GAEb+O,EAAUG,EAAYjO,GAAGiO,EAAY/N,EAAE,GAAvC,eACOqC,EADP,CAEIC,OAAO,IAIf,GAAG2L,EAAWjO,EAAI+N,EAAY/N,KAAO,EAAG,CACpC4N,EAAUG,EAAYjO,GAAtB,aAAgC8N,EAAUG,EAAYjO,IAEtD,IAAMuC,EAAU,eAAQuL,EAAUG,EAAYjO,GAAGiO,EAAY/N,EAAE,IAC/D4N,EAAUG,EAAYjO,GAAGiO,EAAY/N,EAAE,GAAK,CACxCnB,SAAS,GAEb+O,EAAUG,EAAYjO,GAAGiO,EAAY/N,EAAE,GAAvC,eACOqC,EADP,CAEIC,OAAO,WAOvB,IAAI,IAAIpG,EAAE2R,EAAW3R,EAAE4R,IAAa5R,EAAG,CACnC,IAAM6R,EAAclC,EAAU3P,GAAG8F,KAC3BgM,EAAcnC,EAAU3P,GAAGiR,UAC3Bc,EAAapC,EAAU3P,GAAG+F,KAC1BiM,EAAarC,EAAU3P,GAAGgR,UAOhC,GANAU,EAAUG,EAAYjO,GAAtB,aAAgC8N,EAAUG,EAAYjO,IACtD8N,EAAUG,EAAYjO,GAAGiO,EAAY/N,GAArC,eAA+CgO,GAC/CJ,EAAUK,EAAWnO,GAArB,aAA+B8N,EAAUK,EAAWnO,IACpD8N,EAAUK,EAAWnO,GAAGmO,EAAWjO,GAAnC,eAA6CkO,GAGQ,SAAlDN,EAAUG,EAAYjO,GAAGiO,EAAY/N,GAAGrB,MAAkB,CACzD,GAAGoP,EAAY/N,EAAIiO,EAAWjO,KAAO,EAAG,CACpC4N,EAAUG,EAAYjO,GAAtB,aAAgC8N,EAAUG,EAAYjO,IAEtD,IAAMuC,EAAU,eAAQuL,EAAUG,EAAYjO,GAAGiO,EAAY/N,EAAE,IAC/D4N,EAAUG,EAAYjO,GAAGiO,EAAY/N,EAAE,GAAvC,eACOqC,EADP,CAEIC,OAAO,IAEXsL,EAAUG,EAAYjO,GAAGiO,EAAY/N,EAAE,GAAK,CACxCnB,SAAS,GAIjB,GAAGkP,EAAY/N,EAAIiO,EAAWjO,IAAM,EAAG,CACnC4N,EAAUG,EAAYjO,GAAtB,aAAgC8N,EAAUG,EAAYjO,IAEtD,IAAMuC,EAAU,eAAQuL,EAAUG,EAAYjO,GAAGiO,EAAY/N,EAAE,IAC/D4N,EAAUG,EAAYjO,GAAGiO,EAAY/N,EAAE,GAAvC,eACOqC,EADP,CAEIC,OAAO,IAEXsL,EAAUG,EAAYjO,GAAGiO,EAAY/N,EAAE,GAAK,CACxCnB,SAAS,KAM7B,GAAG,GAAKiP,GAAaA,EAAYjC,EAAUpO,OAAQ,CAAC,IAAD,EAI3CoO,EAAUiC,GAJiC,IAE3C9L,KAAWmM,EAFgC,EAEnCrO,EAAasO,EAFsB,EAEzBpO,EAFyB,IAG3CiC,KAAWoM,EAHgC,EAGnCvO,EAAawO,EAHsB,EAGzBtO,EAGtB4N,EAAUO,GAAV,aAAwBP,EAAUO,IAClCP,EAAUO,GAAOC,GAAjB,eACOR,EAAUO,GAAOC,GADxB,CAEIzO,SAAS,IAGbiO,EAAUS,GAAV,aAAwBT,EAAUS,IAClCT,EAAUS,GAAOC,GAAjB,eACOV,EAAUS,GAAOC,GADxB,CAEI3O,SAAS,IAKjB,OADAnM,QAAQC,IAAIma,GACLA,EgBjGWW,CAAe/N,EAAOqL,EAAWG,EAAWA,EAAUsB,GAClER,EAAmBH,GAAmBI,EAAca,GAEvD5B,EAAUsB,EAAK,IAAMzB,EAAUpO,QAE1BxI,EAASqX,IADC,UAATkB,GAA6B,cAATA,IAAyBE,EAAO,IAAM,GAAgB,UAATF,GAAoBE,EAAO,IAAM,EAC5E,CAAEpN,SAAS,GAEX,CAAEA,SAAS,KAEtCrL,EAASoV,GAAa,CAClB2B,UAAWA,EAAUsB,EACrBhO,YAAY,OAGhBrK,EAASqX,GAAc,CAAEhM,SAAS,KAClCrL,EAASoV,GAAa,CAClB2B,UAAWA,EAAUsB,EACrBhO,YAAY,MAGpBrK,EAAShB,GAAY,CACjBuM,MAAOoN,EACPb,aAAcD,EACdpN,QAAS,WAKJqD,GAAmB,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAH,OAAc,SAAE/N,EAAU6E,GAAe,IAC7DkI,EAAegB,EAAfhB,KAAMC,EAASe,EAATf,KADsD,EAM5DnI,IAN4D,IAE5DyT,OAAU/M,EAFkD,EAElDA,MAAOuM,EAF2C,EAE3CA,aAF2C,IAG5D5B,OAAUa,EAHkD,EAGlDA,UAKlB,IARoE,EAGvC1M,WAK7B,CAQA,IAAMnE,EAAOqF,EAAMwB,EAAKlC,GAAGkC,EAAKhC,GAC1BiD,EAAaV,GAAc,aAAI/B,GAAQ,CACzC,UACA,UACA,YAGJyC,EAAWhB,EAAKnC,GAAhB,aAA0BmD,EAAWhB,EAAKnC,IAC1CmD,EAAWhB,EAAKnC,GAAGmC,EAAKjC,GAAxB,eACO7E,EADP,CAEIwE,SAAS,EACT2C,OAAO,IAGXW,EAAWjB,EAAKlC,GAAhB,aAAyBmD,EAAWjB,EAAKlC,IACzCmD,EAAWjB,EAAKlC,GAAGkC,EAAKhC,GAAK,CACzBnB,SAAS,EACTc,SAAS,GAjCuD,MAqC3CsD,EAAWhB,EAAKnC,GAAGmC,EAAKjC,GAAzCpB,EArC4D,EAqC5DA,MAAOD,EArCqD,EAqCrDA,MASf,IARc,UAAVC,GAA+B,SAAVD,GAA+B,IAAXsD,EAAKnC,GAAuB,UAAVlB,GAA+B,SAAVD,GAA+B,IAAXsD,EAAKnC,KACzGmD,EAAWhB,EAAKnC,GAAGmC,EAAKjC,GAAxB,eACOiD,EAAWhB,EAAKnC,GAAGmC,EAAKjC,GAD/B,CAEIrB,MAAO,WAKyB,SAArCsE,EAAWhB,EAAKnC,GAAGmC,EAAKjC,GAAGrB,MAAkB,CAC5C,GAAGsD,EAAKjC,EAAIgC,EAAKhC,IAAM,EAAG,CACtBiD,EAAWjB,EAAKlC,GAAhB,aAA0BmD,EAAWjB,EAAKlC,IAE1C,IAAMuC,EAAU,eAAQY,EAAWjB,EAAKlC,GAAGkC,EAAKhC,EAAE,IAClDiD,EAAWjB,EAAKlC,GAAGkC,EAAKhC,EAAE,GAAK,CAC3BnB,SAAS,GAEboE,EAAWjB,EAAKlC,GAAGkC,EAAKhC,EAAE,GAA1B,eACOqC,EADP,CAEIC,OAAO,IAIf,GAAGL,EAAKjC,EAAIgC,EAAKhC,KAAO,EAAG,CACvBiD,EAAWjB,EAAKlC,GAAhB,aAA0BmD,EAAWjB,EAAKlC,IAE1C,IAAMuC,EAAU,eAAQY,EAAWjB,EAAKlC,GAAGkC,EAAKhC,EAAE,IAClDiD,EAAWjB,EAAKlC,GAAGkC,EAAKhC,EAAE,GAAK,CAC3BnB,SAAS,GAEboE,EAAWjB,EAAKlC,GAAGkC,EAAKhC,EAAE,GAA1B,eACOqC,EADP,CAEIC,OAAO,KAKnB,IAAMwK,EAAmBH,GAAmBI,EAAc9J,GAE1DhO,EAAShB,GAAY,CACjBuM,MAAOyC,EACP8J,aAAcD,EACdpN,QAAS,QAEbzK,EAASoV,GAAa,CAAE2B,UAAWA,EAAU,QAGjD,SAAUvV,GAAsB0D,GAAhC,yEAGuB,OAFbrG,EAAQqG,EAAO/E,QADzB,SAG6BqD,YAAKzF,GAAkB,CAC5Ca,IAAK,UACLE,oBACAC,mBACAC,YAAa8O,GACbjP,UARR,OAWI,OARM4E,EAHV,gBAWUjE,YAxNmB,+BA6M7B,OAYI,OAZJ,SAYUkE,YAAOD,GAZjB,wCAeO,SAAU0T,KAAV,iEACH,OADG,SACGxT,YA9NgB,2BA8NanC,IADhC,wCAIA,IAyEDsW,GAAe5K,KAAEC,UAAU5B,IACjCuM,GAAaC,UACbD,GAAapX,SAAQ,SAAAkK,GACjBA,EAAImN,aAGR,IAAMnU,GAAe,CACjBxF,OAAQ,KACRiC,MAAO,KACPkL,SACAuM,gBACArN,QAAS,KACTY,SAAS,EACTwL,UAAU,GAGC5S,gBAAa,kBAAC,GArTH,4BAsTD,SAACC,EAAD,OAAqB9F,EAArB,EAAU+B,QAAW/B,OAArB,sBACd8F,EADc,CAEjB9F,cAHoB,YAAC,GApTJ,2BAyTD,SAAC8F,EAAD,OAAqBqH,EAArB,EAAUpL,QAAWoL,MAArB,sBACbrH,EADa,CAEhBqH,QACAuM,aAAcJ,GAAmBxT,EAAM4T,aAAcvM,QARjC,YAAC,GAnTR,uBA6TD,SAACrH,EAAD,WAAU/D,QAAYoL,EAAtB,EAAsBA,MAAOuM,EAA7B,EAA6BA,aAAcrN,EAA3C,EAA2CA,QAA3C,sBACTvG,EADS,CAEZqH,QACAuM,eACArN,eAdoB,YAAC,GAlTT,sBAkUD,SAAAvG,GAAK,OAAIN,MAhBA,YAAC,GAjTF,6BAkUD,SAACM,EAAD,OAAqBmH,EAArB,EAAUlL,QAAWkL,QAArB,sBACfnH,EADe,CAElBmH,eAnBoB,YAAC,GAhTN,yBAqUD,SAACnH,EAAD,OAAqBmH,EAArB,EAAUlL,QAAWkL,QAArB,sBACXnH,EADW,CAEdmH,eAvBoB,YAAC,GAyBxBkM,IAAyB,SAAArT,GAAK,OAAIA,KAzBX,YAAC,GA0BxBsT,IAAyB,SAAAtT,GAAK,OAAIA,KA1BX,IA2BzBN,IE9QY2V,GA9ES,SAAC,GAA4B,IAA1B/O,EAAyB,EAAzBA,SAAUgP,EAAe,EAAfA,SAAe,EAC2B/U,aAAY,gBAAG6T,EAAH,EAAGA,OAAQE,EAAX,EAAWA,WAAYE,EAAvB,EAAuBA,KAAMxC,EAA7B,EAA6BA,OAA7B,MAA2C,CAC9H3K,MAAO+M,EAAO/M,MACduM,aAAcQ,EAAOR,aACrBzM,QAASiN,EAAOjN,QAChBwL,SAAUX,EAAOW,SACjBxM,WAAY6L,EAAO7L,WACnBoO,KAAMC,EAAKD,KACXF,KAAMC,EAAWD,SAPbhN,EADwC,EACxCA,MAAOuM,EADiC,EACjCA,aAAczM,EADmB,EACnBA,QAASwL,EADU,EACVA,SAAUxM,EADA,EACAA,WAAYoO,EADZ,EACYA,KAAMF,EADlB,EACkBA,KAU5DvY,EAAW2E,cAX+B,EAaxBgD,oBAAS,GAbe,mBAazCS,EAbyC,KAanCqR,EAbmC,KAehDzU,qBAAU,YACFuT,IAASnQ,GAAUoR,IAAapR,IAChCqR,GAAQ,KAEb,CAACrR,EAAMmQ,EAAMiB,IAEhBxU,qBAAU,WACFqF,GAGIrK,EAASoX,IADC,UAATmB,GAA6B,cAATA,IAAyBE,EAAO,IAAM,GAAgB,UAATF,GAAoBE,EAAO,IAAM,EACxE,CAAEpN,SAAS,GAEX,CAAEA,SAAS,OAG/C,CAACrL,EAAUyY,EAAMF,EAAMlO,IAE1BrF,qBAAU,WACN,OAAO,WACHhF,EAASd,SAEd,CAACc,IAOJ,IAAMnC,EAAU+G,uBAAY,SAACiG,EAAGE,GAC5B/K,EF4LuB,SAAC,GAAD,IAAM0Z,EAAN,EAAG7O,EAAU8O,EAAb,EAAU5O,EAAV,OAAsB,SAAC/K,EAAU6E,GAAc,IAAD,EAKrEA,IALqE,IAErEyT,OAAU/M,EAF2D,EAE3DA,MAAOuM,EAFoD,EAEpDA,aAAcrN,EAFsC,EAEtCA,QACrBoM,EAH2D,EAGrEX,OAAUW,SACI0B,EAJuD,EAIrEC,WAAcD,KAGdqB,GAAW,GACF,UAATrB,GAAoB1B,GAAuB,UAAT0B,IAAqB1B,KACvD+C,GAAW,GAGf,IAAI/O,EAAI6O,EACJ3O,EAAI4O,EAOR,GANGC,IACC/O,EAAI,EAAI6O,EACR3O,EAAI,EAAI4O,IAIRlP,GAAWc,EAAMV,GAAGE,GAAGpB,QAAU4O,MAClC9N,GAAYc,EAAMV,GAAGE,GAAGnB,SAAW2B,EAAMV,GAAGE,GAAGpB,QAAU4O,GAE5D,GAAG9N,GAAWc,EAAMV,GAAGE,GAAGnB,QAA1B,CAAoC,IACdxL,EAAayG,IAAvByT,OAAUla,OAElB4B,EAASyX,GAAkB,CACvBrZ,SACA2P,KAAM,CACFhB,KAAMtC,EACNuC,KAAM,CAACnC,IAAGE,aAPtB,CAcA,IAAIqJ,EAAcC,GAAa9I,EAAOV,EAAGE,GACnCiD,EAAaV,GAAc,aAAI/B,GAAQ,CACzC,UACA,YAGJ6I,EAAY1T,SAAQ,SAAA+S,GAChB,IAAMxG,EAAYH,GAASkB,EAAY,CAAEnD,IAAGE,KAAK,CAAEF,EAAG4I,EAAKR,GAAIlI,EAAG0I,EAAKP,KACvE,GAAIoB,GAAc/I,EAAMV,GAAGE,GAAGpB,MAAOsD,GAArC,CAIAe,EAAWyF,EAAKR,IAAhB,aAA2BjF,EAAWyF,EAAKR,KAC3C,IAAMtF,EAAYK,EAAWyF,EAAKR,IAAIQ,EAAKP,IAC3ClF,EAAWyF,EAAKR,IAAItK,OAAO8K,EAAKP,GAAI,EAApC,eACOvF,EADP,CAEI/D,SAAS,SAIjBoE,EAAWnD,GAAX,aAAqBmD,EAAWnD,IAChCmD,EAAWnD,GAAGE,GAAd,eACOiD,EAAWnD,GAAGE,GADrB,CAEIN,SAAS,IAGb,IAAMoN,EAAmBH,GAAmBI,EAAc9J,GAE1DhO,EAAShB,GAAY,CACjBuM,MAAOyC,EACP8J,aAAcD,EACdpN,QAAS,CAAEI,IAAGE,UEhQL8O,CAAgB,CAAEhP,IAAGE,SAC/B,CAAC/K,IAEEyL,EAAgB7G,uBAAY,SAAA5D,GAC9BA,EAAE8K,iBACF9L,GFqB+B,SAACA,EAAU6E,GAAc,IAAD,EACfA,IAApCyT,OAAU/M,EADyC,EACzCA,MAAOuM,EADkC,EAClCA,aACnB9J,EAAaV,GAAc,aAAI/B,GAAQ,CACzC,UACA,YAGEsM,EAAmBH,GAAmBI,EAAc9J,GAE1DhO,EAAShB,GAAY,CACjBuM,MAAOyC,EACP8J,aAAcD,EACdpN,QAAS,aEhCV,CAACzK,IAEA4Z,GAAW,IACD,UAATrB,GAA6B,cAATA,IAAyB1B,GAAuB,UAAT0B,IAAqB1B,KACjF+C,GAAW,GAGf,IAAIE,EAAcvO,EASlB,OARGqO,IACCE,EAAchC,GAGd1P,IACA0R,EAAW,aAAQC,KAInB,kBAAC,GAAD,CACIxO,MAAOuO,EACPzO,QAASA,EACTxN,QAASA,EACT4N,cAAeA,EACfjB,SAAUA,EACVH,WAAYA,K,gXC3ExB,IAAM2P,GAAqB9d,IAAOC,IAAV,MAYlB8d,GAAmB/d,IAAOC,IAAV,MAoBPiB,OAAMC,MAbC,SAAC,GAA4B,IAA1BmN,EAAyB,EAAzBA,SAAyB,EAAfgP,SAC/B,OACI,kBAACQ,GAAD,KACI,kBAACC,GAAD,KACI,kBAAC,GAAD,CACIzP,SAAUA,EACVgP,UAAU,SCmBfU,GA1CgB,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,QAAS3P,EAAe,EAAfA,SACjCxK,EAAW2E,cAEXyJ,EAAU,uCAAG,sBAAAnO,EAAA,6DACfD,EAAS4B,MADM,SAET2M,QAAQC,UAAUC,MAAK,WACzBzO,EAAS0B,GAAiB,CACtByY,gBAJO,iCAOR,GAPQ,2CAAH,qDAUhBnV,qBAAU,WACN,OAAO,WACHhF,EAAS4B,SAEd,CAAC5B,IAjBkD,MAmBtCqF,GAAS+I,EAAY,CAACpO,IAA/BkE,EAnB+C,oBAqBrBA,EAAzBiB,QAAyBjB,EAAhB9D,KAAgB8D,EAAV7D,MAYvB,OACI,kBAAC,GAAD,CACImK,SAAUA,EACVgP,UAAU,K,qyBCtCtB,IAAMY,GAAele,IAAOC,IAAV,MA2BZke,GAAgBne,IAAOC,IAAV,MAIbme,GAAkBpe,IAAOC,IAAV,MA8BNiB,OAAMC,MA1BL,SAAC,GAAoE,IAAlEqb,EAAiE,EAAjEA,KAAMJ,EAA2D,EAA3DA,OAAQza,EAAmD,EAAnDA,QAAS0c,EAA0C,EAA1CA,aAAcC,EAA4B,EAA5BA,aAAiBja,EAAW,yEAGhF,OAFAhC,QAAQC,IAAI,SAGR,kBAAC4b,GAAD,eACIvc,QAAS,kBAAMA,EAAQ6a,EAAK/X,MAC5B4Z,aAAcA,EACdC,aAAcA,GACVja,GAEJ,kBAAC8Z,GAAD,KACK3B,EAAKrH,MAEV,kBAACiJ,GAAD,KACK5B,EAAK+B,aAETnC,EACA,kBAAC,GAAD,CACG6B,QAASzB,EAAK/X,IACd6J,SAAW,SAEb,SC9BCjG,gBA1BU,SAAC,GAA0B,IAAxBC,EAAuB,EAAvBA,QAAYjE,EAAW,6BACjBoH,oBAAS,GADQ,mBACvC2Q,EADuC,KAC/BoC,EAD+B,KAGzCH,EAAe3V,uBAAY,WAC7B8V,GAAU,KACX,IAEGF,EAAe5V,uBAAY,WAC7B8V,GAAU,KACX,IAEG7c,EAAU+G,uBAAY,SAAC+V,GACzBnW,EAAQO,KAAR,gBAAsB4V,MACvB,CAACnW,IAEJ,OACI,kBAAC,GAAD,iBACQjE,EADR,CAEI+X,OAAQA,EACRza,QAASA,EACT0c,aAAcA,EACdC,aAAcA,Q,04BCnB1B,IAEMI,GAAe1e,IAAOC,IAAV,MAiBZ0e,GAAuB3e,IAAOC,IAAV,MAKpB2e,GAAwB5e,IAAOC,IAAV,MAOrB4e,GAAkB7e,IAAOC,IAAV,MA6DNiB,OAAMC,MAnDF,SAAC,GAA4B,IAA1B2d,EAAyB,EAAzBA,MAAOC,EAAkB,EAAlBA,YAErBxU,EAAO,GAERuU,IACCvU,EAAI,aAAQuU,IAchB,IAXA,IASME,EAAU,GACVC,EAAUC,KAAKC,MAAM5U,EAAK+B,OA3DnB,GA4DLvB,EAAE,EAAGA,GAAGkU,IAAWlU,EACvBiU,EAAQnW,KACJ,kBAAC6V,GAAD,CACIja,IAAG,uBAAkBsG,IAGjBR,EAAKkC,OAAO,EAlEf,GAkE4BhC,KAAI,SAAA+R,GAAI,OAC7B,kBAAC,GAAD,CACI/X,IAAG,iBAAY+X,EAAKrH,MACpBqH,KAAMA,EACN7a,QAAS,SAAAmD,GAAC,OAAIia,EAAYja,EAAG0X,EAAK/X,aAQ1D,OACI,kBAACka,GAAD,KACI,kBAACC,GAAD,KACI,kBAACC,GAAD,KACKG,IAGT,kBAAC,KAAYlR,SAAb,CAAsB5F,MAAO,CAAEkF,MApCf,CACpBgS,SAAU,WACVC,IAAK,IACLC,KAAM,IACNjS,MAAO,QACPC,OAAQ,QACRU,QAAS,MACTuR,QAAS,KA8BD,kBAAC,KAAD,WC9EDC,GAVa,WAAO,IACvBV,EAAUvW,aAAY,kBAAgB,CAC1CuW,MAD0B,EAAGA,MAChBA,UADTA,MAIR,OACI,kBAAC,GAAD,CAAYA,MAAOA,K,2SCR3B,IAAMW,GAAezf,IAAOC,IAAV,MAiBHiB,OAAMC,MARL,WACZ,OACI,kBAACse,GAAD,SCLOC,GANU,WACrB,OACI,kBAAC,GAAD,OCkBOC,GArBiB,SAACjY,GAAkB,IAAD,EACF+D,mBAAS/D,GADP,mBACvCkY,EADuC,KACvBC,EADuB,KAExCrL,EAAMC,iBAAO,MAEbqL,EAAoBpX,uBAAY,SAAA5D,GAC/B0P,EAAIG,UAAYH,EAAIG,QAAQoL,SAASjb,EAAEyQ,SACtCsK,GAAkB,KAEvB,IAUH,OAPA/W,qBAAU,WAEN,OADAkX,SAASC,iBAAiB,QAASH,GAC5B,WACHE,SAASE,oBAAoB,QAASJ,MAE3C,CAACA,IAEG,CAAEtL,MAAKoL,iBAAgBC,sB,kgDCjBlC,I,GAAMM,GAAsBngB,IAAOC,IAAV,MAInBmgB,GAAYpgB,IAAOC,IAAV,MAYTogB,GAAiBrgB,IAAOC,IAAV,MAiBdqgB,GAA6BtgB,IAAOC,IAAV,MAa1BsgB,GAAwBvgB,IAAOC,IAAV,MAmDZiB,OAAMC,MApCH,SAAC,GAQZ,IAPHqf,EAOE,EAPFA,KACArL,EAME,EANFA,KACA5K,EAKE,EALFA,KACAkW,EAIE,EAJFA,UACAb,EAGE,EAHFA,eACAc,EAEE,EAFFA,iBACAC,EACE,EADFA,cAEA,OACI,kBAACR,GAAD,KACI,kBAACC,GAAD,KACKI,GAEL,kBAACH,GAAD,CACI7L,IAAKiM,EACL9e,QAAS+e,GAERvL,GAEJyK,GACG,kBAACU,GAAD,KACK/V,EAAKE,KAAI,SAAAmW,GAAU,OAChB,kBAACL,GAAD,CACI9b,IAAKmc,EACLjf,QAAS,kBAAMgf,EAAcC,KAE5BA,WCvFhBzZ,GAAc1B,YAFN,uBAEiC,SAAAxB,GAAO,OAAIA,KACpDmD,GAAa3B,YAFN,sBAEgC,SAAAxB,GAAO,OAAIA,KAEzDyD,GAAe,CACjB+C,IAAK,YACLoW,QAAS,CAAC,YAAa,cAAe,gBACtCC,KAAM,SACNC,SAAU,CAAC,SAAU,QACrBC,YAAa,GACbC,UAAW,GACXC,OAAQ,CACJF,YAAa,CACT/K,IAAK,EACLJ,IAAK,GACLsL,KAAM,GAEVF,UAAW,CACPhL,IAAK,EACLJ,IAAK,GACLsL,KAAM,IAGd3T,MAAO,SAGIzF,gBAAa,kBAAC,GA3BR,uBA4BD,SAACC,EAAD,WAAU/D,QAAWQ,EAArB,EAAqBA,IAAKyD,EAA1B,EAA0BA,MAA1B,sBACTF,EADS,eAEXvD,EAAMyD,OAHa,YAAC,GA1BT,sBA+BD,SAAAF,GAAK,OAAIN,MALA,IAMzBA,ICMY0Z,GAlCY,SAAC,GAAc,IAAZZ,EAAW,EAAXA,KAAW,EACdjY,aAAY,gBAAG8Y,EAAH,EAAGA,OAAH,MAAiB,CAChDlM,KAAMkM,EAAOb,GACbjW,KAAM8W,EAAO,GAAD,OAAIb,EAAJ,aAFRrL,EAD6B,EAC7BA,KAAM5K,EADuB,EACvBA,KAKRzG,EAAW2E,cANoB,EAQyBkX,IAAwB,GAAzEc,EARwB,EAQ7BjM,IAAgBoL,EARa,EAQbA,eAAgBC,EARH,EAQGA,kBAElCa,EAAmBhY,uBAAY,WACjCmX,GAAkB,SAAAlU,GAAS,OAAKA,OACjC,CAACkU,IAEEc,EAAgBjY,uBAAY,SAAAyM,GAC9BrR,EAASqD,GAAY,CACjB1C,IAAK+b,EACLtY,MAAOiN,OAEZ,CAACrR,EAAU0c,IAEd,OACI,kBAAC,GAAD,CACIA,KAAMA,EACNrL,KAAMA,EACN5K,KAAMA,EACNkW,UAAWA,EACXb,eAAgBA,EAChBc,iBAAkBA,EAClBC,cAAeA,K,mvDCjC3B,IAAMW,GAAmBthB,IAAOC,IAAV,MAShBshB,GAAiBvhB,IAAOC,IAAV,MAQduhB,GAAcxhB,IAAOuT,MAAV,MAKC,SAAA5S,GACV,OAAGA,EAAM6f,KAEC,0EAyBZJ,GAAYpgB,IAAOC,IAAV,MAYTwhB,GAAazhB,IAAOC,IAAV,MAkCDiB,OAAMC,MAxBN,SAAC,GAAuC,IAArCmT,EAAoC,EAApCA,SAAUkM,EAA0B,EAA1BA,KAAMtY,EAAoB,EAApBA,MAAOgZ,EAAa,EAAbA,OAC/B/L,EAAOqL,EAAKkB,UAAU,EAAGlB,EAAKlU,OAAS,GAE7C,OACI,kBAACgV,GAAD,KACI,kBAACC,GAAD,KACI,kBAACC,GAAD,eACIrf,KAAK,QACLmS,SAAUA,GACN4M,EAHR,CAIIV,KAAMA,EACNtY,MAAOA,MAGf,kBAACuZ,GAAD,KACI,kBAAC,GAAD,KACKtM,GAEJjN,OC/DFyZ,GAxBS,SAAC,GAAc,IAAZnB,EAAW,EAAXA,KAAW,EACRjY,aAAY,gBAAG8Y,EAAH,EAAGA,OAAH,MAAiB,CACnDnZ,MAAOmZ,EAAOb,GACdU,OAAQG,EAAOH,OAAOV,OAFlBtY,EAD0B,EAC1BA,MAAOgZ,EADmB,EACnBA,OAITpd,EAAW2E,cAEX6L,EAAW5L,uBAAY,SAAA5D,GACzBhB,EAASqD,GAAY,CACjB1C,IAAK+b,EACLtY,MAAOpD,EAAEyQ,OAAOrN,WAErB,CAACpE,EAAU0c,IAEd,OACI,kBAAC,GAAD,CACIlM,SAAUA,EACVkM,KAAMA,EACNtY,MAAOA,EACPgZ,OAAQA,K,gaCpBpB,IAAMU,GAAY5hB,IAAOC,IAAV,MASS,SAAAU,GAAK,OAAIA,EAAMkhB,SAAW,qBA6BnC3gB,OAAMC,MAvBR,SAAC,GAAgC,IAA9B0gB,EAA6B,EAA7BA,QAASrB,EAAoB,EAApBA,KAAM7e,EAAc,EAAdA,QAErBmgB,EAAW,CACb1U,MAAO,CACHD,MAAOqT,EACP1U,OAAO,2BAAD,OAJY,UAAT0U,EAAmB,QAAU,QAIhC,KACNnT,MAAO,OACPC,OAAQ,SAIhB,OACI,kBAACsU,GAAD,CACIC,QAASA,EAAU,EAAI,EACvBlgB,QAAS,kBAAMA,EAAQ6e,KAEvB,kBAAC,KAAY1S,SAAb,CAAsB5F,MAAO4Z,GACzB,kBAAC,KAAD,WCLDC,GA1BO,SAAC,GAAsB,IAApBC,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,MACpBzU,EAAUjF,aAAY,kBAAiB,CAC3CiF,MAD0B,EAAG6T,OACf7T,UADVA,MAIF1J,EAAW2E,cAEX9G,EAAU+G,uBAAY,SAAAR,GACxBpE,EAASqD,GAAY,CACjB1C,IAAK,QACLyD,aAEL,CAACpE,IAEE0c,EAAOwB,EAAQ,QAAUC,EAAQ,QAAU,KAC3CJ,EAAUrU,IAAUgT,EAE1B,OACI,kBAAC,GAAD,CACIA,KAAMA,EACNqB,QAASA,EACTlgB,QAASA,K,szECpBrB,I,GAAMugB,GAAgBliB,IAAOiI,KAAV,MASb7H,GAAaJ,IAAOC,IAAV,MAKVkiB,GAAuBniB,IAAOC,IAAV,MAMpBmiB,GAAoBpiB,IAAOC,IAAV,MAOjBoiB,GAAkBriB,IAAOC,IAAV,MAUf8T,GAAc/T,IAAOC,IAAV,MAQXqiB,GAAoBtiB,IAAOC,IAAV,MAMjBsiB,GAAeviB,IAAOgU,OAAV,MAkCZoM,GAAYpgB,IAAOC,IAAV,MA4CAiB,OAAMC,MAhCJ,SAAC,GAAkB,IAAhBkT,EAAe,EAAfA,SAChB,OACI,kBAAC6N,GAAD,CAAe7N,SAAUA,GACrB,kBAAC,GAAD,iBAGA,kBAAC8N,GAAD,KACI,kBAACK,GAAD,CAAoBhC,KAAK,QACzB,kBAACgC,GAAD,CAAoBhC,KAAK,UAE7B,kBAAC4B,GAAD,KACI,kBAAC,GAAD,CAAiB5B,KAAK,gBACtB,kBAAC,GAAD,CAAiBA,KAAK,eAE1B,kBAAC6B,GAAD,KACI,kBAAC,GAAD,cAGA,kBAAC,GAAD,CAAeL,OAAK,IACpB,kBAAC,GAAD,CAAeC,OAAK,KAExB,kBAAC,GAAD,KACI,kBAACK,GAAD,KACI,kBAACC,GAAD,CAAcpgB,KAAK,UAAnB,gB,YCzGVmD,I,YAWOmd,IAxBJjd,GAAmBC,YAFN,2BAGbC,GAAsBD,YAFN,8BAOhB7C,GAAmB6C,YAFN,2BAEsC,SAAAxB,GAAO,OAAIA,KAC9DpB,GAAkB4C,YAJN,0BAIqC,SAAAxB,GAAO,OAAIA,KAC5DjB,GAAayC,YAHN,qB,GAK8ChC,GAAyB,qB,qBAAnFif,G,MAAaC,G,MAAqBC,G,MAC7BC,GAAkBnf,GAAmBgf,IChBxB,SAAAjgB,GAAM,OAC5BsD,KAAMgB,KAAK,aAActE,MDiB7B,SAAU6C,KAAV,uEACuB,OADvB,SAC6BgC,YAAKzF,GAAkB,CAC5Ca,IAAK,SACLE,oBACAC,qBAJR,OAOI,OANM0E,EADV,gBAOUjE,YArBmB,8BAc7B,OAQI,OARJ,SAQUkE,YAAOD,GARjB,wCAWO,SAAUkb,KAAV,iEACH,OADG,SACGhb,YA3BgB,0BA2BanC,IADhC,wCAIP,IAAMoC,GAAe,CACjBxF,OAAQ,KACR4c,MAAO,KACP3a,MAAO,MAGI4D,gBAAa,kBAAC,GA9BH,2BA+BD,SAACC,EAAD,OAAqB9F,EAArB,EAAU+B,QAAW/B,OAArB,sBACd8F,EADc,CAEjB9F,cAHoB,YAAC,GA/BJ,0BAoCD,SAAC8F,EAAD,OAAqB8W,EAArB,EAAU7a,QAAW6a,MAArB,sBACb9W,EADa,CAEhB8W,aAPoB,YAAC,GA7BT,qBAsCD,SAAA9W,GAAK,OAAIN,MATA,YAAC,GAUxBib,IAAsB,SAAA3a,GAAK,OAAIA,KAVR,YAAC,GAWxB4a,IAAsB,SAAC5a,EAAD,OAAmB7D,EAAnB,EAAUF,QAAV,sBAChB+D,EADgB,CAEnB7D,aAboB,IAezBuD,IEbYW,gBArCW,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACcC,aAAY,gBAAG8Y,EAAH,EAAGA,OAAH,MAAiB,CAC9E5W,IAAK4W,EAAO5W,IACZqW,KAAMO,EAAOP,KACbE,YAAaK,EAAOL,YACpBC,UAAWI,EAAOJ,UAClBzT,MAAO6T,EAAO7T,UALV/C,EAD+B,EAC/BA,IAAKqW,EAD0B,EAC1BA,KAAME,EADoB,EACpBA,YAAaC,EADO,EACPA,UAAWzT,EADJ,EACIA,MAQrC1J,EAAW2E,cAEX4L,EAAW3L,uBAAY,SAAA5D,GACzBA,EAAE8K,iBACF,sBAAC,4BAAA7L,EAAA,sEACqBD,EAAS+e,GAAgB,CACvCpY,MACAqW,OACAE,cACAC,YACAzT,WANP,OACS/I,EADT,OASG6D,EAAQO,KAAR,gBAAsBpE,IATzB,0CAAD,KAWD,CAACX,EAAUwE,EAASmC,EAAKqW,EAAME,EAAaC,EAAWzT,IAQ1D,OANA1E,qBAAU,WACN,OAAO,WACHhF,EAASsD,SAEd,CAACtD,IAGA,kBAAC,GAAD,CAAUuQ,SAAUA,O,ukBClC5B,I,GAAMyO,GAAkB9iB,IAAOC,IAAV,MAQfuQ,GAAiBrQ,YAAH,MAQdsQ,GAAgBzQ,IAAOC,IAAV,KACbuQ,IAIAE,GAAiB1Q,IAAOC,IAAV,KACduQ,IAoBStP,OAAMC,MAhBF,WACf,OACI,oCACI,kBAAC2hB,GAAD,KACI,kBAAC,GAAD,KACI,kBAAC,GAAD,OAEJ,kBAAC,GAAD,MACA,kBAAC,GAAD,KACI,kBAAC,GAAD,YCILC,GArCa,WACxB,IAAMjf,EAAW2E,cAEXyJ,EAAU,uCAAG,sBAAAnO,EAAA,sEACTD,EAASgC,MADA,cAGfhC,EAAS4B,MAHM,SAIT2M,QAAQC,UAAUC,MAAK,WACzBzO,EAAS0B,SALE,iCAOR,GAPQ,2CAAH,qDAUhBsD,qBAAU,WACN,OAAO,WACHhF,EAASd,SAEd,CAACc,IAjB0B,MAmBdqF,GAAS+I,EAAY,CAAEpO,IAAhCkE,EAnBuB,oBAqBGA,EAAzBiB,QAAyBjB,EAAhB9D,KAAgB8D,EAAV7D,MAWvB,OACI,kBAAC,GAAD,OCtBO6e,GAbE,WACb,OACI,oCACI,kBAAC,IAAD,KACI,4DAEJ,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,Q,iCCcF1d,I,YAeO2d,IAnCJzd,GAAmBC,YAFN,0BAEsC,SAAAxB,GAAO,OAAIA,KAC9DyB,GAAsBD,YAFN,6BAQhB7C,GAAmB6C,YAJN,0BAIsC,SAAAxB,GAAO,OAAIA,KAC9DpB,GAAkB4C,YAJN,yBAIqC,SAAAxB,GAAO,OAAIA,KAC5DnB,GAAc2C,YAJN,qBAIiC,SAAAxB,GAAO,OAAIA,KACpDjB,GAAayC,YAJN,oBAQPyd,GAAkBzd,YAFN,yBAEqC,SAAAxB,GAAO,OAAIA,KAC5Dkf,GAAsB1d,YAFN,6B,GAIwChC,GAAyB,qB,qBAAtF2f,G,MAAcC,G,MAAsBC,G,MAC/BC,GAAmB7f,GAAmB0f,ICzBxB,SAAA7gB,GAAO,OAC9BwD,KAAMgB,KAAK,wBAAyBxE,MD0BxC,SAAU+C,GAAsB0D,GAAhC,yEAGuB,OAFbrG,EAAQqG,EAAO/E,QADzB,SAG6BqD,YAAKzF,GAAkB,CAC5Ca,IAAK,QACLE,oBACAC,mBACAC,eACAH,UARR,OAWI,OARM4E,EAHV,gBAWUjE,YAhCmB,6BAqB7B,OAYI,OAZJ,SAYUkE,YAAOD,GAZjB,wCAeO,SAAU0b,KAAV,iEACH,OADG,SACGxb,YAtCgB,yBAsCanC,IADhC,wCAIP,IAAMoC,GAAe,CACjBxF,OAAQ,KACRshB,SAAU,GACVC,KAAM,IAGK1b,gBAAa,kBAAC,GA1CH,0BA2CD,SAACC,EAAD,OAAqB9F,EAArB,EAAU+B,QAAW/B,OAArB,sBACd8F,EADc,CAEjB9F,cAHoB,YAAC,GAzCJ,yBA8CD,SAAC8F,EAAD,WAAU/D,QAAWvC,EAArB,EAAqBA,SAAUyL,EAA/B,EAA+BA,MAAO5K,EAAtC,EAAsCA,QAAtC,sBACbyF,EADa,CAEhBwb,SAAU,CAAC,CAAE9hB,WAAUyL,QAAO5K,iBAPV,YAAC,GAxCR,qBAiDD,SAACyF,EAAD,WAAU/D,QAAWvC,EAArB,EAAqBA,SAAUyL,EAA/B,EAA+BA,MAAO5K,EAAtC,EAAsCA,QAAtC,sBACTyF,EADS,CAEZwb,SAAS,GAAD,oBAAOxb,EAAMwb,UAAb,CAAuB,CAAE9hB,WAAUyL,QAAO5K,kBAX9B,YAAC,GAaxB8gB,IAAuB,SAAArb,GAAK,OAAIA,KAbT,YAAC,GAcxBsb,IAAuB,SAAAtb,GAAK,OAAIA,KAdT,YAAC,GAhCA,6BA+CD,SAAAA,GAAK,sBACtBA,EADsB,CAEzByb,KAAM,QAjBc,YAAC,GAjCJ,yBAoDD,SAACzb,EAAD,OAAmByb,EAAnB,EAAUxf,QAAV,sBACb+D,EADa,CAEhByb,YArBoB,YAAC,GAvCT,oBA8DD,SAAAzb,GAAK,OAAIN,MAvBA,IAwBzBA,I,8yGEzEH,IAAMgc,GAAkB1jB,IAAOiI,KAAV,MAIf0b,GAAiB3jB,IAAOC,IAAV,MAMd2jB,GAAkB5jB,IAAOC,IAAV,MAMf4jB,GAAY7jB,IAAOC,IAAV,MAUT6jB,GAAgB9jB,IAAOC,IAAV,MAUb8jB,GAAiB/jB,IAAOuT,MAAV,MAYdyQ,GAAkBhkB,IAAOgU,OAAV,MAefiQ,GAAejkB,IAAOC,IAAV,MASZ,SAAAU,GAAK,MAAoB,OAAhBA,EAAM8M,OAAkBtN,YAAxB,SAIT,SAAAQ,GAAK,MAAoB,UAAhBA,EAAM8M,OAAqBtN,YAA3B,SAIT,SAAAQ,GAAK,MAAoB,WAAhBA,EAAM8M,OAAsBtN,YAA5B,SAKT+jB,GAAelkB,IAAOC,IAAV,MAqBZ,SAAAU,GAAK,MAAoB,UAAhBA,EAAM8M,OAAqBtN,YAA3B,SAoBTgkB,GAAU,SAAC,GAAyB,IAClCC,EADW3W,EAAsB,EAAtBA,MAAO1M,EAAe,EAAfA,SAsBtB,MApBa,OAAV0M,GAMiB,UAAVA,EALN2W,EACI,kBAACF,GAAD,CAAczW,MAAOA,GAChB1M,GASO,WAAV0M,IACN2W,EACI,oCACKrjB,IAMT,oCACKqjB,IAKPC,GAAUnjB,IAAMC,MAAK,YAAmC,IAAhCoB,EAA+B,EAA/BA,QAAS+hB,EAAsB,EAAtBA,OAAWjgB,EAAW,oCACnDoJ,EAAQlL,EAAQb,SAAYa,EAAQb,WAAa4iB,EAAS,KAAO,QAAW,SAC5Eb,EAAiB,UAAVhW,EAAoBlL,EAAQb,SAAW,MAAQa,EAAQA,QAAUA,EAAQA,QAEtF,OACI,kBAAC0hB,GAAD,iBACQ5f,EADR,CAEI8I,MAAO5K,EAAQ4K,MACfM,MAAOA,IAEP,kBAAC,GAAD,CAASA,MAAOA,GACXgW,OA8CFviB,OAAMC,MAxCR,SAAC,GAAsD,IAApDqiB,EAAmD,EAAnDA,SAAUnP,EAAyC,EAAzCA,SAAUC,EAA+B,EAA/BA,SAAUmP,EAAqB,EAArBA,KAAM/hB,EAAe,EAAfA,SAC1C8S,EAAMC,mBAKZ,OAJA3L,qBAAU,WACN0L,EAAIG,QAAQ4P,UAAY/P,EAAIG,QAAQ6P,eACrC,CAAChB,IAGA,oCACI,kBAACE,GAAD,CAAiBrP,SAAUA,GACvB,kBAACsP,GAAD,KACI,kBAACC,GAAD,KACI,kBAACC,GAAD,CAAWrP,IAAKA,GACXgP,EAAS/Y,KAAI,SAAClI,EAASmH,GAAV,OACV,kBAAC2a,GAAD,CACI5f,IAAKiF,EACL4a,OAAQ5iB,EACRa,QAASA,SAKzB,kBAACuhB,GAAD,KACI,kBAACC,GAAD,CACIzP,SAAUA,EACVpM,MAAOub,IAEX,kBAACO,GAAD,CACI3P,SAAUA,GAEV,kBAAC,KAAYvG,SAAb,CAAsB5F,MAAO,CAACkF,MAAO,CAAEC,MAAM,MAAOC,OAAO,SACvD,kBAAC,KAAD,eCnKjBmX,GArCO,WAClB,IAAM3gB,EAAW2E,cADO,EAGqBF,aAAY,gBAAGmc,EAAH,EAAGA,KAAMpI,EAAT,EAASA,WAAT,MAA2B,CAChFpa,OAAQwiB,EAAKxiB,OACbshB,SAAUkB,EAAKlB,SACfC,KAAMiB,EAAKjB,KACX/hB,SAAU4a,EAAW5a,aAJjBQ,EAHgB,EAGhBA,OAAQshB,EAHQ,EAGRA,SAAUC,EAHF,EAGEA,KAAM/hB,EAHR,EAGQA,SAO1B2S,EAAW3L,uBAAY,SAAA5D,GACzBA,EAAE8K,iBACF9L,EAASyf,GAAiB,CAAErhB,SAAQK,QAASkhB,KAC7C3f,EAASqf,QACV,CAACrf,EAAU2f,EAAMvhB,IAEdoS,EAAW5L,uBAAY,SAAA5D,GACzBhB,EAASof,GAAgBpe,EAAEyQ,OAAOrN,UACpC,CAACpE,IAQH,OANAgF,qBAAU,WACN,OAAO,WACHhF,EAASd,SAEd,CAACc,IAGA,kBAAC,GAAD,CACI0f,SAAUA,EACVnP,SAAUA,EACVC,SAAUA,EACVmP,KAAMA,EACN/hB,SAAUA,K,qiCCpCtB,IAAMijB,GAAa3kB,IAAOC,IAAV,MAQV,SAAAU,GAAK,OAAIA,EAAMwM,OAAShN,YAAf,SAGT,SAAAQ,GAAK,OAAIA,EAAMikB,MAAQ,KAASzkB,YAAvB,SAKT0kB,GAAiB7kB,IAAOC,IAAV,MAUd6kB,GAAa9kB,IAAOC,IAAV,MAWV8kB,GAAgB,SAAAC,GAClB,IAAIC,EAAgB,GAGpB,OAFAA,GAAiBC,OAAOhG,KAAKC,MAAM6F,EAAY,KAC/CC,GAAiBC,OAAOhG,KAAKC,MAAM6F,EAAY,MAgCpCG,GA5BD,SAAC,GAAqB,IAAnBP,EAAkB,EAAlBA,KAAMzX,EAAY,EAAZA,MAEbiY,EAASlG,KAAKC,MAAMyF,EAAO,KAC3BS,EAASnG,KAAKC,MAAOyF,EAAO,IAAS,KAG3C,YAAWU,GAARV,GAA8B,OAATA,EACb,kBAACD,GAAD,MAIP,kBAACA,GAAD,CACIC,KAAMA,EACNzX,MAAOA,EAAQ,EAAI,GAEnB,kBAAC0X,GAAD,KACKE,GAAcK,IAEnB,kBAACN,GAAD,UAGA,kBAACD,GAAD,KACKE,GAAcM,MCtChBE,GA3BQ,SAAC,GAAqB,IAAnBvD,EAAkB,EAAlBA,MAAO9V,EAAW,EAAXA,KAAW,EAEO3D,aAAY,gBAAGyR,EAAH,EAAGA,OAAQwC,EAAX,EAAWA,KAAX,MAAuB,CAC9EnC,UAAWL,EAAOK,UAClBD,UAAWJ,EAAOI,UAClBoL,MAAOhJ,EAAKgJ,MACZC,MAAOjJ,EAAKiJ,UAJRpL,EAFgC,EAEhCA,UAAWD,EAFqB,EAErBA,UAAWoL,EAFU,EAEVA,MAAOC,EAFG,EAEHA,MAO/Bb,EAAO5C,EAAQ3H,EAAYD,EAC3BjN,EAAQ6U,EAASwD,GAAmB,UAAVC,EAAsBD,GAAmB,UAAVC,EAE/D,OAAGvZ,EAEK,kBAAC,GAAD,CACI0Y,KAAMA,EACNzX,MAAOA,IAKX,kBAAC,GAAD,O,0fCpBZ,IAAMuY,GAAc1lB,IAAOC,IAAV,MAQX,SAAAU,GAAK,OAAIA,EAAMglB,SAAWxlB,YAAjB,SAKTigB,GAAYpgB,IAAOC,IAAV,MAyCAiB,OAAMC,MAlCN,SAAC,GAA8B,IAA5BykB,EAA2B,EAA3BA,MAAOzQ,EAAoB,EAApBA,KAAMwQ,EAAc,EAAdA,QACrBE,EAAY,CACdzY,MAAO,CACHE,OAAQ,OACRD,MAAO,MACPF,MAAO,QACP2Y,QAAS,OACTC,eAAgB,SAChBC,WAAY,WAIpB,OACI,kBAACN,GAAD,CAAaC,QAASA,EAAU,EAAI,GAC/BC,EAEO,kBAAC,KAAY9X,SAAb,CAAsB5F,MAAO2d,GACzB,kBAAC,KAAD,OAIJ,kBAAC,KAAY/X,SAAb,CAAsB5F,MAAO,CAAEkF,MAAM,eAAMyY,EAAUzY,MAAjB,CAAwBD,MAAO,YAC/D,kBAAC,KAAD,OAIZ,kBAAC,GAAD,KACKgI,OCpBF8Q,GA5BS,SAAC,GAAqC,IAAnChE,EAAkC,EAAlCA,MAAOD,EAA2B,EAA3BA,MAAO2D,EAAoB,EAApBA,QAASzZ,EAAW,EAAXA,KAAW,EACX3D,aAAY,gBAAGiU,EAAH,EAAGA,KAAH,MAAe,CACrE0J,UAAW1J,EAAKyF,MAChBkE,UAAW3J,EAAKwF,MAChBzD,YAAa/B,EAAK+B,gBAHd2H,EADiD,EACjDA,UAAWC,EADsC,EACtCA,UAAW5H,EAD2B,EAC3BA,YAMxB6H,EAAiB,IAAItO,IAAIyG,GACzBqH,EAAS5D,GAASoE,EAAeC,IAAIF,IAAgBlE,GAASmE,EAAeC,IAAIH,GACjF/Q,EAAQ6M,GAASmE,GAAelE,GAASiE,EAE/C,OAAGha,EAEK,kBAAC,GAAD,CACI0Z,MAAOA,EACPzQ,KAAMA,EACNwQ,QAASA,IAKb,kBAAC,GAAD,CACIA,QAASA,K,6gDCpBzB,IAAMW,GAA2BtmB,IAAOC,IAAV,MAMxBsmB,GAAqBvmB,IAAOC,IAAV,MAOlBumB,GAAiBxmB,IAAOC,IAAV,MAcdwmB,GAAgB,SAAC,GAAY,IAAX5X,EAAU,EAAVA,EAAGF,EAAO,EAAPA,EACvB,OAAOuW,OAAOwB,aAAa,GAAK7X,IAAM,EAAIF,IAGxCgY,GAAY3mB,IAAOC,IAAV,MAOT,SAAAU,GAAK,OAAIA,EAAMkhB,SAAW1hB,YAAjB,SAIT,SAAAQ,GAAK,OAAKA,EAAMkhB,SAAW1hB,YAAlB,SAOTwJ,GAAY3J,IAAOC,IAAV,MAQT2mB,GAAa5mB,IAAOC,IAAV,MAUV4mB,GAAY3lB,IAAMC,MAAK,YAAwC,IAArC0Q,EAAoC,EAApCA,KAAMnI,EAA8B,EAA9BA,MAAO/H,EAAuB,EAAvBA,QAASkgB,EAAc,EAAdA,QAClDxf,QAAQC,IAAI,aACZD,QAAQC,IAAIuP,GACZ,IAeIiV,EAAeC,EAfbC,EAAgBta,GAAYmF,EAAKmK,UAAUxO,OAC3CyZ,EAAY,CACd9Z,MAAO0E,EAAKmK,UAAUvO,MACtBL,MAAO,CACHC,MAAO,MACPvB,OAAO,2BAAD,OAAsD,UAAzB+F,EAAKmK,UAAUvO,MAAoB,QAAU,QAA1E,OAIRuO,EACF,kBAAC,KAAYlO,SAAb,CAAsB5F,MAAO+e,GACzB,kBAACD,EAAD,OAMJjL,EACA,yBAAK3O,MAAO,CAAEC,MAAO,SAoBzB,OAjBGwE,EAAKkK,UAAUvO,QACdsZ,EAAgBpa,GAAYmF,EAAKkK,UAAUvO,OAC3CuZ,EAAY,CACR5Z,MAAO0E,EAAKkK,UAAUtO,MACtBL,MAAO,CACHC,MAAO,MACPvB,OAAO,2BAAD,OAAsD,UAAzB+F,EAAKkK,UAAUtO,MAAoB,QAAU,QAA1E,OAGdsO,EACI,kBAAC,KAAYjO,SAAb,CAAsB5F,MAAO6e,GACzB,kBAACD,EAAD,QAOR,kBAACN,GAAD,KACI,kBAACI,GAAD,KACKld,EAAQ,GAEb,kBAACid,GAAD,CACIhlB,QAAS,kBAAMA,EAAQ+H,IACvBmY,QAASA,GAER7F,EACD,kBAAC,GAAD,KACKyK,GAAc5U,EAAKhB,OAExB,kBAAC,KAAY/C,SAAb,CAAsB5F,MAAO,CAAEkF,MAAO,CAAED,MAAO,sBAC3C,kBAAC,KAAD,OAEJ,kBAAC,GAAD,KACKsZ,GAAc5U,EAAKf,OAEvBiL,OAwBF7a,OAAMC,MAjBC,SAAC,GAAgD,IAA9CuZ,EAA6C,EAA7CA,UAAW/Y,EAAkC,EAAlCA,QAASkZ,EAAyB,EAAzBA,UAAWqM,EAAc,EAAdA,QACpD,OACI,kBAACZ,GAAD,KACI,kBAACC,GAAD,CAAoB/R,IAAK0S,GACpBxM,EAAUjQ,KAAI,SAACoH,EAAMnI,GAAP,OACX,kBAACmd,GAAD,CACIllB,QAASA,EACTkQ,KAAMA,EACNnI,MAAOA,EACPmY,QAASnY,IAAUmR,YC1G5BsM,GAtCgB,WAE3B,IAAMrjB,EAAW2E,cAFgB,EAIAF,aAAY,gBAAGyR,EAAH,EAAGA,OAAH,MAAiB,CAC1DU,UAAWV,EAAOU,UAClBG,UAAWb,EAAOa,cAFdH,EAJyB,EAIzBA,UAAWG,EAJc,EAIdA,UAKbqM,EAAUzS,mBAEhB3L,qBAAU,WACH+R,GAAa,GACTqM,EAAQvS,QAAQ4P,UAAwB,GAAZ1J,IAC3BqM,EAAQvS,QAAQ4P,UAAwB,GAAZ1J,GAEjB,GAAZA,EAAiBqM,EAAQvS,QAAQ4P,UAAY,MAC5C2C,EAAQvS,QAAQ4P,UAAwB,GAAZ1J,EAAiB,MAGjDqM,EAAQvS,QAAQ4P,UAAY,IAEjC,CAAC7J,EAAWG,IAEf,IAAMlZ,EAAU+G,uBAAY,SAAAgB,GACxB5F,EAASoY,GAAiB,CAAExS,aAC7B,CAAC5F,IAEJ,OACI,kBAAC,GAAD,CACInC,QAAWA,EACX+Y,UAAWA,EACXG,UAAWA,EACXqM,QAASA,K,kWCnCrB,IAAME,GAAgBpnB,IAAOC,IAAV,MAON,SAAAU,GAAK,OAAkB,IAAbA,EAAMikB,KAAc,OACrC,SAAAjkB,GAAK,OAAIA,EAAMikB,MAAQ,IAAOzkB,YAArB,SAWAe,OAAMC,MANJ,SAAC,GAAc,IAAZyjB,EAAW,EAAXA,KAChB,OACI,kBAACwC,GAAD,CAAexC,KAAMA,OCwBdyC,GAtCW,SAAC,GAA4B,IAA1BrF,EAAyB,EAAzBA,MAAOC,EAAkB,EAAlBA,MAAO/V,EAAW,EAAXA,KAAW,EACoB3D,aAAY,gBAAGyR,EAAH,EAAGA,OAAQwC,EAAX,EAAWA,KAAX,MAAuB,CACrGhC,WAAYR,EAAOQ,WACnBC,WAAYT,EAAOS,WACnB0L,UAAW3J,EAAKwF,MAChBkE,UAAW1J,EAAKyF,MAChB1D,YAAa/B,EAAK+B,gBALd/D,EAD0C,EAC1CA,WAAYC,EAD8B,EAC9BA,WAAY0L,EADkB,EAClBA,UAAWD,EADO,EACPA,UAAW3H,EADJ,EACIA,YADJ,EAS1B9S,mBAAS,GATiB,mBAS3CmZ,EAT2C,KASrC0C,EATqC,KA+BlD,OAlBAxe,qBAAU,WACN,IAAMsd,EAAiB,IAAItO,IAAIyG,GAC/B,GAAIrS,GAAQ8V,GAASoE,EAAeC,IAAIF,IAAgBja,GAAQ+V,GAASmE,EAAeC,IAAIH,GAAa,CACrG,IAAIqB,EAAWvF,EAAQxH,EAAaC,EACpC8M,EAAWrI,KAAKjJ,IAAIsR,EAAU,GAC9BD,EAAQC,QAERD,EAAQ,KAEb,CAACpb,EAAM8V,EAAOC,EAAOkE,EAAWD,EAAW1L,EAAYC,EAAY8D,IAUlE,kBAAC,GAAD,CACIqG,KAAMA,K,unBChClB,IAAM4C,GAAgBxnB,IAAOC,IAAV,MAWbwnB,GAAcznB,IAAOC,IAAV,MAaXynB,GAAc,CAChBta,MAAO,CACHD,MAAO,UACPE,MAAO,MACPC,OAAQ,MACRqa,gBAAiB,gBAgCVzmB,OAAMC,MA5BJ,SAAC,GAAuD,IAArDymB,EAAoD,EAApDA,WAAYC,EAAwC,EAAxCA,WAAYC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,WAEpD,OACI,kBAACP,GAAD,KACI,kBAACC,GAAD,CAAa9lB,QAASmmB,GAClB,kBAAC,KAAYha,SAAb,CAAsB5F,MAAOwf,IACzB,kBAAC,KAAD,QAGR,kBAACD,GAAD,CAAa9lB,QAASimB,GAClB,kBAAC,KAAY9Z,SAAb,CAAsB5F,MAAOwf,IACzB,kBAAC,KAAD,QAGR,kBAACD,GAAD,CAAa9lB,QAASkmB,GAClB,kBAAC,KAAY/Z,SAAb,CAAsB5F,MAAOwf,IACzB,kBAAC,KAAD,QAGR,kBAACD,GAAD,CAAa9lB,QAASomB,GAClB,kBAAC,KAAYja,SAAb,CAAsB5F,MAAOwf,IACzB,kBAAC,KAAD,YCpBLM,GAjCW,WAAO,IACrBtN,EAAcnS,aAAY,kBAAiB,CAC/CmS,UAD8B,EAAGV,OACfU,cADdA,UAIF5W,EAAW2E,cAEXqf,EAAapf,uBAAY,WAC3B5E,EAASoY,GAAiB,CAAExS,OAAQ,OACrC,CAAC5F,IAEE8jB,EAAalf,uBAAY,WAC3B5E,EAASoY,GAAiB,CAAEC,MAAO,OACpC,CAACrY,IAEE+jB,EAAanf,uBAAY,WAC3B5E,EAASoY,GAAiB,CAAEC,KAAM,OACnC,CAACrY,IAEEikB,EAAarf,uBAAY,WAC3B5E,EAASoY,GAAiB,CAAExS,MAAOgR,EAAUpO,OAAO,OACrD,CAACxI,EAAU4W,IAEd,OACI,kBAAC,GAAD,CACIkN,WAAYA,EACZC,WAAYA,EACZC,WAAYA,EACZC,WAAYA,K,8/EC7BxB,IAAME,GAAejoB,IAAOC,IAAV,MAQZ,SAAAU,GAAK,OAAIA,EAAMkZ,OAAS1Z,YAAf,SAKT,SAAAQ,GAAK,OAAIA,EAAM4B,SAAWpC,YAAjB,SAeT8jB,GAAejkB,IAAOC,IAAV,MAQZioB,GAAoBloB,IAAOC,IAAV,MAQjBkoB,GAAenoB,IAAOmL,IAAV,MAKZ/K,GAAaJ,IAAOC,IAAV,MASVwnB,GAAcznB,IAAOgU,OAAV,MASX,SAAArT,GAAK,OAAIA,EAAMynB,UAAYjoB,YAAlB,SAaTinB,GAAgBpnB,IAAOC,IAAV,MAQb,SAAAU,GAAK,OAAIA,EAAM0nB,MAAQloB,YAAd,SAyDAmoB,GAlDC,SAAC,GAAuD,IAChEC,EADWpmB,EAAoD,EAApDA,KAAMI,EAA8C,EAA9CA,QAASsX,EAAqC,EAArCA,MAAOwO,EAA8B,EAA9BA,KAAMD,EAAwB,EAAxBA,SAAUzmB,EAAc,EAAdA,QAoCrD,MAjCa,WAAVkY,EACC0O,EACI,kBAAC,GAAD,KACI,kBAAC,GAAD,CACIH,SAAUA,EACVzmB,QAAS,kBAAMA,GAAQ,KAF3B,KAMA,kBAAC,GAAD,CACIymB,SAAUA,EACVzmB,QAAS,kBAAMA,GAAQ,KAF3B,MAQQ,QAAVkY,IAEF0O,EADDhmB,EAEK,kBAAC,GAAD,KACKA,GAKL,kBAAC2lB,GAAD,KACI,kBAACC,GAAD,CAAc9c,IAAKmd,SAO/B,kBAACP,GAAD,CACI1lB,QAASA,EACTsX,MAAOA,GAEP,kBAAC,GAAD,CAAewO,KAAMA,IACrB,kBAAC,GAAD,KACKlmB,GAEJomB,ICjFEE,GA1DU,SAAC,GAAc,IAAZtmB,EAAW,EAAXA,KAAW,EACGoG,aAAY,gBAAGyR,EAAH,EAAGA,OAAQwC,EAAX,EAAWA,KAAX,MAAuB,CACrEta,OAAQ8X,EAAO9X,OACfwmB,WAAY1O,EAAO7X,GACnBqjB,MAAOhJ,EAAKgJ,UAHRtjB,EAD2B,EAC3BA,OAAQwmB,EADmB,EACnBA,WAAYlD,EADO,EACPA,MAMtB1hB,EAAW2E,cAPkB,EAQTgD,oBAAS,GARA,mBAQ3B4c,EAR2B,KAQrBM,EARqB,OASDld,oBAAS,GATR,mBAS3B2c,EAT2B,KASjBQ,EATiB,KAWnC9f,qBAAU,WACH4f,EAAW7O,QACV+O,GAAY,GACZD,GAAQ,MAEb,CAAC7kB,EAAU4kB,EAAW7O,QAEzB/Q,qBAAU,WACH4f,EAAWnmB,SACVomB,GAAQ,KAEb,CAACD,EAAWnmB,UAEfuG,qBAAU,YACF0c,GAASkD,EAAW7O,QACpB8O,GAAQ,GACR7kB,EAASgV,SAEd,CAAChV,EAAU0hB,EAAOkD,EAAW7O,MAAO1X,IAEvC2G,qBAAU,WACN,OAAO,WACHhF,EAASgV,SAEd,CAAChV,EAAU3B,IAEd,IAAMR,EAAU+G,uBAAY,SAAA1E,GACxBF,EAAS4V,GAAe,CACpBxX,SACAC,OACA6B,cAEJ4kB,GAAY,KACb,CAAC9kB,EAAU5B,EAAQC,IAEtB,OACI,kBAAC,GAAD,CACIA,KAAMA,EACN0X,MAAO6O,EAAW7O,MAClBtX,QAASmmB,EAAWnmB,QACpB8lB,KAAMA,EACND,SAAUA,EACVzmB,QAASA,K,ynBCpDrB,IAAMknB,GAAY7oB,IAAOC,IAAV,MAWTwnB,GAAcznB,IAAOC,IAAV,MAcXynB,GAAc,CAChBta,MAAO,CACHD,MAAO,UACPE,MAAO,MACPC,OAAQ,MACRqa,gBAAiB,gBAkCVzmB,OAAMC,MA9BR,SAAC,GAA4B,IAA1B2nB,EAAyB,EAAzBA,UAAWnnB,EAAc,EAAdA,QACvB,OACI,kBAACknB,GAAD,KACI,kBAAC,GAAD,CAAalnB,QAASmnB,GAClB,kBAAC,KAAYhb,SAAb,CAAsB5F,MAAO,CAAEkF,MAAM,eAAMsa,GAAYta,MAAnB,CAA0BC,MAAO,MAAOC,OAAO,UAC/E,kBAAC,KAAD,QAGR,kBAAC,GAAD,CAAa3L,QAAS,kBAAMA,EAAQ,UAChC,kBAAC,KAAYmM,SAAb,CAAsB5F,MAAO,CAAEkF,MAAM,eAAMsa,GAAYta,MAAnB,CAA0BC,MAAO,MAAOC,OAAO,UAC/E,kBAAC,KAAD,OAEJ,kBAAC,GAAD,CAAkBnL,KAAK,UAE3B,kBAAC,GAAD,CAAaR,QAAS,kBAAMA,EAAQ,UAChC,kBAAC,KAAYmM,SAAb,CAAsB5F,MAAOwf,IACzB,kBAAC,KAAD,OAEJ,kBAAC,GAAD,CAAkBvlB,KAAK,UAE3B,kBAAC,GAAD,CAAaR,QAAS,kBAAMA,EAAQ,eAChC,kBAAC,KAAYmM,SAAb,CAAsB5F,MAAOwf,IACzB,kBAAC,KAAD,OAEJ,kBAAC,GAAD,CAAkBvlB,KAAK,mBCzBxB4mB,GAjCO,WAAO,IAAD,EAC+BxgB,aAAY,gBAAGyR,EAAH,EAAGA,OAAQwC,EAAX,EAAWA,KAAX,MAAuB,CACtFta,OAAQ8X,EAAO9X,OACfyY,SAAUX,EAAOW,SACjB6K,MAAOhJ,EAAKgJ,MACZrW,QAAS6K,EAAO7K,QAChByL,SAAUZ,EAAOY,aALbD,EADgB,EAChBA,SAAUzY,EADM,EACNA,OAAQsjB,EADF,EACEA,MAAOrW,EADT,EACSA,QAASyL,EADlB,EACkBA,SAQpC9W,EAAW2E,cAEXqgB,EAAYpgB,uBAAY,WAC1B5E,EAAS+U,GAAc,CAAE8B,UAAWA,OACrC,CAAC7W,EAAU6W,IAERhZ,EAAU+G,uBAAY,SAAAvG,IACrBqjB,GAAUrW,GAAYyL,IACrB9W,EAAS2V,GAAY,CACjBvX,SACAC,UAEJ2B,EAASmV,SAEd,CAACnV,EAAU0hB,EAAOtjB,EAAQiN,EAASyL,IAEtC,OACI,kBAAC,GAAD,CACIkO,UAAWA,EACXnnB,QAASA,K,kRCzBrB,IAAMqnB,GAAchpB,IAAOC,IAAV,MAmGFiB,OAAMC,MA3FN,SAAC,GAAwB,IAAtBuc,EAAqB,EAArBA,SAAUxR,EAAW,EAAXA,KACxB,OACI,oCACKwR,EACG,oCACI,kBAAC,GAAD,CACIxR,KAAMA,EACN8V,OAAK,KAIb,oCACI,kBAAC,GAAD,CACI9V,KAAMA,EACN+V,OAAK,KAIjB,kBAAC+G,GAAD,KACKtL,EACG,oCACI,kBAAC,GAAD,CACIxR,KAAMA,EACN8V,OAAK,IAET,kBAAC,GAAD,CACI9V,KAAMA,EACN8V,OAAK,KAIb,oCACI,kBAAC,GAAD,CACI9V,KAAMA,EACN+V,OAAK,IAET,kBAAC,GAAD,CACI/V,KAAMA,EACN+V,OAAK,KAIjB,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACCvE,EACG,oCACI,kBAAC,GAAD,CACIxR,KAAMA,EACN+V,OAAK,EACL0D,SAAO,IAEX,kBAAC,GAAD,CACIzZ,KAAMA,EACN+V,OAAK,KAIb,oCACI,kBAAC,GAAD,CACI/V,KAAMA,EACN8V,OAAK,EACL2D,SAAO,IAEX,kBAAC,GAAD,CACIzZ,KAAMA,EACN8V,OAAK,MAMpBtE,EACG,oCACI,kBAAC,GAAD,CACIxR,KAAMA,EACN+V,OAAK,KAIb,oCACI,kBAAC,GAAD,CACI/V,KAAMA,EACN8V,OAAK,SC3DdiH,GApCS,WAAO,IAAD,EACC1gB,aAAY,gBAAG+T,EAAH,EAAGA,WAAYtC,EAAf,EAAeA,OAAf,MAA6B,CAChEqC,KAAMC,EAAWD,KACjB1B,SAAUX,EAAOW,aAFb0B,EADkB,EAClBA,KAAM1B,EADY,EACZA,SAKR7W,EAAW2E,cANS,EAQAgD,oBAAS,GART,mBAQlBS,EARkB,KAQZqR,EARY,KAW1BzU,qBAAU,WACHuT,IAASnQ,GACRqR,GAAQ,KAEb,CAACrR,EAAMmQ,IAEVvT,qBAAU,WACN,OAAO,WACHhF,EAASd,SAEd,CAACc,IAEJ,IAAI4Z,GAAW,EAKf,QAJc,UAATrB,GAA6B,cAATA,IAAyB1B,GAAuB,UAAT0B,IAAqB1B,KACjF+C,GAAW,GAIX,kBAAC,GAAD,CACIxR,KAAMA,EACNwR,SAAUA,K,knBC/BtB,I,GAAMwL,GAAsBlpB,IAAOC,IAAV,MASnBuQ,GAAiBrQ,YAAH,MAQdsQ,GAAgBzQ,IAAOC,IAAV,KACbuQ,IAIAE,GAAiB1Q,IAAOC,IAAV,KACduQ,IAkBStP,OAAMC,MAdE,WACnB,OACI,kBAAC+nB,GAAD,KACI,kBAAC,GAAD,KACI,kBAAC,GAAD,OAEJ,kBAAC,GAAD,MACA,kBAAC,GAAD,KACI,kBAAC,GAAD,W,YCzBN5jB,I,YAcO6jB,IAxBJ3jB,GAAmBC,YAFN,gCAGbC,GAAsBD,YAFN,mCAOhB7C,GAAmB6C,YAHN,gCAGsC,SAAAxB,GAAO,OAAIA,KAC9DpB,GAAkB4C,YAHN,+BAGqC,SAAAxB,GAAO,OAAIA,KAC5DjB,GAAayC,YAHN,0BAKpB,SAAUH,GAAsB0D,GAAhC,yEAGuB,OAFbrG,EAAQqG,EAAO/E,QADzB,SAG6BqD,YAAKzF,GAAkB,CAC5Ca,IAAK,cACLE,oBACAC,mBACAF,UAPR,OAUI,OAPM4E,EAHV,gBAUUjE,YArBmB,mCAW7B,OAWI,OAXJ,SAWUkE,YAAOD,GAXjB,wCAcO,SAAU4hB,KAAV,iEACH,OADG,SACG1hB,YA3BgB,+BA2BanC,IADhC,wCAIP,I,GAAMoC,GAAe,CACjBxF,OAAQ,KACRR,SAAU,KACV2a,KAAM,KACNlY,MAAO,MAGI4D,gBAAa,kBAAC,GAhCH,gCAiCD,SAACC,EAAD,OAAqB9F,EAArB,EAAU+B,QAAW/B,OAArB,sBACd8F,EADc,CAEjB9F,cAHoB,YAAC,GA/BJ,+BAoCD,SAAC8F,EAAD,WAAU/D,QAAoBI,GAA9B,EAAqBlC,KAArB,+CACb6F,EADa,GAEb3D,MAPiB,YAAC,GA9BT,0BAuCD,SAAA2D,GAAK,OAAIN,MATA,IAUzBA,I,YClCOpC,I,YAcO8jB,IAxBJ5jB,GAAmBC,YAFN,0BAGbC,GAAsBD,YAFN,6BAOhB7C,GAAmB6C,YAFN,0BAEsC,SAAAxB,GAAO,OAAIA,KAC9DpB,GAAkB4C,YAJN,yBAIqC,SAAAxB,GAAO,OAAIA,KAC5DjB,GAAayC,YAHN,oBAKpB,SAAUH,GAAsB0D,GAAhC,yEAGuB,OAFbrG,EAAQqG,EAAO/E,QADzB,SAG6BqD,YAAKzF,GAAkB,CAC5Ca,IAAK,QACLE,oBACAC,mBACAF,UAPR,OAUI,OAPM4E,EAHV,gBAUUjE,YArBmB,6BAW7B,OAWI,OAXJ,SAWUkE,YAAOD,GAXjB,wCAcO,SAAU6hB,KAAV,iEACH,OADG,SACG3hB,YA3BgB,yBA2BanC,IADhC,wCAIP,IAAMoC,GAAe,CACjBxF,OAAQ,KACRiC,MAAO,KACPoa,YAAa,IAGFxW,gBAAa,kBAAC,GA9BH,0BA+BD,SAACC,EAAD,OAAqB9F,EAArB,EAAU+B,QAAW/B,OAArB,sBACd8F,EADc,CAEjB9F,cAHoB,YAAC,GA/BJ,yBAoCD,SAAC8F,EAAD,WAAU/D,QAAoBI,GAA9B,EAAqBlC,KAArB,+CACb6F,EADa,GAEb3D,MAPiB,YAAC,GA7BT,oBAsCD,SAAA2D,GAAK,OAAIN,MATA,IAUzBA,ICgCY2hB,GA5DiB,SAAC,GAAiB,IAAfpL,EAAc,EAAdA,QACzBna,EAAW2E,cAEXyJ,EAAU,uCAAG,sBAAAnO,EAAA,sEACTD,EAASgC,MADA,cAEfhC,EAASwlB,MACTxlB,EAASylB,MACTzlB,EAAS0lB,MACT1lB,EAAS2lB,MACT3lB,EAAS4lB,MANM,SAOTrX,QAAQC,UAAUC,MAAK,WACzB,IAAMoX,EAASC,OACTpY,EAAQ,CACVyM,UACA0L,UAEJ7lB,EAAS+lB,GAAqBrY,IAC9B1N,EAASgmB,GAAqBtY,IAC9B1N,EAASimB,GAAqBvY,IAC9B1N,EAASkmB,GAAuBxY,IAChC1N,EAASmmB,GAAuBzY,OAjBrB,iCAmBR,GAnBQ,4CAAH,qDAsBhB1I,qBAAU,WACN,OAAO,WACHhF,EAASwlB,MACTxlB,EAASylB,MACTzlB,EAAS0lB,MACT1lB,EAAS2lB,MACT3lB,EAAS4lB,SAEd,CAAC5lB,IAEJgF,qBAAU,WACN,OAAO,WACHhF,EAASomB,MACTpmB,EAASqmB,SAEd,CAACrmB,IAxCyC,MA0C7BqF,GAAS+I,EAAY,CAAEpO,EAAUma,IAA1CjW,EA1CsC,oBA4CZA,EAAzBiB,QAAyBjB,EAAhB9D,KAAgB8D,EAAV7D,MAWvB,OACI,kBAAC,GAAD,OChDOkE,gBAvBM,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,QAAS8hB,EAAY,EAAZA,MAO7B,GANAthB,qBAAU,WACFshB,EAAM3nB,OAAOL,IACbkG,EAAQO,KAAK,OAElB,CAACP,EAAS8hB,KAETA,EAAM3nB,OAAOL,GAAI,OAAO,KAPa,IAQjCA,EAAOgoB,EAAM3nB,OAAbL,GACR,OAAIA,EAGA,oCACI,kBAAC,IAAD,KACI,gEAEJ,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAyB6b,QAAS7b,IAClC,kBAAC,GAAD,OATO,Q,ihCCZnB,I,GAAMioB,GAAkBrqB,IAAOC,IAAV,MAOfwnB,GAAcznB,IAAOgU,OAAV,MAoBX,SAAArT,GAAK,OAAIA,EAAM2pB,MAAQnqB,YAAd,SAqDAe,OAAMC,MAlCF,SAAC,GAKhB,IAL8E,IAA5DmpB,EAA2D,EAA3DA,KAAMC,EAAqD,EAArDA,KAAM5oB,EAA+C,EAA/CA,QAAS6oB,EAAsC,EAAtCA,eAAgBC,EAAsB,EAAtBA,gBACjDC,EAAsC,EAAzB1S,UAAUsS,EAAK,GAAK,GAAS,EAC1CK,EAAYD,EAAa,EAEzBE,EAAU,GAJ6D,WAKrE7f,GACJ6f,EAAQ/hB,KACJ,kBAAC,GAAD,CACIyhB,KAAMvf,IAAIuf,EACV3oB,QAAS,kBAAMA,EAAQoJ,IACvB8f,SAAU9f,EAAIwf,GAEbxf,KAPLA,EAAE2f,EAAY3f,GAAG4f,IAAa5f,EAAI,EAAlCA,GAYR,OACI,kBAACsf,GAAD,KACI,kBAAC,GAAD,CAAa1oB,QAAS8oB,GAClB,kBAAC,KAAY3c,SAAb,CAAsB5F,MAAO,CAAEkF,MAAO,CAAEC,MAAO,OAAQC,OAAQ,UAC3D,kBAAC,KAAD,QAGPsd,EACD,kBAAC,GAAD,CAAajpB,QAAS6oB,GAClB,kBAAC,KAAY1c,SAAb,CAAsB5F,MAAO,CAAEkF,MAAO,CAAEC,MAAO,OAAQC,OAAQ,UAC3D,kBAAC,KAAD,Y,wBCpE8C7J,GAAyB,yB,qBAAnFqnB,G,MAAaC,G,MAAqBC,G,SACkBvnB,GAAyB,uB,qBAA7EwnB,G,MAAWC,G,MAAmBC,G,SACsB1nB,GAAyB,uB,qBAA7E2nB,G,MAAWC,G,MAAmBC,G,SAC4B7nB,GAAyB,yB,qBAAnF8nB,G,MAAaC,G,MAAqBC,G,SACwBhoB,GAAyB,yB,qBAAnFioB,G,MAAaC,G,MAAqBC,G,MAC7BC,GAAWpmB,YAXN,uBAYLqmB,GAAUrmB,YAXN,sBAW6B,SAAAxB,GAAO,OAAIA,KAC5C8nB,GAAYtmB,YAXN,wBAW+B,SAAAxB,GAAO,OAAIA,KAChD+nB,GAAUvmB,YAXN,sBAW6B,SAAAxB,GAAO,OAAIA,KAC5CgoB,GAAYxmB,YAXN,wBAW+B,SAAAxB,GAAO,OAAIA,KAChDioB,GAAezmB,YAXL,4BAWkC,SAAAxB,GAAO,OAAIA,KACvDkoB,GAAkBzoB,GAAmBonB,IClBxB,SAAAroB,GAAM,OAC5BsD,KAAMgB,KAAK,iBAAkBtE,MDkBpB2pB,GAAgB1oB,GAAmBunB,ICbxB,SAAC,GAAoB,IAAlBzK,EAAiB,EAAjBA,KAAM8J,EAAW,EAAXA,KACvB+B,EAAcC,KAAGznB,UAAU,CAC7B2b,OACA8J,SAGJ,OAAOvkB,KAAMC,IAAN,yBAA4BqmB,ODQ1BE,GAAgB7oB,GAAmB0nB,ICjBxB,SAAC,GAAD,IAAGhpB,EAAH,EAAGA,GAAH,OACpB2D,KAAMC,IAAN,yBAA4B5D,ODiBnBoqB,GAAkB9oB,GAAmB6nB,ICHxB,SAAC,GAAD,IAAGnpB,EAAH,EAAGA,GAAH,OACtB2D,KAAM0mB,OAAN,yBAA+BrqB,ODGtBsqB,GAAkBhpB,GAAmBgoB,ICPxB,SAAC,GAAD,IAAGtpB,EAAH,EAAGA,GAAOiC,EAAV,6BACtB0B,KAAM4mB,MAAN,yBAA8BvqB,GAAMiC,MD4BlCqD,GAAe,CACjBklB,OAAQ,OACRC,KAAM,CACF,CACI1X,KAAM,YACN0M,SAAS,GAEb,CACI1M,KAAM,aACN0M,SAAS,GAEb,CACI1M,KAAM,WACN0M,SAAS,GAEb,CACI1M,KAAM,SACN0M,SAAS,IAGjBtX,KAAM,CACF+f,KAAM,EACNC,KAAM,EACNuC,MAAO,IAEX/lB,KAAM,CACF3E,GAAI,KACJ2E,KAAM,MAEVgmB,MAAO,CACHC,QAAQ,EACRC,MAAO,GACP1E,QAAS,KAKFxgB,gBAAa,kBAAC,GAhFX,uBAiFD,SAAAC,GAAK,OAAIN,MADE,YAAC,GA/EZ,sBAiFD,SAACM,EAAD,OAAqB6kB,EAArB,EAAU5oB,QAAW4oB,KAArB,sBACL7kB,EADK,CAER6kB,YAJoB,YAAC,GA9EV,wBAoFD,SAAC7kB,EAAD,OAAqB4kB,EAArB,EAAU3oB,QAAW2oB,OAArB,sBACP5kB,EADO,CAEV4kB,cARoB,YAAC,GA7EZ,sBAuFD,SAAC5kB,EAAD,WAAU/D,QAAW2oB,EAArB,EAAqBA,OAAQnoB,EAA7B,EAA6BA,IAAKyD,EAAlC,EAAkCA,MAAlC,sBACLF,EADK,eAEP4kB,EAFO,eAGD5kB,EAAM4kB,GAHL,eAIHnoB,EAAMyD,SAdS,YAAC,GA5EV,wBA6FD,SAACF,EAAD,WAAU/D,QAAW2oB,EAArB,EAAqBA,OAAQnoB,EAA7B,EAA6BA,IAA7B,sBACPuD,EADO,eAET4kB,EAFS,eAGH5kB,EAAM4kB,GAHH,eAILnoB,EAAMiD,GAAaklB,GAAQnoB,UArBZ,YAAC,GA3EN,4BAmGD,SAACuD,EAAD,OAAqB4kB,EAArB,EAAU3oB,QAAW2oB,OAArB,sBACX5kB,EADW,eAEb4kB,EAFa,eAGPllB,GAAaklB,SA3BA,YAAC,GA8BxB7B,IAAsB,SAAA/iB,GAAK,OAAIA,KA9BR,YAAC,GA+BxBgjB,IAAsB,SAAAhjB,GAAK,OAAIA,KA/BR,YAAC,GAgCxBkjB,IAAoB,SAACljB,EAAD,WAAU/D,QAAW6oB,EAArB,EAAqBA,MAAOvC,EAA5B,EAA4BA,KAA5B,sBACdviB,EADc,CAEjBuC,KAAK,eACEvC,EAAMuC,KADT,CAEAuiB,QACAvC,cArCgB,YAAC,GAwCxBY,IAAoB,SAAAnjB,GAAK,OAAIA,KAxCN,YAAC,GAyCxBqjB,IAAoB,SAACrjB,EAAD,OAAqBjB,EAArB,EAAU9C,QAAW8C,KAArB,sBACdiB,EADc,CAEjBjB,KAAK,eACEiB,EAAMjB,KADT,CAEAA,cA7CgB,YAAC,GAgDxBukB,IAAoB,SAAAtjB,GAAK,OAAIA,KAhDN,YAAC,GAiDxBwjB,IAAsB,SAAAxjB,GAAK,OAAIA,KAjDR,YAAC,GAkDxByjB,IAAsB,SAAAzjB,GAAK,OAAIA,KAlDR,YAAC,GAmDxB2jB,IAAsB,SAAA3jB,GAAK,OAAIA,KAnDR,YAAC,GAoDxB4jB,IAAsB,SAAA5jB,GAAK,OAAIA,KApDR,IAqDzBN,IElFYwlB,GAjDa,WAAO,IAAD,EACP3kB,aAAY,gBAAG4kB,EAAH,EAAGA,UAAH,MAAoB,CACnD7C,KAAM6C,EAAU5iB,KAAK+f,KACrBC,KAAM4C,EAAU5iB,KAAKggB,SAFjBD,EADsB,EACtBA,KAAMC,EADgB,EAChBA,KAKRzmB,EAAW2E,cAEX9G,EAAU+G,uBAAY,SAAA0kB,GACrB9C,IAAS8C,GACRtpB,EAASkoB,GAAQ,CACbY,OAAQ,OACRnoB,IAAK,OACLyD,MAAOklB,OAGhB,CAACtpB,EAAUwmB,IAERE,EAAiB9hB,uBAAY,WAC5B4hB,EAAOC,GACNzmB,EAASkoB,GAAQ,CACbY,OAAQ,OACRnoB,IAAK,OACLyD,MAAOoiB,EAAK,OAGrB,CAACxmB,EAAUwmB,EAAMC,IAEdE,EAAkB/hB,uBAAY,WAC7B4hB,EAAO,GACNxmB,EAASkoB,GAAQ,CACbY,OAAQ,OACRnoB,IAAK,OACLyD,MAAOoiB,EAAK,OAGrB,CAACxmB,EAAUwmB,IAEd,OACI,kBAAC,GAAD,CACIA,KAAMA,EACNC,KAAMA,EACN5oB,QAASA,EACT6oB,eAAgBA,EAChBC,gBAAiBA,K,8wGC3C7B,IAAMjhB,GAAYxJ,IAAOC,IAAV,MAWTotB,GAAkBrtB,IAAOC,IAAV,MAcf0J,GAAY3J,IAAOC,IAAV,MAKTqtB,GAActtB,IAAOC,IAAV,MAQXstB,GAAuBvtB,IAAOC,IAAV,MAyBpBG,GAAaJ,IAAOC,IAAV,MASVutB,GAAcxtB,IAAOC,IAAV,MAYXwtB,GAAgBztB,IAAOC,IAAV,MAQbytB,GAAiB1tB,IAAOC,IAAV,MAQd0tB,GAAY3tB,IAAOC,IAAV,MAUTmgB,GAAYpgB,IAAOC,IAAV,MAST2tB,GAAY5tB,IAAOC,IAAV,MAQT4tB,GAAuB7tB,IAAOC,IAAV,MAMpB6tB,GAAmB5sB,IAAMC,MAAK,YAAwB,IAArB4F,EAAoB,EAApBA,KAAMpF,EAAc,EAAdA,QACnCosB,EAAY,IAAIC,KAAKA,KAAKhpB,MAAM+B,EAAKgnB,YACrCE,EAAOF,EAAUG,cAAgB,MAAQH,EAAUI,WAAa,MAAQJ,EAAUK,UAExF,OACI,kBAACb,GAAD,CACI5rB,QAAS,kBAAMA,EAAQoF,EAAKsnB,OAE5B,kBAAC,GAAD,KACI,kBAACb,GAAD,WACQzmB,EAAKunB,KAEb,kBAACb,GAAD,KACK1mB,EAAKkmB,OAEV,kBAACS,GAAD,YAIJ,kBAACC,GAAD,KACI,kBAAC,GAAD,KACK5mB,EAAKwnB,KAAKntB,UAEf,kBAACwsB,GAAD,KACKK,QAmCN/sB,OAAMC,MA5BR,SAAC,GAAuB,IAArBoJ,EAAoB,EAApBA,KAAM5I,EAAc,EAAdA,QAElB,OACI,kBAAC,GAAD,KACI,kBAAC0rB,GAAD,KACI,kBAAC,KAAYvf,SAAb,CAAsB5F,MAAO,CAAEkF,MAAO,CAAEC,MAAO,OAAQC,OAAQ,UAC3D,kBAAC,KAAD,OAEJ,kBAAC,GAAD,8CAIJ,kBAACggB,GAAD,KACK/iB,GAAQA,EAAKuiB,MAAMriB,KAAI,SAAA1D,GAAI,OACxB,kBAAC+mB,GAAD,CACIrpB,IAAKsC,EAAKsnB,IACVtnB,KAAMA,EACNpF,QAASA,QAIrB,kBAACksB,GAAD,KACI,kBAAC,GAAD,WChJD7iB,GA3CO,WAAO,IAAD,EACDzC,aAAY,gBAAG4kB,EAAH,EAAGA,UAAH,MAAoB,CACnDN,KAAMM,EAAUN,KAChBtiB,KAAM4iB,EAAU5iB,SAFZsiB,EADgB,EAChBA,KAAMtiB,EADU,EACVA,KAKRzG,EAAW2E,cAEjBK,qBAAU,WACN,IAAM0lB,EAAW3B,EAAK4B,MAAK,SAAAD,GAAQ,OAAIA,EAAS3M,WAChD/d,EAASsoB,GAAc,CACnB5L,KAAMgO,EAASrZ,KACfmV,KAAM/f,EAAK+f,UAEhB,CAACxmB,EAAU+oB,EAAMtiB,EAAK+f,OAEzBxhB,qBAAU,WACN,OAAO,WACHhF,EAASooB,GAAa,CAClBU,OAAQ,aAGjB,CAAC9oB,IAEJ,IAAMnC,EAAU+G,uBAAY,SAAAtG,GACxB0B,EAASioB,GAAU,CACfa,OAAQ,UAEZ9oB,EAASkoB,GAAQ,CACbY,OAAQ,OACRnoB,IAAK,KACLyD,MAAO9F,OAEZ,CAAC0B,IAEJ,OACI,kBAAC,GAAD,CACIyG,KAAMA,EACN5I,QAASA,K,uzDCvCrB,IAAM+sB,GAAkB1uB,IAAOC,IAAV,MAOf0uB,GAAoB3uB,IAAOC,IAAV,MAEjB2uB,GAAa5uB,IAAOC,IAAV,MAWV4uB,GAAkB7uB,IAAOuT,MAAV,MAYf,SAAA5S,GAAK,OAAIA,EAAMmuB,SAAW3uB,YAAjB,SAKT2T,GAAmB9T,IAAOC,IAAV,MAQhBwnB,GAAcznB,IAAOgU,OAAV,MAuDF9S,OAAMC,MA/BP,SAAC,GAOR,IANH4tB,EAME,EANFA,aACAC,EAKE,EALFA,cACAF,EAIE,EAJFA,QACA/B,EAGE,EAHFA,MACA1Y,EAEE,EAFFA,SACA4a,EACE,EADFA,SAEA,OACI,kBAACL,GAAD,KACI,kBAACC,GAAD,CACIva,SAAU0a,EACV9mB,MAAO6kB,EAAME,MACb7X,YAAY,QACZ0Z,QAASA,IAEb,kBAACJ,GAAD,KACI,kBAACC,GAAD,CAAmBna,IAAKua,KAE5B,kBAAC,GAAD,KACI,kBAAC,GAAD,CAAaptB,QAAS0S,GAAtB,UAGA,kBAAC,GAAD,CAAa1S,QAASstB,GAAtB,eCqBDC,GA/Gc,WAAO,IAAD,EACP3mB,aAAY,gBAAG4kB,EAAH,EAAGA,UAAH,MAAoB,CACpDJ,MAAOI,EAAUJ,MACjBF,KAAMM,EAAUN,SAFZE,EADuB,EACvBA,MAAOF,EADgB,EAChBA,KAKT/oB,EAAW2E,cAEXsmB,EAAeta,mBACf0a,EAAgB1a,mBAChB2a,EAAU3a,kBAAO,GAVQ,EAYChJ,qBAAWshB,GAASA,EAAME,QAZ3B,mBAYvB6B,EAZuB,KAYdO,EAZc,KAc/BvmB,qBAAU,WACNqmB,EAAcxa,QAAU,IAAI2a,KAAMP,EAAapa,QAAS,CACpD4a,MAAO,SACPna,YAAa,UACboa,QAAS,CACLC,QAAS,CACL,CAAC,CAAE3lB,OAAQ,KAAO,CAAEA,OAAQ,MAC5B,CAAC,OAAQ,SAAU,YAAa,UAChC,CAAC,CAAES,KAAM,WAAa,CAAEA,KAAM,WAC9B,CAAC,aAAc,aAAc,OAAQ,aAKjD,IAAMmlB,EAAQP,EAAcxa,QAC5B+a,EAAMztB,GAAG,eAAe,SAAC0tB,EAAOC,EAAUC,GACxB,SAAXA,GACC/rB,EAASkoB,GAAQ,CACbY,OAAQ,QACRnoB,IAAK,UACLyD,MAAOwnB,EAAMI,KAAKC,kBAI/B,CAACjsB,IAEJgF,qBAAU,WACHsmB,EAAQza,UACXya,EAAQza,SAAU,EAClBwa,EAAcxa,QAAQmb,KAAKC,UAAYhD,EAAMxE,WAC9C,CAACwE,IAEJjkB,qBAAU,WACN,OAAO,WACHhF,EAASooB,GAAa,CAClBU,OAAQ,cAGjB,CAAC9oB,IAEJ,IAAMkrB,EAAgBtmB,uBAAY,SAAA5D,GAC3BgqB,GAA8B,KAAnBhqB,EAAEyQ,OAAOrN,MACnBmnB,GAAW,GACJP,GAA8B,KAAnBhqB,EAAEyQ,OAAOrN,OAC3BmnB,GAAW,GAGfvrB,EAASkoB,GAAQ,CACbY,OAAQ,QACRnoB,IAAK,QACLyD,MAAOpD,EAAEyQ,OAAOrN,WAErB,CAACpE,EAAUgrB,IAERza,EAAW3L,sBAAW,sBAAC,4BAAA3E,EAAA,yDACnByqB,EAAW3B,EAAK4B,MAAK,SAAAD,GAAQ,OAAIA,EAAS3M,WAE5CkL,EAAMC,OAHe,gCAKflpB,EAASqoB,GAAgB,CAC3B3L,KAAMgO,EAASrZ,KACf8X,MAAOF,EAAME,MACb1E,QAASwE,EAAMxE,WARE,6CAYfzkB,EAAS4oB,GAAgB,CAC3BtqB,GAAI2qB,EAAMC,OACVxM,KAAMgO,EAASrZ,KACf8X,MAAOF,EAAME,MACb1E,QAASwE,EAAMxE,WAhBE,OAoBzBzkB,EAASioB,GAAU,CACfa,OAAQ,UArBa,2CAuB1B,CAAC9oB,EAAUipB,EAAOF,IAEfoC,EAAWvmB,uBAAY,WACzB5E,EAASioB,GAAU,CACfa,OAAQ,YAEb,CAAC9oB,IAEJ,OACI,kBAAC,GAAD,CACIirB,aAAcA,EACdC,cAAeA,EACfjC,MAAOA,EACP+B,QAASA,EACTza,SAAUA,EACV4a,SAAUA,K,o5EC9GtB,IAAMe,GAAYhwB,IAAOC,IAAV,MAWTgwB,GAAsBjwB,IAAOC,IAAV,MAcnBiwB,GAAiBlwB,IAAOC,IAAV,MAIdkwB,GAAqBnwB,IAAOC,IAAV,MAQlBmwB,GAAgBpwB,IAAOC,IAAV,MAIbowB,GAAgBrwB,IAAOC,IAAV,MAIbqwB,GAAmBtwB,IAAOC,IAAV,MAwBhB4oB,GAAY7oB,IAAOC,IAAV,MAQTwnB,GAAcznB,IAAOgU,OAAV,MAiEF9S,OAAMC,MAzCR,SAAC,GAAwC,IAAtC4F,EAAqC,EAArCA,KAAMtF,EAA+B,EAA/BA,KAAM8uB,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SAC9BvC,EAAO,KACX,GAAGlnB,EAAM,CACL,IAAMgnB,EAAY,IAAIC,KAAKA,KAAKhpB,MAAM+B,EAAKgnB,YAC3CE,EAAOF,EAAUG,cAAgB,MAAQH,EAAUI,WAAa,MAAQJ,EAAUK,UAGtF,OACI,kBAAC4B,GAAD,KACI,kBAACC,GAAD,KACI,kBAACC,GAAD,KACKnpB,GAAQA,EAAKkmB,OAElB,kBAACkD,GAAD,KACI,kBAACC,GAAD,KACKrpB,GAAQA,EAAKwnB,KAAKntB,UAEvB,kBAACivB,GAAD,KACKpC,KAIb,kBAACqC,GAAD,CAAkBG,wBAAyB,CAAEC,OAAS3pB,EAAOA,EAAKwhB,QAAU,QAC5E,kBAAC,GAAD,KACI,kBAAC,GAAD,CACIsC,UAAWppB,IAASsF,GAAQtF,EAAK4sB,MAAQtnB,EAAKwnB,KAAKF,IACnD1sB,QAAS,kBAAM4uB,EAASxpB,KAF5B,UAMA,kBAAC,GAAD,CACI8jB,UAAWppB,IAASsF,GAAQtF,EAAK4sB,MAAQtnB,EAAKwnB,KAAKF,IACnD1sB,QAAS,kBAAM6uB,EAASzpB,EAAKsnB,OAFjC,eCnEDsC,GA7DO,WAAO,IAAD,EACGpoB,aAAY,gBAAG4kB,EAAH,EAAGA,UAAW3kB,EAAd,EAAcA,YAAd,MAAiC,CACpEpG,GAAI+qB,EAAUpmB,KAAK3E,GACnB2E,KAAMomB,EAAUpmB,KAAKA,KACrBtF,KAAM+G,EAAY/G,SAHdW,EADgB,EAChBA,GAAI2E,EADY,EACZA,KAAMtF,EADM,EACNA,KAMZqC,EAAW2E,cAEjBK,qBAAU,WACNhF,EAASyoB,GAAc,CACnBnqB,UAEL,CAAC0B,EAAU1B,IAEd0G,qBAAU,WACN,OAAO,WACHhF,EAASooB,GAAa,CAClBU,OAAQ,aAGjB,CAAC9oB,IAEJ,IAAMysB,EAAW7nB,sBAAW,uCAAC,WAAO3B,GAAP,SAAAhD,EAAA,sDACzBD,EAASkoB,GAAQ,CACbY,OAAQ,QACRnoB,IAAK,QACLyD,MAAOnB,EAAKkmB,SAEhBnpB,EAASkoB,GAAQ,CACbY,OAAQ,QACRnoB,IAAK,UACLyD,MAAOnB,EAAKwhB,WAEhBzkB,EAASkoB,GAAQ,CACbY,OAAQ,QACRnoB,IAAK,SACLyD,MAAOnB,EAAKsnB,OAEhBvqB,EAASioB,GAAU,CACfa,OAAQ,WAjBa,2CAAD,sDAmBzB,CAAC9oB,IAEE0sB,EAAW9nB,sBAAW,uCAAC,WAAOtG,GAAP,SAAA2B,EAAA,sEACnBD,EAAS0oB,GAAgB,CAAEpqB,QADR,OAEzB0B,EAASioB,GAAU,CACfa,OAAQ,UAHa,2CAAD,sDAKzB,CAAC9oB,IAEJ,OACI,kBAAC,GAAD,CACIiD,KAAMA,EACNtF,KAAMA,EACN8uB,SAAUA,EACVC,SAAUA,K,k3FCpDtB,IAAMI,GAA4B5wB,IAAOC,IAAV,MAQzB4wB,GAAuB7wB,IAAOC,IAAV,MAUpBF,GAAcC,IAAOC,IAAV,MAUX6wB,GAAgB9wB,IAAOC,IAAV,MAUb8wB,GAAkB/wB,IAAOC,IAAV,MAQT,SAAAU,GAAK,OAA0B,IAArBA,EAAMqwB,aAAsB,QAG5CC,GAAejxB,IAAOC,IAAV,MAWZQ,GAAWT,IAAOC,IAAV,MAOR,SAAAU,GAAK,MAAqB,SAAjBA,EAAMisB,QAAqBzsB,YAA3B,SAKT+wB,GAAkBlxB,IAAOC,IAAV,MAYf2uB,GAAa5uB,IAAOC,IAAV,MASVkxB,GAAiBnxB,IAAOC,IAAV,MAYdmxB,GAAYpxB,IAAOC,IAAV,MAiEAiB,OAAMC,MAxDG,SAAC,GAOlB,IANH0rB,EAME,EANFA,KACAprB,EAKE,EALFA,KACAmrB,EAIE,EAJFA,OACAjrB,EAGE,EAHFA,QACA0vB,EAEE,EAFFA,aACAC,EACE,EADFA,SAEMN,EAAenE,EAAK7gB,WAAU,SAAAwiB,GAAQ,OAAIA,EAAS3M,WAEzD,OACI,kBAAC+O,GAAD,KACI,kBAACC,GAAD,KACI,kBAAC,GAAD,KACKhE,EAAKpiB,KAAI,SAAC+jB,EAAU9kB,GAAX,OACN,kBAAConB,GAAD,CACIjP,QAAS2M,EAAS3M,QAClBlgB,QAAS,kBAAMA,EAAQ+H,KAEtB8kB,EAASrZ,SAGlB,kBAAC4b,GAAD,CAAiBC,aAAcA,KAEnC,kBAAC,GAAD,CAAUpE,OAAQA,GACF,SAAXA,GAAqBnrB,GAAyB,IAAjBuvB,GAAuC,IAAjBA,GAChD,kBAACE,GAAD,CAAiBvvB,QAAS0vB,GACtB,kBAAC,KAAYvjB,SAAb,CAAsB5F,MAAO,CAAEkF,MAAO,CAAEC,MAAO,OAAQC,OAAQ,UAC3D,kBAAC,KAAD,OAEJ,kBAAC,GAAD,mBAKK,SAAXsf,GAAgC,UAAXA,IACnB,kBAACuE,GAAD,CAAgBxvB,QAAS2vB,GACrB,kBAAC,KAAYxjB,SAAb,CAAsB5F,MAAO,CAAEkF,MAAO,CAAEC,MAAO,OAAQC,OAAQ,UAC3D,kBAAC,KAAD,OAEJ,kBAAC8jB,GAAD,kBAMZ,kBAACH,GAAD,KACKrE,GAAqB,SAAXA,GAAqB,kBAAC,GAAD,MAC/BA,GAAqB,UAAXA,GAAsB,kBAAC2E,GAAD,MAChC3E,GAAqB,SAAXA,GAAqB,kBAAC,GAAD,YC/GrC4E,GAxDkB,WAAO,IAAD,EACJjpB,aAAY,gBAAG4kB,EAAH,EAAGA,UAAW3kB,EAAd,EAAcA,YAAd,MAAiC,CACxEqkB,KAAMM,EAAUN,KAChBD,OAAQO,EAAUP,OAClBnrB,KAAM+G,EAAY/G,SAHdorB,EAD2B,EAC3BA,KAAMD,EADqB,EACrBA,OAAQnrB,EADa,EACbA,KAMhBqC,EAAW2E,cAEjBK,qBAAU,WACN,OAAO,WACHhF,EAAS+nB,SAEd,CAAC/nB,IAEJ,IAAMnC,EAAU+G,uBAAY,SAAAgB,GAErBA,IADkBmjB,EAAK7gB,WAAU,SAAAwiB,GAAQ,OAAIA,EAAS3M,aAGzD/d,EVEoB,SAAA4F,GAAK,OAAI,SAAC5F,EAAU6E,GAAc,IAKpD8oB,EAFF9oB,IADAwkB,UAAaN,KAGQpiB,KAAI,SAAA+jB,GAAQ,OAAIA,EAAS3M,QAAT,eAC9B2M,EAD8B,CACpB3M,SAAS,IACxB2M,KAGNiD,EAAY/nB,GAAZ,eACO+nB,EAAY/nB,GADnB,CAEImY,SAAS,IAGb/d,EAASgoB,GAAQ,CACbe,KAAM4E,MUlBGC,CAAahoB,IAGtB5F,EAASmoB,GAAU,CACfW,OAAQ,OACRnoB,IAAK,UAGTX,EAASioB,GAAU,CACfa,OAAQ,aAEb,CAAC9oB,EAAU+oB,IAERwE,EAAe3oB,uBAAY,WAC7B5E,EAASioB,GAAU,CACfa,OAAQ,aAEb,CAAC9oB,IAEEwtB,EAAW5oB,uBAAY,WACzB5E,EAASioB,GAAU,CACfa,OAAQ,YAEb,CAAC9oB,IAEJ,OACI,kBAAC,GAAD,CACI+oB,KAAMA,EACNprB,KAAMA,EACNmrB,OAAQA,EACRjrB,QAASA,EACT0vB,aAAcA,EACdC,SAAUA,KCpCPK,GAdO,WAElB,OACI,oCACI,kBAAC,IAAD,KACI,iEAEJ,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,Q,oNCJZ,IAAMC,GAAe5xB,IAAOC,IAAV,MAoCH4xB,GA1BH,WACV,OACE,oCACE,kBAAC,IAAD,KACE,gDAEF,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,UAAW/e,GAAUwD,KAAK,IAAIwb,OAAK,IAC1C,kBAAC,IAAD,CAAOD,UAAWrb,GAAWF,KAAK,SAASwb,OAAK,IAChD,kBAAC,IAAD,CAAOD,UAAWlb,GAAcL,KAAK,YAAYwb,OAAK,IACtD,kBAAC,IAAD,CAAOD,UAAW9O,GAAUzM,KAAK,QAAQwb,OAAK,IAC9C,kBAAC,IAAD,CAAOD,UAAWE,GAAczb,KAAK,YAAYwb,OAAK,IACtD,kBAAC,IAAD,CAAOD,UAAWH,GAAepb,KAAK,aAAawb,OAAK,IACxD,kBAAC,IAAD,CACEE,OAAQ,cAAGC,SAAH,OACN,kBAACN,GAAD,KACE,yCACA,+H,YCTGO,IAAV,SAAUA,KAAV,iEACH,OADG,SACGC,YAAI,CACN7sB,KACA4jB,KACAC,KACA3G,KACAxH,KACAgI,KACArK,KACAjI,KACAgB,OAVD,wCAcQ0gB,OA7BKC,0BAAgB,CAChC9pB,eACA8T,cACAE,QACAsC,SACA1C,UACAsI,QACA1K,UACAqH,UACA7V,WACAgE,aACA2d,eCdgBoF,QACW,cAA7BC,OAAON,SAASO,UAEe,UAA7BD,OAAON,SAASO,UAEhBD,OAAON,SAASO,SAASrI,MACvB,2D,6FCfN,IAAMsI,GAAe1yB,IAAOC,IAAV,MAUH0yB,GANC,SAAAhyB,GACZ,OACI,kBAAC+xB,GAAiB/xB,ICSpBiyB,GAAiBC,cACjBC,GAAQC,sBACVV,GACAW,8BAAoBC,0BAAgBC,IAAYN,MAGpDA,GAAeO,IAAIhB,IAEnB,sBAAC,4BAAApuB,EAAA,yDACStC,EAAOsD,GAAgB,QADhC,0EAOiC+tB,GAAMhvB,SAASoD,MAPhD,iBAQsB9F,WAAaK,EAAKL,SARxC,uBASWgE,KAEM,gBAXjB,0DAcO/C,QAAQC,IAAI,qBAdnB,yDAAD,GAkBA8wB,IAASnB,OACL,kBAAC,IAAD,CAAUa,MAAOA,IACb,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,kBAAC,GAAD,KACI,kBAAC,GAAD,UAKf9S,SAASqT,eAAe,SF2EvB,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMjhB,MAAK,SAAAkhB,GACjCA,EAAaC,kB","file":"static/js/main.701cb0fb.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/ranking.78f675e7.svg\";","module.exports = __webpack_public_path__ + \"static/media/spinner.e9a76a3f.svg\";","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst HeaderBlock = styled.div`\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 50px;\r\n`;\r\n\r\nconst titleStyle = css`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: flex-start;\r\n    height: 40px;\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    font-size: 30px;\r\n    text-decoration: none;\r\n    text-shadow: 2px 2px 2px rgb(0, 0, 0, 0.2);\r\n    font-style: italic;\r\n`;\r\n\r\nconst TitleBlock = styled(Link)`\r\n    ${titleStyle}\r\n    color: rgb(0, 0, 0, 0.6);\r\n`;\r\n\r\nconst TitleFadeBlock = styled(Link)`\r\n    ${titleStyle}\r\n    color: rgb(0, 0, 0, 0.4);\r\n`;\r\n\r\nconst ControllBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-left: 8%;\r\n`;\r\n\r\nconst GroupBlock = styled.div`\r\n    margin-left: 30px;\r\n    display: flex;\r\n`;\r\n\r\nconst TabBlock = styled.div`\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 50px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    color: rgb(0, 0, 0, 0.4);\r\n    margin-left: 20px;\r\n`;\r\n\r\nconst TabLinkBlock = styled(Link)`\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 50px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    color: rgb(0, 0, 0, 0.4);\r\n    margin-left: 20px;\r\n    text-decoration: none;\r\n    \r\n    ${props => props.hidden && css`\r\n        display: none;\r\n        visibility: hidden;\r\n    `};\r\n`;\r\n\r\nconst Tab = props => {\r\n    if(props.to) {\r\n        return (\r\n            <TabLinkBlock {...props}>\r\n                {props.children}\r\n            </TabLinkBlock>\r\n        )\r\n    } else {\r\n        return (\r\n            <TabBlock {...props}>\r\n                {props.children}\r\n            </TabBlock>\r\n        )\r\n    }\r\n}\r\n\r\nconst AuthBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-right: 8%;\r\n`;\r\n\r\nconst UserWelcomeBlock = styled.div`\r\n    position: absolute;\r\n    top: 10%;\r\n    left: 0%;\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    align-items: center;\r\n    font-size: 10px;\r\n    color: rgb(0, 0, 0, 0.4);\r\n`\r\n\r\nconst Header = ({\r\n    onRecord,\r\n    onLogout,\r\n    onLogin,\r\n    tempAuth,\r\n    auth\r\n}) => {\r\n    let username;\r\n    \r\n    if(tempAuth) {\r\n        username = tempAuth.nickname;\r\n    };\r\n\r\n    if(auth) {\r\n        username = auth.username;\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <HeaderBlock>\r\n                <ControllBlock>\r\n                    <TitleBlock to='/'>\r\n                        chesssup\r\n                    </TitleBlock>\r\n                    <TitleFadeBlock to='/'>\r\n                        .com\r\n                    </TitleFadeBlock>\r\n                    <GroupBlock>\r\n                        <Tab to='/game'>\r\n                            Play\r\n                        </Tab>\r\n                        <Tab to='/community'>\r\n                            Community\r\n                        </Tab>\r\n                    </GroupBlock>\r\n                </ControllBlock>\r\n                <AuthBlock>\r\n                    <Tab onClick={onRecord}>\r\n                        Search\r\n                    </Tab>\r\n                    {auth ? (\r\n                        <>\r\n                            <Tab onClick={onRecord}>\r\n                                Setting\r\n                            </Tab>\r\n                            <Tab onClick={onRecord}>\r\n                                Record\r\n                            </Tab>\r\n                            <Tab onClick={onLogout}>\r\n                                Logout\r\n                                <UserWelcomeBlock>\r\n                                    {username}\r\n                                </UserWelcomeBlock>\r\n                            </Tab>\r\n                        </>\r\n                    ):(\r\n                        <Tab onClick={onLogin}>\r\n                            Login\r\n                            <UserWelcomeBlock>\r\n                                {username}\r\n                            </UserWelcomeBlock>\r\n                        </Tab>\r\n                    )}\r\n                </AuthBlock>\r\n            </HeaderBlock>\r\n           \r\n        </>\r\n    )\r\n};\r\n\r\n//  <GamesModalContainer\r\n//  openModal={openModal}\r\n//  setOpenModal={setOpenModal}\r\n//  />\r\n\r\nexport default React.memo(Header);","import { eventChannel } from 'redux-saga';\r\nimport SocketIo from 'socket.io-client';\r\nimport { put, call, take, cancelled } from 'redux-saga/effects';\r\n\r\n// eslint-disable-next-line\r\nfunction* createEventChannel(io) {\r\n    return eventChannel(emit => {\r\n        io.on('connect', socket => {\r\n            emit({\r\n                type: 'socket',\r\n                socket: io.id\r\n            });\r\n        });\r\n\r\n        //  reconnect 전에 session연결을 위한 http call 추가 예정\r\n        io.on('reconnect', () => {\r\n            console.dir(`socketio reconnect`);\r\n        })\r\n\r\n        io.on('message', message => {\r\n            emit(message);\r\n        });\r\n\r\n        return () => {\r\n            io.close();\r\n        }\r\n    })\r\n}\r\n\r\nexport function* connectNamespace(params) {\r\n    let channel;\r\n\r\n    const {\r\n        url,\r\n        query,\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue,\r\n        updateValue,\r\n        clearValue,\r\n        notifyRequest,\r\n    } = params;\r\n\r\n    try {\r\n        const io = SocketIo(url, {\r\n            query,\r\n            // reconnection: false,\r\n            secure: true,\r\n        });\r\n        \r\n        channel = yield call(createEventChannel, io);\r\n    \r\n        while(true) {\r\n            const message = yield take(channel);\r\n            switch(message.type) {\r\n                case 'socket':\r\n                    if(initializeSocket) {\r\n                        yield put(initializeSocket(message));\r\n                    };\r\n                    break;\r\n                case 'initialize':\r\n                    yield put(initializeValue(message));\r\n                    break;\r\n                case 'change':\r\n                    yield put(changeValue(message));\r\n                    break;\r\n                case 'update':\r\n                    yield put(updateValue(message));\r\n                    break;\r\n                case 'clear':\r\n                    yield put(clearValue(message));\r\n                    break;\r\n                case 'notify':\r\n                    yield put(notifyRequest(message))\r\n                    break;\r\n                default:\r\n                    console.dir(message);\r\n            }\r\n        }\r\n    } catch(e) {\r\n        console.dir(e);\r\n    } finally {\r\n        if (yield cancelled()) {\r\n            channel.close();\r\n        }\r\n    }\r\n}","export const createRequestActionTypes = type => {\r\n    const SUCCESS = `${type}_SUCCESS`;\r\n    const FAILURE = `${type}_FAILURE`;\r\n    return [ type, SUCCESS, FAILURE ];\r\n};\r\n\r\nexport default function createRequestThunk (type, request) {\r\n    const SUCCESS = `${type}_SUCCESS`;\r\n    const FAILURE = `${type}_FAILURE`;\r\n    return params => async dispatch => {\r\n        try {\r\n            const response = await request(params);\r\n            dispatch({\r\n                type: SUCCESS,\r\n                payload: response.data,\r\n            });\r\n            return response.data;\r\n        } catch(e) {\r\n            console.dir(e);\r\n            dispatch({\r\n                type: FAILURE,\r\n                payload: e,\r\n                error: true,\r\n            });\r\n            throw e;\r\n        }\r\n    }\r\n};","export const setLocalStorage = ({ ...rest }) => {\r\n    try {\r\n        Object.keys(rest).forEach(key => {\r\n            localStorage.setItem(key, JSON.stringify(rest[key]));\r\n        })\r\n    } catch(e) {\r\n        console.dir('Set localStorage failed');\r\n        console.dir(e);\r\n    }\r\n}\r\n\r\nexport const getLocalStorage = key => {\r\n    try {\r\n        return JSON.parse(localStorage.getItem(key));\r\n    } catch(e) {\r\n        console.dir('Get localStorage failed');\r\n        console.dir(e);\r\n    }   \r\n}\r\n\r\nexport const removeLocalStorage = key => {\r\n    try {\r\n        localStorage.removeItem(key);\r\n    } catch(e) {\r\n        console.dir('Remove localStorage failed');\r\n        console.dir(e);\r\n    }\r\n}\r\n\r\nexport const clearLocalStorage = () => {\r\n    try {\r\n        localStorage.clear();\r\n    } catch(e) {\r\n        console.dir('Clear localStorage failed');\r\n        console.dir(e);\r\n    }   \r\n};","import { createAction, handleActions } from 'redux-actions';\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\nimport produce from 'immer';\r\n\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport * as authAPI from '../lib/api/auth';\r\nimport { setLocalStorage, removeLocalStorage } from '../lib/storage/storage';\r\n\r\nconst CONNECT_WEBSOCKET = 'sessionAuth/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'sessionAuth/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_VALUE = 'sessionAuth/INITIALIZE_VALUE';\r\nconst CLEAR_VALUE = 'sessionAuth/CLEAR_VALUE';\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\n\r\nconst [ SET_SESSION, SET_SESSION_SUCCESS, SET_SESSION_FAILURE ] = createRequestActionTypes('sessionAuth/SET_SESSION');\r\nexport const setSessionThunk = createRequestThunk(SET_SESSION, authAPI.getSession);\r\n\r\nconst [ LOGIN, LOGIN_SUCCESS, LOGIN_FAILURE ] = createRequestActionTypes('sessionAuth/LOGIN');\r\nconst [ REGISTER, REGISTER_SUCCESS, REGISTER_FAILURE ] = createRequestActionTypes('sessionAuth/REGISTER');\r\nconst [ LOGOUT, LOGOUT_SUCCESS, LOGOUT_FAILURE ] = createRequestActionTypes('sessionAuth/LOGOUT');\r\nconst [ CHECK, CHECK_SUCCESS, CHECK_FAILURE ] = createRequestActionTypes('sessionAuth/CHECK');\r\nexport const loginThunk = createRequestThunk(LOGIN, authAPI.login);\r\nexport const registerThunk = createRequestThunk(REGISTER, authAPI.register);\r\nexport const logoutThunk = createRequestThunk(LOGOUT, authAPI.logout);\r\nexport const checkThunk = createRequestThunk(CHECK, authAPI.check);\r\n\r\nconst CHANGE_FIELD = 'sessionAuth/CHANGE_FIELD';\r\nconst CLEAR_FIELD = 'sessionAuth/CLEAR_FIELD';\r\nconst CLEAR_SPECIFIC_FIELD = 'sessionAuth/CLEAR_SPECIFIC_FIELD';\r\nexport const changeField = createAction(CHANGE_FIELD, payload => payload);\r\nexport const clearField = createAction(CLEAR_FIELD, payload => payload);\r\nexport const clearSpecificField = createAction(CLEAR_SPECIFIC_FIELD, payload => payload);\r\n\r\n\r\nexport const loginProcessThunk = param => async ( dispatch, getState ) => {\r\n    try {\r\n        const auth = await dispatch(loginThunk(param));\r\n        if(auth) {\r\n            setLocalStorage({ auth });\r\n        }\r\n    } catch(e) {\r\n        console.dir('Login failed');\r\n    }\r\n}\r\n\r\nexport const registerProcessThunk = param => async ( dispatch, getState ) => {\r\n    try {\r\n        const auth = await dispatch(registerThunk(param));\r\n        if(auth) {\r\n            setLocalStorage({ auth });\r\n        }\r\n    } catch(e) {\r\n        console.dir('Register failed');\r\n    }\r\n    \r\n}\r\n\r\nexport const logoutProcessThunk = () => async( dispatch, getState ) => {\r\n    try {\r\n        await dispatch(logoutThunk());\r\n        removeLocalStorage('auth');\r\n    } catch(e) {\r\n        console.dir('Logout failed');\r\n    }\r\n}\r\n\r\nfunction* connectWebsocketSaga () {\r\n    \r\n    const socketTask = yield fork(connectNamespace, {\r\n        url: '/sessionAuth',\r\n        initializeValue,\r\n        clearValue,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* sessionAuthSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    tempAuth: null,\r\n    auth: null,\r\n    authError: null,\r\n    login: {\r\n        username: '',\r\n        password: '',\r\n    },\r\n    register: {\r\n        username: '',\r\n        password: '',\r\n        passwordConfirm: '',\r\n    }\r\n}\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\r\n        ...state,\r\n        auth: { ...rest },\r\n    }),\r\n    [CLEAR_VALUE]: state => ({\r\n        ...initialState,\r\n        tempAuth: state.tempAuth,\r\n    }),\r\n    [SET_SESSION_SUCCESS]: (state, { payload: tempAuth }) => ({\r\n        ...state,\r\n        tempAuth,\r\n    }),\r\n    [SET_SESSION_FAILURE]: (state, { payload: error }) => ({\r\n        ...state,\r\n        tempAuth: null,\r\n        error,\r\n    }),\r\n    [CHANGE_FIELD]: (state, { payload: { form, key, value } }) =>\r\n        produce(state, draft => {\r\n            draft[form][key] = value;\r\n        }),\r\n    [CLEAR_FIELD]: (state, { payload: { form } }) => ({\r\n        ...state,\r\n        [form]: initialState[form],\r\n        authError: initialState.authError,\r\n    }),\r\n    [CLEAR_SPECIFIC_FIELD]: (state, { payload: { form, key } }) => ({\r\n        ...state,\r\n        [form]: {\r\n            ...state[form],\r\n            [key]: initialState[form][key],\r\n        },\r\n        authError: initialState.authError,\r\n    }),\r\n    [LOGIN_SUCCESS]: (state, { payload: auth }) => ({\r\n        ...state,\r\n        auth,\r\n        authError: null,\r\n    }),\r\n    [LOGIN_FAILURE]: (state, { payload: authError }) => ({\r\n        ...state,\r\n        auth: null,\r\n        authError,\r\n    }),\r\n    [REGISTER_SUCCESS]: (state, { payload: auth }) => ({\r\n        ...state,\r\n        auth,\r\n        authError: null,\r\n    }),\r\n    [REGISTER_FAILURE]: (state, { payload: authError }) => ({\r\n        ...state,\r\n        auth: null,\r\n        authError,\r\n    }),\r\n    [LOGOUT_SUCCESS]: state => ({\r\n        ...state,\r\n        auth: null,\r\n        authError: null,\r\n    }),\r\n    [LOGOUT_FAILURE]: ( state, { payload: authError }) => ({\r\n        ...state,\r\n        auth: null,\r\n        authError,\r\n    }),\r\n    [CHECK_SUCCESS]: ( state, { payload: auth }) => ({\r\n        ...state,\r\n        auth,\r\n        authError: null,\r\n    }),\r\n    [CHECK_FAILURE]: ( state, { payload: authError }) => ({\r\n        ...state,\r\n        auth: null,\r\n        authError,\r\n    })\r\n}, initialState);","import axios from 'axios';\r\n\r\nexport const getSession = () =>\r\n    axios.get('/api/auth/getSession');\r\n\r\nexport const login = ({ username, password }) => \r\n    axios.post('/api/auth/login', ({ username, password }));\r\n\r\nexport const logout = () =>\r\n    axios.post('/api/auth/logout');\r\n\r\nexport const register = ({ username, password }) =>\r\n    axios.post('/api/auth/register', ({ username, password }));\r\n\r\nexport const check = () =>\r\n    axios.get('/api/auth/check');","import React, { useCallback, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Header from '../../components/common/Header';\r\nimport { logoutProcessThunk, clearField } from '../../modules/sessionAuth';\r\nimport { connectWebsocket, disconnectWebsocket } from '../../modules/sessionAuth';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst HeaderContainer = ({ history }) => {\r\n    const { tempAuth, auth } = useSelector(({ sessionAuth }) => ({\r\n        tempAuth: sessionAuth.tempAuth,\r\n        auth: sessionAuth.auth,\r\n    }));\r\n    const dispatch = useDispatch();\r\n\r\n    const onLogout = useCallback(() => {\r\n        dispatch(logoutProcessThunk());\r\n    }, [dispatch]);\r\n    \r\n    const onRecord = useCallback(() => {\r\n        alert('onRecord');\r\n    }, []);\r\n    \r\n    //  link 태그로 단순히 넘어갈 경우 dispatch전에 라우팅이 먼저 넘어가기 때문에\r\n    //  onClick으로 받아 dispatch를 마치고 routing이 넘어가도록 변경\r\n    const onLogin = useCallback(() => {\r\n        dispatch(clearField({ form: 'login' }));\r\n        history.push('/login');\r\n    }, [dispatch, history]);\r\n\r\n    //  async일 필요 없음, 따로 clearValue는 렌더링을 줄이기 위해 별도로 호출하지 않음\r\n    useEffect(() => {\r\n        dispatch(connectWebsocket());\r\n        return () => {\r\n            dispatch(disconnectWebsocket());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Header\r\n            onRecord={onRecord}\r\n            onLogout={onLogout}\r\n            onLogin={onLogin}\r\n            tempAuth={tempAuth}\r\n            auth={auth}\r\n        />\r\n    );\r\n};\r\n\r\nexport default withRouter(HeaderContainer);","import { useReducer, useEffect } from 'react';\r\n\r\nfunction reducer(state, action) {\r\n    switch (action.type) {\r\n        case 'LOADING':\r\n            return {\r\n                loading: true,\r\n                data: null,\r\n                error: null,\r\n            };\r\n        case 'SUCCESS':\r\n            return {\r\n                loading: false,\r\n                data: action.data,\r\n                error: null,\r\n            };\r\n        case 'FAILURE':\r\n            return {\r\n                loading: false,\r\n                data: null,\r\n                error: action.error,\r\n            };\r\n        default:\r\n            throw new Error('Unhandled action type Error')\r\n    }\r\n}\r\n\r\nfunction useAsync(callback, deps = []) {\r\n    const [ state, dispatch ] = useReducer(reducer, {\r\n        loading: false,\r\n        data: null,\r\n        error: false,\r\n    })\r\n\r\n    const fetchData = async () => {\r\n        dispatch({ type: 'LOADING' });\r\n        try {\r\n            const data = await callback();\r\n            dispatch({ type: 'SUCCESS', data });\r\n        } catch(e) {\r\n            dispatch({ type: 'FAILURE', error: e });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    // eslint-disable-next-line\r\n    }, deps);\r\n\r\n    return [state, fetchData];\r\n}\r\n\r\nexport default useAsync;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst ListBlock = styled.div`\r\n    position: relative;\r\n    height: 100%;\r\n    width: 100%;\r\n    overflow: hidden;\r\n    z-index: 10;\r\n`;\r\n\r\nconst ListCellBlock = styled.div`\r\n    position: absolute;\r\n    height: 40px;\r\n    width: 100%;\r\n    display: flex;\r\n    cursor: pointer;\r\n    transition: 1s top;\r\n    top: ${props => (props.index * 41 + 42) + 'px'};\r\n    left: 0;\r\n\r\n    &:hover {\r\n        background-color: rgba(255, 255, 255, 0.8);\r\n    }\r\n    \r\n`;\r\n\r\nconst TextBlock = styled.div`\r\n    width: 100px;\r\n    font-size: 13px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    ${props => props.elo && css`\r\n        width: 120px;\r\n    `}\r\n\r\n    ${props => props.mail && css`\r\n        width: 240px;\r\n        justify-content: flex-start;\r\n    `}\r\n\r\n    ${props => props.header && css`\r\n        justify-content: center;\r\n    `};\r\n\r\n`;\r\n// {cell.ratio * 100} %\r\nconst ListCell = React.memo(({ cell }) => {\r\n    return (\r\n        <ListCellBlock index={cell.index}>\r\n            <TextBlock>\r\n                {cell.index + 1}\r\n            </TextBlock>\r\n            <TextBlock mail>\r\n                {cell.username}\r\n            </TextBlock>\r\n            <TextBlock elo>\r\n                {cell.elo}\r\n            </TextBlock>\r\n            <TextBlock>\r\n                {cell.ratio}\r\n            </TextBlock>\r\n            <TextBlock>\r\n                {cell.win}\r\n            </TextBlock>\r\n            <TextBlock>\r\n                {cell.lose}\r\n            </TextBlock>\r\n        </ListCellBlock>\r\n    )\r\n});\r\n\r\nconst BorderBlock = styled.div`\r\n    position: absolute;\r\n    height: 1px;\r\n    width: 100%;\r\n    background-color: #ccc;\r\n    top: ${props => (props.index * 41 - 1 + 42) + 'px'};\r\n    left: 0;\r\n`;\r\n\r\nconst HeaderCell = React.memo(() => {\r\n    return (\r\n        <HeaderCellBlock>\r\n            <TextBlock>\r\n                Rank\r\n            </TextBlock>\r\n            <TextBlock mail={true} header={true}>\r\n                Email\r\n            </TextBlock>\r\n            <TextBlock elo={true}>\r\n                Elo\r\n            </TextBlock>\r\n            <TextBlock>\r\n                Ratio\r\n            </TextBlock>\r\n            <TextBlock>\r\n                Win\r\n            </TextBlock>\r\n            <TextBlock>\r\n                Lose\r\n            </TextBlock>\r\n        </HeaderCellBlock>\r\n    )\r\n});\r\n\r\nconst HeaderCellBlock = styled.div`\r\n    position: absolute;\r\n    display: flex;\r\n    height: 40px;\r\n    width: 100%;\r\n    border-bottom: 2px solid rgba(0, 0, 0, 0.7);\r\n    top: 0;\r\n    left: 0;\r\n`;\r\n\r\nconst List = ({ list }) => {\r\n    const listArr = list && list\r\n        .map(cell => (\r\n                <ListCell\r\n                    key={cell.username}\r\n                    cell={cell}\r\n                />\r\n            )\r\n        );\r\n\r\n    const borderArr = [];\r\n    if(list) {\r\n        const leng = list.reduce((acc, cur) => {\r\n            return acc + (cur.index < 15 ? 1 : 0);\r\n        }, 0);\r\n        \r\n        for(let i=1; i<leng; ++i) {\r\n            borderArr.push(\r\n                <BorderBlock\r\n                    key={`border_${i}`}\r\n                    index={i}\r\n                />\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <ListBlock>\r\n            <HeaderCell />\r\n            {listArr}\r\n            {borderArr}\r\n        </ListBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(List);","import React from 'react';\r\n\r\nimport List from '../../components/main/List';\r\n\r\nconst ListContainer = ({ list }) => {\r\n\r\n    return (\r\n        <List list={list}/>\r\n    )\r\n};\r\n\r\nexport default ListContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport RankImage from '../../static/image/ranking.svg';\r\nimport ListContainer from '../../containers/main/ListContainer';\r\n\r\nconst RankingBlock = styled.div`\r\n    position: relative;\r\n    width: 720px;\r\n    height: 720px;\r\n    box-sizing: border-box;\r\n    display: flex;\r\n    justify-content: center;\r\n    padding: 30px;\r\n    background-color: rgba(255,255,255,0.5);\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst BackgroundBlock = styled.img`\r\n    position: absolute;\r\n    top: 10%;\r\n    left: 10%;\r\n    width: 80%;\r\n    height: 80%;\r\n    opacity: 0.1;\r\n    z-index: -1;\r\n`;\r\n\r\nconst Ranking = ({ rank }) => {\r\n    return (\r\n        <RankingBlock>\r\n            <BackgroundBlock src={RankImage}/>\r\n            <ListContainer list={rank}/>\r\n        </RankingBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Ranking);","import React, { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Ranking from '../../components/main/Ranking';\r\n\r\nconst tombIndex = 15;\r\nconst RankingContainer = () => {\r\n    const { ranking } = useSelector(({ ranking }) => ({\r\n        ranking: ranking.ranking,\r\n    }));\r\n\r\n    const [ rank, setRank ] = useState();\r\n\r\n    useEffect(() => {\r\n        if(ranking) {\r\n            setRank(prevState => {\r\n                //  initialize\r\n                if(!prevState) {\r\n                    return ranking\r\n                        .map((ranking, index) => ({\r\n                            ...ranking,\r\n                            index,\r\n                        }));\r\n                }\r\n\r\n                //  delete thumbIndex && update component state\r\n                const stable = [];\r\n                const revisedState = prevState\r\n                    .filter(cell => cell.index !== tombIndex)\r\n                    .map(internalCell => {\r\n                        const index = ranking.findIndex(externalCell => externalCell.username === internalCell.username);\r\n                        if(index >= 0) {\r\n                            stable.push(index);\r\n                            // eslint-disable-next-line\r\n                            if(JSON.stringify({ ...ranking[index], index }) == JSON.stringify(internalCell)) {\r\n                                return internalCell;\r\n                            }\r\n                            return {\r\n                                ...ranking[index],\r\n                                index,\r\n                            }\r\n                        } else {\r\n                            return {\r\n                                ...internalCell,\r\n                                index: tombIndex,\r\n                            }\r\n                        }\r\n                  });\r\n\r\n                //  update new ranker (tombIndex index => target index)\r\n                let init = 0;\r\n                const newlyPushed = [];\r\n                stable\r\n                    .sort((a, b) => a - b)\r\n                    .reduce((acc, cur) => {\r\n                        for(let i=init; i<cur; ++i) {\r\n                            acc.push(i);\r\n                        }\r\n                        init = cur + 1;\r\n                        return acc;\r\n                    }, [])\r\n                    .forEach(index => {\r\n                        revisedState.push({\r\n                            ...ranking[index],\r\n                            index: tombIndex,\r\n                        })\r\n                        newlyPushed.push({\r\n                            ...ranking[index],\r\n                            index,\r\n                        })\r\n                    });\r\n                \r\n                if(stable.length > 0) {\r\n                    setTimeout(() => {\r\n                        setRank(prevState => {\r\n                            const copiedRanking = [ ...prevState ];\r\n                            newlyPushed.forEach(externalCell => {\r\n                                const index = copiedRanking.findIndex(internalCell => internalCell.username === externalCell.username);\r\n                                if(index) {\r\n                                    copiedRanking.splice(index, 1, {\r\n                                        ...externalCell\r\n                                    });\r\n                                }\r\n                            });\r\n    \r\n                            return copiedRanking;\r\n                        })\r\n                    }, 0);\r\n                }\r\n                \r\n                return revisedState;\r\n            });\r\n        }\r\n    }, [ranking]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            setRank(null);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <Ranking rank={rank}/>\r\n    )\r\n};\r\n\r\nexport default RankingContainer;","import { GiChessPawn, GiChessKing, GiChessQueen,\r\n    GiChessBishop, GiChessKnight, GiChessRook, GiPlainCircle } from 'react-icons/gi';\r\n\r\nexport const pieceMapper = {\r\n    'pawn': GiChessPawn,\r\n    'king': GiChessKing,\r\n    'queen': GiChessQueen,\r\n    'bishop': GiChessBishop,\r\n    'knight': GiChessKnight,\r\n    'rook': GiChessRook,\r\n    'covered': GiPlainCircle,\r\n}\r\n\r\nexport const playerMapper = {\r\n    'white': {\r\n        color: 'white',\r\n        style: {\r\n            filter: `drop-shadow(1px 1px 1px white)`,\r\n            width: '80%',\r\n            height: '80%',\r\n        }\r\n    },\r\n    'black': {\r\n        color: 'black',\r\n        style: {\r\n            filter: `drop-shadow(1px 1px 1px black)`,\r\n            width: '80%',\r\n            height: '80%',\r\n        }\r\n    },\r\n    'covered0': {\r\n        style: {\r\n            filter: `drop-shadow(1px 1px 1px black)`,\r\n            width: '30%',\r\n            height: '30%',\r\n            color: 'rgb(130, 151, 105)',\r\n            \r\n        }\r\n    },\r\n    'covered1': {\r\n        style: {\r\n            filter: `drop-shadow(1px 1px 1px black)`,\r\n            width: '30%',\r\n            height: '30%',\r\n            color: 'rgb(100, 111, 64)',\r\n        }\r\n    }\r\n}","import React, {useCallback} from 'react';\r\nimport styled, { css, createGlobalStyle } from 'styled-components';\r\nimport { IconContext } from 'react-icons';\r\nimport { pieceMapper, playerMapper } from '../../lib/base/pieceConverter';\r\n\r\nconst pieceConverter = ({ piece, owner, covered, cellNum }) => {\r\n    let coveredCanvas = null;\r\n    \r\n    if(covered) {\r\n        const Component = pieceMapper['covered'];\r\n\r\n        coveredCanvas = (\r\n            <IconContext.Provider value={playerMapper[`covered${cellNum}`]}>\r\n                <Component />\r\n            </IconContext.Provider>\r\n        );\r\n    }\r\n\r\n    if(!piece || !owner) {\r\n        return coveredCanvas;\r\n    }\r\n\r\n    const Component = pieceMapper[piece];\r\n    const capturedObject = coveredCanvas ? {\r\n        opacity: 0.5,\r\n        filter: owner === 'black' ? `drop-shadow(1px 1px 1px white)` : `drop-shadow(1px 1px 1px black)`,\r\n    } : null;\r\n\r\n    const styleObject = {\r\n        ...playerMapper[owner],\r\n        style: {\r\n            ...playerMapper[owner].style,\r\n            ...capturedObject,\r\n        }\r\n    };\r\n\r\n    return (\r\n        <IconContext.Provider value={styleObject}>\r\n            <Component />\r\n        </IconContext.Provider>\r\n    )\r\n};\r\n\r\nconst CanvasBlock = styled.div`\r\n    position: relative;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    transition: 0.5s;\r\n\r\n    ${props => props.replayMode && css`\r\n        opacity: 0.8;\r\n    `}\r\n`;\r\n\r\nconst CanvasRowBlock = styled.div`\r\n    display: flex;\r\n`;\r\n\r\nconst CanvasCellBlock = styled.div`\r\n    display: flex;\r\n    cursor: pointer;\r\n    justify-content: center;\r\n    align-items: center;\r\n    /* width: 90px;\r\n    height: 90px; */\r\n    \r\n    width: ${props => {\r\n        if(props.cellSize) {\r\n            return props.cellSize;\r\n        }\r\n        return '90px';\r\n    }};\r\n\r\n    height: ${props => {\r\n        if(props.cellSize) {\r\n            return props.cellSize;\r\n        }\r\n        return '90px';\r\n    }};\r\n\r\n    ${props => props.cellNum === 0 && css`\r\n        background-color: rgb(240, 217, 181);\r\n    `}\r\n\r\n    ${props => props.cellNum === 1 && css`\r\n        background-color: rgb(181, 136, 99);\r\n    `}\r\n\r\n    ${props => props.cellNum === 0 && props.clicked && css`\r\n        background-color: rgb(130, 151, 105);\r\n    `}\r\n\r\n    ${props => props.cellNum === 1 && props.clicked && css`\r\n        background-color: rgb(100, 111, 64);\r\n    `}\r\n\r\n    ${props => props.cellNum === 0 && props.tracked && css`\r\n        background-color: rgb(205, 210, 106);\r\n    `}\r\n\r\n    ${props => props.cellNum === 1 && props.tracked && css`\r\n        background-color: rgb(170, 162, 58);\r\n    `}\r\n\r\n    &:hover {\r\n        ${props => props.cellNum === 0 && props.covered && css`\r\n            background-color: rgb(174, 177, 135);\r\n        `}\r\n\r\n        ${props => props.cellNum === 1 && props.covered && css`\r\n            background-color: rgb(132, 121, 78);\r\n        `}  \r\n    }\r\n`\r\n\r\nconst CanvasRow = React.memo(({ row, y, cellSize, onClickCell, pieceConverter }) => {\r\n    // console.dir('Canvas Row');\r\n    return (\r\n        <CanvasRowBlock>\r\n            {row.map((cell, x) => (\r\n                <CanvasCell\r\n                    key={`cell_${y}_${x}`}\r\n                    onClick={onClickCell.bind(null, {y, x})}\r\n                    pieceConverter={pieceConverter}\r\n                    cellNum={(x + y) % 2}\r\n                    cellSize={cellSize}\r\n                    cell={cell}\r\n                    y={y}\r\n                    x={x}\r\n                />\r\n            ))}\r\n        </CanvasRowBlock>\r\n    )\r\n}, (prevProps, nextProps) => {\r\n    return prevProps.row === nextProps.row;\r\n});\r\n\r\nconst CanvasCell = React.memo(({ cell, cellSize, cellNum, onClick, pieceConverter, y, x }) => {\r\n    // console.dir(`Canvas Cell ${y}_${x}`);\r\n    return (\r\n        <CanvasCellBlock\r\n            onClick={onClick}\r\n            cellNum={cellNum}\r\n            cellSize={cellSize}\r\n            {...cell}\r\n        >\r\n            {pieceConverter({\r\n                piece: cell.piece,\r\n                owner: cell.owner,\r\n                covered: cell.covered,\r\n                cellNum,\r\n            })}\r\n        </CanvasCellBlock>\r\n    )\r\n}, (prevProps, nextProps) => {\r\n    return prevProps.cell === nextProps.cell;\r\n});\r\n\r\nconst CanvasContentBlock = styled.div`\r\n    ${props => props.blocked && css`\r\n        pointer-events: none;\r\n    `}\r\n`;\r\n\r\nconst CanvasContent = ({ board, blocked, cellSize, onClick }) => {\r\n    //  can't memoization\r\n    const onClickCell = useCallback(({y, x}) => {\r\n        onClick(y, x);\r\n    }, [onClick]);\r\n\r\n    // const rev = board.reverse().map((row, y) => (\r\n    //     <CanvasRow\r\n    //         key={`row_${y}`}\r\n    //         row={row.reverse()}\r\n    //         y={y}\r\n    //         cellSize={cellSize}\r\n    //         onClickCell={onClickCell}\r\n    //         pieceConverter={pieceConverter}\r\n    //     />\r\n    // ));\r\n    \r\n    return  (\r\n        <CanvasContentBlock blocked={blocked}>\r\n            {board && board.map((row, y) => (\r\n                <CanvasRow\r\n                    key={`row_${y}`}\r\n                    row={row}\r\n                    y={y}\r\n                    cellSize={cellSize}\r\n                    onClickCell={onClickCell}\r\n                    pieceConverter={pieceConverter}\r\n                />\r\n            ))}\r\n        </ CanvasContentBlock>\r\n    )\r\n}\r\n\r\nconst ReplayBlock = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: calc(100% + 17px);\r\n    width: 60px;\r\n    height: 30px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: white;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    font-size: 12px;\r\n    visibility: hidden;\r\n    opacity: 0;\r\n    transition: 0.5s;\r\n    font-weight: bold;\r\n\r\n    ${props => props.replayMode && css`\r\n        visibility: visible;\r\n        opacity: 1;\r\n    `}\r\n`;\r\n\r\n// //  useless\r\n// const GlobalStyle = createGlobalStyle`\r\n//     body {\r\n//         background: rgba(255,255,255,0.5);\r\n//     }\r\n// `;\r\n\r\nconst Canvas = ({ onContextMenu, replayMode, billBoard, ...rest }) => {\r\n    return (\r\n        <>\r\n            {/* {billBoard && <GlobalStyle />} */}\r\n            <CanvasBlock\r\n                replayMode={replayMode}\r\n                onContextMenu={onContextMenu}\r\n            >\r\n                <CanvasContent {...rest} />\r\n                <ReplayBlock replayMode={replayMode}>Replay</ReplayBlock>\r\n            </CanvasBlock>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default React.memo(Canvas);","import React, { useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Canvas from '../../components/gameplay/Canvas';\r\n\r\nconst BillBoardCanvasWrapperContainer = ({ roomKey, cellSize }) => {\r\n    const { board } = useSelector(({ billBoard }) => ({\r\n        board: billBoard.boards[roomKey],\r\n    }));\r\n\r\n    const onContextMenu = useCallback(e => {\r\n        e.preventDefault();\r\n    }, []);\r\n\r\n    return (\r\n        <Canvas\r\n            board={board}\r\n            billBoard={true}\r\n            blocked={true}\r\n            onContextMenu={onContextMenu}\r\n            cellSize={cellSize}\r\n        />\r\n    )\r\n};\r\n\r\nexport default BillBoardCanvasWrapperContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport BillBoardCanvasWrapperContainer from '../../containers/main/BillBoardCanvasWrapperContainer';\r\n\r\nconst BillBoardFrameBlock = styled.div`\r\n    /* display: flex;\r\n    width: 216px;\r\n    height: 280px; */\r\n    /* flex-direction: column; */\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n\r\n    position: relative;\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding: 10px;\r\n    box-sizing: border-box;\r\n    background: rgba(255,255,255,0.5);\r\n    width: 236px;\r\n    height: 300px;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    z-index: -10;\r\n`;\r\n\r\nconst BillBoardBlock = styled.div`\r\n    width: 216px;\r\n    height: 216px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    transform: scale(0.3);\r\n`;\r\n\r\nconst InformFrameBlock = styled.div`\r\n    margin-top: 4px;\r\n    height: 60px;\r\n    width: 216px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nconst PlayerBlock = styled.div`\r\n    height: 40px;\r\n    width: 100px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n\r\n    & + & {\r\n        margin-left: 12px;\r\n    }\r\n`;\r\n\r\nconst TextBlock = styled.div`\r\n  font-size: 10px;\r\n`;\r\n\r\nconst BillBoard = ({ roomKey, inform }) => {\r\n    return (\r\n        <BillBoardFrameBlock>\r\n            <BillBoardBlock>\r\n                <BillBoardCanvasWrapperContainer roomKey={roomKey} />\r\n            </BillBoardBlock>\r\n            <InformFrameBlock>\r\n                {inform && inform.map((player, index) => (\r\n                    <PlayerBlock key={roomKey + '_' + index + '_' + player.username}>\r\n                        <TextBlock>{player.username.split('@')[0]}</TextBlock>\r\n                        <TextBlock>{player.elo}</TextBlock>\r\n                    </PlayerBlock>\r\n                ))}\r\n            </InformFrameBlock>\r\n        </BillBoardFrameBlock>\r\n    )\r\n};\r\n\r\nexport default BillBoard;","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport BillBoard from '../../components/main/BillBoard';\r\n\r\nconst BillBoardContainer = ({ roomKey }) => {\r\n    const { inform } = useSelector(({ billBoard }) => ({\r\n        inform: billBoard.informs[roomKey],\r\n    }));\r\n\r\n    return (\r\n        <BillBoard\r\n            roomKey={roomKey}\r\n            inform={inform}\r\n        />\r\n    )\r\n};\r\n\r\nexport default BillBoardContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nimport RankingContainer from '../../containers/main/RankingContainer';\r\nimport BillBoardContainer from '../../containers/main/BillBoardContainer';\r\n\r\nconst MainLayoutBlock = styled.div`\r\n    height: 800px;\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nconst sideBlockStyle = css`\r\n    height: 90%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    width: 20%;\r\n    align-items: center;\r\n`;\r\n\r\nconst LeftSideBlock = styled.div`\r\n    ${sideBlockStyle}\r\n    margin-right: 1%;\r\n`;\r\n\r\nconst RightSideBlock = styled.div`\r\n    ${sideBlockStyle}\r\n    margin-left: 1%;\r\n`;\r\n\r\nconst MainLayout = () => {\r\n    return (\r\n        <MainLayoutBlock>\r\n            <LeftSideBlock>\r\n                <BillBoardContainer roomKey={0} />\r\n                <BillBoardContainer roomKey={1} />\r\n            </LeftSideBlock>\r\n            <RankingContainer />\r\n            <RightSideBlock>\r\n                <BillBoardContainer roomKey={2} />\r\n                <BillBoardContainer roomKey={3} />\r\n            </RightSideBlock>\r\n        </MainLayoutBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(MainLayout);","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\n\r\nconst CONNECT_WEBSOCKET = 'ranking/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'ranking/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_VALUE = 'ranking/INITIALIZE_VALUE';\r\nconst INITIALIZE_SOCKET = 'ranking/INITIALIZE_SOCKET';\r\nconst CLEAR_VALUE = 'ranking/CLEAR_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\n\r\nfunction* connectWebsocketSaga () {\r\n    const socketTask = yield fork(connectNamespace, { \r\n        url: '/ranking',\r\n        initializeSocket,\r\n        initializeValue,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* rankingSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    ranking: null,\r\n    error: null,\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\r\n        ...state,\r\n        ...rest,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n}, initialState);","import _ from 'lodash';\r\n\r\nexport const genBoard = (board, prev, next) => {\r\n    const tempBoard = _.cloneDeep(board);\r\n    \r\n    const pieceStore = { ...tempBoard[prev.y][prev.x] };\r\n    tempBoard[prev.y][prev.x] = {\r\n        covered: false\r\n    };\r\n    tempBoard[next.y][next.x] = {\r\n        ...pieceStore,\r\n        dirty: true,\r\n    };\r\n\r\n    //  promotion (pawn => queen)\r\n    const { owner, piece } = tempBoard[next.y][next.x];\r\n    if((owner === 'white' && piece === 'pawn' && next.y === 0) || (owner === 'black' && piece === 'pawn' && next.y === 7)) {\r\n        tempBoard[next.y][next.x] = {\r\n            ...tempBoard[next.y][next.x],\r\n            piece: 'queen',\r\n        }\r\n    };\r\n\r\n    //  castling\r\n    if(tempBoard[next.y][next.x].piece === 'king') {\r\n        if(next.x - prev.x === 2) {\r\n            const pieceStore = { ...tempBoard[prev.y][prev.x+3] };\r\n            tempBoard[prev.y][prev.x+3] = {\r\n                covered: false\r\n            };\r\n            tempBoard[prev.y][prev.x+1] = {\r\n                ...pieceStore,\r\n                dirty: true,\r\n            };\r\n        }\r\n\r\n        if(next.x - prev.x === -2) {\r\n            const pieceStore = { ...tempBoard[prev.y][prev.x-4] };\r\n            tempBoard[prev.y][prev.x-4] = {\r\n                covered: false\r\n            };\r\n            tempBoard[prev.y][prev.x-1] = {\r\n                ...pieceStore,\r\n                dirty: true,\r\n            };\r\n        }\r\n    }\r\n    \r\n    return tempBoard;\r\n};\r\n\r\nexport const genClearBoard = (board, params) => {\r\n    const arr = [];\r\n\r\n    const leng = board.length;\r\n    for(let i=0; i<leng; ++i) {\r\n        for(let j=0; j<leng; ++j) {\r\n            let pass = false;\r\n            params.forEach(param => {\r\n                pass |= board[i][j][param];\r\n            });\r\n            if(pass) {\r\n                arr.push({\r\n                    y: i,\r\n                    x: j,\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    arr.forEach(cell => {\r\n        board[cell.y] = [ ...board[cell.y]];\r\n        const popedCell = board[cell.y][cell.x];\r\n        const newCell = {\r\n            ...popedCell,\r\n        };\r\n        params.forEach(param => {\r\n            newCell[param] = false;\r\n        });\r\n\r\n        board[cell.y].splice(cell.x, 1, newCell);\r\n    });\r\n\r\n    return board;\r\n}\r\n\r\nexport const genReplayBoard = (board, pieceMove, prevIndex, nextIndex) => {\r\n    //  board should be reflect prevIndex pieceMove\r\n    const nextBoard = genClearBoard([...board], [\r\n        'covered',\r\n        'clicked',\r\n        'tracked',\r\n    ]);\r\n    \r\n    if(prevIndex < nextIndex) {\r\n        for(let i=prevIndex+1; i<=nextIndex; ++i) {\r\n            const beforeIndex = pieceMove[i].prev;\r\n            const beforePiece = pieceMove[i].prevPiece;\r\n            const afterIndex = pieceMove[i].next;\r\n            const afterPiece = pieceMove[i].nextPiece;\r\n            nextBoard[beforeIndex.y] = [ ...nextBoard[beforeIndex.y] ];\r\n            nextBoard[beforeIndex.y][beforeIndex.x] = { covered: false };\r\n            nextBoard[afterIndex.y] = [ ...nextBoard[afterIndex.y] ];\r\n            nextBoard[afterIndex.y][afterIndex.x] = { ...beforePiece, dirty: true };\r\n\r\n            //  promotion\r\n            const { owner, piece } = nextBoard[afterIndex.y][afterIndex.x];\r\n            if((owner === 'white' && piece === 'pawn' && afterIndex.y === 0) || (owner === 'black' && piece === 'pawn' && afterIndex.y === 7)) {\r\n                nextBoard[afterIndex.y][afterIndex.x] = {\r\n                    ...nextBoard[afterIndex.y][afterIndex.x],\r\n                    piece: 'queen',\r\n                }\r\n            };\r\n\r\n            //  castling\r\n            if(nextBoard[afterIndex.y][afterIndex.x].piece === 'king') {\r\n                if(afterIndex.x - beforeIndex.x === 2) {\r\n                    nextBoard[beforeIndex.y] = [ ...nextBoard[beforeIndex.y] ];\r\n                    \r\n                    const pieceStore = { ...nextBoard[beforeIndex.y][beforeIndex.x+3] };\r\n                    nextBoard[beforeIndex.y][beforeIndex.x+3] = {\r\n                        covered: false\r\n                    };\r\n                    nextBoard[beforeIndex.y][beforeIndex.x+1] = {\r\n                        ...pieceStore,\r\n                        dirty: true,\r\n                    };\r\n                }\r\n\r\n                if(afterIndex.x - beforeIndex.x === -2) {\r\n                    nextBoard[beforeIndex.y] = [ ...nextBoard[beforeIndex.y] ];\r\n\r\n                    const pieceStore = { ...nextBoard[beforeIndex.y][beforeIndex.x-4] };\r\n                    nextBoard[beforeIndex.y][beforeIndex.x-4] = {\r\n                        covered: false\r\n                    };\r\n                    nextBoard[beforeIndex.y][beforeIndex.x-1] = {\r\n                        ...pieceStore,\r\n                        dirty: true,\r\n                    };\r\n                }\r\n            };\r\n\r\n        }\r\n    } else {\r\n        for(let i=prevIndex; i>nextIndex; --i) {\r\n            const beforeIndex = pieceMove[i].prev;\r\n            const beforePiece = pieceMove[i].prevPiece;\r\n            const afterIndex = pieceMove[i].next;\r\n            const afterPiece = pieceMove[i].nextPiece;\r\n            nextBoard[beforeIndex.y] = [ ...nextBoard[beforeIndex.y] ];\r\n            nextBoard[beforeIndex.y][beforeIndex.x] = { ...beforePiece };\r\n            nextBoard[afterIndex.y] = [ ...nextBoard[afterIndex.y] ];\r\n            nextBoard[afterIndex.y][afterIndex.x] = { ...afterPiece };\r\n\r\n            //  castling\r\n            if(nextBoard[beforeIndex.y][beforeIndex.x].piece === 'king') {\r\n                if(beforeIndex.x - afterIndex.x === -2) {\r\n                    nextBoard[beforeIndex.y] = [ ...nextBoard[beforeIndex.y] ];\r\n                    \r\n                    const pieceStore = { ...nextBoard[beforeIndex.y][beforeIndex.x+1] };\r\n                    nextBoard[beforeIndex.y][beforeIndex.x+3] = {\r\n                        ...pieceStore,\r\n                        dirty: false,\r\n                    };\r\n                    nextBoard[beforeIndex.y][beforeIndex.x+1] = {\r\n                        covered: false\r\n                    };\r\n                }\r\n\r\n                if(beforeIndex.x - afterIndex.x === 2) {\r\n                    nextBoard[beforeIndex.y] = [ ...nextBoard[beforeIndex.y] ];\r\n\r\n                    const pieceStore = { ...nextBoard[beforeIndex.y][beforeIndex.x-1] };\r\n                    nextBoard[beforeIndex.y][beforeIndex.x-4] = {\r\n                        ...pieceStore,\r\n                        dirty: false,\r\n                    };\r\n                    nextBoard[beforeIndex.y][beforeIndex.x-1] = {\r\n                        covered: false\r\n                    };\r\n                }\r\n            };\r\n        }\r\n    }\r\n    if(0 <= nextIndex && nextIndex < pieceMove.length) {\r\n        const {\r\n            prev: { y: prevY, x: prevX },\r\n            next: { y: nextY, x: nextX }\r\n        } = pieceMove[nextIndex];\r\n\r\n        nextBoard[prevY] = [ ...nextBoard[prevY] ];\r\n        nextBoard[prevY][prevX] = {\r\n            ...nextBoard[prevY][prevX],\r\n            tracked: true,\r\n        };\r\n\r\n        nextBoard[nextY] = [ ...nextBoard[nextY] ];\r\n        nextBoard[nextY][nextX] = {\r\n            ...nextBoard[nextY][nextX],\r\n            tracked: true,\r\n        };\r\n    }\r\n\r\n    console.dir(nextBoard);\r\n    return nextBoard;\r\n}","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nimport { genClearBoard } from '../lib/base/genBoard';\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\n\r\nconst CONNECT_WEBSOCKET = 'billBoard/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'billBoard/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_VALUE = 'billBoard/INITIALIZE_VALUE';\r\nconst INITIALIZE_SOCKET = 'billBoard/INITIALIZE_SOCKET';\r\nconst CLEAR_VALUE = 'billBoard/CLEAR_VALUE';\r\nconst CHANGE_VALUE = 'billBoard/CHANGE_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\nexport const changeValue = createAction(CHANGE_VALUE);\r\n\r\nexport const changeValueThunk = ({ roomKey, move }) => ( dispatch, getState ) => {\r\n    const { prev, next } = move;\r\n    const { billBoard: { boards },\r\n        } = getState();\r\n\r\n    const board = boards[roomKey];\r\n    if(!board) return;\r\n\r\n    const cell = board[prev.y][prev.x];\r\n    const clearBoard = genClearBoard([...board], [\r\n        'tracked',\r\n    ]);\r\n    \r\n    clearBoard[next.y] = [ ...clearBoard[next.y] ];\r\n    clearBoard[next.y][next.x] = {\r\n        ...cell,\r\n        tracked: true,\r\n        dirty: true,\r\n    };\r\n\r\n    clearBoard[prev.y]= [ ...clearBoard[prev.y] ];\r\n    clearBoard[prev.y][prev.x] = {\r\n        tracked: true,\r\n    };\r\n\r\n    //  promotion\r\n    const { owner, piece } = clearBoard[next.y][next.x];\r\n    if((owner === 'white' && piece === 'pawn' && next.y === 0) || (owner === 'black' && piece === 'pawn' && next.y === 7)) {\r\n        clearBoard[next.y][next.x] = {\r\n            ...clearBoard[next.y][next.x],\r\n            piece: 'queen',\r\n        }\r\n    };\r\n\r\n    //  castling\r\n    if(clearBoard[next.y][next.x].piece === 'king') {\r\n        if(next.x - prev.x === 2) {\r\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\r\n            \r\n            const pieceStore = { ...clearBoard[prev.y][prev.x+3] };\r\n            clearBoard[prev.y][prev.x+3] = {};\r\n            clearBoard[prev.y][prev.x+1] = {\r\n                ...pieceStore,\r\n                dirty: true,\r\n            };\r\n        }\r\n\r\n        if(next.x - prev.x === -2) {\r\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\r\n\r\n            const pieceStore = { ...clearBoard[prev.y][prev.x-4] };\r\n            clearBoard[prev.y][prev.x-4] = {};\r\n            clearBoard[prev.y][prev.x-1] = {\r\n                ...pieceStore,\r\n                dirty: true,\r\n            };\r\n        }\r\n    };\r\n    \r\n    const revisedBoards = [ ...boards.slice(0, roomKey), clearBoard, ...boards.slice(roomKey+1) ];\r\n\r\n    dispatch(changeValue({\r\n        boards: revisedBoards,\r\n    }));\r\n}\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const query = action.payload;\r\n\r\n    const socketTask = yield fork(connectNamespace, { \r\n        url: '/billBoard',\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue: changeValueThunk,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* billBoardSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    boards: [null, null, null, null],\r\n    informs: [null, null, null, null],\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { type, roomKey, inform, board }}) => ({\r\n        ...state,\r\n        boards: [ ...state.boards.slice(0, roomKey), board, ...state.boards.slice(roomKey+1) ],\r\n        informs: [ ...state.informs.slice(0, roomKey), inform, ...state.informs.slice(roomKey+1) ],\r\n    }),\r\n    [CHANGE_VALUE]: (state, { payload: { boards } }) => ({\r\n        ...state,\r\n        boards,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n}, initialState);","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport useAsync from '../../lib/hook/useAsync';\r\nimport { setSessionThunk } from '../../modules/sessionAuth';\r\n\r\nimport MainLayout from '../../components/main/MainLayout';\r\nimport {\r\n    connectWebsocket as connectRankingWebsocket,\r\n    disconnectWebsocket as disconnectRankingWebsocket,\r\n    clearValue as clearRankingValue\r\n} from '../../modules/ranking';\r\nimport {\r\n    connectWebsocket as connectBillBoardWebsocket,\r\n    disconnectWebsocket as disconnectBillBoardWebsocket,\r\n    clearValue as clearBillBoardValue\r\n} from '../../modules/billBoard'; \r\n\r\nconst MainLayoutContainer = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const connection = async () => {\r\n        await dispatch(setSessionThunk());\r\n        \r\n        dispatch(disconnectRankingWebsocket());\r\n        dispatch(disconnectBillBoardWebsocket());\r\n        await Promise.resolve().then(() => {\r\n            dispatch(connectRankingWebsocket());\r\n            dispatch(connectBillBoardWebsocket());\r\n        })\r\n        \r\n        return true;\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(disconnectRankingWebsocket());\r\n            dispatch(disconnectBillBoardWebsocket());\r\n            dispatch(clearRankingValue());\r\n            dispatch(clearBillBoardValue());\r\n        };\r\n    }, [dispatch]);\r\n\r\n    // useEffect(() => {\r\n    //     dispatch(clearValue());\r\n    // }, [dispatch])\r\n\r\n    const [state] = useAsync(connection, [ dispatch ]);\r\n\r\n    const { loading, data, error } = state;\r\n\r\n    // if(loading) return null;\r\n    // if(error) return null;\r\n    // if(data) {\r\n    //     return (\r\n    //         <MainLayout />\r\n    //     )\r\n    // }\r\n    // return null;\r\n\r\n    return (\r\n        <MainLayout />\r\n    )\r\n};\r\n\r\nexport default MainLayoutContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst FooterBlock = styled.div`\r\n    /* position: absolute;\r\n    top: 850px; */\r\n    width: 100%;\r\n    height: 66px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n`;\r\n\r\nconst TextBlock = styled.div`\r\n    font-size: 12px;\r\n    color: rgba(0, 0, 0, 0.3);\r\n`;\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <FooterBlock>\r\n            <TextBlock>\r\n                COPYRIGHT © SJCorp ALL RIGHTS RESERVED.\r\n            </TextBlock>\r\n            <TextBlock>\r\n                Powered by SJCorp. Designs © 2019 - 2020 SJCorp\r\n            </TextBlock>\r\n        </FooterBlock>\r\n    )\r\n};\r\n\r\nexport default Footer;","import React from 'react';\r\nimport Footer from '../../components/common/Footer';\r\n\r\nconst FooterContainer = () => {\r\n    return (\r\n        <Footer />\r\n    );\r\n};\r\n\r\nexport default FooterContainer;","import React from 'react';\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport MainLayoutContainer from '../containers/main/MainLayoutContainer';\r\nimport FooterContainer from '../containers/common/FooterContainer';\r\n\r\nconst MainPage = () => {\r\n\r\n    return (\r\n        <>\r\n            <HeaderContainer />\r\n            <MainLayoutContainer />\r\n            <FooterContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default MainPage;","import React, { useRef, useCallback } from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { IoMdMail } from 'react-icons/io';\r\nimport { FaLock } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons';\r\n\r\nconst AuthFrameBlock = styled.form`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 800px;\r\n`;\r\n\r\nconst AuthFormBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    width: 30%;\r\n    height: 400px;\r\n    background-color: rgba(255, 255, 255);\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst TitleBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    font-size: 20px;\r\n    height: 100px;\r\n    text-shadow: 2px 2px 2px rgba(0,0,0,0.14);\r\n`;\r\n\r\nconst InputFrameBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 100%;\r\n    height: 150px;\r\n`;\r\n\r\nconst InputFormBlock = styled.div`\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    padding-left: 1%;\r\n    width: 60%;\r\n\r\n    &+& {\r\n        margin-top: 10px;\r\n    }\r\n\r\n    @keyframes blinking {\r\n        0%{\r\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n        }\r\n        50% {\r\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.56), 0 3px 1px -2px rgba(0,0,0,0.8), 0 1px 5px 0 rgba(0,0,0,0.48);\r\n        }\r\n        100%{\r\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n        }\r\n      }\r\n\r\n    ${props => props.blink && css`\r\n        animation: blinking 1s 2;\r\n    `}\r\n`\r\n\r\nconst inputStyle = css`\r\n    outline: none;\r\n    border: none;\r\n    height: 40px;\r\n    width: 80%;\r\n    padding-left: 5%;\r\n`;\r\n\r\nconst EmailInputBlock = styled.input`\r\n    ${inputStyle}\r\n`\r\n\r\nconst PasswordInputBlock = styled.input`\r\n    ${inputStyle}\r\n`;\r\n\r\nconst OptionFormBlock = styled.div`\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-top: 10px;\r\n    width: 60%;\r\n    height: 20px;\r\n`;\r\n\r\nconst SaveInputFormBlock = styled.div`\r\n    display: flex;\r\n    align-content: center;\r\n    width: 30%;\r\n    height: 100%;\r\n`;\r\n\r\nconst SaveInputBlock = styled.input`\r\n    height: 100%;\r\n    outline: none;\r\n    margin: 0px;\r\n`;\r\n\r\nconst SaveInputTextBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n    font-size: 10px;\r\n    color: rgb(0, 0, 0, 0.5);\r\n    cursor: pointer;\r\n    margin-left: 5px;\r\n`;\r\n\r\nconst ForgetBlock = styled.div`\r\n    font-size: 10px;\r\n    color: rgb(0, 0, 0, 0.5);\r\n    cursor: pointer;\r\n`;\r\n\r\nconst SubmitFrameBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 150px;\r\n`;\r\n\r\nconst SubmitBlock = styled.button`\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    border: none;\r\n    outline: none;\r\n    width: 30%;\r\n    cursor: pointer;\r\n    height: 40px;\r\n    background-color: transparent;\r\n\r\n    &:hover, :active {\r\n        background-color: rgb(0, 0, 0, 0.05);\r\n    }\r\n`;\r\n\r\nconst CreateFormBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-top: 10px;\r\n    height: 40px;\r\n`;\r\n\r\nconst CreateBlock = styled.div`\r\n    color: rgb(0, 0, 0, 0.5);\r\n    font-size: 10px;\r\n`;\r\n\r\nconst CreateButtonBlock = styled.button`\r\n    outline: none;\r\n    border: none;\r\n    font-size: 10px;\r\n    color: black;\r\n    text-decoration: none;\r\n    cursor: pointer;\r\n    margin-left: 5px;\r\n    background-color: transparent;\r\n`;\r\n\r\nconst ErrorBlock = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 48%;\r\n    width: 50%;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    font-size: 12px;\r\n    @keyframes fontOpacity {\r\n        0%{\r\n            color: rgb(0, 0, 0, 0);\r\n        }\r\n        100%{\r\n            color: rgb(0, 0, 0, 0.4);\r\n        }\r\n      }\r\n    animation: fontOpacity 1s 1;\r\n    color: rgb(0, 0, 0, 0.4);\r\n`\r\n\r\nconst AuthForm = ({ login, register, form, error, onSubmit, onChange, onRegister }) => {\r\n    const ref = useRef({});\r\n\r\n    const onClick = useCallback(tag => {\r\n        ref.current[tag].focus();\r\n    }, []);\r\n\r\n    return (\r\n        <AuthFrameBlock\r\n            autoComplete='off'\r\n            autoCorrect='off'\r\n            autoCapitalize='off'\r\n            spellCheck='false'\r\n            onSubmit={onSubmit}\r\n        >\r\n            <AuthFormBlock>\r\n                <TitleBlock>\r\n                    { login ? 'Sign In' : ( register ? 'Sign Up' : null ) }\r\n                </TitleBlock>\r\n                <InputFrameBlock>\r\n                    <InputFormBlock\r\n                        onClick={onClick.bind(null, 'username')}\r\n                        blink={error.username}\r\n                        key={`username_${error.count}`}\r\n                    >\r\n                        <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer'} }}>\r\n                            <IoMdMail />\r\n                        </IconContext.Provider>\r\n                        <EmailInputBlock\r\n                            type='text'\r\n                            name='username'\r\n                            placeholder='Email'\r\n                            onChange={onChange}\r\n                            value={form.username}\r\n                            ref={el => ref.current.username = el}\r\n                        />\r\n                        <ErrorBlock>\r\n                            {error.username}\r\n                        </ErrorBlock>\r\n                    </InputFormBlock>\r\n                    <InputFormBlock\r\n                        onClick={onClick.bind(null, 'password')}\r\n                        blink={error.password}\r\n                        key={`password_${error.count}`}\r\n                    >\r\n                        <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer' } }}>\r\n                            <FaLock />\r\n                        </IconContext.Provider>\r\n                        <PasswordInputBlock\r\n                            type='password'\r\n                            name='password'\r\n                            placeholder='Password'\r\n                            onChange={onChange}\r\n                            value={form.password}\r\n                            ref={el => ref.current.password = el}\r\n                        />\r\n                        <ErrorBlock>\r\n                            {error.password}\r\n                        </ErrorBlock>\r\n                    </InputFormBlock>\r\n                    {register ? (\r\n                        <InputFormBlock\r\n                            onClick={onClick.bind(null, 'passwordConfirm')}\r\n                            blink={error.passwordConfirm}\r\n                            key={`passwordConfirm_${error.count}`}\r\n                        >\r\n                            <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer' } }}>\r\n                                <FaLock />\r\n                            </IconContext.Provider>\r\n                            <PasswordInputBlock\r\n                                type='password'\r\n                                name='passwordConfirm'\r\n                                placeholder='Confirm Password'\r\n                                onChange={onChange}\r\n                                value={form.passwordConfirm}\r\n                                ref={el => ref.current.passwordConfirm = el}\r\n                            />\r\n                            <ErrorBlock>\r\n                                {error.passwordConfirm}\r\n                            </ErrorBlock>\r\n                        </InputFormBlock>\r\n                    ): null}\r\n                    {login ? (\r\n                        <OptionFormBlock>\r\n                            <SaveInputFormBlock>\r\n                                <SaveInputBlock\r\n                                    type='checkbox'\r\n                                />\r\n                                <SaveInputTextBlock>\r\n                                    Remember Me\r\n                                </SaveInputTextBlock>\r\n                            </SaveInputFormBlock>\r\n                            <ForgetBlock>\r\n                                Forget password?    \r\n                            </ForgetBlock>\r\n                        </OptionFormBlock>\r\n                    ): null}\r\n                </InputFrameBlock>\r\n                <SubmitFrameBlock>\r\n                    <SubmitBlock\r\n                        type='submit'\r\n                    >\r\n                        Submit\r\n                    </SubmitBlock>\r\n                    {login ? (\r\n                        <CreateFormBlock>\r\n                            <CreateBlock>\r\n                                Don't have an account?\r\n                            </CreateBlock>\r\n                            <CreateButtonBlock\r\n                                type='button'\r\n                                onClick={onRegister}\r\n                            >\r\n                                Create\r\n                            </CreateButtonBlock>\r\n                        </CreateFormBlock>\r\n                    ) : (\r\n                        <CreateFormBlock>\r\n                            <CreateBlock>\r\n                                Don't have an account?\r\n                            </CreateBlock>\r\n                            <CreateButtonBlock\r\n                                type='button'\r\n                            >\r\n                                Create\r\n                            </CreateButtonBlock>\r\n                        </CreateFormBlock>\r\n                    )}\r\n                </SubmitFrameBlock>\r\n            </AuthFormBlock>\r\n        </AuthFrameBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(AuthForm);","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Joi from 'joi';\r\nimport { loginProcessThunk, changeField, clearField, clearSpecificField } from '../../modules/sessionAuth';\r\nimport AuthForm from '../../components/auth/AuthForm';\r\n\r\nconst LoginContainer = ({ history }) => {\r\n    const { form, auth, authError } = useSelector(({ sessionAuth }) => ({\r\n        form: sessionAuth.login,\r\n        auth: sessionAuth.auth,\r\n        authError: sessionAuth.authError,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [ error, setError ] = useState({\r\n        username: '',\r\n        password: ''\r\n    });\r\n\r\n    const onChange = useCallback(e => {\r\n        const { name, value } = e.target;\r\n        if(error[name] !== '') {\r\n            setError(prevState => ({\r\n                ...prevState,\r\n                [name]: '',\r\n            }));\r\n        }\r\n        dispatch(changeField({\r\n            form: 'login',\r\n            key: name,\r\n            value,\r\n        }));\r\n    }, [dispatch, error]);\r\n\r\n    const onSubmit = useCallback(e => {\r\n        e.preventDefault();\r\n        const { username, password } = form;\r\n\r\n        //  initialize\r\n        let nextError = Object.keys(form)\r\n            .reduce((acc, key) =>\r\n                ({\r\n                    ...acc,\r\n                    [key]: false,\r\n                }),{});\r\n\r\n        //  empty check\r\n        Object.keys(nextError)\r\n            .filter(key => form[key] === '')\r\n            .forEach(key => {\r\n                nextError = {\r\n                    ...nextError,\r\n                    [key]: 'Required field'\r\n                }\r\n            });\r\n\r\n        const schema = Joi.object().keys({\r\n            username: Joi.string().max(80).email({ minDomainAtoms: 2 }).required().error(() => ({ message: 'Wrong format' })),\r\n            password: Joi.string().min(4).max(16).required().error(() => ({ message: '4 ~ 16 digits' })),\r\n        });\r\n\r\n        const result = Joi.validate(form, schema, { abortEarly: false });\r\n\r\n        if(result.error) {\r\n            result.error.details.forEach(detail => {\r\n                if(!nextError[detail.path[0]]) {\r\n                    nextError = {\r\n                        ...nextError,\r\n                        [detail.path[0]]: detail.message,\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        if(Object.keys(nextError).filter(key => nextError[key]).length > 0) {\r\n            setError(prevState => ({\r\n                ...nextError,\r\n                count: prevState.count + 1,\r\n            }));\r\n            Object.keys(nextError).forEach(key => {\r\n\r\n                if(nextError[key]) {\r\n                    dispatch(clearSpecificField({ form: 'login', key }))\r\n                }\r\n            });\r\n\r\n            return;\r\n        };\r\n\r\n        dispatch(loginProcessThunk({ username, password }));\r\n        dispatch(clearField({ form: 'login' }));\r\n    }, [dispatch, form]);\r\n\r\n    useEffect(() => {\r\n        if(authError) {\r\n            let nextError = {};\r\n            const errorMention = authError.response.data;\r\n            Object.keys(errorMention).forEach(key => {\r\n                nextError = {\r\n                    ...nextError,\r\n                    [key]: errorMention[key],\r\n                }\r\n                // dispatch(clearSpecificField({ form: 'login', key }))\r\n            });\r\n\r\n            setError(nextError);\r\n            \r\n            return;\r\n        };\r\n\r\n        if(auth) {\r\n            history.push('/');\r\n        }\r\n    }, [history, auth, authError]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearField({ form: 'login' }));\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const onRegister = useCallback(() => {\r\n        dispatch(clearField({ form: 'register' }));\r\n        history.push('/register');\r\n    }, [dispatch, history]);\r\n    \r\n    return (\r\n        <AuthForm\r\n            login\r\n            onSubmit={onSubmit}\r\n            onChange={onChange}\r\n            form={form}\r\n            error={error}\r\n            onRegister={onRegister}\r\n        />\r\n    )\r\n};\r\n\r\nexport default withRouter(LoginContainer);","import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport LoginContainer from '../containers/auth/LoginContainer';\r\nimport FooterContainer from '../containers/common/FooterContainer';\r\n\r\nconst LoginPage = () => {\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Sign In • Chesssup.com</title>\r\n            </Helmet>\r\n            <HeaderContainer />\r\n            <LoginContainer />\r\n            <FooterContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default LoginPage;","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Joi from 'joi';\r\nimport AuthForm from '../../components/auth/AuthForm';\r\nimport { registerProcessThunk, changeField, clearField, clearSpecificField } from '../../modules/sessionAuth';\r\n\r\nconst RegisterContainer = ({ history }) => {\r\n    const { form, auth, authError } = useSelector(({ sessionAuth }) => ({\r\n        form: sessionAuth.register,\r\n        auth: sessionAuth.auth,\r\n        authError: sessionAuth.authError,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [ error, setError ] = useState({\r\n        username: '',\r\n        password: '',\r\n        passwordConfirm: ''\r\n    })\r\n\r\n    const onChange = useCallback(e => {\r\n        const { name, value } = e.target;\r\n        if(error[name] !== '') {\r\n            setError(prevState => ({\r\n                ...prevState,\r\n                [name]: '',\r\n            }));\r\n        }\r\n        dispatch(changeField({\r\n            form: 'register',\r\n            key: name,\r\n            value,\r\n        }));\r\n    }, [dispatch, error]);\r\n\r\n    const onSubmit = useCallback(e => {\r\n        e.preventDefault();\r\n        const { username, password } = form;\r\n\r\n         //  initialize\r\n         let nextError = Object.keys(form)\r\n         .reduce((acc, key) =>\r\n             ({\r\n                 ...acc,\r\n                 [key]: false,\r\n             }),{});\r\n\r\n        //  empty check\r\n        Object.keys(nextError)\r\n            .filter(key => form[key] === '')\r\n            .forEach(key => {\r\n                nextError = {\r\n                    ...nextError,\r\n                    [key]: 'Required field'\r\n                }\r\n            });\r\n\r\n        const schema = Joi.object().keys({\r\n            username: Joi.string().max(80).email({ minDomainAtoms: 2 }).required().error(() => ({ message: 'Wrong format' })),\r\n            password: Joi.string().min(4).max(16).required().error(() => ({ message: '4 ~ 16 digits' })),\r\n            passwordConfirm: Joi.any().valid(Joi.ref('password')).required().error(() => ({ message: 'Password mismatch' })),\r\n        });\r\n\r\n        const result = Joi.validate(form, schema, { abortEarly: false });\r\n\r\n        if(result.error) {\r\n            result.error.details.forEach(detail => {\r\n                if(!nextError[detail.path[0]]) {\r\n                    nextError = {\r\n                        ...nextError,\r\n                        [detail.path[0]]: detail.message,\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        if(Object.keys(nextError).filter(key => nextError[key]).length > 0) {\r\n            setError(prevState => ({\r\n                ...nextError,\r\n                count: prevState.count + 1,\r\n            }));\r\n            Object.keys(nextError).forEach(key => {\r\n                if(nextError[key]) {\r\n                    dispatch(clearSpecificField({ form: 'register', key }))\r\n                }\r\n            });\r\n\r\n            return;\r\n        };\r\n\r\n        dispatch(registerProcessThunk({ username, password }));\r\n        dispatch(clearField({ form: 'register' }));\r\n    }, [dispatch, form]);\r\n\r\n    useEffect(() => {\r\n        if(authError) {\r\n            let nextError = {};\r\n            const errorMention = authError.response.data;\r\n            Object.keys(errorMention).forEach(key => {\r\n                nextError = {\r\n                    ...nextError,\r\n                    [key]: errorMention[key],\r\n                }\r\n                // dispatch(clearSpecificField({ form: 'register', key }))\r\n            });\r\n\r\n            setError(nextError);\r\n            \r\n            return;\r\n        }\r\n\r\n        if(auth) {\r\n            history.push('/');\r\n        }\r\n    }, [history, auth, authError])\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearField({ form: 'register' }));\r\n        };\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <AuthForm \r\n            register\r\n            onSubmit={onSubmit}\r\n            onChange={onChange}\r\n            form={form}\r\n            error={error}\r\n        />\r\n    )\r\n};\r\n\r\nexport default withRouter(RegisterContainer);","import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport RegisterContainer from '../containers/auth/RegisterContainer';\r\nimport FooterContainer from '../containers/common/FooterContainer';\r\n\r\nconst RegisterPage = () => {\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Sign Up • Chesssup.com</title>\r\n            </Helmet>\r\n            <HeaderContainer />\r\n            <RegisterContainer />\r\n            <FooterContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default RegisterPage;","const board = [\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n];\r\n\r\nexport default board;","import { checkPlayersEveryMove } from './validation';\r\n\r\nconst rules = {\r\n    pawn: {\r\n        type: 'onetime',\r\n        move: [\r\n            {\r\n                dy: -1,\r\n                dx: 0,\r\n                except: function(props) {\r\n                    const { board, dy, dx } = props;\r\n                    if(board[dy][dx].piece) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n            },\r\n            {\r\n                dy: -2,\r\n                dx: 0,\r\n                except: function(props) {\r\n                    const { board, y, x, owner } = props;\r\n                    if((owner === 'black' && y !== 1) || (owner === 'white' && y !== 6)) return false;\r\n                    if((owner === 'black' && board[2][x].piece) || (owner === 'white' && board[5][x].piece)) return false;\r\n                    if((owner === 'black' && board[3][x].piece) || (owner === 'white' && board[4][x].piece)) return false;\r\n                    return true;\r\n                }\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -1,\r\n                except: function(props) {\r\n                    const { board, dy, dx } = props;\r\n                    if(board[dy][dx].piece) {\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 1,\r\n                except: function(props) {\r\n                    const { board, dy, dx } = props;\r\n                    if(board[dy][dx].piece) {\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n            }\r\n        ],\r\n    },\r\n    knight: {\r\n        type: 'onetime',\r\n        move: [\r\n            {\r\n                dy: -2,\r\n                dx: -1,\r\n            },\r\n            {\r\n                dy: -2,\r\n                dx: 1,\r\n            },\r\n            {\r\n                dy: 2,\r\n                dx: -1,\r\n            },\r\n            {\r\n                dy: 2,\r\n                dx: 1,\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -2,\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 2,\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: -2,\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 2,\r\n            },\r\n        ]\r\n    },\r\n    king: {\r\n        type: 'onetime',\r\n        move: [\r\n            {\r\n                dy: 1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: 2,\r\n                except: function(props) {\r\n                    const { board, y, x, owner } = props;\r\n                    const enemy = (owner === 'white') ? 'black' : 'white';\r\n\r\n                    //  king dirty check\r\n                    if(!board[y][x].piece || board[y][x].dirty) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  rook dirty check\r\n                    if(!board[y][x+3].piece || board[y][x+3].dirty) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  check path is empty\r\n                    if(board[y][x+1].piece || board[y][x+2].piece) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  is king & path safe?, prevent castling loop by flag\r\n                    const coveredAxisBundle = checkPlayersEveryMove(enemy, board, true);\r\n                    const length = coveredAxisBundle.length;\r\n                    for(let i=0; i<length; ++i) {\r\n                        const axis = coveredAxisBundle[i];\r\n                        if(axis.dy === y && (axis.dx === x || axis.dx === x+1 || axis.dx === x+2)) {\r\n                            return false;\r\n                        }\r\n                    }\r\n\r\n\r\n                    return true;\r\n                },             \r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: -2,\r\n                except: function(props) {\r\n                    const { board, y, x, owner } = props;\r\n                    const enemy = (owner === 'white') ? 'black' : 'white';\r\n                    \r\n                    //  king dirty check\r\n                    if(!board[y][x].piece || board[y][x].dirty) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  rook dirty check\r\n                    if(!board[y][x-4].piece || board[y][x-4].dirty) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  check path is empty\r\n                    if(board[y][x-1].piece || board[y][x-2].piece || board[y][x-3].piece ) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  is king & path safe?, prevent castling loop by flag\r\n                    const coveredAxisBundle = checkPlayersEveryMove(enemy, board, true);\r\n                    const length = coveredAxisBundle.length;\r\n                    for(let i=0; i<length; ++i) {\r\n                        const axis = coveredAxisBundle[i];\r\n                        if(axis.dy === y && (axis.dx === x || axis.dx === x-1 || axis.dx === x-2)) {\r\n                            return false;\r\n                        }\r\n                    }\r\n\r\n                    return true;\r\n                },             \r\n            }\r\n        ]\r\n    },\r\n    bishop: {\r\n        type: 'multitime',\r\n        move: [\r\n            {\r\n                dy: 1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 1\r\n            },\r\n        ]\r\n    },\r\n    rook: {\r\n        type: 'multitime',\r\n        move: [\r\n            {\r\n                dy: 1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: -1,\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: 1\r\n            },\r\n        ]\r\n    },\r\n    queen: {\r\n        type: 'multitime',\r\n        move: [\r\n            {\r\n                dy: 1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: -1,\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: 1\r\n            },\r\n        ]\r\n    }\r\n};\r\n\r\nexport default rules;","import _ from 'lodash';\r\n\r\nimport rules from './rules';\r\nimport { genBoard } from './genBoard';\r\n\r\nexport const findKingLocation = (player, board) => {\r\n    for(let i=0; i<8; ++i) {\r\n        for(let j=0; j<8; ++j) {\r\n            if(board[i][j].owner === player && board[i][j].piece === 'king') {\r\n                return {\r\n                    y: i,\r\n                    x: j,\r\n                };\r\n            };\r\n        }\r\n    }\r\n}\r\n\r\nexport const deduplicate = axisArr => {\r\n    if(axisArr.length === 0) return axisArr;\r\n\r\n    const axisSet = new Set();\r\n    axisArr.forEach(axis => axisSet.add(axis.dy * 10 + axis.dx));\r\n    return [ ...axisSet ].map(key => ({ dy: parseInt(key / 10), dx: key % 10 }));\r\n}\r\n\r\nexport const checkPlayersEveryMove = (player, board, castling) => {\r\n    let coveredAxisBundle = [];\r\n    for(let i=0; i<8; ++i) {\r\n        for(let j=0; j<8; ++j) {\r\n            if(board[i][j].owner === player) {\r\n                const coveredAxis = checkCovered(board, i, j, castling);\r\n                coveredAxisBundle = [ ...coveredAxisBundle, ...coveredAxis ];\r\n            }\r\n        }\r\n    };\r\n    \r\n    return deduplicate(coveredAxisBundle);\r\n};\r\n\r\nexport const checkSafeMove = (player, board) => {\r\n    const enemy = player === 'white' ? 'black' : 'white';\r\n    const clonedBoard = _.cloneDeep(board);\r\n\r\n    const playerKing = findKingLocation(player, clonedBoard);\r\n    const coveredAxisBundle = checkPlayersEveryMove(enemy, clonedBoard);\r\n\r\n    coveredAxisBundle.forEach(axis => {\r\n        clonedBoard[axis.dy][axis.dx] = {\r\n            ...clonedBoard[axis.dy][axis.dx],\r\n            movable: true,\r\n        }\r\n    });\r\n\r\n    //  is king in danger?\r\n    if(clonedBoard[playerKing.y][playerKing.x].movable) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n};\r\n\r\nexport const checkMovable = (player, board) => {\r\n    for(let i=0; i<8; ++i) {\r\n        for(let j=0; j<8; ++j) {\r\n            if(board[i][j].owner === player) {\r\n                const coveredAxis = checkCovered(board, i, j);\r\n                const length = coveredAxis.length;\r\n                for(let k=0; k<length; ++k) {\r\n                    const tempBoard = genBoard(board, { y: i, x: j }, { y: coveredAxis[k].dy, x: coveredAxis[k].dx });\r\n                    if(checkSafeMove(player, tempBoard)) {\r\n                        return true;\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    return false;\r\n}\r\n\r\nexport const checkCovered = (board, y, x, castling) => {\r\n    const { piece, owner } = board[y][x];\r\n    let inform = { board, y, x, owner };\r\n    if(!piece) return;\r\n\r\n    const { type, move }= rules[piece];\r\n    let coveredAxis = [];\r\n\r\n    if(type === 'onetime') {\r\n        coveredAxis = move.reduce((acc, cur) => {\r\n            const dy = y + (owner === 'black' ? -cur.dy: +cur.dy);\r\n            const dx = x + cur.dx;\r\n            if(dy < 0 || dx < 0 || dy > 7 || dx > 7) return acc;\r\n            \r\n            inform = { ...inform, dy, dx };\r\n            \r\n            if(!cur.except || (!(piece === 'king' && castling) && cur.except && cur.except(inform))) {\r\n                if(!board[dy][dx].owner || board[y][x].owner !== board[dy][dx].owner) {\r\n                    acc.push({dy, dx});\r\n                }\r\n            }\r\n\r\n            return acc;\r\n        }, []);\r\n    } else {\r\n        coveredAxis = move.flatMap(cur => {\r\n            let counter = 0;\r\n            let coveredArr = [];\r\n            while(true) {\r\n                ++counter;\r\n                const dy = y + counter * (owner === 'black' ? -cur.dy: +cur.dy);\r\n                const dx = x + counter * cur.dx;\r\n                \r\n                if(dy < 0 || dx < 0 || dy > 7 || dx > 7) break;\r\n                if(board[dy][dx].owner && board[dy][dx].owner === owner) break;\r\n                coveredArr.push({dy, dx});\r\n                if(board[dy][dx].owner && board[dy][dx].owner !== owner) break;\r\n            }\r\n            return coveredArr;\r\n        });\r\n    }\r\n    \r\n    return deduplicate(coveredAxis);\r\n};","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport * as recordAPI from '../lib/api/record';\r\n\r\nconst CONNECT_WEBSOCKET = 'record/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'record/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_VALUE = 'record/INITIALIZE_VALUE';\r\nconst INITIALIZE_SOCKET = 'record/INITIALIZE_SOCKET';\r\nconst CHANGE_VALUE = 'record/CHANGE_VALUE';\r\nconst UPDATE_VALUE = 'record/UPDATE_VALUE';\r\nconst CLEAR_VALUE = 'record/CLEAR_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\r\nexport const updateValue = createAction(UPDATE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\n\r\nconst CHANGE_REVERSE = 'record/CHANGE_REVERSE';\r\nconst CLEAR_TOOLTIP = 'record/CLEAR_TOOLTIP';\r\nconst SET_REQUEST_MODAL = 'record/SET_REQUEST_MODAL';\r\nconst SET_REQUEST_MESSAGE = 'record/SET_REQUEST_MESSAGE';\r\nconst SET_BANCLICK = 'record/SET_BANCLICK';\r\nconst SET_SHOWINDEX = 'record/SET_SHOWINDEX';\r\nexport const changeReverse = createAction(CHANGE_REVERSE, payload => payload);\r\nexport const clearToolTip = createAction(CLEAR_TOOLTIP);\r\nexport const setRequestModal = createAction(SET_REQUEST_MODAL, payload => payload);\r\nexport const setRequestMessage = createAction(SET_REQUEST_MESSAGE, payload => payload);\r\nexport const setBanClick = createAction(SET_BANCLICK);\r\nexport const setShowIndex = createAction(SET_SHOWINDEX, payload => payload);\r\n\r\nconst [ ASKING, ASKING_SUCCESS, ASKING_FAILURE ] = createRequestActionTypes('record/ASKING');\r\nconst [ ANSWERING, ANSWERING_SUCCESS, ANSWERING_FAILURE ] = createRequestActionTypes('record/ANSWERING');\r\nexport const askingThunk = createRequestThunk(ASKING, recordAPI.asking);\r\nexport const answeringThunk = createRequestThunk(ANSWERING, recordAPI.answering);\r\n\r\nexport const notifyRequestThunk = ({ genre: type, modal, open, message }) => ( dispatch, getState ) => {\r\n    if(open) {\r\n        if(!message) {\r\n            //  modal open\r\n            dispatch(setRequestModal({\r\n                type,\r\n                modal,\r\n            }));\r\n        } else {\r\n            //  modal message\r\n            dispatch(setRequestMessage({\r\n                type,\r\n                message,\r\n            }));\r\n        }\r\n        \r\n    } else {\r\n        //  modal close\r\n        dispatch(clearToolTip());\r\n    }\r\n    \r\n};\r\n\r\nexport const updateValueThunk = params => ( dispatch, getState ) => {\r\n    const { record } = getState();\r\n    let newRecord = { ...record };\r\n    Object.keys(params).forEach(key => {\r\n        if(typeof params[key] === 'object') {\r\n            newRecord = {\r\n                ...newRecord,\r\n                [key]: [\r\n                    ...newRecord[key],\r\n                    params[key],\r\n                ]\r\n            };\r\n        }\r\n    });\r\n\r\n    dispatch(updateValue({ record: newRecord }));\r\n};\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const query = action.payload;\r\n\r\n    const socketTask = yield fork(connectNamespace, { \r\n        url: '/record',\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue,\r\n        updateValue: updateValueThunk,\r\n        notifyRequest: notifyRequestThunk,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* recordSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    error: null,\r\n    startTime: null,\r\n    endTime: null,\r\n    blackTime: null,\r\n    whiteTime: null,\r\n    blackMaxTime: null,\r\n    whiteMaxTime: null,\r\n    whiteRatio: 0,\r\n    blackRatio: 0,\r\n    pieceMove: [],\r\n    reversed: false,\r\n    blocked: false,\r\n    banClick: false,\r\n    showIndex: null,\r\n    replayMode: false,\r\n    undo: {\r\n        message: null,\r\n        modal: null,\r\n    },\r\n    draw: {\r\n        message: null,\r\n        modal: null,\r\n    },\r\n    surrender: {\r\n        message: null,\r\n        modal: null,\r\n    },\r\n}\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\r\n        ...state,\r\n        ...rest,\r\n        showIndex: rest.pieceMove.length - 1,\r\n    }),\r\n    [CHANGE_VALUE]: (state, { payload: { type, ...rest } }) => ({\r\n        ...state,\r\n        ...rest,\r\n    }),\r\n    [UPDATE_VALUE]: (state, { payload: { record } }) => ({\r\n        ...record,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n    [CHANGE_REVERSE]: (state, { payload: { reversed } }) => ({\r\n        ...state,\r\n        reversed,\r\n    }),\r\n    [SET_SHOWINDEX]: (state , { payload: { showIndex, replayMode }}) => ({\r\n        ...state,\r\n        showIndex,\r\n        replayMode,\r\n    }),\r\n    [ASKING]: state => state,\r\n    [ASKING_SUCCESS]: state => state,\r\n    [ASKING_FAILURE]: state => state,\r\n    [ANSWERING]: state => state,\r\n    [ANSWERING_SUCCESS]: state => state,\r\n    [ANSWERING_FAILURE]: state => state,\r\n    [CLEAR_TOOLTIP]: (state) => ({\r\n        ...state,\r\n        undo: initialState['undo'],\r\n        draw: initialState['draw'],\r\n        surrender: initialState['surrender'],\r\n        blocked: false,\r\n        banClick: false,\r\n    }),\r\n    [SET_BANCLICK]: (state) => ({\r\n        ...state,\r\n        banClick: true,\r\n    }),\r\n    [SET_REQUEST_MODAL]: (state, { payload: { type, modal } }) => ({\r\n        ...state,\r\n        [type]: {\r\n            ...state[type],\r\n            modal,\r\n        },\r\n        blocked: true,\r\n    }),\r\n    [SET_REQUEST_MESSAGE]: (state, { payload: { type, message } }) => ({\r\n        ...state,\r\n        [type]: {\r\n            ...state[type],\r\n            message,\r\n        },\r\n        blocked: true,\r\n    }),\r\n}, initialState);\r\n","import axios from 'axios';\r\n\r\nexport const asking = params =>\r\n    axios.post('/api/record/asking', params);\r\n\r\nexport const answering = params =>\r\n    axios.post('/api/record/answering', params);","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\nimport _ from 'lodash';\r\n\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport * as canvasCtrl from '../lib/api/canvas';\r\n\r\n// import rules from '../lib/base/rules';\r\nimport board from '../lib/base/board';\r\nimport { checkCovered, checkSafeMove } from '../lib/base/validation';\r\nimport { genBoard, genClearBoard, genReplayBoard } from '../lib/base/genBoard';\r\nimport { setShowIndex } from './record';\r\n\r\nconst CONNECT_WEBSOCKET = 'canvas/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'canvas/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_SOCKET = 'canvas/INITIALIZE_SOCKET';\r\nconst INITIALIZE_VALUE = 'canvas/INITIALIZE_VALUE';\r\nconst CHANGE_VALUE = 'canvas/CHANGE_VALUE';\r\nconst CLEAR_VALUE = 'canvas/CLEAR_VALUE';\r\nconst INITIALIZE_BLOCKED = 'canvas/INITIALIZE_BLOCKED';\r\nconst CHANGE_BLOCKED = 'canvas/CHANGE_BLOCKED';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\nexport const initializeBlocked = createAction(INITIALIZE_BLOCKED, payload => payload);\r\nexport const changeBlocked = createAction(CHANGE_BLOCKED, payload => payload);\r\n\r\n\r\nconst [ SET_MOVE_PIECE, SET_MOVE_PIECE_SUCCESS, SET_MOVE_PIECE_FAILURE ] = createRequestActionTypes('canvas/SET_MOVE_PIECE');\r\nexport const setMovePieceThunk = createRequestThunk(SET_MOVE_PIECE, canvasCtrl.movePiece);\r\n\r\nconst makeReverseBoard = board => {\r\n    const reverseBoard = _.cloneDeep(board);\r\n    reverseBoard.reverse();\r\n    reverseBoard.forEach(row => {\r\n        row.reverse();\r\n    })\r\n    \r\n    return reverseBoard;\r\n}\r\n\r\nconst updateReverseBoard = (prevReverseBoard, nextOriginBoard) => {\r\n    const nextReverseBoard = makeReverseBoard(nextOriginBoard);\r\n    prevReverseBoard = [ ...prevReverseBoard ];\r\n\r\n    for(let i=0; i<8; ++i) {\r\n        for(let j=0; j<8; ++j) {\r\n            const nextPiece = nextReverseBoard[i][j];\r\n            const prevPiece = prevReverseBoard[i][j];\r\n            \r\n            // console.dir(nextPiece);\r\n            // console.dir(prevPiece);\r\n    \r\n            Object.keys(nextPiece).every(key => {\r\n                // console.dir(key);\r\n                if(!prevPiece[key] || prevPiece[key] !== nextPiece[key]) {\r\n                    // console.dir(prevPiece[key]);\r\n                    // console.dir(nextPiece[key]);\r\n                    prevReverseBoard[i] = [ ...prevReverseBoard[i] ];\r\n                    prevReverseBoard[i][j] = {\r\n                        ...nextPiece,\r\n                    };\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n    }\r\n\r\n    return prevReverseBoard;\r\n};\r\n\r\nexport const clearClickedThunk = () => (dispatch, getState) => {\r\n    const { canvas: { board, reverseBoard } } = getState();\r\n    const clearBoard = genClearBoard([...board], [\r\n        'covered',\r\n        'clicked',\r\n    ]);\r\n\r\n    const nextReverseBoard = updateReverseBoard(reverseBoard, clearBoard);\r\n    \r\n    dispatch(changeValue({\r\n        board: clearBoard,\r\n        reverseBoard: nextReverseBoard,\r\n        clicked: null\r\n    }));\r\n}\r\n\r\nexport const replayValueThunk = ({ diff, index }) => ( dispatch, getState ) => {\r\n    const {\r\n        canvas: { board, reverseBoard },\r\n        record: { showIndex, pieceMove },\r\n        socketAuth: { role },\r\n        game: { turn }\r\n    } = getState();\r\n\r\n    if(!diff) {\r\n        diff = index - showIndex;\r\n    }\r\n\r\n    if(diff === 0) return;\r\n    if(showIndex+diff < -1 || showIndex+diff >= pieceMove.length) return;\r\n\r\n    const nextBoard = genReplayBoard(board, pieceMove, showIndex, showIndex+diff);\r\n    const nextReverseBoard = updateReverseBoard(reverseBoard, nextBoard);\r\n\r\n    if(showIndex+diff+1 === pieceMove.length) {\r\n        if(((role === 'white' || role === 'spectator') && turn % 2 === 0) || (role === 'black' && turn % 2 === 1)) {\r\n            dispatch(changeBlocked({ blocked: false }));\r\n        } else {\r\n            dispatch(changeBlocked({ blocked: true }));\r\n        };\r\n        dispatch(setShowIndex({\r\n            showIndex: showIndex+diff,\r\n            replayMode: false,\r\n        }));\r\n    } else {\r\n        dispatch(changeBlocked({ blocked: true }));\r\n        dispatch(setShowIndex({\r\n            showIndex: showIndex+diff,\r\n            replayMode: true,\r\n        }));\r\n    }\r\n    dispatch(changeValue({\r\n        board: nextBoard,\r\n        reverseBoard: nextReverseBoard,\r\n        clicked: null\r\n    }));\r\n    \r\n};\r\n\r\nexport const changeValueThunk = ({ move }) => ( dispatch, getState ) => {\r\n    const { prev, next } = move;\r\n    const { canvas: { board, reverseBoard },\r\n            record: { showIndex, replayMode },\r\n            // socketAuth: { role },\r\n            // game: { turn }\r\n        } = getState();\r\n\r\n    if(replayMode) return;\r\n    \r\n    // if(((role === 'white' || role === 'spectator') && turn % 2 === 0) || (role === 'black' && turn % 2 === 1)) {\r\n    //     dispatch(changeBlocked({ blocked: false }));\r\n    // } else {\r\n    //     dispatch(changeBlocked({ blocked: true }));\r\n    // };\r\n\r\n    const cell = board[prev.y][prev.x];\r\n    const clearBoard = genClearBoard([...board], [\r\n        'covered',\r\n        'clicked',\r\n        'tracked',\r\n    ]);\r\n    \r\n    clearBoard[next.y] = [ ...clearBoard[next.y] ];\r\n    clearBoard[next.y][next.x] = {\r\n        ...cell,\r\n        tracked: true,\r\n        dirty: true,\r\n    };\r\n\r\n    clearBoard[prev.y]= [ ...clearBoard[prev.y] ];\r\n    clearBoard[prev.y][prev.x] = {\r\n        covered: false,\r\n        tracked: true,\r\n    };\r\n\r\n    //  promotion\r\n    const { owner, piece } = clearBoard[next.y][next.x];\r\n    if((owner === 'white' && piece === 'pawn' && next.y === 0) || (owner === 'black' && piece === 'pawn' && next.y === 7)) {\r\n        clearBoard[next.y][next.x] = {\r\n            ...clearBoard[next.y][next.x],\r\n            piece: 'queen',\r\n        }\r\n    };\r\n\r\n    //  castling\r\n    if(clearBoard[next.y][next.x].piece === 'king') {\r\n        if(next.x - prev.x === 2) {\r\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\r\n            \r\n            const pieceStore = { ...clearBoard[prev.y][prev.x+3] };\r\n            clearBoard[prev.y][prev.x+3] = {\r\n                covered: false\r\n            };\r\n            clearBoard[prev.y][prev.x+1] = {\r\n                ...pieceStore,\r\n                dirty: true,\r\n            };\r\n        }\r\n\r\n        if(next.x - prev.x === -2) {\r\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\r\n\r\n            const pieceStore = { ...clearBoard[prev.y][prev.x-4] };\r\n            clearBoard[prev.y][prev.x-4] = {\r\n                covered: false\r\n            };\r\n            clearBoard[prev.y][prev.x-1] = {\r\n                ...pieceStore,\r\n                dirty: true,\r\n            };\r\n        }\r\n    };\r\n\r\n    const nextReverseBoard = updateReverseBoard(reverseBoard, clearBoard);\r\n    \r\n    dispatch(changeValue({\r\n        board: clearBoard,\r\n        reverseBoard: nextReverseBoard,\r\n        clicked: null\r\n    }));\r\n    dispatch(setShowIndex({ showIndex: showIndex+1 }));\r\n}\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const query = action.payload;\r\n    \r\n    const socketTask = yield fork(connectNamespace, {\r\n        url: '/canvas',\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue: changeValueThunk,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* canvasSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nexport const clickPieceThunk = ({ y: cy, x: cx }) => (dispatch, getState) => {\r\n    const {\r\n        canvas: { board, reverseBoard, clicked },\r\n        record: { reversed },\r\n        socketAuth: { role },\r\n    } = getState();\r\n    \r\n    let reversal = false;\r\n    if((role === 'white' && reversed) || (role === 'black' && !reversed)) {\r\n        reversal = true;\r\n    }\r\n    \r\n    let y = cy;\r\n    let x = cx;\r\n    if(reversal) {\r\n        y = 7 - cy;\r\n        x = 7 - cx;\r\n    };\r\n\r\n    //  Prevents the player from seeing enemy's piece movements\r\n    if(!clicked && board[y][x].owner !== role) return;\r\n    if(clicked && !board[y][x].covered && board[y][x].owner !== role) return;\r\n\r\n    if(clicked && board[y][x].covered) {\r\n        const { canvas: { socket } } = getState();\r\n\r\n        dispatch(setMovePieceThunk({\r\n            socket,\r\n            move: {\r\n                prev: clicked,\r\n                next: {y, x}\r\n            }\r\n        }));\r\n        \r\n        return;\r\n    }\r\n    \r\n    let coveredAxis = checkCovered(board, y, x);\r\n    const clearBoard = genClearBoard([...board], [\r\n        'covered',\r\n        'clicked',\r\n    ]);\r\n    \r\n    coveredAxis.forEach(axis => {\r\n        const tempBoard = genBoard(clearBoard, { y, x }, { y: axis.dy, x: axis.dx });\r\n        if(!checkSafeMove(board[y][x].owner, tempBoard)) {\r\n            return;\r\n        };\r\n\r\n        clearBoard[axis.dy] = [ ...clearBoard[axis.dy] ];\r\n        const popedCell = clearBoard[axis.dy][axis.dx];\r\n        clearBoard[axis.dy].splice(axis.dx, 1, {\r\n            ...popedCell,\r\n            covered: true,\r\n        });\r\n    });\r\n\r\n    clearBoard[y] = [ ...clearBoard[y] ];\r\n    clearBoard[y][x] = {\r\n        ...clearBoard[y][x],\r\n        clicked: true,\r\n    }\r\n\r\n    const nextReverseBoard = updateReverseBoard(reverseBoard, clearBoard);\r\n\r\n    dispatch(changeValue({\r\n        board: clearBoard,\r\n        reverseBoard: nextReverseBoard,\r\n        clicked: { y, x }\r\n    }));\r\n};\r\n\r\n\r\nconst reverseBoard = _.cloneDeep(board);\r\nreverseBoard.reverse();\r\nreverseBoard.forEach(row => {\r\n    row.reverse();\r\n});\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    error: null,\r\n    board,\r\n    reverseBoard,\r\n    clicked: null,\r\n    blocked: true,\r\n    reversed: false,\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { board } }) => ({\r\n        ...state,\r\n        board,\r\n        reverseBoard: updateReverseBoard(state.reverseBoard, board),\r\n    }),\r\n    [CHANGE_VALUE]: (state, { payload : { board, reverseBoard, clicked } }) => ({\r\n        ...state,\r\n        board,\r\n        reverseBoard,\r\n        clicked,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n    [INITIALIZE_BLOCKED]: (state, { payload: { blocked } }) => ({\r\n        ...state,\r\n        blocked,\r\n    }),\r\n    [CHANGE_BLOCKED]: (state, { payload: { blocked } }) => ({\r\n        ...state,\r\n        blocked,\r\n    }),\r\n    [SET_MOVE_PIECE_SUCCESS]: state => state,\r\n    [SET_MOVE_PIECE_FAILURE]: state => state,\r\n}, initialState);","import axios from 'axios';\r\n\r\nexport const movePiece = params =>\r\n    axios.post('/api/canvas/movePiece', params);","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport Canvas from '../../components/gameplay/Canvas';\r\nimport { clickPieceThunk, initializeBlocked , clearClickedThunk } from '../../modules/canvas';\r\nimport { clearValue } from '../../modules/canvas';\r\nimport defaultBoard from '../../lib/base/board';\r\n\r\nconst CanvasContainer = ({ cellSize, glanceAt }) => {\r\n    const { board, reverseBoard, blocked, reversed, replayMode, turn, role } = useSelector(({ canvas, socketAuth, game, record }) => ({\r\n        board: canvas.board,\r\n        reverseBoard: canvas.reverseBoard,\r\n        blocked: canvas.blocked,\r\n        reversed: record.reversed,\r\n        replayMode: record.replayMode,\r\n        turn: game.turn,\r\n        role: socketAuth.role,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [init, setInit] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if((role && !init) || (glanceAt && !init)) {\r\n            setInit(true);\r\n        }\r\n    }, [init, role, glanceAt]);\r\n    \r\n    useEffect(() => {\r\n        if(!replayMode) {\r\n            // if((role === 'white' && turn % 2 === 0) || (role === 'black' && turn % 2 === 1)) {\r\n            if(((role === 'white' || role === 'spectator') && turn % 2 === 0) || (role === 'black' && turn % 2 === 1)) {\r\n                dispatch(initializeBlocked({ blocked: false }));\r\n            } else {\r\n                dispatch(initializeBlocked({ blocked: true }));\r\n            }\r\n        }\r\n    }, [dispatch, turn, role, replayMode]);\r\n    \r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearValue());\r\n        }\r\n    }, [dispatch])\r\n\r\n    //  function은 생성 당시의 Context를 가지고 있기 때문에 redux state값이 제대로 반영되지 않는다\r\n    //  생성되었던 event handler가 React dom에 붙어있기 때문에 dom이 rerender되지 않는 이상\r\n    //  오래된 state를 가지고 있을 수 밖에 없다. 따라서 ref를 통해 참조값을 가지고 있거나\r\n    //  혹은 redux state라면 이 코드와 같이 thunk를 사용하는 방법이 있다\r\n\r\n    const onClick = useCallback((y, x) => {\r\n        dispatch(clickPieceThunk({ y, x }));\r\n    }, [dispatch]);\r\n\r\n    const onContextMenu = useCallback(e => {\r\n        e.preventDefault();\r\n        dispatch(clearClickedThunk());\r\n    }, [dispatch])\r\n\r\n    let reversal = false;\r\n    if(((role === 'white' || role === 'spectator') && reversed) || (role === 'black' && !reversed)) {\r\n        reversal = true;\r\n    }\r\n\r\n    let servedBoard = board;\r\n    if(reversal) {\r\n        servedBoard = reverseBoard;\r\n    };\r\n\r\n    if(!init) {\r\n        servedBoard = [ ...defaultBoard ];\r\n    }\r\n\r\n    return (\r\n        <Canvas\r\n            board={servedBoard}\r\n            blocked={blocked}\r\n            onClick={onClick}\r\n            onContextMenu={onContextMenu}\r\n            cellSize={cellSize}\r\n            replayMode={replayMode}\r\n        />\r\n    )    \r\n};\r\n\r\nexport default CanvasContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport CanvasContainer from '../../containers/gameplay/CanvasContainer';\r\n\r\nconst CanvasWrapperBlock = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    transition: 0.5s;\r\n    opacity: 0;\r\n\r\n    &:hover {\r\n        opacity: 1;\r\n    }\r\n`;\r\n\r\nconst UnClickableBlock = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    /* pointer-events: none; */\r\n`;\r\n\r\nconst CanvasWrapper = ({ cellSize, glanceAt }) => {\r\n    return (\r\n        <CanvasWrapperBlock>\r\n            <UnClickableBlock>\r\n                <CanvasContainer\r\n                    cellSize={cellSize}\r\n                    glanceAt={true}\r\n                />\r\n            </UnClickableBlock>\r\n        </CanvasWrapperBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(CanvasWrapper);","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport useAsync from '../../lib/hook/useAsync';\r\nimport { connectWebsocket, disconnectWebsocket } from '../../modules/canvas';\r\nimport CanvasWrapper from '../../components/game/CanvasWrapper';\r\n\r\nconst CanvasWrapperContainer = ({ gameKey, cellSize }) => {\r\n    const dispatch = useDispatch();\r\n\r\n    const connection = async () => {\r\n        dispatch(disconnectWebsocket());\r\n        await Promise.resolve().then(() => {\r\n            dispatch(connectWebsocket({\r\n                gameKey,\r\n            }));\r\n        });\r\n        return true;\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(disconnectWebsocket());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const [state] = useAsync(connection, [dispatch]);\r\n\r\n    const { loading, data, error } = state;\r\n\r\n    // if(loading) return null;\r\n    // if(error) return null;\r\n    // if(data) {\r\n    //     return (\r\n    //         <CanvasWrapper cellSize={cellSize} />\r\n    //     )\r\n    // }\r\n    // return null;\r\n\r\n    //  glanceAt라는 flag를 통해 role이 없이도 canvas를 조회할 수 있음\r\n    return (\r\n        <CanvasWrapper\r\n            cellSize={cellSize}\r\n            glanceAt={true}\r\n        />\r\n    )\r\n    \r\n};\r\n\r\nexport default CanvasWrapperContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport CanvasWrapperContainer from '../../containers/game/CanvasWrapperContainer';\r\n\r\nconst GridBoxBlock = styled.div`\r\n    z-index: 1;\r\n    display: flex;\r\n    position: relative;\r\n    flex-direction: column;\r\n    justify-content: space-evenly;\r\n    align-items: center;\r\n    width: 216px;\r\n    height: 216px;\r\n    background-color: rgb(255,255,255, 0.6);\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    cursor: pointer;\r\n    transition: 0.5s;\r\n\r\n    &:hover {\r\n        background-color: rgb(255,255,255, 0.1);\r\n    }\r\n\r\n    &:first-child {\r\n        margin-left: 18px;\r\n    }\r\n\r\n    & + & {\r\n        margin-left: 18px;\r\n    }\r\n`\r\n\r\nconst BoxTitleBlock = styled.div`\r\n    \r\n`;\r\n\r\nconst BoxContentBlock = styled.div`\r\n    \r\n`;\r\n\r\nconst GridBox = ({ game, canvas, onClick, onMouseEnter, onMouseLeave, ...rest }) => {\r\n    console.dir('game~');\r\n\r\n    return (\r\n        <GridBoxBlock\r\n            onClick={() => onClick(game.key)}\r\n            onMouseEnter={onMouseEnter}\r\n            onMouseLeave={onMouseLeave}\r\n            {...rest}\r\n        >\r\n            <BoxTitleBlock>\r\n                {game.name}\r\n            </BoxTitleBlock>\r\n            <BoxContentBlock>\r\n                {game.participant}\r\n            </BoxContentBlock>\r\n            {canvas ?\r\n            (<CanvasWrapperContainer\r\n                gameKey={game.key}\r\n                cellSize = '27px'\r\n            />)\r\n            : null}\r\n        </GridBoxBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(GridBox);","import React, { useCallback, useState } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport GridBox from '../../components/game/GridBox';\r\n\r\nconst GridBoxContainer = ({ history, ...rest }) => {\r\n    const [ canvas, setCanvas ] = useState(false);\r\n\r\n    const onMouseEnter = useCallback(() => {\r\n        setCanvas(true);\r\n    }, []);\r\n\r\n    const onMouseLeave = useCallback(() => {\r\n        setCanvas(false);\r\n    }, []);\r\n\r\n    const onClick = useCallback((gameId) => {\r\n        history.push(`/game/${gameId}`);\r\n    }, [history]);\r\n\r\n    return (\r\n        <GridBox\r\n            {...rest}\r\n            canvas={canvas}\r\n            onClick={onClick}\r\n            onMouseEnter={onMouseEnter}\r\n            onMouseLeave={onMouseLeave}\r\n        />\r\n    )\r\n};\r\n\r\nexport default withRouter(GridBoxContainer);","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { FaApple } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons';\r\n\r\nimport GridBoxContainer from '../../containers/game/GridBoxContainer';\r\n\r\nconst gridSize = 3;\r\n\r\nconst GridRowBlock = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n\r\n    &:first-child {\r\n        margin-top: 18px;\r\n    }\r\n\r\n    &:last-child {\r\n        margin-bottom: 18px;\r\n    }\r\n\r\n    & + & {\r\n        margin-top: 18px;\r\n    }\r\n`;\r\n\r\nconst GridLayoutFrameBlock = styled.div`\r\n    position: relative;\r\n    background-color: rgba(255, 255, 255, 0.5);\r\n`;\r\n\r\nconst GridLayoutHiddenBlock = styled.div`\r\n    width: 720px;\r\n    height: 720px;\r\n    overflow: hidden;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst GridLayoutBlock = styled.div`\r\n    width: 720px;\r\n    height: 720px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    overflow-y: overlay;\r\n    padding-right: 20px;\r\n`;\r\n\r\nconst GridLayout = ({ games, onGameClick }) => {\r\n   \r\n    let list = [];\r\n    \r\n    if(games) {\r\n        list = [ ...games ];\r\n    }\r\n    \r\n    const backgroundStyle = {\r\n        position: 'absolute',\r\n        top: '0',\r\n        left: '0',\r\n        width: '720px',\r\n        height: '720px',\r\n        opacity: '0.2',\r\n        zIndex: -1,\r\n    }\r\n    const gridArr = [];\r\n    const rowSize = Math.floor(list.length / gridSize);\r\n    for(let i=0; i<=rowSize; ++i) {\r\n        gridArr.push(\r\n            <GridRowBlock\r\n                key={`GridRowBlock_${i}`}\r\n            >\r\n                {\r\n                    list.splice(0, gridSize).map(game => (\r\n                        <GridBoxContainer\r\n                            key={`GridBox${game.name}`}\r\n                            game={game}\r\n                            onClick={e => onGameClick(e, game.key)}\r\n                        />\r\n                    ))\r\n                }\r\n            </GridRowBlock>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <GridLayoutFrameBlock>\r\n            <GridLayoutHiddenBlock>\r\n                <GridLayoutBlock>\r\n                    {gridArr}\r\n                </GridLayoutBlock>\r\n            </GridLayoutHiddenBlock>\r\n            <IconContext.Provider value={{ style: backgroundStyle }}>\r\n                <FaApple />\r\n            </IconContext.Provider>\r\n        </ GridLayoutFrameBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(GridLayout);","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport GridLayout from '../../components/game/GridLayout';\r\n\r\nconst GridLayoutContainer = () => {\r\n    const { games } = useSelector(({ games }) => ({\r\n        games: games.games,\r\n    }));\r\n\r\n    return (\r\n        <GridLayout games={games} />\r\n    )\r\n};\r\n\r\nexport default GridLayoutContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst SummaryBlock = styled.div`\r\n    padding: 30px;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    height: 400px;\r\n    background-color: white;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst Summary = () => {\r\n    return (\r\n        <SummaryBlock>\r\n\r\n        </SummaryBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Summary);","import React from 'react';\r\nimport Summary from '../../components/game/Summary';\r\n\r\nconst SummaryContainer = () => {\r\n    return (\r\n        <Summary />\r\n    )\r\n};\r\n\r\nexport default SummaryContainer;","import { useState, useCallback, useRef, useEffect } from 'react';\r\n\r\nconst CheckOutsideOfComponent = (initialState) => {\r\n    const [componentState, setComponentState] = useState(initialState);\r\n    const ref = useRef(null);\r\n\r\n    const checkClickOutside = useCallback(e => {\r\n        if(ref.current && !ref.current.contains(e.target)) {\r\n            setComponentState(false);\r\n        }\r\n    }, []);\r\n\r\n    //  not Capturing, use Bubbling(Default)\r\n    useEffect(() => {\r\n        document.addEventListener('click', checkClickOutside);\r\n        return () => {\r\n            document.removeEventListener('click', checkClickOutside);\r\n        }\r\n    }, [checkClickOutside]);\r\n\r\n    return { ref, componentState, setComponentState };\r\n}\r\n\r\nexport default CheckOutsideOfComponent;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst SelectionFrameBlock = styled.div`\r\n    position: relative;\r\n`\r\n\r\nconst NameBlock = styled.div`\r\n    position: absolute;\r\n    top: -10px;\r\n    left: 70%;\r\n    width: 30%;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    color: rgba(0,0,0,0.3);\r\n`\r\n\r\nconst SelectionBlock = styled.div`\r\n    width: 130px;\r\n    height: 30px;\r\n    box-sizing: border-box;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    padding-left: 10px;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    font-size: 13px;\r\n    \r\n    cursor: pointer;\r\n    &:active {\r\n        background-color: rgba(0,0,0,0.1);\r\n    }\r\n`\r\n\r\nconst SelecitonToolTipFrameBlock = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    margin-top: 40px;\r\n    z-index: 10;\r\n    background-color: white;\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 130px;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst SelectionToolTipBlock = styled.div`\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    font-size: 13px;\r\n\r\n    &:hover {\r\n        background-color: rgba(0,0,0,0.1);\r\n    }\r\n`;\r\n\r\nconst Selection = ({\r\n    kind,\r\n    name,\r\n    list,\r\n    reference,\r\n    componentState,\r\n    onClickSelection,\r\n    onClickOption\r\n}) => {    \r\n    return (\r\n        <SelectionFrameBlock>\r\n            <NameBlock>\r\n                {kind}\r\n            </NameBlock>\r\n            <SelectionBlock\r\n                ref={reference}\r\n                onClick={onClickSelection}\r\n            >\r\n                {name}\r\n            </SelectionBlock>\r\n            {componentState && (\r\n                <SelecitonToolTipFrameBlock>\r\n                    {list.map(optionName => (\r\n                        <SelectionToolTipBlock\r\n                            key={optionName}\r\n                            onClick={() => onClickOption(optionName)}\r\n                        >\r\n                            {optionName}\r\n                        </SelectionToolTipBlock>\r\n                    ))}\r\n                </SelecitonToolTipFrameBlock>\r\n            )}\r\n        </SelectionFrameBlock>\r\n    );\r\n};\r\n\r\nexport default React.memo(Selection);","import { createAction, handleActions } from 'redux-actions';\r\n\r\nconst CHANGE_FIELD = 'create/CHANGE_FIELD';\r\nconst CLEAR_FIELD = 'create/CLEAR_FIELD';\r\nexport const changeField = createAction(CHANGE_FIELD, payload => payload);\r\nexport const clearField = createAction(CLEAR_FIELD, payload => payload);\r\n\r\nconst initialState = {\r\n    map: 'Classical',\r\n    mapList: ['Classical', 'Crazy House', 'Racing Kings'],\r\n    mode: 'Normal',\r\n    modeList: ['Normal', 'Rank'],\r\n    defaultTime: 15,\r\n    extraTime: 30,\r\n    config: {\r\n        defaultTime: {\r\n            min: 1,\r\n            max: 30,\r\n            step: 1,\r\n        },\r\n        extraTime: {\r\n            min: 0,\r\n            max: 60,\r\n            step: 5,\r\n        }\r\n    },\r\n    piece: 'white',\r\n};\r\n\r\nexport default handleActions({\r\n    [CHANGE_FIELD]: (state, { payload: { key, value } }) => ({\r\n        ...state,\r\n        [key]: value,\r\n    }),\r\n    [CLEAR_FIELD]: state => initialState,\r\n}, initialState);","import React, { useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport CheckOutsideOfComponent from '../../containers/HOC/CheckOutsideOfComponent';\r\nimport Selection from '../../components/game/Selection';\r\nimport { changeField } from '../../modules/create';\r\n\r\nconst SelecitonContainer = ({ kind }) => {\r\n    const { name, list } = useSelector(({ create }) => ({\r\n        name: create[kind],\r\n        list: create[`${kind}List`],\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const { ref: reference, componentState, setComponentState } = CheckOutsideOfComponent(false);\r\n\r\n    const onClickSelection = useCallback(() => {\r\n        setComponentState(prevState => !prevState);\r\n    }, [setComponentState]);\r\n\r\n    const onClickOption = useCallback(name => {\r\n        dispatch(changeField({\r\n            key: kind,\r\n            value: name,\r\n        }));\r\n    }, [dispatch, kind]);\r\n\r\n    return (\r\n        <Selection\r\n            kind={kind}\r\n            name={name}\r\n            list={list}\r\n            reference={reference}\r\n            componentState={componentState}\r\n            onClickSelection={onClickSelection}\r\n            onClickOption={onClickOption}\r\n        />\r\n    )\r\n};\r\n\r\nexport default SelecitonContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst SliderFrameBlock = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n    justify-content: space-between;\r\n    & + & {\r\n        margin-top: 15px;\r\n    }\r\n`;\r\n\r\nconst SliderBoxBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 200px;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst SliderBlock = styled.input`\r\n    -webkit-appearance: none;\r\n    width: 150px;\r\n    height: 30px;\r\n    cursor: pointer;\r\n    background: ${props => {\r\n        if(props.kind === 'defaultTime') {\r\n            // return `linear-gradient(to right, #16a085 0%, black 100%)`;\r\n            return `linear-gradient(to right, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.6) 100%)`;\r\n        } else {\r\n            // return `linear-gradient(to right, red 0%, black 100%)`;\r\n            return `linear-gradient(to right, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.6) 100%)`;\r\n        }\r\n    }};\r\n    background-size: 140px 5px;\r\n    background-position: center;\r\n    background-repeat: no-repeat;\r\n    overflow: hidden;\r\n    outline: none;\r\n    /* zoom: 100%; */\r\n    display: block;\r\n\r\n    &::-webkit-slider-thumb {\r\n        -webkit-appearance: none;\r\n        width: 10px;\r\n        height: 10px;\r\n        box-shadow: 0 2px 2px 0 rgba(0,0,0,0.36), 0 3px 1px -2px rgba(0,0,0,0.6), 0 1px 5px 0 rgba(0,0,0,0.36);\r\n        position: relative;\r\n        background-color: rgba(255,255,255, 0.8);\r\n        z-index: 3;\r\n    };\r\n`;\r\n\r\nconst NameBlock = styled.div`\r\n    position: absolute;\r\n    top: -10px;\r\n    left: 70%;\r\n    width: 30%;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    color: rgba(0,0,0,0.3);\r\n`\r\n\r\nconst ValueBlock = styled.div`\r\n    display: flex;\r\n    position: relative;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-size: 15px;\r\n    width: 60px;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst Slider = ({ onChange, kind, value, config }) => {\r\n    const name = kind.substring(0, kind.length - 4);\r\n\r\n    return (\r\n        <SliderFrameBlock>\r\n            <SliderBoxBlock>\r\n                <SliderBlock\r\n                    type='range'\r\n                    onChange={onChange}\r\n                    {...config}\r\n                    kind={kind}\r\n                    value={value}\r\n                />\r\n            </SliderBoxBlock>\r\n            <ValueBlock>\r\n                <NameBlock>\r\n                    {name}\r\n                </NameBlock>\r\n                {value}\r\n            </ValueBlock>\r\n        </SliderFrameBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Slider);","import React, { useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport Slider from '../../components/game/Slider';\r\nimport { changeField } from '../../modules/create';\r\n\r\nconst SliderContainer = ({ kind }) => {\r\n    const { value, config } = useSelector(({ create }) => ({\r\n        value: create[kind],\r\n        config: create.config[kind],\r\n    }));\r\n    const dispatch = useDispatch();\r\n\r\n    const onChange = useCallback(e => {\r\n        dispatch(changeField({\r\n            key: kind,\r\n            value: e.target.value,\r\n        }));\r\n    }, [dispatch, kind]);\r\n\r\n    return (\r\n        <Slider\r\n            onChange={onChange}\r\n            kind={kind}\r\n            value={value}\r\n            config={config}\r\n        />\r\n    )\r\n};\r\n\r\nexport default SliderContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { FaChessKing } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons';\r\n\r\nconst IconBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 40px;\r\n    height: 40px;\r\n    cursor: pointer;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n\r\n    background-color: ${props => props.checked && 'rgba(0,0,0,0.1)' };\r\n    &:hover {\r\n        background-color: rgba(0, 0, 0, 0.1);\r\n    }\r\n`;\r\n\r\nconst Icon = ({ checked, kind, onClick }) => {\r\n    const opposite = kind === 'white' ? 'black' : 'white';\r\n    const styleObj = {\r\n        style: {\r\n            color: kind,\r\n            filter: `drop-shadow(1px 1px 1px ${opposite})`,\r\n            width: '30px',\r\n            height: '30px',\r\n        }\r\n    };\r\n\r\n    return (\r\n        <IconBlock\r\n            checked={checked ? 1 : 0}\r\n            onClick={() => onClick(kind)}\r\n        >\r\n            <IconContext.Provider value={styleObj}>\r\n                <FaChessKing />\r\n            </IconContext.Provider>\r\n        </IconBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Icon);","import React, { useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport Icon from '../../components/game/Icon';\r\nimport { changeField } from '../../modules/create';\r\n\r\nconst IconContainer = ({ white, black }) => {\r\n    const { piece } = useSelector(({ create }) => ({\r\n        piece: create.piece,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n    \r\n    const onClick = useCallback(value => {\r\n        dispatch(changeField({\r\n            key: 'piece',\r\n            value,\r\n        }))\r\n    }, [dispatch]);\r\n\r\n    const kind = white ? 'white': (black ? 'black' : null);\r\n    const checked = piece === kind;\r\n    \r\n    return (\r\n        <Icon\r\n            kind={kind}\r\n            checked={checked}\r\n            onClick={onClick}\r\n        />\r\n    )\r\n};\r\n\r\nexport default IconContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport SelectionContainer from '../../containers/game/SelectionContainer';\r\nimport SliderContainer from '../../containers/game/SliderContainer';\r\nimport IconContainer from '../../containers/game/IconContainer';\r\n\r\nconst CreationBlock = styled.form`\r\n    padding: 30px;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    height: 400px;\r\n    background-color: white;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst TitleBlock = styled.div`\r\n    font-size: 24px;\r\n    font-weight: 700;\r\n`;\r\n\r\nconst SelectionBundleBlock = styled.div`\r\n    margin-top: 40px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n`;\r\n\r\nconst SliderBundleBlock = styled.div`\r\n    margin-top: 20px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n`;\r\n\r\nconst IconBundleBlock = styled.div`\r\n    position: relative;\r\n    height: 60px;\r\n    margin-top: 20px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-around;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst SubmitBlock = styled.div`\r\n    margin-top: 30px;\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    width: 100%;\r\n`;\r\n\r\nconst ConfirmFrameBlock = styled.div`\r\n    position: relative;\r\n    width: 65px;\r\n    height: 40px;\r\n`;\r\n\r\nconst ConfirmBlock = styled.button`\r\n    cursor: pointer;\r\n    position: absolute;\r\n    border: none;\r\n    outline: none;\r\n    margin: 0;\r\n    padding: 0;\r\n    font-size: 20px;\r\n    font-weight: 700;\r\n    top: 0px;\r\n    left: 0px;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    width: 65px;\r\n    height: 40px;\r\n    color: rgba(0, 0, 0, 0.3);\r\n    transition: 0.5s;\r\n    background-color: transparent;\r\n\r\n    @keyframes jump {\r\n        0%, 100% {\r\n            top: 0;\r\n        }\r\n        50% {\r\n            top: -3px;\r\n        }\r\n    }\r\n\r\n    &:hover {\r\n        animation: jump 0.5s 1;\r\n        color: rgba(0, 0, 0, 0.6);\r\n    }\r\n`;\r\n\r\nconst NameBlock = styled.div`\r\n    position: absolute;\r\n    top: -10px;\r\n    left: 70%;\r\n    width: 30%;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    color: rgba(0,0,0,0.3);\r\n`\r\n\r\nconst Creation = ({ onSubmit }) => {\r\n    return (\r\n        <CreationBlock onSubmit={onSubmit}>\r\n            <TitleBlock>\r\n                New Game\r\n            </TitleBlock>\r\n            <SelectionBundleBlock>\r\n                <SelectionContainer kind='map' />\r\n                <SelectionContainer kind='mode' />\r\n            </SelectionBundleBlock>\r\n            <SliderBundleBlock>\r\n                <SliderContainer kind='defaultTime'/>\r\n                <SliderContainer kind='extraTime'/>\r\n            </SliderBundleBlock>\r\n            <IconBundleBlock>\r\n                <NameBlock>\r\n                    Piece\r\n                </NameBlock>\r\n                <IconContainer white/>\r\n                <IconContainer black/>\r\n            </IconBundleBlock>\r\n            <SubmitBlock>\r\n                <ConfirmFrameBlock>\r\n                    <ConfirmBlock type='submit' >\r\n                        Create\r\n                    </ConfirmBlock>\r\n                </ConfirmFrameBlock>\r\n            </SubmitBlock>\r\n        </CreationBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Creation);","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport * as gamesCtrl from '../lib/api/games';\r\n\r\nconst CONNECT_WEBSOCKET = 'games/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'games/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_VALUE = 'games/INITIALIZE_VALUE';\r\nconst INITIALIZE_SOCKET = 'games/INITIALIZE_SOCKET';\r\nconst CLEAR_VALUE = 'games/CLEAR_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\n\r\nconst [ CREATE_GAME, CREATE_GAME_SUCCESS, CREATE_GAME_FAILURE ] = createRequestActionTypes('games/CREATE_GAME');\r\nexport const createGameThunk = createRequestThunk(CREATE_GAME, gamesCtrl.createGame);\r\n\r\nfunction* connectWebsocketSaga () {\r\n    const socketTask = yield fork(connectNamespace, { \r\n        url: '/games',\r\n        initializeSocket,\r\n        initializeValue,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* gamesSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    games: null,\r\n    error: null,\r\n}\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { games }}) => ({\r\n        ...state,\r\n        games,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n    [CREATE_GAME_SUCCESS]: state => state,\r\n    [CREATE_GAME_FAILURE]: (state, { payload: error }) => ({\r\n        ...state,\r\n        error,\r\n    }),\r\n}, initialState);","import axios from 'axios';\r\n\r\n//  REST API 방식\r\n\r\nexport const createGame = params =>\r\n    axios.post('/api/games', params);","import React, { useCallback, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport Creation from '../../components/game/Creation';\r\nimport { clearField } from '../../modules/create';\r\nimport { createGameThunk } from '../../modules/games';\r\n\r\nconst CreationContainer = ({ history }) => {\r\n    const { map, mode, defaultTime, extraTime, piece } = useSelector(({ create }) => ({\r\n        map: create.map,\r\n        mode: create.mode,\r\n        defaultTime: create.defaultTime,\r\n        extraTime: create.extraTime,\r\n        piece: create.piece,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onSubmit = useCallback(e => {\r\n        e.preventDefault();\r\n        (async() => {\r\n            const key = await dispatch(createGameThunk({\r\n                map,\r\n                mode,\r\n                defaultTime,\r\n                extraTime,\r\n                piece\r\n            }));\r\n\r\n            history.push(`/game/${key}`);\r\n        })();\r\n    }, [dispatch, history, map, mode, defaultTime, extraTime, piece]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearField());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Creation onSubmit={onSubmit}/>\r\n    )\r\n};\r\n\r\nexport default withRouter(CreationContainer);","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nimport GridLayoutContainer from '../../containers/game/GridLayoutContainer';\r\nimport SummaryContainer from '../../containers/game/SummaryContainer';\r\nimport CreationContainer from '../../containers/game/CreationContainer';\r\n\r\nconst GameLayoutBlock = styled.div`\r\n    height: 800px;\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nconst sideBlockStyle = css`\r\n    height: 90%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    width: 20%;\r\n`;\r\n\r\nconst LeftSideBlock = styled.div`\r\n    ${sideBlockStyle}\r\n    margin-right: 1%;\r\n`;\r\n\r\nconst RightSideBlock = styled.div`\r\n    ${sideBlockStyle}\r\n    margin-left: 1%;\r\n`;\r\n\r\nconst GameLayout = () => {\r\n    return (\r\n        <>\r\n            <GameLayoutBlock>\r\n                <LeftSideBlock>\r\n                    <SummaryContainer />\r\n                </LeftSideBlock>\r\n                <GridLayoutContainer />\r\n                <RightSideBlock>\r\n                    <CreationContainer />\r\n                </RightSideBlock>\r\n            </GameLayoutBlock>          \r\n        </>\r\n    )\r\n};\r\n\r\nexport default React.memo(GameLayout);","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport useAsync from '../../lib/hook/useAsync';\r\nimport { setSessionThunk } from '../../modules/sessionAuth';\r\nimport GameLayout from '../../components/game/GameLayout';\r\n\r\nimport { connectWebsocket, disconnectWebsocket, clearValue } from '../../modules/games';\r\n\r\nconst GameLayoutContainer = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const connection = async() => {\r\n        await dispatch(setSessionThunk());\r\n        \r\n        dispatch(disconnectWebsocket());\r\n        await Promise.resolve().then(() => {\r\n            dispatch(connectWebsocket());\r\n        });\r\n        return true;\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearValue());\r\n        }\r\n    }, [dispatch])\r\n\r\n    const [state] = useAsync(connection, [ dispatch ]);\r\n\r\n    const { loading, data, error } = state;\r\n\r\n    // if(loading) return null;\r\n    // if(error) return null;\r\n    // if(data) {\r\n    //     return (\r\n    //         <GameLayout />\r\n    //     )\r\n    // }\r\n    // return null;\r\n    \r\n    return (\r\n        <GameLayout />\r\n    )\r\n};\r\n\r\nexport default GameLayoutContainer;","import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nimport GameLayoutContainer from '../containers/game/GameLayoutContainer';\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport FooterContainer from '../containers/common/FooterContainer';\r\n\r\nconst GamePage = () => {\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Game • Chesssup.com</title>\r\n            </Helmet>\r\n            <HeaderContainer />\r\n            <GameLayoutContainer />\r\n            <FooterContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default GamePage;","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport * as chatAPI from '../lib/api/chat';\r\n\r\nconst CONNECT_WEBSOCKET = 'chat/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'chat/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_SOCKET = 'chat/INITIALIZE_SOCKET';\r\nconst INITIALIZE_VALUE = 'chat/INITIALIZE_VALUE';\r\nconst CHANGE_VALUE = 'chat/CHANGE_VALUE';\r\nconst CLEAR_VALUE = 'chat/CLEAR_VALUE'\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\n\r\nconst CHANGE_TEXTFIELD = 'chat/CHANGE_TEXTFIELD';\r\nconst INITIALIZE_TEXTFIELD = 'chat/INITIALIZE_TEXTFIELD';\r\nexport const changeTextfield = createAction(CHANGE_TEXTFIELD, payload => payload);\r\nexport const initializeTextfield = createAction(INITIALIZE_TEXTFIELD);\r\n\r\nconst [ SEND_MESSAGE, SEND_MESSAGE_SUCCESS, SEND_MESSAGE_FAILURE ] = createRequestActionTypes('chat/SEND_MESSAGE');\r\nexport const sendMessageThunk = createRequestThunk(SEND_MESSAGE, chatAPI.sendMessage);\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const query = action.payload;\r\n    \r\n    const socketTask = yield fork(connectNamespace, {\r\n        url: '/chat',\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* chatSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    messages: [],\r\n    text: '',\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { nickname, color, message }}) => ({\r\n        ...state,\r\n        messages: [{ nickname, color, message }],\r\n    }),\r\n    [CHANGE_VALUE]: (state, { payload: { nickname, color, message} }) => ({\r\n        ...state,\r\n        messages: [ ...state.messages, { nickname, color, message} ],\r\n    }),\r\n    [SEND_MESSAGE_SUCCESS]: state => state,\r\n    [SEND_MESSAGE_FAILURE]: state => state,\r\n    [INITIALIZE_TEXTFIELD]: state => ({\r\n        ...state,\r\n        text: '',\r\n    }),\r\n    [CHANGE_TEXTFIELD]: (state, { payload: text}) => ({\r\n        ...state,\r\n        text,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n}, initialState);","import axios from 'axios';\r\n\r\nexport const sendMessage = message =>\r\n    axios.post('/api/chat/sendMessage', message);\r\n    \r\n// export const sendMessage = message =>\r\n//     axios.post('http://localhost:5000/api/chat/sendMessage', message);","import React, { useRef, useEffect } from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { IoIosSend } from 'react-icons/io';\r\nimport { IconContext } from 'react-icons';\r\n\r\nconst ChatSubmitBlock = styled.form`\r\n    width: 100%;\r\n`;\r\n\r\nconst ChatFrameBlock = styled.div`\r\n    position: relative;\r\n    background-color: white;\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst ChatHiddenBlock = styled.div`\r\n    height: 360px;\r\n    width: 100%;\r\n    overflow: hidden;\r\n`;\r\n\r\nconst ChatBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    height: 360px;\r\n    width: 100%;\r\n    padding-right: 20px;\r\n    overflow-y: overlay;\r\n`;\r\n\r\nconst ChatFormBlock = styled.div`\r\n    position: absolute;\r\n    width: 100%;\r\n    display: flex;\r\n    background-color: white;\r\n    top: 365px;\r\n    /* box-shadow: rgba(0,0,0,0.05) 0px -2px 2px 0px, rgba(0,0,0,0.08) 0px -3px 1px -2px, rgba(0,0,0,0.04) 0px -1px 5px 0px; */\r\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\r\n`;\r\n\r\nconst ChatInputBlock = styled.input`\r\n    outline: none;\r\n    border: none;\r\n    align-items : center;\r\n    color: black;\r\n    background-color: transparent;\r\n    font-size: 12px;\r\n    width: 80%;\r\n    height : 30px;\r\n    padding-left: 10px;\r\n`;\r\n\r\nconst ChatButtonBlock = styled.button`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 20%;\r\n    font-size: 12px;\r\n    background-color: rgb(247,246,245);\r\n    border: none;\r\n    cursor: pointer;\r\n\r\n    &:hover, &:focus {\r\n        background-color: #D3D3D3;\r\n    } \r\n`;\r\n\r\nconst MessageBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    width: 90%;\r\n    height : 36px;\r\n    min-height : 36px;\r\n    font-size : 12px;\r\n    background-color: white;\r\n\r\n    ${props => props.owner === 'my' && css`\r\n        justify-content: flex-end;\r\n    `};\r\n\r\n    ${props => props.owner === 'other' && css`\r\n        justify-content: flex-start;\r\n    `};\r\n\r\n    ${props => props.owner === 'server' && css`\r\n        justify-content: center;\r\n    `};\r\n`;\r\n\r\nconst BalloonBlock = styled.div`\r\n    position: relative;\r\n    background: #ffff80;\r\n    padding: 5px;\r\n\r\n    &:after {\r\n        content: '';\r\n        position: absolute;\r\n        right: 0;\r\n        top: 50%;\r\n        width: 0;\r\n        height: 0;\r\n        border: 8px solid transparent;\r\n        border-left-color: #ffff80;\r\n        border-right: 0;\r\n        border-top: 0;\r\n        margin-top: -5px;\r\n        margin-right: -8px;\r\n    }\r\n\r\n    \r\n    ${props => props.owner === 'other' && css `\r\n        background: rgb(247,246,245);\r\n\r\n        &:after {\r\n            content: '';\r\n            position: absolute;\r\n            left: 0;\r\n            top: 50%;\r\n            width: 0;\r\n            height: 0;\r\n            border: 8px solid transparent;\r\n            border-top: 0;\r\n            margin-top: -5px;\r\n            border-right-color: rgb(247,246,245);\r\n            border-left: 0;\r\n            margin-left: -8px;\r\n        }\r\n    `}\r\n`;\r\n\r\nconst Balloon = ({ owner, children }) => {\r\n    let ballonBlock;\r\n    if(owner === 'my') {\r\n        ballonBlock = (\r\n            <BalloonBlock owner={owner}>\r\n                {children}\r\n            </BalloonBlock>\r\n        )\r\n    } else if(owner === 'other') {\r\n        ballonBlock = (\r\n            <BalloonBlock owner={owner}>\r\n                {children}\r\n            </BalloonBlock>\r\n        )\r\n    } else if(owner === 'server') {\r\n        ballonBlock = (\r\n            <>\r\n                {children}\r\n            </>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {ballonBlock}\r\n        </>\r\n    )\r\n}\r\n\r\nconst Message = React.memo(({ message, myName, ...rest }) => {\r\n    const owner = message.nickname ? (message.nickname === myName ? 'my' : 'other') : 'server';\r\n    const text = owner === 'other' ? message.nickname + ' : ' + message.message : message.message;\r\n\r\n    return (\r\n        <MessageBlock\r\n            {...rest} \r\n            color={message.color}\r\n            owner={owner}\r\n        >\r\n            <Balloon owner={owner}>\r\n                {text}\r\n            </Balloon>\r\n        </MessageBlock>\r\n    )\r\n});\r\n\r\nconst Chat = ({ messages, onSubmit, onChange, text, nickname }) => {\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current.scrollTop = ref.current.scrollHeight;\r\n    }, [messages]);\r\n\r\n    return (\r\n        <>\r\n            <ChatSubmitBlock onSubmit={onSubmit}>\r\n                <ChatFrameBlock>\r\n                    <ChatHiddenBlock>\r\n                        <ChatBlock ref={ref}>\r\n                            {messages.map((message, index) => (\r\n                                <Message\r\n                                    key={index}\r\n                                    myName={nickname}\r\n                                    message={message}\r\n                                />\r\n                            ))}\r\n                        </ChatBlock>\r\n                    </ChatHiddenBlock>\r\n                    <ChatFormBlock>\r\n                        <ChatInputBlock\r\n                            onChange={onChange}\r\n                            value={text}\r\n                        />\r\n                        <ChatButtonBlock\r\n                            onSubmit={onSubmit}\r\n                        >\r\n                            <IconContext.Provider value={{style: { width:'40%', height:'40%' }}}>\r\n                                <IoIosSend />\r\n                            </IconContext.Provider>\r\n                        </ ChatButtonBlock>\r\n                    </ChatFormBlock>\r\n                </ChatFrameBlock>\r\n            </ChatSubmitBlock>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default React.memo(Chat);","import React, { useEffect, useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { changeTextfield, initializeTextfield } from '../../modules/chat';\r\nimport { sendMessageThunk, clearValue } from '../../modules/chat';\r\nimport Chat from '../../components/gameplay/Chat';\r\n\r\nconst ChatContainer = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const { socket, messages, text, nickname } = useSelector(({ chat, socketAuth }) => ({\r\n        socket: chat.socket,\r\n        messages: chat.messages,\r\n        text: chat.text,\r\n        nickname: socketAuth.nickname,\r\n    }));\r\n\r\n    const onSubmit = useCallback(e => {\r\n        e.preventDefault();\r\n        dispatch(sendMessageThunk({ socket, message: text }));\r\n        dispatch(initializeTextfield());\r\n    }, [dispatch, text, socket]);\r\n\r\n    const onChange = useCallback(e => {\r\n        dispatch(changeTextfield(e.target.value));\r\n    },[dispatch]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearValue());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Chat\r\n            messages={messages}\r\n            onSubmit={onSubmit}\r\n            onChange={onChange}\r\n            text={text}\r\n            nickname={nickname}\r\n        />\r\n    )\r\n};\r\n\r\nexport default ChatContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst TimerBlock = styled.div`\r\n    width: 50%;\r\n    height: 60px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    background-color: white;\r\n    ${props => props.color && css`\r\n        background-color: rgb(208, 224, 189);\r\n    `}\r\n    ${props => props.time <= 10000 && css`\r\n        background-color: rgb(230, 153, 153);\r\n    `}\r\n`;\r\n\r\nconst TimeSliceBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100%;\r\n    width: 47%;\r\n    color: black;\r\n    font-size: 50px;\r\n`;\r\n\r\nconst ColonBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: flex-end;\r\n    height: 100%;\r\n    width: 6%;\r\n    color: black;\r\n    opacity: 0.5;\r\n    font-size: 50px;\r\n`;\r\n\r\nconst timeConverter = timeSlice => {\r\n    let convertedTime = '';\r\n    convertedTime += String(Math.floor(timeSlice / 10));\r\n    convertedTime += String(Math.floor(timeSlice % 10));\r\n    return convertedTime;\r\n}\r\n\r\nconst Timer = ({ time, color }) => {\r\n    \r\n    const minute = Math.floor(time / 60000);\r\n    const second = Math.floor((time % 60000) / 1000);\r\n\r\n    // eslint-disable-next-line\r\n    if(time == undefined || time === null) {\r\n        return <TimerBlock />\r\n    }\r\n\r\n    return (\r\n        <TimerBlock\r\n            time={time}\r\n            color={color ? 1 : 0}\r\n        >\r\n            <TimeSliceBlock>\r\n                {timeConverter(minute)}\r\n            </TimeSliceBlock>\r\n            <ColonBlock>\r\n                :\r\n            </ColonBlock>\r\n            <TimeSliceBlock>\r\n                {timeConverter(second)}\r\n            </TimeSliceBlock>\r\n        </TimerBlock>\r\n    )\r\n}\r\n\r\nexport default Timer;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Timer from '../../components/gameplay/Timer';\r\n\r\nconst TimerContainer = ({ white, init }) => {\r\n\r\n    const { whiteTime, blackTime, start, order } = useSelector(({ record, game }) => ({\r\n        whiteTime: record.whiteTime,\r\n        blackTime: record.blackTime,\r\n        start: game.start,\r\n        order: game.order,\r\n    }));\r\n\r\n    const time = white ? whiteTime : blackTime;\r\n    const color = white ? (start && order === 'white') : (start && order === 'black');\r\n\r\n    if(init) {\r\n        return (\r\n            <Timer\r\n                time={time}\r\n                color={color}\r\n            />\r\n        )\r\n    } else {\r\n        return (\r\n            <Timer />\r\n        )\r\n    }\r\n    \r\n};\r\n\r\nexport default TimerContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { IconContext } from 'react-icons';\r\nimport { FaCircle, FaRegCircle } from 'react-icons/fa';\r\n\r\nconst StatusBlock = styled.div`\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 30px;\r\n    background-color: white;\r\n\r\n    ${props => props.beneath && css`\r\n        margin-top: 30px;\r\n    `}\r\n`;\r\n\r\nconst NameBlock = styled.div`\r\n    font-size: 20px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`\r\n\r\nconst Status = ({ light, name, beneath }) => {\r\n    const iconStyle = {\r\n        style: {\r\n            height: '15px',\r\n            width: '10%',\r\n            color: 'green',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n        }\r\n    };\r\n\r\n    return (\r\n        <StatusBlock beneath={beneath ? 1 : 0}>            \r\n            {light\r\n                ? (\r\n                    <IconContext.Provider value={iconStyle}>\r\n                        <FaCircle />\r\n                    </IconContext.Provider>\r\n                )\r\n                : (\r\n                    <IconContext.Provider value={{ style: { ...iconStyle.style, color: 'black' }}}>\r\n                        <FaRegCircle />\r\n                    </IconContext.Provider>\r\n                )\r\n            }\r\n            <NameBlock>\r\n                {name}\r\n            </NameBlock>\r\n        </StatusBlock>\r\n    )\r\n};\r\n\r\n\r\nexport default React.memo(Status);","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Status from '../../components/gameplay/Status';\r\n\r\nconst StatusContainer = ({ black, white, beneath, init }) => {\r\n    const { blackNick, whiteNick, participant } = useSelector(({ game }) => ({\r\n        blackNick: game.black,\r\n        whiteNick: game.white,\r\n        participant: game.participant,\r\n    }));\r\n\r\n    const participantSet = new Set(participant);\r\n    const light = (white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick));\r\n    const name = (white && whiteNick) || (black && blackNick);\r\n\r\n    if(init) {\r\n        return (\r\n            <Status\r\n                light={light}\r\n                name={name}\r\n                beneath={beneath}\r\n            />\r\n        )\r\n    } else {\r\n        return (\r\n            <Status\r\n                beneath={beneath}\r\n            />\r\n        )\r\n    }\r\n};\r\n\r\nexport default StatusContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { IconContext } from 'react-icons';\r\nimport { IoIosArrowRoundForward } from 'react-icons/io';\r\nimport { pieceMapper } from '../../lib/base/pieceConverter';\r\n\r\nconst PieceMoveListHiddenBlock = styled.div`\r\n    height: 270px;\r\n    width: 100%;\r\n    overflow: hidden;\r\n`;\r\n\r\nconst PieceMoveListBlock = styled.div`\r\n    height: 270px;\r\n    width: 100%;\r\n    overflow-y: overlay;\r\n    padding-right: 20px;\r\n`;\r\n\r\nconst PieceMoveBlock = styled.div`\r\n    width: 100%;\r\n    height: 30px;\r\n    background-color: white;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n\r\n    &:first-child {\r\n        margin-top: 30px;\r\n    }\r\n`;\r\n\r\nconst moveConverter = ({x, y}) => {\r\n    return String.fromCharCode(97 + x) + (8 - y);\r\n}\r\n\r\nconst MoveBlock = styled.div`\r\n    width: 80%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    ${props => props.checked && css`\r\n        background-color: rgba(209, 228, 246, 1);\r\n    `}\r\n\r\n    ${props => !props.checked && css`\r\n        &:hover {\r\n            background-color: rgba(209, 228, 246, 0.5);\r\n        }\r\n    `}\r\n`;\r\n\r\nconst TextBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 20%;\r\n    font-size: 18px;\r\n`\r\n\r\nconst IndexBlock = styled.div`\r\n    width: 20%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-size: 18px;\r\n    background-color: rgb(247, 246, 245);\r\n`\r\n\r\nconst PieceMove = React.memo(({ move, index, onClick, checked }) => {\r\n    console.dir('PieceMove');\r\n    console.dir(move);\r\n    const PrevComponent = pieceMapper[move.prevPiece.piece];\r\n    const prevStyle = {\r\n        color: move.prevPiece.owner,\r\n        style: {\r\n            width: '10%',\r\n            filter: `drop-shadow(1px 1px 1px ${move.prevPiece.owner === 'white' ? 'black' : 'white'})`,\r\n        }\r\n    };\r\n\r\n    const prevPiece = (\r\n        <IconContext.Provider value={prevStyle}>\r\n            <PrevComponent />\r\n        </IconContext.Provider>\r\n    )\r\n\r\n    let NextComponent, nextStyle;\r\n\r\n    let nextPiece = (\r\n        <div style={{ width: '10%' }}/>\r\n    )\r\n\r\n    if(move.nextPiece.piece) {\r\n        NextComponent = pieceMapper[move.nextPiece.piece];\r\n        nextStyle = {\r\n            color: move.nextPiece.owner,\r\n            style: {\r\n                width: '10%',\r\n                filter: `drop-shadow(1px 1px 1px ${move.nextPiece.owner === 'white' ? 'black' : 'white'})`,\r\n            }\r\n        };\r\n        nextPiece = (\r\n            <IconContext.Provider value={nextStyle}>\r\n                <NextComponent />\r\n            </IconContext.Provider>\r\n        )\r\n    }\r\n\r\n    \r\n    return (\r\n        <PieceMoveBlock>\r\n            <IndexBlock>\r\n                {index + 1}\r\n            </IndexBlock>\r\n            <MoveBlock\r\n                onClick={() => onClick(index)}\r\n                checked={checked}\r\n            >\r\n                {prevPiece}\r\n                <TextBlock>\r\n                    {moveConverter(move.prev)}\r\n                </TextBlock>\r\n                <IconContext.Provider value={{ style: { color: 'rgb(169,169,169)' }}}>\r\n                    <IoIosArrowRoundForward />\r\n                </IconContext.Provider>\r\n                <TextBlock>\r\n                    {moveConverter(move.next)}\r\n                </TextBlock>\r\n                {nextPiece}\r\n            </MoveBlock>\r\n        </PieceMoveBlock>\r\n    )\r\n});\r\n\r\n\r\nconst PieceMoveList = ({ pieceMove, onClick, showIndex, listRef }) => {\r\n    return (\r\n        <PieceMoveListHiddenBlock>\r\n            <PieceMoveListBlock ref={listRef}>\r\n                {pieceMove.map((move, index) => (\r\n                    <PieceMove \r\n                        onClick={onClick}\r\n                        move={move}\r\n                        index={index}\r\n                        checked={index === showIndex}\r\n                    />\r\n                ))}\r\n            </PieceMoveListBlock>\r\n        </PieceMoveListHiddenBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(PieceMoveList);","import React, { useCallback, useRef, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport PieceMoveList from '../../components/gameplay/PieceMoveList';\r\nimport { replayValueThunk } from '../../modules/canvas';\r\n\r\nconst PieceMoveListContainer = () => {\r\n    \r\n    const dispatch = useDispatch();\r\n\r\n    const { pieceMove, showIndex } = useSelector(({ record }) => ({\r\n        pieceMove: record.pieceMove,\r\n        showIndex: record.showIndex,\r\n    }));\r\n\r\n    const listRef = useRef();\r\n    \r\n    useEffect(() => {\r\n        if(showIndex >= 0) {\r\n            if(listRef.current.scrollTop > showIndex * 30) {\r\n                listRef.current.scrollTop = showIndex * 30;\r\n            }\r\n            if(showIndex * 30 > listRef.current.scrollTop + 210) {\r\n                listRef.current.scrollTop = showIndex * 30 - 210;\r\n            }\r\n        } else {\r\n            listRef.current.scrollTop = 0;\r\n        }\r\n    }, [pieceMove, showIndex]);\r\n\r\n    const onClick = useCallback(index => {\r\n        dispatch(replayValueThunk({ index }));\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <PieceMoveList\r\n            onClick = {onClick}\r\n            pieceMove={pieceMove}\r\n            showIndex={showIndex}\r\n            listRef={listRef}\r\n        />\r\n    )\r\n};\r\n\r\nexport default PieceMoveListContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst TimeLineBlock = styled.div`\r\n    position: absolute;\r\n    height: 2px;\r\n    background-color: green;\r\n    transition-duration: 1s;\r\n    transition-timing-function: linear;\r\n\r\n    width: ${props => (props.time * 100) + '%'};\r\n    ${props => props.time <= 0.1 && css`\r\n        background-color: red;\r\n    `}\r\n`;\r\n\r\nconst TimeLine = ({ time }) => {\r\n    return (\r\n        <TimeLineBlock time={time}/>\r\n    )\r\n};\r\n\r\nexport default React.memo(TimeLine);","import React, { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport TimeLine from '../../components/gameplay/TimeLine';\r\n\r\nconst TimeLineContainer = ({ white, black, init }) => {\r\n    const { whiteRatio, blackRatio, whiteNick, blackNick, participant } = useSelector(({ record, game }) => ({\r\n        whiteRatio: record.whiteRatio,\r\n        blackRatio: record.blackRatio,\r\n        whiteNick: game.white,\r\n        blackNick: game.black,\r\n        participant: game.participant,\r\n    }));\r\n\r\n    const [time, setTime] = useState(0);\r\n\r\n    //  default 0으로 초기 렌더링을 진행한 후 redux 값이 들어왔을 때 리렌더링 하는 방식\r\n    //  init 이후에만 리렌더링해야 css효과를 입힐 수 있음\r\n    useEffect(() => {\r\n        const participantSet = new Set(participant);\r\n        if((init && white && participantSet.has(whiteNick)) || (init && black && participantSet.has(blackNick))) {\r\n            let nextTime = white ? whiteRatio : blackRatio;\r\n            nextTime = Math.min(nextTime, 1);\r\n            setTime(nextTime);\r\n        } else {\r\n            setTime(0);\r\n        }\r\n    }, [init, white, black, whiteNick, blackNick, whiteRatio, blackRatio, participant]);\r\n\r\n    //  role값이 들어온 다음에는 다른 redux값이 들어온 경우도 있어 timeline bar가 완성된 상태로 렌더링 되버림\r\n    // let time = 0;\r\n    // if((white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick))) {\r\n    //     time = white ? whiteRatio : blackRatio;\r\n    // }\r\n    // time = Math.min(time, 1);\r\n\r\n    return (\r\n        <TimeLine\r\n            time={time}\r\n        />\r\n    )    \r\n};\r\n\r\nexport default TimeLineContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { FaFastBackward, FaStepBackward, FaFastForward, FaStepForward } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons';\r\n\r\nconst UndoRedoBlock = styled.div`\r\n    position: absolute;\r\n    top: 300px;\r\n    display: flex;\r\n    width: 100%;\r\n    height: 30px;\r\n    background-color: rgb(247, 246, 245);\r\n    z-index: 10;\r\n    box-shadow: rgba(0, 0, 0, 0.14) 0px -2px 2px 0px, rgba(0, 0, 0, 0.2) 0px -3px 1px -2px, rgba(0, 0, 0, 0.12) 0px -1px 5px 0px;\r\n`;\r\n\r\nconst ButtonBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 25%;\r\n    height: 100%;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background-color: #D3D3D3;\r\n    }\r\n`;\r\n\r\nconst buttonStyle = {\r\n    style: {\r\n        color: '#4d4d4d',\r\n        width: '50%',\r\n        height: '50%',\r\n        backgroundColor: 'transparent'\r\n    }\r\n}\r\n\r\nconst UndoRedo = ({ onStepUndo, onStepRedo, onFastUndo, onFastRedo}) => {\r\n    \r\n    return (\r\n        <UndoRedoBlock>\r\n            <ButtonBlock onClick={onFastUndo}>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaFastBackward/>\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock onClick={onStepUndo}>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaStepBackward/>\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock onClick={onStepRedo}>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaStepForward/>\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock onClick={onFastRedo}>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaFastForward/>\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n        </UndoRedoBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(UndoRedo);","import React, { useEffect, useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport UndoRedo from '../../components/gameplay/UndoRedo';\r\nimport { replayValueThunk } from '../../modules/canvas';\r\n\r\nconst UndoRedoContainer = () => {\r\n    const { pieceMove } = useSelector(({ record }) => ({\r\n        pieceMove: record.pieceMove,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n \r\n    const onFastUndo = useCallback(() => {\r\n        dispatch(replayValueThunk({ index: -1 }));\r\n    }, [dispatch]);\r\n\r\n    const onStepUndo = useCallback(() => {\r\n        dispatch(replayValueThunk({ diff: -1 }));\r\n    }, [dispatch]);\r\n\r\n    const onStepRedo = useCallback(() => {\r\n        dispatch(replayValueThunk({ diff: +1 }));\r\n    }, [dispatch]);\r\n\r\n    const onFastRedo = useCallback(() => {\r\n        dispatch(replayValueThunk({ index: pieceMove.length-1 }));\r\n    }, [dispatch, pieceMove]);\r\n\r\n    return (\r\n        <UndoRedo\r\n            onStepUndo={onStepUndo}\r\n            onStepRedo={onStepRedo}\r\n            onFastUndo={onFastUndo}\r\n            onFastRedo={onFastRedo}\r\n        />\r\n    )\r\n};\r\n\r\nexport default UndoRedoContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nimport Spinner from '../../static/image/spinner.svg';\r\n\r\nconst ToolTipBlock = styled.div`\r\n    position: absolute;\r\n    top: -90px;\r\n    left: 0px;\r\n    height: 60px;\r\n    width: 84px;\r\n    opacity: 0;\r\n    visibility: hidden;\r\n    ${props => props.modal && css`\r\n        top: -70px;\r\n        opacity: 1;\r\n        visibility: visible;\r\n    `}\r\n    ${props => props.message && css`\r\n        transition: all 3s cubic-bezier(1.000, 0.015, 1.000, 0.030);\r\n        top: -90px;\r\n        opacity: 0;\r\n    `}\r\n    transition: 1s;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 10;\r\n    background-color: white;\r\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\r\n`;\r\n\r\nconst MessageBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: 40px;\r\n    font-size: 11px;\r\n`;\r\n\r\nconst SpinnerFrameBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 40px;\r\n    width: 100%;\r\n`;\r\n\r\nconst SpinnerBlock = styled.img`\r\n    height: 30px;\r\n    width: 30px;\r\n`;\r\n\r\nconst TitleBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-size: 12px;\r\n    height: 20px;\r\n    width: 100%;\r\n`;\r\n\r\nconst ButtonBlock = styled.button`\r\n    background-color: transparent;\r\n    border: none;\r\n    outline: none;\r\n    cursor: pointer;\r\n    width: 30px;\r\n    height: 30px;\r\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\r\n\r\n    ${props => props.restrict && css`\r\n        pointer-events: none;\r\n    `}\r\n\r\n    &+& {\r\n        margin-left: 10px;\r\n    }\r\n\r\n    &:hover {\r\n        background-color: rgba(0, 0, 0, 0.2);\r\n    }\r\n`;\r\n\r\nconst TimeLineBlock = styled.div`\r\n    position: absolute;\r\n    top: -2px;\r\n    left: 0px;\r\n    width: 84px;\r\n    height: 2px;\r\n    background-color: blue;\r\n    visibility: hidden;\r\n    ${props => props.race && css`\r\n        visibility: visible;\r\n        transition: all 5s linear;\r\n        width: 0px;\r\n    `}\r\n`;\r\n\r\nconst ToolTip = ({ type, message, modal, race, restrict, onClick }) => {\r\n    let content;\r\n\r\n    if(modal === 'answer') {\r\n        content = (\r\n            <MessageBlock>\r\n                <ButtonBlock\r\n                    restrict={restrict}\r\n                    onClick={() => onClick(true)}\r\n                >\r\n                    Y\r\n                </ButtonBlock>\r\n                <ButtonBlock\r\n                    restrict={restrict}\r\n                    onClick={() => onClick(false)}\r\n                >\r\n                    N\r\n                </ButtonBlock>\r\n            </MessageBlock>\r\n        )\r\n    } else if(modal === 'ask') {\r\n        if(message) {\r\n            content = (\r\n                <MessageBlock>\r\n                    {message}\r\n                </MessageBlock>\r\n            );\r\n        } else {\r\n            content = (\r\n                <SpinnerFrameBlock>\r\n                    <SpinnerBlock src={Spinner} />\r\n                </SpinnerFrameBlock>\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <ToolTipBlock\r\n            message={message}\r\n            modal={modal}\r\n        >\r\n            <TimeLineBlock race={race} />\r\n            <TitleBlock>\r\n                {type}\r\n            </TitleBlock>\r\n            {content}\r\n        </ToolTipBlock>\r\n    )\r\n};\r\n\r\nexport default ToolTip;","import React, { useEffect, useCallback, useRef, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport ToolTip from '../../components/gameplay/ToolTip';\r\nimport { clearToolTip, answeringThunk } from '../../modules/record';\r\n\r\nconst ToolTipContainer = ({ type }) => {\r\n    const { socket, suggestion, start } = useSelector(({ record, game }) => ({\r\n        socket: record.socket,\r\n        suggestion: record[type],\r\n        start: game.start,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n    const [ race, setRace ] = useState(false);\r\n    const [ restrict, setRestrict ] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if(suggestion.modal) {\r\n            setRestrict(false);\r\n            setRace(true);\r\n        }\r\n    }, [dispatch, suggestion.modal]);\r\n\r\n    useEffect(() => {\r\n        if(suggestion.message) {\r\n            setRace(false);\r\n        }\r\n    }, [suggestion.message])\r\n\r\n    useEffect(() => {\r\n        if(!start && suggestion.modal) {\r\n            setRace(false);\r\n            dispatch(clearToolTip());\r\n        }\r\n    }, [dispatch, start, suggestion.modal, type])\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearToolTip());\r\n        }\r\n    }, [dispatch, type])\r\n\r\n    const onClick = useCallback(response => {\r\n        dispatch(answeringThunk({\r\n            socket,\r\n            type,\r\n            response,\r\n        }));\r\n        setRestrict(true);\r\n    }, [dispatch, socket, type]);\r\n\r\n    return (\r\n        <ToolTip\r\n            type={type}\r\n            modal={suggestion.modal}\r\n            message={suggestion.message}\r\n            race={race}\r\n            restrict={restrict}\r\n            onClick={onClick}\r\n        />\r\n    )\r\n};\r\n\r\nexport default ToolTipContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { FaExchangeAlt, FaFlag, FaHandRock } from 'react-icons/fa';\r\nimport { TiArrowBack } from 'react-icons/ti';\r\nimport { IconContext } from 'react-icons';\r\nimport ToolTipContainer from '../../containers/gameplay/ToolTipContainer';\r\n\r\nconst UtilBlock = styled.div`\r\n    position: absolute;\r\n    top: 30px;\r\n    display: flex;\r\n    width: 100%;\r\n    height: 30px;\r\n    z-index: 10;\r\n    background-color: rgb(247, 246, 245);\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst ButtonBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    position: relative;\r\n    width: 25%;\r\n    height: 100%;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background-color: #D3D3D3;\r\n    }\r\n`;\r\n\r\nconst buttonStyle = {\r\n    style: {\r\n        color: '#4d4d4d',\r\n        width: '50%',\r\n        height: '50%',\r\n        backgroundColor: 'transparent'\r\n    }\r\n};\r\n\r\nconst Util = ({ onReverse, onClick }) => {\r\n    return (\r\n        <UtilBlock>\r\n            <ButtonBlock onClick={onReverse} >\r\n                <IconContext.Provider value={{ style: { ...buttonStyle.style, width: '60%', height:'60%' }} }>\r\n                    <FaExchangeAlt />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock onClick={() => onClick('undo')}>\r\n                <IconContext.Provider value={{ style: { ...buttonStyle.style, width: '80%', height:'80%' }} }>\r\n                    <TiArrowBack />\r\n                </IconContext.Provider>\r\n                <ToolTipContainer type='undo' />\r\n            </ButtonBlock>\r\n            <ButtonBlock onClick={() => onClick('draw')}>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaHandRock />\r\n                </IconContext.Provider>\r\n                <ToolTipContainer type='draw' />\r\n            </ButtonBlock>\r\n            <ButtonBlock onClick={() => onClick('surrender')}>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaFlag />\r\n                </IconContext.Provider>\r\n                <ToolTipContainer type='surrender' />\r\n            </ButtonBlock>\r\n        </UtilBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Util);","import React, { useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { askingThunk } from '../../modules/record';\r\nimport Util from '../../components/gameplay/Util';\r\nimport { changeReverse, setBanClick } from '../../modules/record';\r\n\r\nconst UtilContainer = () => {\r\n    const { reversed, socket, start, blocked, banClick } = useSelector(({ record, game }) => ({\r\n        socket: record.socket,\r\n        reversed: record.reversed,\r\n        start: game.start,\r\n        blocked: record.blocked,\r\n        banClick: record.banClick,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n    \r\n    const onReverse = useCallback(() => {\r\n        dispatch(changeReverse({ reversed: !reversed }));\r\n    }, [dispatch, reversed]);\r\n\r\n    const onClick = useCallback(type => {\r\n        if(start && !blocked && !banClick) {\r\n            dispatch(askingThunk({\r\n                socket,\r\n                type,\r\n            }));\r\n            dispatch(setBanClick());\r\n        }\r\n    }, [dispatch, start, socket, blocked, banClick]);\r\n\r\n    return (\r\n        <Util\r\n            onReverse={onReverse}\r\n            onClick={onClick}\r\n        />\r\n    )\r\n};\r\n\r\nexport default UtilContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport TimerContainer from '../../containers/gameplay/TimerContainer';\r\nimport StatusContainer from '../../containers/gameplay/StatusContainer';\r\nimport PieceMoveListContainer from '../../containers/gameplay/PieceMoveListContainer';\r\nimport TimeLineContainer from '../../containers/gameplay/TimeLineContainer';\r\nimport UndoRedoContainer from '../../containers/gameplay/UndoRedoContainer';\r\nimport UtilContainer from '../../containers/gameplay/UtilContainer';\r\n\r\nconst RecordBlock = styled.div`\r\n    position: relative;\r\n    width: 100%;\r\n    height: 360px;\r\n    background-color: white;\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst Record = ({ reversal, init }) => {\r\n    return (\r\n        <>\r\n            {reversal ? (\r\n                <>\r\n                    <TimerContainer\r\n                        init={init}\r\n                        white\r\n                    />\r\n                </>\r\n            ) : (\r\n                <>\r\n                    <TimerContainer\r\n                        init={init}\r\n                        black\r\n                    />\r\n                </>\r\n            )}\r\n            <RecordBlock>\r\n                {reversal ? (\r\n                    <>\r\n                        <TimeLineContainer\r\n                            init={init}\r\n                            white\r\n                        />\r\n                        <StatusContainer\r\n                            init={init}\r\n                            white\r\n                        />\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <TimeLineContainer\r\n                            init={init}\r\n                            black\r\n                        />\r\n                        <StatusContainer\r\n                            init={init}\r\n                            black\r\n                        />\r\n                    </>\r\n                )}\r\n                <UtilContainer />\r\n                <PieceMoveListContainer />\r\n                <UndoRedoContainer />\r\n                {reversal ? (\r\n                    <>\r\n                        <StatusContainer\r\n                            init={init}\r\n                            black\r\n                            beneath\r\n                        />\r\n                        <TimeLineContainer\r\n                            init={init}\r\n                            black\r\n                        />\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <StatusContainer\r\n                            init={init}\r\n                            white\r\n                            beneath\r\n                        />\r\n                        <TimeLineContainer\r\n                            init={init}\r\n                            white\r\n                        />\r\n                    </>\r\n                )}\r\n                \r\n            </RecordBlock>\r\n            {reversal ? (\r\n                <>\r\n                    <TimerContainer\r\n                        init={init}\r\n                        black\r\n                    />\r\n                </>\r\n            ) : (\r\n                <>\r\n                    <TimerContainer\r\n                        init={init}\r\n                        white\r\n                    />\r\n                </>\r\n            )}\r\n        </>\r\n    )\r\n};\r\n\r\nexport default React.memo(Record);","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Record from '../../components/gameplay/Record';\r\nimport { clearValue } from '../../modules/record';\r\n\r\nconst RecordContainer = () => {\r\n    const { role, reversed } = useSelector(({ socketAuth, record }) => ({\r\n        role: socketAuth.role,\r\n        reversed: record.reversed,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [ init, setInit ] = useState(false);\r\n\r\n    //  화면 깜박임 없이 렌더링을 한번만 하기 위한 장치\r\n    useEffect(() => {\r\n        if(role && !init) {\r\n            setInit(true);\r\n        }\r\n    }, [init, role]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearValue());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    let reversal = false;\r\n    if(((role === 'white' || role === 'spectator') && reversed) || (role === 'black' && !reversed)) {\r\n        reversal = true;\r\n    }\r\n\r\n    return (\r\n        <Record\r\n            init={init}\r\n            reversal={reversal}\r\n        />\r\n    );\r\n};\r\n\r\nexport default RecordContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport CanvasContainer from '../../containers/gameplay/CanvasContainer';\r\nimport ChatContainer from '../../containers/gameplay/ChatContainer';\r\nimport RecordContainer from '../../containers/gameplay/RecordContainer';\r\n\r\nconst GamePlayLayoutBlock = styled.div`\r\n    height: 800px;\r\n    width: 100%;\r\n    background-color: rgb(237, 235, 233);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nconst sideBlockStyle = css`\r\n    height: 90%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    width: 20%;\r\n`;\r\n\r\nconst LeftSideBlock = styled.div`\r\n    ${sideBlockStyle}\r\n    margin-right: 1%;\r\n`;\r\n\r\nconst RightSideBlock = styled.div`\r\n    ${sideBlockStyle}\r\n    margin-left: 1%;\r\n`;\r\n\r\nconst GamePlayLayout = () => {\r\n    return (\r\n        <GamePlayLayoutBlock>\r\n            <LeftSideBlock>\r\n                <ChatContainer />\r\n            </LeftSideBlock>\r\n            <CanvasContainer />\r\n            <RightSideBlock>\r\n                <RecordContainer />\r\n            </RightSideBlock>\r\n        </GamePlayLayoutBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(GamePlayLayout);","import { createAction, handleActions } from 'redux-actions';\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nconst CONNECT_WEBSOCKET = 'socketAuth/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'socketAuth/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_SOCKET = 'socketAuth/INITIALIZE_SOCKET';\r\nconst INITIALIZE_VALUE = 'socketAuth/INITIALIZE_VALUE';\r\nconst CLEAR_VALUE = 'socketAuth/CLEAR_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const query = action.payload;\r\n    \r\n    const socketTask = yield fork(connectNamespace, {\r\n        url: '/socketAuth',\r\n        initializeSocket,\r\n        initializeValue,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* socketAuthSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    nickname: null,\r\n    role: null,\r\n    error: null,\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\r\n        ...state,\r\n        ...rest,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n}, initialState);","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\n\r\nconst CONNECT_WEBSOCKET = 'game/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'game/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_VALUE = 'game/INITIALIZE_VALUE';\r\nconst INITIALIZE_SOCKET = 'game/INITIALIZE_SOCKET';\r\nconst CLEAR_VALUE = 'game/CLEAR_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const query = action.payload;\r\n\r\n    const socketTask = yield fork(connectNamespace, { \r\n        url: '/game',\r\n        initializeSocket,\r\n        initializeValue,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* gameSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    error: null,\r\n    participant: [],\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest }}) => ({\r\n        ...state,\r\n        ...rest,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n}, initialState);","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport uuid from 'uuid/v1';\r\n\r\nimport useAsync from '../../lib/hook/useAsync';\r\nimport GamePlayLayout from '../../components/gameplay/GamePlayLayout';\r\nimport { setSessionThunk } from '../../modules/sessionAuth';\r\n\r\nimport { clearValue as clearAuthValue } from '../../modules/socketAuth';\r\nimport { clearValue as clearGameValue } from '../../modules/game';\r\n\r\nimport { connectWebsocket as connectAuthWebsocket } from '../../modules/socketAuth';\r\nimport { connectWebsocket as connectGameWebsocket } from '../../modules/game';\r\nimport { connectWebsocket as connectChatWebsocket } from '../../modules/chat';\r\nimport { connectWebsocket as connectCanvasWebsocket} from '../../modules/canvas';\r\nimport { connectWebsocket as connectRecordWebsocket } from '../../modules/record';\r\n\r\nimport { disconnectWebsocket as disconnectAuthWebsocket } from '../../modules/socketAuth';\r\nimport { disconnectWebsocket as disconnectGameWebsocket } from '../../modules/game';\r\nimport { disconnectWebsocket as disconnectChatWebsocket } from '../../modules/chat';\r\nimport { disconnectWebsocket as disconnectCanvasWebsocket } from '../../modules/canvas';\r\nimport { disconnectWebsocket as disconnectRecordWebsocket } from '../../modules/record';\r\n\r\nconst GamePlayLayoutContainer = ({ gameKey }) => {\r\n    const dispatch = useDispatch();\r\n\r\n    const connection = async () => {\r\n        await dispatch(setSessionThunk());\r\n        dispatch(disconnectGameWebsocket());\r\n        dispatch(disconnectAuthWebsocket());\r\n        dispatch(disconnectChatWebsocket());\r\n        dispatch(disconnectCanvasWebsocket());\r\n        dispatch(disconnectRecordWebsocket());\r\n        await Promise.resolve().then(() => {\r\n            const tabKey = uuid();\r\n            const param = {\r\n                gameKey,\r\n                tabKey,\r\n            }\r\n            dispatch(connectGameWebsocket(param));\r\n            dispatch(connectAuthWebsocket(param));\r\n            dispatch(connectChatWebsocket(param));\r\n            dispatch(connectCanvasWebsocket(param));\r\n            dispatch(connectRecordWebsocket(param));\r\n        })\r\n        return true;\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(disconnectGameWebsocket());\r\n            dispatch(disconnectAuthWebsocket());\r\n            dispatch(disconnectChatWebsocket());\r\n            dispatch(disconnectCanvasWebsocket());\r\n            dispatch(disconnectRecordWebsocket());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearAuthValue());\r\n            dispatch(clearGameValue());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const [state] = useAsync(connection, [ dispatch, gameKey ]);\r\n\r\n    const { loading, data, error } = state;\r\n\r\n    // if(loading) return null;\r\n    // if(error) return null;\r\n    // if(data) {\r\n    //     return (\r\n    //         <GamePlayLayout />\r\n    //     )\r\n    // }\r\n    // return null;\r\n\r\n    return (\r\n        <GamePlayLayout />\r\n    )\r\n};\r\n\r\nexport default GamePlayLayoutContainer;","import React, { useEffect } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport GamePlayLayoutContainer from '../containers/gameplay/GamePlayLayoutContainer';\r\nimport FooterContainer from '../containers/common/FooterContainer';\r\n\r\nconst GamePlayPage = ({ history, match }) => {\r\n    useEffect(() => {\r\n        if(!match.params.id) {\r\n            history.push('/');\r\n        }\r\n    }, [history, match]);\r\n\r\n    if(!match.params.id) return null;\r\n    const { id } = match.params;\r\n    if(!id) return null;\r\n    \r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>GamePlay • Chesssup.com</title>\r\n            </Helmet>\r\n            <HeaderContainer />\r\n            <GamePlayLayoutContainer gameKey={id}/>\r\n            <FooterContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default withRouter(GamePlayPage);","import React from 'react';\r\nimport { MdArrowForward, MdArrowBack } from 'react-icons/md';\r\nimport { IconContext } from 'react-icons';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst PaginationBlock = styled.div`\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    width: 100%;\r\n    height: 100%;\r\n`;\r\n\r\nconst ButtonBlock = styled.button`\r\n    width: 30px;\r\n    height: 30px;\r\n    font-size: 10px;\r\n    background: white;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    padding: 0px;\r\n    border: none;\r\n    margin: 0px;\r\n    outline: none;\r\n    cursor: pointer;\r\n    \r\n    &:hover {\r\n        background: rgba(0, 0, 0, 0.05);\r\n    }\r\n\r\n    &:active {\r\n        background: rgba(0, 0, 0, 0.1);\r\n    }\r\n\r\n    ${props => props.page && css`\r\n        background: rgba(102, 204, 255, 0.1);\r\n\r\n        &:hover {\r\n            background: rgba(102, 204, 255, 0.2);\r\n        }\r\n\r\n        &:active {\r\n            background: rgba(102, 204, 255, 0.3);\r\n        }\r\n    }\r\n\r\n    `}\r\n\r\n    & + & {\r\n        margin-left: 5px;\r\n    }\r\n`;\r\n\r\nconst Pagination = ({ page, size, onClick, onForwardClick, onBackwardClick }) => {\r\n    const firstBlock = parseInt((page-1) / 5) * 5 + 1;\r\n    const lastBlock = firstBlock + 4;\r\n    \r\n    const buttons = [];\r\n    for(let i=firstBlock; i<=lastBlock; ++i) {\r\n        buttons.push(\r\n            <ButtonBlock\r\n                page={i===page}\r\n                onClick={() => onClick(i)}\r\n                disabled={i > size}\r\n            >\r\n                {i}\r\n            </ButtonBlock>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <PaginationBlock>\r\n            <ButtonBlock onClick={onBackwardClick}>\r\n                <IconContext.Provider value={{ style: { width: '15px', height: '15px' } }}>\r\n                    <MdArrowBack />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            {buttons}\r\n            <ButtonBlock onClick={onForwardClick}>\r\n                <IconContext.Provider value={{ style: { width: '15px', height: '15px' } }}>\r\n                    <MdArrowForward />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n        </PaginationBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Pagination);","import { handleActions, createAction } from 'redux-actions';\r\nimport * as communityCtrl from '../lib/api/community';\r\nimport  createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\n\r\nconst CLEAR_ALL = 'community/CLEAR_ALL';\r\nconst SET_MENU = 'community/SET_MENU';\r\nconst SET_STATUS = 'community/SET_STATUS';\r\nconst SET_FORM = 'community/SET_FORM';\r\nconst CLEAR_FORM = 'community/CLEAR_FORM';\r\nconst CLEAR_FORM_ALL = 'community/CLEAR_FORM_ALL';\r\nconst [ CREATE_POST, CREATE_POST_SUCCESS, CREATE_POST_FAILURE ] = createRequestActionTypes('community/CREATE_POST');\r\nconst [ LIST_POST, LIST_POST_SUCCESS, LIST_POST_FAILURE ] = createRequestActionTypes('community/LIST_POST');\r\nconst [ READ_POST, READ_POST_SUCCESS, READ_POST_FAILURE ] = createRequestActionTypes('community/READ_POST');\r\nconst [ DELETE_POST, DELETE_POST_SUCCESS, DELETE_POST_FAILURE ] = createRequestActionTypes('community/DELETE_POST');\r\nconst [ UPDATE_POST, UPDATE_POST_SUCCESS, UPDATE_POST_FAILURE ] = createRequestActionTypes('community/UPDATE_POST');\r\nexport const clearAll = createAction(CLEAR_ALL);\r\nexport const setMenu = createAction(SET_MENU, payload => payload);\r\nexport const setStatus = createAction(SET_STATUS, payload => payload);\r\nexport const setForm = createAction(SET_FORM, payload => payload);\r\nexport const clearForm = createAction(CLEAR_FORM, payload => payload);\r\nexport const clearFormAll = createAction(CLEAR_FORM_ALL, payload => payload);\r\nexport const createPostThunk = createRequestThunk(CREATE_POST, communityCtrl.createPost);\r\nexport const listPostThunk = createRequestThunk(LIST_POST, communityCtrl.listPost);\r\nexport const readPostThunk = createRequestThunk(READ_POST, communityCtrl.readPost);\r\nexport const deletePostThunk = createRequestThunk(DELETE_POST, communityCtrl.deletePost);\r\nexport const updatePostThunk = createRequestThunk(UPDATE_POST, communityCtrl.updatePost);\r\n\r\nexport const setMenuThunk = index => (dispatch, getState) => {\r\n    const {\r\n        community: { menu },\r\n    } = getState();\r\n\r\n    const revisedMenu = menu.map(criteria => criteria.checked\r\n        ? { ...criteria, checked: false }\r\n        : criteria\r\n    );\r\n\r\n    revisedMenu[index] = {\r\n        ...revisedMenu[index],\r\n        checked: true,\r\n    }\r\n\r\n    dispatch(setMenu({\r\n        menu: revisedMenu,\r\n    }))\r\n};\r\n\r\nconst initialState = {\r\n    status: 'list',\r\n    menu: [\r\n        {\r\n            name: 'All Posts',\r\n            checked: true,\r\n        },\r\n        {\r\n            name: 'Small Talk',\r\n            checked: false,\r\n        },\r\n        {\r\n            name: 'Know How',\r\n            checked: false,\r\n        },\r\n        {\r\n            name: 'Notice',\r\n            checked: false,\r\n        },\r\n    ],\r\n    list: {\r\n        page: 1,\r\n        size: 1,\r\n        posts: [],\r\n    },\r\n    post: {\r\n        id: null,\r\n        post: null,\r\n    },\r\n    write: {\r\n        modify: false,\r\n        title: '',\r\n        content: '',\r\n    }\r\n};\r\n\r\n\r\nexport default handleActions({\r\n    [CLEAR_ALL]: state => initialState,\r\n    [SET_MENU]: (state, { payload: { menu } }) => ({\r\n        ...state,\r\n        menu,\r\n    }),\r\n    [SET_STATUS]: (state, { payload: { status } }) => ({\r\n        ...state,\r\n        status,\r\n    }),\r\n    [SET_FORM]: (state, { payload: { status, key, value } }) => ({\r\n        ...state,\r\n        [status]: {\r\n            ...state[status],\r\n            [key]: value,\r\n        }\r\n    }),\r\n    [CLEAR_FORM]: (state, { payload: { status, key } }) => ({\r\n        ...state,\r\n        [status]: {\r\n            ...state[status],\r\n            [key]: initialState[status][key],\r\n        }\r\n    }),\r\n    [CLEAR_FORM_ALL]: (state, { payload: { status } }) => ({\r\n        ...state,\r\n        [status]: {\r\n            ...initialState[status],\r\n        }\r\n    }),\r\n    [CREATE_POST_SUCCESS]: state => state,\r\n    [CREATE_POST_FAILURE]: state => state,\r\n    [LIST_POST_SUCCESS]: (state, { payload: { posts, size } }) => ({\r\n        ...state,\r\n        list: {\r\n            ...state.list,\r\n            posts,\r\n            size,\r\n        }\r\n    }),\r\n    [LIST_POST_FAILURE]: state => state,\r\n    [READ_POST_SUCCESS]: (state, { payload: { post } }) => ({\r\n        ...state,\r\n        post: {\r\n            ...state.post,\r\n            post,\r\n        }\r\n    }),\r\n    [READ_POST_FAILURE]: state => state,\r\n    [DELETE_POST_SUCCESS]: state => state,\r\n    [DELETE_POST_FAILURE]: state => state,\r\n    [UPDATE_POST_SUCCESS]: state => state,\r\n    [UPDATE_POST_FAILURE]: state => state,\r\n}, initialState);","import axios from 'axios';\r\nimport qs from 'qs';\r\n\r\nexport const createPost = params =>\r\n    axios.post('/api/community', params);\r\n\r\nexport const readPost = ({ id }) =>\r\n    axios.get(`/api/community/${id}`);\r\n\r\nexport const listPost = ({ kind, page }) => {\r\n    const queryString = qs.stringify({\r\n        kind,\r\n        page,\r\n    });\r\n\r\n    return axios.get(`/api/community?${queryString}`);\r\n}\r\n\r\nexport const updatePost = ({ id, ...rest }) =>\r\n    axios.patch(`/api/community/${id}`, rest);\r\n\r\nexport const deletePost = ({ id }) =>\r\n    axios.delete(`/api/community/${id}`);","import React, { useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport Pagination from '../../components/community/Pagination';\r\nimport { setForm } from '../../modules/community';\r\n\r\nconst PaginationContainer = () => {\r\n    const { page, size } = useSelector(({ community }) => ({\r\n        page: community.list.page,\r\n        size: community.list.size,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onClick = useCallback(pageNum => {\r\n        if(page !== pageNum) {\r\n            dispatch(setForm({\r\n                status: 'list',\r\n                key: 'page',\r\n                value: pageNum,\r\n            }))\r\n        }\r\n    }, [dispatch, page]);\r\n\r\n    const onForwardClick = useCallback(() => {\r\n        if(page < size) {\r\n            dispatch(setForm({\r\n                status: 'list',\r\n                key: 'page',\r\n                value: page+1,\r\n            }))\r\n        }\r\n    }, [dispatch, page, size]);\r\n\r\n    const onBackwardClick = useCallback(() => {\r\n        if(page > 1) {\r\n            dispatch(setForm({\r\n                status: 'list',\r\n                key: 'page',\r\n                value: page-1,\r\n            }))\r\n        }\r\n    }, [dispatch, page])\r\n\r\n    return (\r\n        <Pagination\r\n            page={page}\r\n            size={size}\r\n            onClick={onClick}\r\n            onForwardClick={onForwardClick}\r\n            onBackwardClick={onBackwardClick}\r\n        />\r\n    );\r\n};\r\n\r\nexport default PaginationContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { GoPin } from 'react-icons/go';\r\nimport { IconContext } from 'react-icons';\r\n\r\nimport PaginationContainer from '../../containers/community/PaginationContainer';\r\n\r\nconst ListBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    box-sizing: border-box;\r\n    padding-top: 5px;\r\n    width: 100%;\r\n    height: 100%;\r\n`;\r\n\r\nconst PostNoticeBlock = styled.div`\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    width: 90%;\r\n    height: 30px;\r\n    background: rgba(102, 204, 255, 0.1);\r\n    cursor: pointer;\r\n    box-sizing: border-box;\r\n    padding: 0px 20px;\r\n    margin-bottom: 5px;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst TextBlock = styled.div`\r\n    margin-left: 10px;\r\n    font-size: 12px;\r\n`;\r\n\r\nconst PostWrapper = styled.div`\r\n    width: 90%;\r\n    height: 479px;\r\n    box-sizing: border-box;\r\n    background: white;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst PostCompressionBlock = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n    height: 31px;\r\n    background: white;\r\n    cursor: pointer;\r\n    font-size: 12px;\r\n\r\n    &+& {\r\n        border-top: 1px solid rgba(0, 0, 0, 0.2);\r\n    }\r\n\r\n    &:last-child {\r\n        border-bottom: 1px solid rgba(0, 0, 0, 0.2);\r\n    }\r\n\r\n    &:nth-child(15) {\r\n        border-bottom: 0px;\r\n    }\r\n    \r\n    &:hover {\r\n        background: rgba(0, 0, 0, 0.05);\r\n    }\r\n`;\r\n\r\nconst TitleBlock = styled.div`\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    height: 100%;\r\n    width: 50%;\r\n    padding-left: 30px;\r\n`;\r\n\r\nconst NumberBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    box-sizing: border-box;\r\n    font-size: 10px;\r\n    width: 50px;\r\n    height: 14px;\r\n    padding: 2px 5px;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst EllipsisBlock = styled.div`\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    max-width: 300px;\r\n    margin-left: 20px;\r\n`;\r\n\r\nconst CommentCounter = styled.div`\r\n    font-size: 10px;\r\n    margin-left: 3px;\r\n    height: 30px;\r\n    padding-top: 5px;\r\n    color: rgba(0, 51, 204, 0.5);\r\n`;\r\n\r\nconst UserBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-end;\r\n    align-items: flex-end;\r\n    height: 100%;\r\n    width: 50%;\r\n    padding-right: 30px;\r\n`;\r\n\r\nconst NameBlock = styled.div`\r\n    height: 50%;\r\n    font-size: 10px;\r\n    padding-right: 20px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nconst DateBlock = styled.div`\r\n    height: 50%;\r\n    font-size: 10px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nconst PaginationFrameBlock = styled.div`\r\n    margin-top: 5px;\r\n    width: 90%;\r\n    height: 30px;\r\n`;\r\n\r\nconst PostCompression =  React.memo(({ post, onClick }) => {\r\n    const createdAt = new Date(Date.parse(post.createdAt));\r\n    const date = createdAt.getFullYear() + \" / \" + createdAt.getMonth() + \" / \" + createdAt.getDate();\r\n    \r\n    return (\r\n        <PostCompressionBlock\r\n            onClick={() => onClick(post._id)}\r\n        >\r\n            <TitleBlock>\r\n                <NumberBlock>\r\n                    No.{post.num}\r\n                </NumberBlock>\r\n                <EllipsisBlock>\r\n                    {post.title}\r\n                </EllipsisBlock>\r\n                <CommentCounter>\r\n                    15\r\n                </CommentCounter>\r\n            </TitleBlock>\r\n            <UserBlock>\r\n                <NameBlock>\r\n                    {post.user.username}\r\n                </NameBlock>\r\n                <DateBlock>\r\n                    {date}\r\n                </DateBlock>\r\n            </UserBlock>\r\n        </PostCompressionBlock>\r\n    )\r\n});\r\n\r\nconst List = ({ list, onClick }) => {\r\n    \r\n    return (\r\n        <ListBlock>\r\n            <PostNoticeBlock>\r\n                <IconContext.Provider value={{ style: { width: '20px', height: '20px' } }}>\r\n                    <GoPin />\r\n                </IconContext.Provider>\r\n                <TextBlock>\r\n                    Chesssup ver1 will be released soon.\r\n                </TextBlock>\r\n            </PostNoticeBlock>\r\n            <PostWrapper>\r\n                {list && list.posts.map(post => (\r\n                    <PostCompression\r\n                        key={post._id}\r\n                        post={post}\r\n                        onClick={onClick}\r\n                    />\r\n                ))}\r\n            </PostWrapper>\r\n            <PaginationFrameBlock>\r\n                <PaginationContainer />\r\n            </PaginationFrameBlock>\r\n        </ListBlock>\r\n    );\r\n};\r\n\r\nexport default React.memo(List);","import React, { useEffect, useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport List from '../../components/community/List';\r\nimport { clearFormAll, listPostThunk, setStatus, setForm } from '../../modules/community';\r\n\r\nconst ListContainer = () => {\r\n    const { menu, list } = useSelector(({ community }) => ({\r\n        menu: community.menu,\r\n        list: community.list,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        const criteria = menu.find(criteria => criteria.checked);\r\n        dispatch(listPostThunk({\r\n            kind: criteria.name,\r\n            page: list.page,\r\n        }));\r\n    }, [dispatch, menu, list.page]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearFormAll({\r\n                status: 'list',\r\n            }));\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const onClick = useCallback(id => {\r\n        dispatch(setStatus({\r\n            status: 'post',\r\n        }));\r\n        dispatch(setForm({\r\n            status: 'post',\r\n            key: 'id',\r\n            value: id,\r\n        }))\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <List\r\n            list={list}\r\n            onClick={onClick}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ListContainer;\r\n","import React from 'react';\r\nimport 'quill/dist/quill.bubble.css';\r\n\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst QuillFrameBlock = styled.div`\r\n    width: 90%;\r\n    height: 479px;\r\n    background: white;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst QuillWrapperBlock = styled.div``;\r\n\r\nconst WriteBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: flex-start;\r\n    box-sizing: border-box;\r\n    padding-top: 5px;\r\n    width: 100%;\r\n    height: 100%;\r\n`;\r\n\r\nconst TitleInputBlock = styled.input`\r\n    width: 90%;\r\n    height: 30px;\r\n    padding: 0px 15px;\r\n    box-sizing: border-box;\r\n    border: none;\r\n    outline: none;\r\n    margin-bottom: 5px;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    font-size: 13px;\r\n    /* font-family: Helvetica, Arial, sans-serif; */\r\n\r\n    ${props => props.holding && css`\r\n        font-style: italic;\r\n    `}\r\n`;\r\n\r\nconst SubmitFrameBlock = styled.div`\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    width: 90%;\r\n    height: 30px;\r\n    margin-top: 5px;\r\n`;\r\n\r\nconst ButtonBlock = styled.button`\r\n    width: 100px;\r\n    height: 100%;\r\n    background: white;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    padding: 0px;\r\n    border: none;\r\n    margin: 0px;\r\n    outline: none;\r\n    cursor: pointer;\r\n\r\n    & + & {\r\n        margin-left: 5px;\r\n    }\r\n\r\n    &:hover {\r\n        background: rgba(0, 0, 0, 0.05);\r\n    }\r\n\r\n    &:active {\r\n        background: rgba(0, 0, 0, 0.1);\r\n    }\r\n`;\r\n\r\nconst Write = ({\r\n    quillElement,\r\n    onChangeTitle,\r\n    holding,\r\n    write,\r\n    onSubmit,\r\n    onCancel,\r\n}) => {\r\n    return (\r\n        <WriteBlock>\r\n            <TitleInputBlock\r\n                onChange={onChangeTitle}\r\n                value={write.title}\r\n                placeholder='title'\r\n                holding={holding}\r\n            />\r\n            <QuillFrameBlock>\r\n                <QuillWrapperBlock ref={quillElement} />\r\n            </QuillFrameBlock>\r\n            <SubmitFrameBlock>\r\n                <ButtonBlock onClick={onSubmit}>\r\n                    Submit\r\n                </ButtonBlock>\r\n                <ButtonBlock onClick={onCancel}>\r\n                    Cancel\r\n                </ButtonBlock>\r\n            </SubmitFrameBlock>\r\n        </WriteBlock>\r\n    );\r\n};\r\n\r\nexport default React.memo(Write);","import React, { useRef, useEffect, useCallback, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport Quill from 'quill';\r\n\r\nimport Write from '../../components/community/Write';\r\nimport { setForm, createPostThunk, updatePostThunk, clearFormAll, setStatus } from '../../modules/community';\r\n\r\nconst WriteLayoutContainer = () => {\r\n    const { write, menu } = useSelector(({ community }) => ({\r\n        write: community.write,\r\n        menu: community.menu,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const quillElement = useRef();\r\n    const quillInstance = useRef();\r\n    const mounted = useRef(false);\r\n\r\n    const [ holding, setHolding ] = useState(!(write && write.title));\r\n\r\n    useEffect(() => {\r\n        quillInstance.current = new Quill(quillElement.current, {\r\n            theme: 'bubble',\r\n            placeholder: 'content',\r\n            modules: {\r\n                toolbar: [\r\n                    [{ header: '1' }, { header: '2' }],\r\n                    ['bold', 'italic', 'underline', 'strike'],\r\n                    [{ list: 'ordered' }, { list: 'bullet' }],\r\n                    ['blockquote', 'code-block', 'link', 'image'],\r\n                ]\r\n            },\r\n        });\r\n\r\n        const quill = quillInstance.current;\r\n        quill.on('text-change', (delta, oldDelta, source) => {\r\n            if(source === 'user') {\r\n                dispatch(setForm({\r\n                    status: 'write',\r\n                    key: 'content',\r\n                    value: quill.root.innerHTML,\r\n                }))\r\n            }\r\n        });\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        if(mounted.current) return;\r\n        mounted.current = true;\r\n        quillInstance.current.root.innerHTML = write.content;\r\n    }, [write]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearFormAll({\r\n                status: 'write',\r\n            }));\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const onChangeTitle = useCallback(e => {\r\n        if(holding && e.target.value !== '') {\r\n            setHolding(false);\r\n        } else if(!holding && e.target.value === ''){\r\n            setHolding(true);\r\n        }\r\n        \r\n        dispatch(setForm({\r\n            status: 'write',\r\n            key: 'title',\r\n            value: e.target.value,\r\n        }));\r\n    }, [dispatch, holding]);\r\n\r\n    const onSubmit = useCallback(async() => {\r\n        const criteria = menu.find(criteria => criteria.checked);\r\n\r\n        if(!write.modify) {\r\n            //  create\r\n            await dispatch(createPostThunk({\r\n                kind: criteria.name,\r\n                title: write.title,\r\n                content: write.content,\r\n            }));\r\n        } else {\r\n            //  update\r\n            await dispatch(updatePostThunk({\r\n                id: write.modify,\r\n                kind: criteria.name,\r\n                title: write.title,\r\n                content: write.content,\r\n            }));\r\n        }\r\n\r\n        dispatch(setStatus({\r\n            status: 'list',\r\n        }));\r\n    }, [dispatch, write, menu]);\r\n\r\n    const onCancel = useCallback(() => {\r\n        dispatch(setStatus({\r\n            status: 'list',\r\n        }));\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Write\r\n            quillElement={quillElement}\r\n            onChangeTitle={onChangeTitle}\r\n            write={write}\r\n            holding={holding}\r\n            onSubmit={onSubmit}\r\n            onCancel={onCancel}\r\n        />\r\n    )\r\n};\r\n\r\nexport default WriteLayoutContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst PostBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    box-sizing: border-box;\r\n    padding-top: 5px;\r\n    width: 100%;\r\n    height: 100%;\r\n`;\r\n\r\nconst PostTitleFrameBlock = styled.div`\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    width: 90%;\r\n    height: 30px;\r\n    background: white;\r\n    box-sizing: border-box;\r\n    padding: 0px 15px;\r\n    margin-bottom: 5px;\r\n    font-size: 13px;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst PostTitleBlock = styled.div`\r\n    width: 50%;\r\n`;\r\n\r\nconst PostAuthFrameBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-end;\r\n    width: 50%;\r\n    font-size: 11px;\r\n`;\r\n\r\nconst PostAuthBlock = styled.div`\r\n    padding-right: 20px;\r\n`;\r\n\r\nconst PostDateBlock = styled.div`\r\n\r\n`;\r\n\r\nconst PostContentBlock = styled.div`\r\n    width: 90%;\r\n    height: 479px;\r\n    font-size: 13px;\r\n    box-sizing: border-box;\r\n    background: white;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    \r\n    line-height: 1.42;\r\n    outline: none;\r\n    overflow-y: auto;\r\n    padding: 12px 15px;\r\n    tab-size: 4;\r\n    -moz-tab-size: 4;\r\n    text-align: left;\r\n    white-space: pre-wrap;\r\n    word-wrap: break-word;\r\n    font-family: Helvetica, Arial, sans-serif;\r\n\r\n    p {\r\n        margin: 0px;\r\n    }\r\n`;\r\n\r\nconst UtilBlock = styled.div`\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    width: 90%;\r\n    height: 30px;\r\n    margin-top: 5px;\r\n`;\r\n\r\nconst ButtonBlock = styled.button`\r\n    width: 100px;\r\n    height: 100%;\r\n    background: white;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    padding: 0px;\r\n    border: none;\r\n    margin: 0px;\r\n    outline: none;\r\n    cursor: pointer;\r\n\r\n    & + & {\r\n        margin-left: 5px;\r\n    }\r\n\r\n    &:hover {\r\n        background: rgba(0, 0, 0, 0.05);\r\n    }\r\n\r\n    &:active {\r\n        background: rgba(0, 0, 0, 0.1);\r\n    }\r\n`;\r\n\r\nconst Post = ({ post, auth, onUpdate, onDelete }) => {\r\n    let date = null;\r\n    if(post) {\r\n        const createdAt = new Date(Date.parse(post.createdAt));\r\n        date = createdAt.getFullYear() + \" / \" + createdAt.getMonth() + \" / \" + createdAt.getDate();\r\n    }\r\n    \r\n    return (\r\n        <PostBlock>\r\n            <PostTitleFrameBlock>\r\n                <PostTitleBlock>\r\n                    {post && post.title}\r\n                </PostTitleBlock>\r\n                <PostAuthFrameBlock>\r\n                    <PostAuthBlock>\r\n                        {post && post.user.username}\r\n                    </PostAuthBlock>\r\n                    <PostDateBlock>\r\n                        {date}\r\n                    </PostDateBlock>\r\n                </PostAuthFrameBlock>\r\n            </PostTitleFrameBlock>\r\n            <PostContentBlock dangerouslySetInnerHTML={{ __html: (post ? post.content : null) }} />\r\n            <UtilBlock>\r\n                <ButtonBlock\r\n                    disabled={!auth || !post || auth._id !== post.user._id}\r\n                    onClick={() => onUpdate(post)}\r\n                >\r\n                    Update\r\n                </ButtonBlock>\r\n                <ButtonBlock\r\n                    disabled={!auth || !post || auth._id !== post.user._id}\r\n                    onClick={() => onDelete(post._id)}\r\n                >\r\n                    Delete\r\n                </ButtonBlock>\r\n            </UtilBlock>\r\n        </PostBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Post);","import React, { useEffect, useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport Post from '../../components/community/Post';\r\nimport { readPostThunk, clearFormAll, setStatus, deletePostThunk, setForm } from '../../modules/community';\r\n\r\nconst PostContainer = () => {\r\n    const { id, post, auth } = useSelector(({ community, sessionAuth }) => ({\r\n        id: community.post.id,\r\n        post: community.post.post,\r\n        auth: sessionAuth.auth,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        dispatch(readPostThunk({\r\n            id,\r\n        }))\r\n    }, [dispatch, id]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearFormAll({\r\n                status: 'post',\r\n            }));\r\n        };\r\n    }, [dispatch]);\r\n\r\n    const onUpdate = useCallback(async (post) => {\r\n        dispatch(setForm({\r\n            status: 'write',\r\n            key: 'title',\r\n            value: post.title,\r\n        }));\r\n        dispatch(setForm({\r\n            status: 'write',\r\n            key: 'content',\r\n            value: post.content,\r\n        }));\r\n        dispatch(setForm({\r\n            status: 'write',\r\n            key: 'modify',\r\n            value: post._id,\r\n        }));\r\n        dispatch(setStatus({\r\n            status: 'write',\r\n        }));\r\n    }, [dispatch]);\r\n\r\n    const onDelete = useCallback(async (id) => {\r\n        await dispatch(deletePostThunk({ id }));\r\n        dispatch(setStatus({\r\n            status: 'list',\r\n        }));\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Post \r\n            post={post}\r\n            auth={auth}\r\n            onUpdate={onUpdate}\r\n            onDelete={onDelete}\r\n        />\r\n    )\r\n};\r\n\r\nexport default PostContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { FaPencilAlt } from 'react-icons/fa';\r\nimport { TiArrowBack } from 'react-icons/ti';\r\nimport { IconContext } from 'react-icons';\r\n\r\nimport ListContainer from '../../containers/community/ListContainer';\r\nimport WriteContainer from '../../containers/community/WriteContainer';\r\nimport PostContainer from '../../containers/community/PostContainer';\r\n\r\nconst CommunityLayoutFrameBlock = styled.div`\r\n    width: 100%;\r\n    height: 800px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nconst CommunityLayoutBlock = styled.div`\r\n    width: 1200px;\r\n    height: 720px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    background: rgba(255, 255, 255, 0.5);\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst HeaderBlock = styled.div`\r\n    position: relative;\r\n    display: flex;\r\n    margin-top: 20px;\r\n    width: 500px;\r\n    height: 30px;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    background: white;\r\n`;\r\n\r\nconst SubTitleBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 125px;\r\n    height: 30px;\r\n    font-size: 15px;\r\n    cursor: pointer;\r\n`;\r\n\r\nconst MovingUnderline = styled.div`\r\n    position: absolute;\r\n    top: 30px;\r\n    left: 0px;\r\n    width: 125px;\r\n    height: 2px;\r\n    background: black;\r\n    transition: 0.5s;\r\n    left: ${props => (props.checkedIndex * 125) + 'px'};\r\n`;\r\n\r\nconst ContentBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    width: 1000px;\r\n    height: 560px;\r\n    margin-top: 5px;\r\n    /* box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12); */\r\n    /* background: white; */\r\n    background: transparent;\r\n`;\r\n\r\nconst TabBlock = styled.div`\r\n    width: 900px;\r\n    margin-top: 30px;\r\n    height: 30px;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n\r\n    ${props => props.status === 'list' && css`\r\n        justify-content: flex-end;\r\n    `}   \r\n`;\r\n\r\nconst WriteEventBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    color: rgba(0, 0, 0, 0.4);\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        color: rgba(0, 0, 0, 0.8);\r\n    }\r\n`;\r\n\r\nconst WriteBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-left: 10px;\r\n    font-size: 14px;\r\n    height: 30px; \r\n`;\r\n\r\nconst BackEventBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    color: rgba(0, 0, 0, 0.4);\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        color: rgba(0, 0, 0, 0.8);\r\n    }\r\n`;\r\n\r\nconst BackBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-left: 10px;\r\n    font-size: 14px;\r\n    height: 30px;\r\n`;\r\n\r\nconst CommunityLayout = ({\r\n    menu,\r\n    auth,\r\n    status,\r\n    onClick,\r\n    onCreatePost,\r\n    onGoBack,\r\n}) => {\r\n    const checkedIndex = menu.findIndex(criteria => criteria.checked);\r\n\r\n    return (\r\n        <CommunityLayoutFrameBlock>\r\n            <CommunityLayoutBlock>\r\n                <HeaderBlock>\r\n                    {menu.map((criteria, index) => (\r\n                        <SubTitleBlock\r\n                            checked={criteria.checked}\r\n                            onClick={() => onClick(index)}\r\n                        >\r\n                            {criteria.name}\r\n                        </SubTitleBlock>\r\n                    ))}\r\n                    <MovingUnderline checkedIndex={checkedIndex} />\r\n                </HeaderBlock>\r\n                <TabBlock status={status}>\r\n                    {status === 'list' && auth && checkedIndex !== 0 && checkedIndex !== 3 && (\r\n                        <WriteEventBlock onClick={onCreatePost}>\r\n                            <IconContext.Provider value={{ style: { width: '20px', height: '20px' }}}>\r\n                                <FaPencilAlt />\r\n                            </IconContext.Provider>\r\n                            <WriteBlock>\r\n                                New Post\r\n                            </WriteBlock>\r\n                        </WriteEventBlock>\r\n                    )}\r\n                    {(status === 'post' || status === 'write') && (\r\n                        <BackEventBlock onClick={onGoBack}>\r\n                            <IconContext.Provider value={{ style: { width: '25px', height: '25px' } }}>\r\n                                <TiArrowBack />\r\n                            </IconContext.Provider>\r\n                            <BackBlock>\r\n                                Go Back\r\n                            </BackBlock>\r\n                        </BackEventBlock>\r\n                    )}\r\n                </TabBlock>\r\n                <ContentBlock>\r\n                    {status && status === 'list' && <ListContainer />}\r\n                    {status && status === 'write' && <WriteContainer />}\r\n                    {status && status === 'post' && <PostContainer />}\r\n                </ContentBlock>\r\n            </CommunityLayoutBlock>\r\n        </CommunityLayoutFrameBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(CommunityLayout);","import React, { useCallback, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport CommunityLayout from '../../components/community/CommunityLayout';\r\nimport { setMenuThunk, setStatus, clearForm, clearAll } from '../../modules/community';\r\n\r\nconst CommunityLayoutContainer = () => {\r\n    const { menu, status, auth } = useSelector(({ community, sessionAuth }) => ({\r\n        menu: community.menu,\r\n        status: community.status,\r\n        auth: sessionAuth.auth,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearAll());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const onClick = useCallback(index => {\r\n        const checkedIndex = menu.findIndex(criteria => criteria.checked);\r\n        if(index === checkedIndex) return;\r\n\r\n        dispatch(setMenuThunk(index));\r\n\r\n        //  clear page before rendering\r\n        dispatch(clearForm({\r\n            status: 'list',\r\n            key: 'page',\r\n        }));\r\n        \r\n        dispatch(setStatus({\r\n            status: 'list',\r\n        }));\r\n    }, [dispatch, menu]);\r\n\r\n    const onCreatePost = useCallback(() => {\r\n        dispatch(setStatus({\r\n            status: 'write'\r\n        }));\r\n    }, [dispatch]);\r\n\r\n    const onGoBack = useCallback(() => {\r\n        dispatch(setStatus({\r\n            status: 'list'\r\n        }));\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <CommunityLayout\r\n            menu={menu}\r\n            auth={auth}\r\n            status={status}\r\n            onClick={onClick}\r\n            onCreatePost={onCreatePost}\r\n            onGoBack={onGoBack}\r\n        />\r\n    );\r\n};\r\n\r\nexport default CommunityLayoutContainer;","import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport CommunityLayoutContainer from '../containers/community/CommunityLayoutContainer';\r\nimport FooterContainer from '../containers/common/FooterContainer';\r\n\r\nconst CommunityPage = () => {\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Community • Chesssup.com</title>\r\n            </Helmet>\r\n            <HeaderContainer />\r\n            <CommunityLayoutContainer />\r\n            <FooterContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default CommunityPage;","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nimport MainPage from './pages/MainPage';\r\nimport LoginPage from './pages/LoginPage';\r\nimport RegisterPage from './pages/RegisterPage';\r\nimport GamePage from './pages/GamePage';\r\nimport GamePlayPage from './pages/GamePlayPage';\r\nimport CommunityPage from './pages/CommunityPage';\r\n\r\nconst ErrorPageDiv = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 200px;\r\n  font-size: 50px;\r\n`;\r\n\r\n\r\nconst App = () => {\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Chesssup.com</title>\r\n      </Helmet>\r\n      <Switch>\r\n        <Route component={MainPage} path='/' exact />\r\n        <Route component={LoginPage} path='/login' exact />\r\n        <Route component={RegisterPage} path='/register' exact />\r\n        <Route component={GamePage} path='/game' exact />\r\n        <Route component={GamePlayPage} path='/game/:id' exact />\r\n        <Route component={CommunityPage} path='/community' exact />\r\n        <Route \r\n          render={({ location }) => (\r\n            <ErrorPageDiv>\r\n              <h1>404 Error</h1>\r\n              <p>요청한 페이지를 찾을 수 없습니다.</p>\r\n            </ErrorPageDiv>\r\n          )}\r\n          />\r\n      </Switch>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import { combineReducers } from 'redux';\r\nimport { all } from 'redux-saga/effects';\r\nimport game, { gameSaga } from './game';\r\nimport games, { gamesSaga } from './games';\r\nimport sessionAuth, { sessionAuthSaga } from './sessionAuth';\r\nimport socketAuth, { socketAuthSaga } from './socketAuth';\r\nimport canvas, { canvasSaga } from './canvas';\r\nimport chat, { chatSaga } from './chat';\r\nimport record, { recordSaga }  from './record';\r\nimport create from './create';\r\nimport ranking, { rankingSaga } from './ranking';\r\nimport billBoard, { billBoardSaga } from './billBoard';\r\nimport community from './community';\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    sessionAuth,\r\n    socketAuth,\r\n    game,\r\n    games,\r\n    canvas,\r\n    chat,\r\n    record,\r\n    create,\r\n    ranking,\r\n    billBoard,\r\n    community,\r\n})\r\n\r\n\r\nexport function* rootSaga() {\r\n    yield all([\r\n        sessionAuthSaga(),\r\n        socketAuthSaga(),\r\n        gameSaga(),\r\n        gamesSaga(),\r\n        canvasSaga(),\r\n        chatSaga(),\r\n        recordSaga(),\r\n        rankingSaga(),\r\n        billBoardSaga(),\r\n    ]);\r\n};\r\n\r\nexport default rootReducer;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst FixSizeBlock = styled.div`\r\n    width: 1680px;\r\n`;\r\n\r\nconst FixSize = props => {\r\n    return (\r\n        <FixSizeBlock {...props} />\r\n    )\r\n};\r\n\r\nexport default FixSize;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport ReduxThunk from 'redux-thunk';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport { HelmetProvider } from 'react-helmet-async';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport rootReducer, { rootSaga } from './modules';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { getLocalStorage, clearLocalStorage } from './lib/storage/storage';\r\nimport { checkThunk } from './modules/sessionAuth';\r\nimport FixSize from './components/common/FixSize';\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\nconst store = createStore(\r\n    rootReducer,\r\n    composeWithDevTools(applyMiddleware(ReduxThunk, sagaMiddleware))\r\n)\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\n(async() => {\r\n    const auth = getLocalStorage('auth');\r\n    if(!auth) {\r\n        return;\r\n    }\r\n\r\n    try {\r\n        const checkedAuth = await store.dispatch(checkThunk());\r\n        if(checkedAuth.username !== auth.username) {\r\n            clearLocalStorage();\r\n            //  eslint-disable-next-line\r\n            throw 'Auth mismatch';\r\n        }\r\n    } catch(e) {\r\n        console.dir('Check auth failed');\r\n    }\r\n})();\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <BrowserRouter>\r\n            <HelmetProvider>\r\n                <FixSize>\r\n                    <App />\r\n                </FixSize>\r\n            </HelmetProvider>\r\n        </BrowserRouter>\r\n    </Provider>\r\n    ,document.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();"],"sourceRoot":""}