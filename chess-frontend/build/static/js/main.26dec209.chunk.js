(this["webpackJsonpchess-frontend"]=this["webpackJsonpchess-frontend"]||[]).push([[0],{128:function(e,n){},149:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),a=t(42),o=t.n(a),u=(t(94),t(3)),i=t(13),l=t(12),d=t(4),b=t(25),f=t(14),s=t(27),p=t(17);function m(){var e=Object(u.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    height: 90%;\n    overflow-y: scroll;\n    background-color: rgb(0,0,0, 0.2);\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.4);\n"]);return m=function(){return e},e}function v(){var e=Object(u.a)(["\n    \n"]);return v=function(){return e},e}function h(){var e=Object(u.a)(["\n    \n"]);return h=function(){return e},e}function x(){var e=Object(u.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 24%;\n    height: 300px;\n    background-color: rgb(0,0,0, 0.4);\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.6);\n    cursor: pointer;\n    \n    & + & {\n        margin-left: 13%;\n    }\n\n    &:active {\n        background-color: rgb(0,0,0, 0.6);\n        box-shadow: 5px 5px 5px rgb(0,0,0,0.8);\n    }\n"]);return x=function(){return e},e}function O(){var e=Object(u.a)(["\n    display: flex;\n    width: 85%;\n\n    & + & {\n        margin-top: 50px;\n    }\n\n    &:first-child {\n        margin-top: 50px;\n    }\n\n    &:last-child {\n        margin-bottom: 50px;\n    }\n"]);return O=function(){return e},e}var j=d.b.div(O()),E=d.b.div(x()),g=d.b.div(h()),k=d.b.div(v()),y=c.a.memo((function(e){var n=e.room,t=Object(f.a)(e,["room"]);return console.dir("room~"),c.a.createElement(E,t,c.a.createElement(g,null,n.name),c.a.createElement(k,null,n.participant))})),w=d.b.div(m()),C=c.a.memo((function(e){var n=e.room,t=e.onRoomClick;if(!n)return c.a.createElement(w,null);for(var r=Object(p.a)(n),a=[],o=Math.floor(r.length/3),u=0;u<=o;++u)a.push(c.a.createElement(j,{key:"GridRowBlock_".concat(u)},r.splice(0,3).map((function(e){return c.a.createElement(y,{key:"GridBox".concat(e.name),room:e,onClick:function(n){return t(n,e.key)}})}))));return c.a.createElement(w,null,a)})),I=function(e){return c.a.createElement(C,e)},T=t(5),N=t.n(T);function A(){var e=Object(u.a)(["\n    ","\n    margin-left: 20px;\n"]);return A=function(){return e},e}function S(){var e=Object(u.a)(["\n    ","\n"]);return S=function(){return e},e}function L(){var e=Object(u.a)(["\n    outline: none;\n    background-color: rgb(0,0,0, 0.2);\n    padding: 0px;\n    border: none;\n    width: 200px;\n    height: 30px;\n    cursor: pointer;\n    box-shadow: 5px 5px 5px rgb(0,0,0, 0.6);;\n\n    &:hover {\n        background-color: rgb(0,0,0, 0.8);\n        color: white;\n        box-shadow: 5px 5px 5px rgb(0,0,0, 0.2);\n    }\n"]);return L=function(){return e},e}function _(){var e=Object(u.a)(["\n    display: flex;\n"]);return _=function(){return e},e}var V=d.b.form(_()),U=Object(d.a)(L()),D=d.b.button(S(),U),M=d.b.button(A(),U),P=c.a.memo((function(e){var n=e.onConfirmClick,t=e.onCancelClick;return c.a.createElement(V,{onSubmit:n},c.a.createElement(D,{type:"submit"},"Create Room"),c.a.createElement(M,{type:"button",onClick:t},"Cancel"))})),R=t(9),z=t(7),K=t(151),Z=t(150),B=t(8),F=t(45),G=t(81),W=t.n(G),H=N.a.mark(X),q=N.a.mark(J);function X(e){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(F.b)((function(n){return e.on("connect",(function(t){n({type:"socket",socket:e.id})})),e.on("message",(function(e){n(e)})),function(){e.close()}})));case 1:case"end":return n.stop()}}),H)}function J(e){var n,t,r,c,a,o,u,i,l;return N.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.url,r=e.initializeSocket,c=e.initializeValue,a=e.changeValue,o=e.updateValue,u=e.query,console.dir(t),console.dir(u),d.prev=3,i=W()(t,{query:u,reconnection:!1,secure:!0}),d.next=7,Object(B.b)(X,i);case 7:n=d.sent;case 8:return d.next=11,Object(B.g)(n);case 11:l=d.sent,d.t0=l.type,d.next="socket"===d.t0?15:"initialize"===d.t0?18:"change"===d.t0?21:"update"===d.t0?24:27;break;case 15:return d.next=17,Object(B.f)(r(l));case 17:return d.abrupt("break",28);case 18:return d.next=20,Object(B.f)(c(l));case 20:return d.abrupt("break",28);case 21:return d.next=23,Object(B.f)(a(l));case 23:return d.abrupt("break",28);case 24:return d.next=26,Object(B.f)(o(l));case 26:return d.abrupt("break",28);case 27:console.dir(l);case 28:d.next=8;break;case 30:d.next=35;break;case 32:d.prev=32,d.t1=d.catch(3),console.dir(d.t1);case 35:return d.prev=35,d.next=38,Object(B.d)();case 38:if(!d.sent){d.next=40;break}n.close();case 40:return d.finish(35);case 41:case"end":return d.stop()}}),q,null,[[3,32,35,41]])}var $=function(e){return[e,"".concat(e,"_SUCCESS"),"".concat(e,"_FAILURE")]};function Q(e,n){var t="".concat(e,"_SUCCESS"),r="".concat(e,"_FAILURE");return function(e){return function(c){var a;return N.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,N.a.awrap(n(e));case 3:return a=o.sent,c({type:t,payload:a.data}),o.abrupt("return",a.data);case 8:throw o.prev=8,o.t0=o.catch(0),c({type:r,payload:o.t0,error:!0}),o.t0;case 12:case"end":return o.stop()}}),null,null,[[0,8]])}}}var Y,ee=t(26),ne=t.n(ee),te=N.a.mark(ve),re=N.a.mark(he),ce="room/CONNECT_WEBSOCKET",ae="room/DISCONNECT_WEBSOCKET",oe=Object(K.a)(ce),ue=Object(K.a)(ae),ie=Object(K.a)("room/INITIALIZE_SOCKET",(function(e){return e})),le=Object(K.a)("room/INITIALIZE_VALUE",(function(e){return e})),de=$("room/CREATE_ROOM"),be=Object(i.a)(de,3),fe=be[0],se=be[1],pe=be[2],me=Q(fe,(function(){return ne.a.post("/api/room")}));function ve(){var e;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(B.e)(J,{url:"/room",initializeSocket:ie,initializeValue:le});case 2:return e=n.sent,n.next=5,Object(B.g)(ae);case 5:return n.next=7,Object(B.c)(e);case 7:case"end":return n.stop()}}),te)}function he(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.h)(ce,ve);case 2:case"end":return e.stop()}}),re)}var xe=Object(Z.a)((Y={},Object(R.a)(Y,"room/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(z.a)({},e,{socket:t})})),Object(R.a)(Y,"room/INITIALIZE_VALUE",(function(e,n){var t=n.payload.room;return Object(z.a)({},e,{room:t})})),Object(R.a)(Y,se,(function(e){return e})),Object(R.a)(Y,pe,(function(e,n){var t=n.payload;return Object(z.a)({},e,{error:t})})),Y),{socket:null,room:null,error:null}),Oe=Object(s.f)((function(e){var n=e.history,t=e.onCancelClick,a=Object(f.a)(e,["history","onCancelClick"]),o=Object(l.b)(),u=Object(r.useCallback)((function(e){e.preventDefault(),function(){var e;N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return o(ue()),r.next=3,N.a.awrap(o(me()));case 3:e=r.sent,t(),n.push("/game/".concat(e));case 6:case"end":return r.stop()}}))}()}),[o,n,t]);return c.a.createElement(P,Object.assign({},a,{onConfirmClick:u,onCancelClick:t}))}));function je(){var e=Object(u.a)(["\n    position: fixed;\n    top: 20%;\n    left: 20%;\n    height: 60%;\n    width: 60%;\n    padding: 2%;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    justify-content: space-between;\n    background-color: rgb(245,245,245, 0.8);\n    box-shadow: 10px 10px 10px;\n    z-index: 1000;\n"]);return je=function(){return e},e}function Ee(){var e=Object(u.a)(["\n        opacity: 1;\n        visibility: visible;\n    "]);return Ee=function(){return e},e}function ge(){var e=Object(u.a)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgb(0,0,0, 0.5);\n    z-index: 100;\n    opacity: 0;\n    visibility: hidden;\n    transition: 1s;\n\n    ","\n"]);return ge=function(){return e},e}var ke=d.b.div(ge(),(function(e){return e.open&&Object(d.a)(Ee())})),ye=d.b.div(je()),we=c.a.memo((function(e){var n=e.onBackgroundClick,t=e.onContentClick,r=e.onRoomClick,a=e.room,o=Object(f.a)(e,["onBackgroundClick","onContentClick","onRoomClick","room"]);return console.dir("room mooooodal"),c.a.createElement(ke,Object.assign({},o,{onClick:n}),c.a.createElement(ye,{onClick:t},c.a.createElement(I,{room:a,onRoomClick:r}),c.a.createElement(Oe,{onCancelClick:n})))})),Ce=Object(s.f)((function(e){var n=e.history,t=e.openModal,a=e.setOpenModal,o=Object(f.a)(e,["history","openModal","setOpenModal"]),u=Object(r.useState)(!1),d=Object(i.a)(u,2),b=d[0],s=d[1],p=Object(l.c)((function(e){return{room:e.room.room}})).room,m=Object(l.b)(),v=Object(r.useCallback)((function(e){s(!1),a(!1),m(ue())}),[m,a]),h=Object(r.useCallback)((function(e){e.stopPropagation()}),[]),x=Object(r.useCallback)((function(e,t){s(!1),a(!1),m(ue()),n.push("/game/".concat(t))}),[m,n,a]);return Object(r.useEffect)((function(){s(t)}),[t]),console.dir("roommodal"),Object(r.useEffect)((function(){return function(){m(ue())}}),[m]),c.a.createElement(c.a.Fragment,null,c.a.createElement(we,Object.assign({},o,{room:p,open:b,onBackgroundClick:v,onContentClick:h,onRoomClick:x})))}));function Ie(){var e=Object(u.a)(["\n    display: flex;\n    align-items: center;\n    width: 100%;\n    height: 50px;\n    background-color: rgb(237,235,233);\n"]);return Ie=function(){return e},e}function Te(){var e=Object(u.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100px;\n    height: 30px;\n    margin-left: 10px;\n    background-color: white;\n    cursor: pointer;\n"]);return Te=function(){return e},e}function Ne(){var e=Object(u.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100px;\n    height: 50px;\n    margin-left: 10px;\n    background-color: white;\n    cursor: pointer;\n"]);return Ne=function(){return e},e}var Ae=d.b.div(Ne()),Se=Object(d.b)(b.b)(Te()),Le=d.b.div(Ie()),_e=c.a.memo((function(e){var n=e.onToggle,t=e.openModal,r=e.setOpenModal;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Le,null,c.a.createElement(Ae,{onClick:n},"Modal"),c.a.createElement(Se,{to:"/"})),c.a.createElement(Ce,{openModal:t,setOpenModal:r}))})),Ve=function(){var e=Object(r.useState)(!1),n=Object(i.a)(e,2),t=n[0],a=n[1],o=Object(l.b)(),u=Object(r.useCallback)((function(){a(!0),o(oe())}),[o]);return c.a.createElement(_e,{onToggle:u,openModal:t,setOpenModal:a})};function Ue(e,n){switch(n.type){case"LOADING":return{loading:!0,data:null,error:null};case"SUCCESS":return{loading:!1,data:n.data,error:null};case"FAILURE":return{loading:!1,data:null,error:n.error};default:throw new Error("Unhandled action type Error")}}var De,Me=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=Object(r.useReducer)(Ue,{loading:!1,data:null,error:!1}),c=Object(i.a)(t,2),a=c[0],o=c[1],u=function(){var n;return N.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return o({type:"LOADING"}),t.prev=1,t.next=4,N.a.awrap(e());case 4:n=t.sent,o({type:"SUCCESS",data:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o({type:"FAILURE",error:t.t0});case 11:case"end":return t.stop()}}),null,null,[[1,8]])};return Object(r.useEffect)((function(){u()}),n),[a,u]},Pe=N.a.mark(Qe),Re=N.a.mark(Ye),ze="auth/CONNECT_WEBSOCKET",Ke="auth/DISCONNECT_WEBSOCKET",Ze=Object(K.a)(ze),Be=Object(K.a)(Ke),Fe=Object(K.a)("auth/INITIALIZE_SOCKET",(function(e){return e})),Ge=Object(K.a)("auth/INITIALIZE_VALUE",(function(e){return e})),We=$("auth/SET_SESSION"),He=Object(i.a)(We,3),qe=He[0],Xe=He[1],Je=He[2],$e=Q(qe,(function(){return ne.a.get("/api/auth/getSession")}));function Qe(e){var n,t,r;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,t="key=".concat(n),c.next=4,Object(B.e)(J,{url:"/auth",initializeSocket:Fe,initializeValue:Ge,query:t});case 4:return r=c.sent,c.next=7,Object(B.g)(Ke);case 7:return c.next=9,Object(B.c)(r);case 9:case"end":return c.stop()}}),Pe)}function Ye(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.h)(ze,Qe);case 2:case"end":return e.stop()}}),Re)}var en=Object(Z.a)((De={},Object(R.a)(De,"auth/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(z.a)({},e,{socket:t})})),Object(R.a)(De,"auth/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(f.a)(t,["type"]));return Object(z.a)({},e,{tempAuth:Object(z.a)({},r)})})),Object(R.a)(De,Xe,(function(e,n){var t=n.payload;return Object(z.a)({},e,{session:t})})),Object(R.a)(De,Je,(function(e,n){var t=n.payload;return Object(z.a)({},e,{session:null,error:t})})),De),{socket:null,tempAuth:null,session:null,error:null});function nn(){var e=Object(u.a)(["\n    width: 100%;\n    height: 800px;\n    background-color:blue;\n"]);return nn=function(){return e},e}var tn=d.b.div(nn()),rn=function(){return c.a.createElement(tn,null,"a")},cn=function(){var e=Object(l.b)(),n=Me((function(){return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.awrap(e($e()));case 2:return n.abrupt("return",!0);case 3:case"end":return n.stop()}}))}),[e]),t=Object(i.a)(n,1)[0],r=t.loading,a=t.data,o=t.error;return r?null:o?null:a?c.a.createElement(rn,null):null},an=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ve,null),c.a.createElement(cn,null))},on=t(0),un=t(28),ln={pawn:un.d,king:un.b,queen:un.e,bishop:un.a,knight:un.c,rook:un.f,covered:un.g},dn={white:{color:"white",style:{filter:"drop-shadow(1px 1px 1px white)",width:"80%",height:"80%"}},black:{color:"black",style:{filter:"drop-shadow(1px 1px 1px black)",width:"80%",height:"80%"}},covered0:{style:{filter:"drop-shadow(1px 1px 1px black)",width:"30%",height:"30%",color:"rgb(130, 151, 105)"}},covered1:{style:{filter:"drop-shadow(1px 1px 1px black)",width:"30%",height:"30%",color:"rgb(100, 111, 64)"}}};function bn(){var e=Object(u.a)(["\n        pointer-events: none;\n    "]);return bn=function(){return e},e}function fn(){var e=Object(u.a)(["\n    ","\n"]);return fn=function(){return e},e}function sn(){var e=Object(u.a)(["\n            background-color: rgb(132, 121, 78);\n        "]);return sn=function(){return e},e}function pn(){var e=Object(u.a)(["\n            background-color: rgb(174, 177, 135);\n        "]);return pn=function(){return e},e}function mn(){var e=Object(u.a)(["\n        background-color: rgb(170, 162, 58);\n    "]);return mn=function(){return e},e}function vn(){var e=Object(u.a)(["\n        background-color: rgb(205, 210, 106);\n    "]);return vn=function(){return e},e}function hn(){var e=Object(u.a)(["\n        background-color: rgb(100, 111, 64);\n    "]);return hn=function(){return e},e}function xn(){var e=Object(u.a)(["\n        background-color: rgb(130, 151, 105);\n    "]);return xn=function(){return e},e}function On(){var e=Object(u.a)(["\n        background-color: rgb(181, 136, 99);\n    "]);return On=function(){return e},e}function jn(){var e=Object(u.a)(["\n        background-color: rgb(240, 217, 181);\n    "]);return jn=function(){return e},e}function En(){var e=Object(u.a)(["\n    display: flex;\n    cursor: pointer;\n    justify-content: center;\n    align-items: center;\n    width: 90px;\n    height: 90px;\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    &:hover {\n        ","\n\n        ","  \n    }\n"]);return En=function(){return e},e}function gn(){var e=Object(u.a)(["\n    display: flex;\n"]);return gn=function(){return e},e}function kn(){var e=Object(u.a)(["\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return kn=function(){return e},e}var yn,wn=function(e){var n=e.piece,t=e.owner,r=e.covered,a=e.cellNum,o=null;if(r){var u=ln.covered;o=c.a.createElement(on.b.Provider,{value:dn["covered".concat(a)]},c.a.createElement(u,null))}if(!n||!t)return o;var i=ln[n],l=o?{opacity:.5,filter:"black"===t?"drop-shadow(1px 1px 1px white)":"drop-shadow(1px 1px 1px black)"}:null,d=Object(z.a)({},dn[t],{style:Object(z.a)({},dn[t].style,{},l)});return c.a.createElement(on.b.Provider,{value:d},c.a.createElement(i,null))},Cn=d.b.div(kn()),In=d.b.div(gn()),Tn=d.b.div(En(),(function(e){return 0===e.cellNum&&Object(d.a)(jn())}),(function(e){return 1===e.cellNum&&Object(d.a)(On())}),(function(e){return 0===e.cellNum&&e.clicked&&Object(d.a)(xn())}),(function(e){return 1===e.cellNum&&e.clicked&&Object(d.a)(hn())}),(function(e){return 0===e.cellNum&&e.tracked&&Object(d.a)(vn())}),(function(e){return 1===e.cellNum&&e.tracked&&Object(d.a)(mn())}),(function(e){return 0===e.cellNum&&e.covered&&Object(d.a)(pn())}),(function(e){return 1===e.cellNum&&e.covered&&Object(d.a)(sn())})),Nn=c.a.memo((function(e){var n=e.row,t=e.y,r=e.onClickCell,a=e.pieceConverter;return c.a.createElement(In,null,n.map((function(e,n){return c.a.createElement(An,{key:"cell_".concat(t,"_").concat(n),onClick:r.bind(null,{y:t,x:n}),pieceConverter:a,cellNum:(n+t)%2,cell:e})})))}),(function(e,n){return e.row===n.row})),An=c.a.memo((function(e){var n=e.cell,t=e.onClick,r=e.cellNum,a=e.pieceConverter;return c.a.createElement(Tn,Object.assign({onClick:t,cellNum:r},n),a({piece:n.piece,owner:n.owner,covered:n.covered,cellNum:r}))}),(function(e,n){return e.cell===n.cell})),Sn=d.b.div(fn(),(function(e){return e.blocked&&Object(d.a)(bn())})),Ln=function(e){var n=e.board,t=e.blocked,a=e.onClick,o=Object(r.useCallback)((function(e){var n=e.y,t=e.x;a(n,t)}),[a]);return c.a.createElement(Sn,{blocked:t},n.map((function(e,n){return c.a.createElement(Nn,{key:"row_".concat(n),row:e,y:n,onClickCell:o,pieceConverter:wn})})))},_n=c.a.memo((function(e){return c.a.createElement(Cn,null,c.a.createElement(Ln,e))})),Vn=[[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}]],Un={pawn:{type:"onetime",move:[{dy:-1,dx:0,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!n[t][r].piece}},{dy:-2,dx:0,except:function(e){var n=e.board,t=e.y,r=e.x,c=e.owner;return!("black"===c&&1!==t||"white"===c&&6!==t)&&(!("black"===c&&n[2][r].piece||"white"===c&&n[5][r].piece)&&!("black"===c&&n[3][r].piece||"white"===c&&n[4][r].piece))}},{dy:-1,dx:-1,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!!n[t][r].piece}},{dy:-1,dx:1,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!!n[t][r].piece}}]},knight:{type:"onetime",move:[{dy:-2,dx:-1},{dy:-2,dx:1},{dy:2,dx:-1},{dy:2,dx:1},{dy:-1,dx:-2},{dy:-1,dx:2},{dy:1,dx:-2},{dy:1,dx:2}]},king:{type:"onetime",move:[{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:1},{dy:0,dx:-1},{dy:-1,dx:1},{dy:-1,dx:-1},{dy:1,dx:-1},{dy:1,dx:1}]},bishop:{type:"multitime",move:[{dy:1,dx:-1},{dy:1,dx:1},{dy:-1,dx:-1},{dy:-1,dx:1}]},rook:{type:"multitime",move:[{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:-1},{dy:0,dx:1}]},queen:{type:"multitime",move:[{dy:1,dx:-1},{dy:1,dx:1},{dy:-1,dx:-1},{dy:-1,dx:1},{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:-1},{dy:0,dx:1}]}},Dn=(t(83),N.a.mark(tt)),Mn=N.a.mark(rt),Pn="canvas/CONNECT_WEBSOCKET",Rn="canvas/DISCONNECT_WEBSOCKET",zn=Object(K.a)(Pn,(function(e){return e})),Kn=Object(K.a)(Rn),Zn=Object(K.a)("canvas/INITIALIZE_SOCKET",(function(e){return e})),Bn=Object(K.a)("canvas/INITIALIZE_VALUE",(function(e){return e})),Fn=Object(K.a)("canvas/CHANGE_VALUE",(function(e){return e})),Gn=Object(K.a)("canvas/CLEAR_VALUE"),Wn=Object(K.a)("canvas/INITIALIZE_BLOCKED",(function(e){return e})),Hn=Object(K.a)("canvas/CHANGE_BLOCKED",(function(e){return e})),qn=$("canvas/SET_MOVE_PIECE"),Xn=Object(i.a)(qn,3),Jn=Xn[0],$n=Xn[1],Qn=Xn[2],Yn=Q(Jn,(function(e){return ne.a.post("/api/canvas/movePiece",e)})),et=function(e){var n=e.move;return function(e,t){var r=n.prev,c=n.next,a=t(),o=a.canvas.board,u=a.auth.tempAuth,i=a.game.turn;u&&("white"===u.role&&i%2===0||"black"===u.role&&i%2===1?e(Hn({blocked:!1})):e(Hn({blocked:!0})));var l=o[r.y][r.x],d=nt(Object(p.a)(o),["covered","clicked","tracked"]);d[c.y]=Object(p.a)(d[c.y]),d[c.y][c.x]=Object(z.a)({},l,{tracked:!0,dirty:!0}),d[r.y]=Object(p.a)(d[r.y]),d[r.y][r.x]={covered:!1,tracked:!0};var b=d[c.y][c.x],f=b.owner,s=b.piece;("white"===f&&"pawn"===s&&0===c.y||"black"===f&&"pawn"===s&&7===c.y)&&(d[c.y][c.x]=Object(z.a)({},d[c.y][c.x],{piece:"queen"})),e(Fn({board:d,clicked:null}))}},nt=function(e,n){for(var t=[],r=e.length,c=function(c){for(var a=function(r){var a=!1;n.forEach((function(n){a|=e[c][r][n]})),a&&t.push({y:c,x:r})},o=0;o<r;++o)a(o)},a=0;a<r;++a)c(a);return t.forEach((function(t){e[t.y]=Object(p.a)(e[t.y]);var r=e[t.y][t.x],c=Object(z.a)({},r);n.forEach((function(e){c[e]=!1})),e[t.y].splice(t.x,1,c)})),e};function tt(e){var n,t,r;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,t="key=".concat(n),c.next=4,Object(B.e)(J,{url:"/canvas",initializeSocket:Zn,initializeValue:Bn,changeValue:et,query:t});case 4:return r=c.sent,c.next=7,Object(B.g)(Rn);case 7:return c.next=9,Object(B.c)(r);case 9:case"end":return c.stop()}}),Dn)}function rt(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.h)(Pn,tt);case 2:case"end":return e.stop()}}),Mn)}var ct,at=function(e){var n=e.y,t=e.x;return function(e,r){var c=r(),a=c.canvas,o=a.board,u=a.clicked,i=c.game.turn;if(u&&o[n][t].covered){var l=r().canvas.socket;e(Yn({socket:l,move:{prev:u,next:{y:n,x:t}}}))}else{var d=function(e){var n=e.board,t=e.y,r=e.x,c=e.turn,a=n[t][r],o=a.piece,u=a.owner,i={board:n,y:t,x:r,turn:c,owner:u};if(o){var l=Un[o],d=l.type,b=l.move;return"onetime"===d?b.reduce((function(e,c){var a=t+("black"===u?-c.dy:+c.dy),o=r+c.dx;return a<0||o<0||a>7||o>7?e:(i=Object(z.a)({},i,{dy:a,dx:o}),(!c.except||c.except&&c.except(i))&&(n[a][o].owner&&n[t][r].owner===n[a][o].owner||e.push({dy:a,dx:o})),e)}),[]):b.flatMap((function(e){for(var c=0,a=[];;){++c;var o=t+c*("black"===u?-e.dy:+e.dy),i=r+c*e.dx;if(o<0||i<0||o>7||i>7)break;if(n[o][i].owner&&n[o][i].owner===u)break;if(a.push({dy:o,dx:i}),n[o][i].owner&&n[o][i].owner!==u)break}return a}))}}({board:o,y:n,x:t,turn:i}),b=nt(Object(p.a)(o),["covered","clicked"]);d.forEach((function(e){b[e.dy]=Object(p.a)(b[e.dy]);var n=b[e.dy][e.dx];b[e.dy].splice(e.dx,1,Object(z.a)({},n,{covered:!0}))})),b[n]=Object(p.a)(b[n]),b[n][t]=Object(z.a)({},b[n][t],{clicked:!0}),e(Fn({board:b,clicked:{y:n,x:t}}))}}},ot={socket:null,error:null,board:Vn,clicked:null,blocked:!1},ut=Object(Z.a)((yn={},Object(R.a)(yn,"canvas/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(z.a)({},e,{socket:t})})),Object(R.a)(yn,"canvas/INITIALIZE_VALUE",(function(e,n){var t=n.payload.board;return Object(z.a)({},e,{board:t})})),Object(R.a)(yn,"canvas/CHANGE_VALUE",(function(e,n){var t=n.payload,r=t.board,c=t.clicked;return Object(z.a)({},e,{board:r,clicked:c})})),Object(R.a)(yn,"canvas/CLEAR_VALUE",(function(e){return ot})),Object(R.a)(yn,"canvas/INITIALIZE_BLOCKED",(function(e,n){var t=n.payload.blocked;return Object(z.a)({},e,{blocked:t})})),Object(R.a)(yn,"canvas/CHANGE_BLOCKED",(function(e,n){var t=n.payload.blocked;return Object(z.a)({},e,{blocked:t})})),Object(R.a)(yn,$n,(function(e){return e})),Object(R.a)(yn,Qn,(function(e){return e})),yn),ot),it=function(){var e=Object(l.c)((function(e){var n=e.canvas,t=e.auth,r=e.game;return{board:n.board,blocked:n.blocked,turn:r.turn,tempAuth:t.tempAuth}})),n=e.board,t=e.blocked,a=e.turn,o=e.tempAuth,u=Object(l.b)();Object(r.useEffect)((function(){o&&("white"===o.role&&a%2===0||"black"===o.role&&a%2===1?u(Wn({blocked:!1})):u(Wn({blocked:!0})))}),[u,a,o]),Object(r.useEffect)((function(){return function(){u(Gn())}}),[u]);var i=Object(r.useCallback)((function(e,n){u(at({y:e,x:n}))}),[u]);return c.a.createElement(_n,{board:n,blocked:t,onClick:i})},lt=N.a.mark(Ct),dt=N.a.mark(It),bt="chat/CONNECT_WEBSOCKET",ft="chat/DISCONNECT_WEBSOCKET",st=Object(K.a)(bt,(function(e){return e})),pt=Object(K.a)(ft),mt=Object(K.a)("chat/INITIALIZE_SOCKET",(function(e){return e})),vt=Object(K.a)("chat/INITIALIZE_VALUE",(function(e){return e})),ht=Object(K.a)("chat/CHANGE_VALUE",(function(e){return e})),xt=Object(K.a)("chat/CHANGE_TEXTFIELD",(function(e){return e})),Ot=Object(K.a)("chat/INITIALIZE_TEXTFIELD"),jt=$("chat/SEND_MESSAGE"),Et=Object(i.a)(jt,3),gt=Et[0],kt=Et[1],yt=Et[2],wt=Q(gt,(function(e){return ne.a.post("/api/chat/sendMessage",e)}));function Ct(e){var n,t,r;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,t="key=".concat(n),c.next=4,Object(B.e)(J,{url:"/chat",initializeSocket:mt,initializeValue:vt,changeValue:ht,query:t});case 4:return r=c.sent,c.next=7,Object(B.g)(ft);case 7:return c.next=9,Object(B.c)(r);case 9:case"end":return c.stop()}}),lt)}function It(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.h)(bt,Ct);case 2:case"end":return e.stop()}}),dt)}var Tt=Object(Z.a)((ct={},Object(R.a)(ct,"chat/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(z.a)({},e,{socket:t})})),Object(R.a)(ct,"chat/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=t.nickname,c=t.color,a=t.message;return Object(z.a)({},e,{messages:[{nickname:r,color:c,message:a}]})})),Object(R.a)(ct,"chat/CHANGE_VALUE",(function(e,n){var t=n.payload,r=t.nickname,c=t.color,a=t.message;return Object(z.a)({},e,{messages:[].concat(Object(p.a)(e.messages),[{nickname:r,color:c,message:a}])})})),Object(R.a)(ct,kt,(function(e){return e})),Object(R.a)(ct,yt,(function(e){return e})),Object(R.a)(ct,"chat/INITIALIZE_TEXTFIELD",(function(e){return Object(z.a)({},e,{text:""})})),Object(R.a)(ct,"chat/CHANGE_TEXTFIELD",(function(e,n){var t=n.payload;return Object(z.a)({},e,{text:t})})),ct),{socket:null,messages:[],text:""}),Nt=t(44);function At(){var e=Object(u.a)(["\n        justify-content: center;\n    "]);return At=function(){return e},e}function St(){var e=Object(u.a)(["\n        justify-content: flex-start;\n    "]);return St=function(){return e},e}function Lt(){var e=Object(u.a)(["\n        justify-content: flex-end;\n    "]);return Lt=function(){return e},e}function _t(){var e=Object(u.a)(["\n    display: flex;\n    align-items: center;\n    width: 90%;\n    height : 30px;\n    min-height : 30px;\n    font-size : 12px;\n    background-color: white;\n\n    ",";\n\n    ",";\n\n    ",";\n"]);return _t=function(){return e},e}function Vt(){var e=Object(u.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 20%;\n    font-size: 12px;\n    background-color: rgb(247,246,245);\n    border: none;\n    cursor: pointer;\n\n    &:hover, &:focus {\n        background-color: #D3D3D3;\n    } \n"]);return Vt=function(){return e},e}function Ut(){var e=Object(u.a)(["\n    outline: none;\n    border: none;\n    align-items : center;\n    color: black;\n    background-color: transparent;\n    font-size: 12px;\n    width: 80%;\n    height : 30px;\n    padding-left: 10px;\n"]);return Ut=function(){return e},e}function Dt(){var e=Object(u.a)(["\n    position: absolute;\n    width: 100%;\n    display: flex;\n    background-color: white;\n    box-shadow: rgba(0,0,0,0.05) 0px -2px 2px 0px, rgba(0,0,0,0.08) 0px -3px 1px -2px, rgba(0,0,0,0.04) 0px -1px 5px 0px;\n"]);return Dt=function(){return e},e}function Mt(){var e=Object(u.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 360px;\n    width: 100%;\n    padding-right: 20px;\n    overflow-y: overlay;\n"]);return Mt=function(){return e},e}function Pt(){var e=Object(u.a)(["\n    height: 360px;\n    width: 100%;\n    overflow: hidden;\n"]);return Pt=function(){return e},e}function Rt(){var e=Object(u.a)(["\n    position: relative;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Rt=function(){return e},e}function zt(){var e=Object(u.a)(["\n"]);return zt=function(){return e},e}var Kt=d.b.form(zt()),Zt=d.b.div(Rt()),Bt=d.b.div(Pt()),Ft=d.b.div(Mt()),Gt=d.b.div(Dt()),Wt=d.b.input(Ut()),Ht=d.b.button(Vt()),qt=d.b.div(_t(),(function(e){return"my"===e.owner&&Object(d.a)(Lt())}),(function(e){return"other"===e.owner&&Object(d.a)(St())}),(function(e){return"server"===e.owner&&Object(d.a)(At())})),Xt=c.a.memo((function(e){var n=e.message,t=e.myName,r=Object(f.a)(e,["message","myName"]),a=n.nickname?n.nickname===t?"my":"other":"server",o="other"===a?n.nickname+" : "+n.message:n.message;return c.a.createElement(qt,Object.assign({},r,{color:n.color,owner:a}),o)})),Jt=c.a.memo((function(e){var n=e.messages,t=e.onSubmit,a=e.onChange,o=e.text,u=e.tempAuth,i=Object(r.useRef)();return Object(r.useEffect)((function(){i.current.scrollTop=i.current.scrollHeight}),[n]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Kt,{onSubmit:t},c.a.createElement(Zt,null,c.a.createElement(Bt,null,c.a.createElement(Ft,{ref:i},n.map((function(e){return c.a.createElement(Xt,{myName:u.nickname,message:e})})))),c.a.createElement(Gt,null,c.a.createElement(Wt,{onChange:a,value:o}),c.a.createElement(Ht,{onSubmit:t},c.a.createElement(on.b.Provider,{value:{style:{width:"40%",height:"40%"}}},c.a.createElement(Nt.b,null)))))))})),$t=function(){var e=Object(l.b)(),n=Object(l.c)((function(e){var n=e.chat,t=e.auth;return{socket:n.socket,messages:n.messages,text:n.text,tempAuth:t.tempAuth}})),t=n.socket,a=n.messages,o=n.text,u=n.tempAuth,i=Object(r.useCallback)((function(n){n.preventDefault(),e(wt({socket:t,message:o})),e(Ot())}),[e,o]),d=Object(r.useCallback)((function(n){e(xt(n.target.value))}),[e]);return c.a.createElement(Jt,{messages:a,onSubmit:i,onChange:d,text:o,tempAuth:u})};function Qt(){var e=Object(u.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 100%;\n    width: 6%;\n    color: black;\n    opacity: 0.5;\n    font-size: 50px;\n"]);return Qt=function(){return e},e}function Yt(){var e=Object(u.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 47%;\n    color: black;\n    font-size: 50px;\n"]);return Yt=function(){return e},e}function er(){var e=Object(u.a)(["\n        background-color: rgb(230, 153, 153);\n    "]);return er=function(){return e},e}function nr(){var e=Object(u.a)(["\n        background-color: rgb(208, 224, 189);\n    "]);return nr=function(){return e},e}function tr(){var e=Object(u.a)(["\n    width: 50%;\n    height: 60px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    background-color: white;\n    ","\n    ","\n"]);return tr=function(){return e},e}var rr=d.b.div(tr(),(function(e){return e.color&&Object(d.a)(nr())}),(function(e){return e.time<=1e4&&Object(d.a)(er())})),cr=d.b.div(Yt()),ar=d.b.div(Qt()),or=function(e){var n="";return n+=String(Math.floor(e/10)),n+=String(Math.floor(e%10))},ur=function(e){var n=e.time,t=e.color,r=Math.floor(n/1e3),a=Math.floor(n%1e3/10);return void 0==n||null===n?c.a.createElement(rr,null):c.a.createElement(rr,{time:n,color:t?1:0},c.a.createElement(cr,null,or(r)),c.a.createElement(ar,null,":"),c.a.createElement(cr,null,or(a)))},ir=function(e){var n=e.white,t=Object(l.c)((function(e){var n=e.record,t=e.game;return{whiteTime:n.whiteTime,blackTime:n.blackTime,start:t.start,order:t.order}})),r=t.whiteTime,a=t.blackTime,o=t.start,u=t.order,i=n?r:a,d=n?o&&"white"===u:o&&"black"===u;return c.a.createElement(ur,{time:i,color:d})},lr=t(21);function dr(){var e=Object(u.a)(["\n    font-size: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return dr=function(){return e},e}function br(){var e=Object(u.a)(["\n        margin-top: 30px;\n    "]);return br=function(){return e},e}function fr(){var e=Object(u.a)(["\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 30px;\n    background-color: white;\n\n    ","\n"]);return fr=function(){return e},e}var sr=d.b.div(fr(),(function(e){return e.white&&Object(d.a)(br())})),pr=d.b.div(dr()),mr=c.a.memo((function(e){var n=e.light,t=e.name,r=e.white,a={style:{height:"15px",width:"10%",color:"green",display:"flex",justifyContent:"center",alignItems:"center"}};return c.a.createElement(sr,{white:r?1:0},n?c.a.createElement(on.b.Provider,{value:a},c.a.createElement(lr.a,null)):c.a.createElement(on.b.Provider,{value:{style:Object(z.a)({},a.style,{color:"black"})}},c.a.createElement(lr.g,null)),c.a.createElement(pr,null,t))})),vr=function(e){var n=e.black,t=e.white,r=Object(l.c)((function(e){var n=e.game;return{blackNick:n.black,whiteNick:n.white,participant:n.participant}})),a=r.blackNick,o=r.whiteNick,u=r.participant,i=new Set(u),d=t&&i.has(o)||n&&i.has(a),b=t&&o||n&&a;return c.a.createElement(mr,{light:d,name:b,white:t})};function hr(){var e=Object(u.a)(["\n    width: 20%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 18px;\n    background-color: rgb(247, 246, 245);\n"]);return hr=function(){return e},e}function xr(){var e=Object(u.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20%;\n    font-size: 18px;\n"]);return xr=function(){return e},e}function Or(){var e=Object(u.a)(["\n    width: 80%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    &:hover {\n        background-color: rgb(209, 228, 246);\n    }\n"]);return Or=function(){return e},e}function jr(){var e=Object(u.a)(["\n    width: 100%;\n    height: 30px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n\n    &:first-child {\n        margin-top: 30px;\n    }\n"]);return jr=function(){return e},e}function Er(){var e=Object(u.a)(["\n    height: 270px;\n    width: 100%;\n    overflow-y: overlay;\n    padding-right: 20px;\n"]);return Er=function(){return e},e}function gr(){var e=Object(u.a)(["\n    height: 270px;\n    width: 100%;\n    overflow: hidden;\n"]);return gr=function(){return e},e}var kr=d.b.div(gr()),yr=d.b.div(Er()),wr=d.b.div(jr()),Cr=function(e){var n=e.x,t=e.y;return String.fromCharCode(97+n)+(8-t)},Ir=d.b.div(Or()),Tr=d.b.div(xr()),Nr=d.b.div(hr()),Ar=c.a.memo((function(e){var n=e.move,t=e.index,r=e.onClickBlock;console.dir("PieceMove"),console.dir(n);var a,o,u=ln[n.prevPiece.piece],i={color:n.prevPiece.owner,style:{width:"10%",filter:"drop-shadow(1px 1px 1px ".concat("white"===n.prevPiece.owner?"black":"white",")")}},l=c.a.createElement(on.b.Provider,{value:i},c.a.createElement(u,null)),d=c.a.createElement("div",{style:{width:"10%"}});return n.nextPiece.piece&&(a=ln[n.nextPiece.piece],o={color:n.nextPiece.owner,style:{width:"10%",filter:"drop-shadow(1px 1px 1px ".concat("white"===n.nextPiece.owner?"black":"white",")")}},d=c.a.createElement(on.b.Provider,{value:o},c.a.createElement(a,null))),c.a.createElement(wr,null,c.a.createElement(Nr,null,t+1),c.a.createElement(Ir,{onClick:r},l,c.a.createElement(Tr,null,Cr(n.prev)),c.a.createElement(on.b.Provider,{value:{style:{color:"rgb(169,169,169)"}}},c.a.createElement(Nt.a,null)),c.a.createElement(Tr,null,Cr(n.next)),d))})),Sr=c.a.memo((function(e){var n=e.pieceMove,t=e.onClickBlock,a=Object(r.useRef)();return Object(r.useEffect)((function(){a.current.scrollTop=a.current.scrollHeight}),[n]),c.a.createElement(kr,null,c.a.createElement(yr,{ref:a},n.map((function(e,n){return c.a.createElement(Ar,{onClick:t,move:e,index:n})}))))})),Lr=function(){var e=Object(l.c)((function(e){return{pieceMove:e.record.pieceMove}})).pieceMove,n=Object(r.useCallback)((function(){}),[]);return c.a.createElement(Sr,{onClickBlock:n,pieceMove:e})};function _r(){var e=Object(u.a)(["\n        background-color: red;\n    "]);return _r=function(){return e},e}function Vr(){var e=Object(u.a)(["\n    position: absolute;\n    height: 2px;\n    background-color: green;\n    transition-duration: 1s;\n    transition-timing-function: linear;\n\n    width: ",";\n    ","\n"]);return Vr=function(){return e},e}var Ur,Dr=d.b.div(Vr(),(function(e){return 100*e.time+"%"}),(function(e){return e.time<=.1&&Object(d.a)(_r())})),Mr=c.a.memo((function(e){var n=e.time;return c.a.createElement(Dr,{time:n})})),Pr=N.a.mark(Jr),Rr=N.a.mark($r),zr="record/CONNECT_WEBSOCKET",Kr="record/DISCONNECT_WEBSOCKET",Zr=Object(K.a)(zr),Br=Object(K.a)(Kr),Fr=Object(K.a)("record/INITIALIZE_SOCKET",(function(e){return e})),Gr=Object(K.a)("record/INITIALIZE_VALUE",(function(e){return e})),Wr=Object(K.a)("record/CHANGE_VALUE",(function(e){return e})),Hr=Object(K.a)("record/UPDATE_VALUE",(function(e){return e})),qr=Object(K.a)("record/CLEAR_VALUE"),Xr=function(e){return function(n,t){var r=t().record,c=Object(z.a)({},r);Object.keys(e).forEach((function(n){"object"===typeof e[n]&&(c=Object(z.a)({},c,Object(R.a)({},n,[].concat(Object(p.a)(c[n]),[e[n]]))))})),n(Hr({record:c}))}};function Jr(e){var n,t,r;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,t="key=".concat(n),c.next=4,Object(B.e)(J,{url:"/record",initializeSocket:Fr,initializeValue:Gr,changeValue:Wr,updateValue:Xr,query:t});case 4:return r=c.sent,c.next=7,Object(B.g)(Kr);case 7:return c.next=9,Object(B.c)(r);case 9:case"end":return c.stop()}}),Pr)}function $r(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.h)(zr,Jr);case 2:case"end":return e.stop()}}),Rr)}var Qr={socket:null,error:null,startTime:null,endTime:null,blackTime:null,whiteTime:null,blackMaxTime:null,whiteMaxTime:null,whiteRatio:0,blackRatio:0,pieceMove:[]},Yr=Object(Z.a)((Ur={},Object(R.a)(Ur,"record/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(z.a)({},e,{socket:t})})),Object(R.a)(Ur,"record/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(f.a)(t,["type"]));return Object(z.a)({},e,{},r)})),Object(R.a)(Ur,"record/CHANGE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(f.a)(t,["type"]));return Object(z.a)({},e,{},r)})),Object(R.a)(Ur,"record/UPDATE_VALUE",(function(e,n){var t=n.payload.record;return Object(z.a)({},t)})),Object(R.a)(Ur,"record/CLEAR_VALUE",(function(e){return Qr})),Ur),Qr),ec=function(e){var n=e.white,t=e.black,a=Object(l.c)((function(e){var n=e.record,t=e.game;return{whiteRatio:n.whiteRatio,blackRatio:n.blackRatio,whiteNick:t.white,blackNick:t.black,participant:t.participant}})),o=a.whiteRatio,u=a.blackRatio,i=a.whiteNick,d=a.blackNick,b=a.participant,f=Object(l.b)();Object(r.useEffect)((function(){return function(){f(qr())}}),[f]);var s=new Set(b),p=0;return(n&&s.has(i)||t&&s.has(d))&&(p=n?o:u),p=Math.min(p,1),c.a.createElement(Mr,{time:p})};function nc(){var e=Object(u.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n"]);return nc=function(){return e},e}function tc(){var e=Object(u.a)(["\n    position: absolute;\n    top: 300px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    background-color: rgb(247, 246, 245);\n    z-index: 10;\n    box-shadow: rgba(0, 0, 0, 0.14) 0px -2px 2px 0px, rgba(0, 0, 0, 0.2) 0px -3px 1px -2px, rgba(0, 0, 0, 0.12) 0px -1px 5px 0px;\n"]);return tc=function(){return e},e}var rc=d.b.div(tc()),cc=d.b.div(nc()),ac={style:{color:"#4d4d4d",width:"50%",height:"50%",backgroundColor:"transparent"}},oc=c.a.memo((function(){return c.a.createElement(rc,null,c.a.createElement(cc,null,c.a.createElement(on.b.Provider,{value:ac},c.a.createElement(lr.c,null))),c.a.createElement(cc,null,c.a.createElement(on.b.Provider,{value:ac},c.a.createElement(lr.h,null))),c.a.createElement(cc,null,c.a.createElement(on.b.Provider,{value:ac},c.a.createElement(lr.i,null))),c.a.createElement(cc,null,c.a.createElement(on.b.Provider,{value:ac},c.a.createElement(lr.d,null))))})),uc=function(){return c.a.createElement(oc,null)},ic=t(84);function lc(){var e=Object(u.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n"]);return lc=function(){return e},e}function dc(){var e=Object(u.a)(["\n    position: absolute;\n    top: 30px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    z-index: 10;\n    background-color: rgb(247, 246, 245);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return dc=function(){return e},e}var bc=d.b.div(dc()),fc=d.b.div(lc()),sc={style:{color:"#4d4d4d",width:"50%",height:"50%",backgroundColor:"transparent"}},pc=c.a.memo((function(){return c.a.createElement(bc,null,c.a.createElement(fc,null,c.a.createElement(on.b.Provider,{value:{style:Object(z.a)({},sc.style,{width:"60%",height:"60%"})}},c.a.createElement(lr.b,null))),c.a.createElement(fc,null,c.a.createElement(on.b.Provider,{value:{style:Object(z.a)({},sc.style,{width:"80%",height:"80%"})}},c.a.createElement(ic.a,null))),c.a.createElement(fc,null,c.a.createElement(on.b.Provider,{value:sc},c.a.createElement(lr.f,null))),c.a.createElement(fc,null,c.a.createElement(on.b.Provider,{value:sc},c.a.createElement(lr.e,null))))})),mc=function(){return c.a.createElement(pc,null)};function vc(){var e=Object(u.a)(["\n    position: relative;\n    width: 100%;\n    height: 360px;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return vc=function(){return e},e}var hc=d.b.div(vc()),xc=c.a.memo((function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ir,{black:!0}),c.a.createElement(hc,null,c.a.createElement(ec,{black:!0}),c.a.createElement(vr,{black:!0}),c.a.createElement(mc,null),c.a.createElement(Lr,null),c.a.createElement(uc,null),c.a.createElement(vr,{white:!0}),c.a.createElement(ec,{white:!0})),c.a.createElement(ir,{white:!0}))})),Oc=function(){return c.a.createElement(xc,null)};function jc(){var e=Object(u.a)(["\n    ","\n    margin-left: 1%;\n"]);return jc=function(){return e},e}function Ec(){var e=Object(u.a)(["\n    ","\n    margin-right: 1%;\n"]);return Ec=function(){return e},e}function gc(){var e=Object(u.a)(["\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n"]);return gc=function(){return e},e}function kc(){var e=Object(u.a)(["\n    height: 800px;\n    width: 100%;\n    background-color: rgb(237, 235, 233);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return kc=function(){return e},e}var yc,wc=d.b.div(kc()),Cc=Object(d.a)(gc()),Ic=d.b.div(Ec(),Cc),Tc=d.b.div(jc(),Cc),Nc=c.a.memo((function(e){return c.a.createElement(wc,null,c.a.createElement(Ic,null,c.a.createElement($t,null)),c.a.createElement(it,e),c.a.createElement(Tc,null,c.a.createElement(Oc,null)))})),Ac=N.a.mark(Pc),Sc=N.a.mark(Rc),Lc="game/CONNECT_WEBSOCKET",_c="game/DISCONNECT_WEBSOCKET",Vc=Object(K.a)(Lc),Uc=Object(K.a)(_c),Dc=Object(K.a)("game/INITIALIZE_SOCKET",(function(e){return e})),Mc=Object(K.a)("game/INITIALIZE_VALUE",(function(e){return e}));function Pc(e){var n,t,r;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,t="key=".concat(n),c.next=4,Object(B.e)(J,{url:"/game",initializeSocket:Dc,initializeValue:Mc,query:t});case 4:return r=c.sent,c.next=7,Object(B.g)(_c);case 7:return c.next=9,Object(B.c)(r);case 9:case"end":return c.stop()}}),Ac)}function Rc(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.h)(Lc,Pc);case 2:case"end":return e.stop()}}),Sc)}var zc=Object(Z.a)((yc={},Object(R.a)(yc,"game/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(z.a)({},e,{socket:t})})),Object(R.a)(yc,"game/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(f.a)(t,["type"]));return Object(z.a)({},e,{},r)})),yc),{socket:null,error:null,participant:[]}),Kc=function(e){var n=e.gameId,t=Object(l.b)();Object(r.useEffect)((function(){return function(){t(Be()),t(Uc()),t(pt()),t(Kn()),t(Br())}}),[t]);var a=Me((function(){return N.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.awrap(t($e()));case 2:return t(Be()),t(Uc()),t(pt()),t(Kn()),t(Br()),setTimeout((function(){t(Ze(n)),t(Vc(n)),t(st(n)),t(zn(n)),t(Zr(n))}),0),e.abrupt("return",!0);case 9:case"end":return e.stop()}}))}),[t,n]),o=Object(i.a)(a,1)[0],u=o.loading,d=o.data,b=o.error;return u?null:b?null:d?c.a.createElement(Nc,null):null},Zc=Object(s.f)((function(e){var n=e.history,t=e.match;if(Object(r.useEffect)((function(){t.params.id||n.push("/")}),[n,t]),!t.params.id)return null;var a=t.params.id;return a?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ve,null),c.a.createElement(Kc,{gameId:a})):null})),Bc=function(){return c.a.createElement(Oc,null)};function Fc(){var e=Object(u.a)(["\n    width: 100%;\n    height: 100px;\n"]);return Fc=function(){return e},e}var Gc=d.b.tr(Fc()),Wc=function(e){var n=e.title,t=e.count,r=e.comments,a=e.time;return c.a.createElement(Gc,null,c.a.createElement("td",null,n),c.a.createElement("td",null,t),c.a.createElement("td",null,r),c.a.createElement("td",null,a))};function Hc(){var e=Object(u.a)(["\n    width: 100%;\n    background-color: #F1F1F1;\n"]);return Hc=function(){return e},e}function qc(){var e=Object(u.a)(["\n    width: 100%;\n    height: 700px;\n    background-color: white;\n"]);return qc=function(){return e},e}function Xc(){var e=Object(u.a)(["\n    width: 100%;\n    height: 50px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Xc=function(){return e},e}function Jc(){var e=Object(u.a)(["\n    width: 100%;\n    height: 150px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin: 0px 0px 0px 0px;\n"]);return Jc=function(){return e},e}function $c(){var e=Object(u.a)(["\n    width: 80%;\n    height: 1000px;\n    background-color:lightblue;\n    display: flex;\n    flex-direction: column;\n"]);return $c=function(){return e},e}function Qc(){var e=Object(u.a)(["\n    width: 100%;\n    height: 1000px;\n    background-color:#EDEBE9;\n    display: flex;\n    justify-content: center;\n    /* flex-direction: column; */\n"]);return Qc=function(){return e},e}var Yc=d.b.div(Qc()),ea=d.b.main($c()),na=d.b.h1(Jc()),ta=d.b.div(Xc()),ra=d.b.table(qc()),ca=d.b.thead(Hc()),aa=function(){return c.a.createElement(Yc,null,c.a.createElement(ea,null,c.a.createElement(na,null,"General Chess Discussion"),c.a.createElement(ta,null,"< 1 2 3 4 ... >"),c.a.createElement(ra,null,c.a.createElement(ca,null,c.a.createElement("tr",{height:"60px"},c.a.createElement("th",{width:"70%"}),c.a.createElement("th",null,"\uc870\ud68c"),c.a.createElement("th",null,"\ub2f5\uae00"),c.a.createElement("th",null,"\ucd5c\uadfc \uae00"))),[{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5441",count:250,comments:7,time:"1\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5442",count:251,comments:8,time:"2\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5443",count:252,comments:9,time:"3\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5444",count:253,comments:10,time:"4\uc2dc\uac04 \uc804"}].map((function(e){return c.a.createElement(Wc,{title:e.title,count:e.count,comments:e.comments,time:e.time})}))),c.a.createElement(ta,null,"< 1 2 3 4 ... >")))},oa=function(){return c.a.createElement(aa,null)},ua=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ve,null),c.a.createElement(oa,null))};function ia(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 200px;\n  font-size: 50px;\n"]);return ia=function(){return e},e}var la=d.b.div(ia()),da=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.c,null,c.a.createElement(s.a,{component:an,path:"/",exact:!0}),c.a.createElement(s.a,{component:Zc,path:"/game/:id",exact:!0}),c.a.createElement(s.a,{component:Bc,path:"/record",exact:!0}),c.a.createElement(s.a,{component:ua,path:"/community",exact:!0}),c.a.createElement(s.a,{render:function(e){e.location;return c.a.createElement(la,null,c.a.createElement("h1",null,"404 Error"),c.a.createElement("p",null,"\uc694\uccad\ud55c \ud398\uc774\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ba=t(23),fa=t(85),sa=N.a.mark(pa);function pa(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.a)([he(),Ye(),Rc(),rt(),It(),$r()]);case 2:case"end":return e.stop()}}),sa)}var ma=Object(ba.combineReducers)({room:xe,auth:en,game:zc,canvas:ut,chat:Tt,record:Yr}),va=t(86),ha=Object(F.a)(),xa=Object(ba.createStore)(ma,Object(va.composeWithDevTools)(Object(ba.applyMiddleware)(fa.a,ha)));ha.run(pa),o.a.render(c.a.createElement(l.a,{store:xa},c.a.createElement(b.a,null,c.a.createElement(da,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},89:function(e,n,t){e.exports=t(149)},94:function(e,n,t){}},[[89,1,2]]]);
//# sourceMappingURL=main.26dec209.chunk.js.map