{"version":3,"sources":["components/common/GridLayout.js","containers/common/GridLayoutContainer.js","components/common/SubmitForm.js","lib/websocket/websocket.js","lib/createRequestThunk.js","modules/games.js","lib/api/games.js","containers/common/SubmitFormContainer.js","components/modal/GamesModal.js","containers/modal/GamesModalContainer.js","components/common/Header.js","lib/storage/storage.js","modules/auth.js","lib/api/auth.js","containers/common/HeaderContainer.js","lib/hook/useAsync.js","components/main/MainLayout.js","containers/main/MainLayoutContainer.js","pages/MainPage.js","components/auth/AuthForm.js","containers/auth/LoginContainer.js","pages/LoginPage.js","containers/auth/RegisterContainer.js","pages/RegisterPage.js","components/game/GridLayout.js","containers/game/GridLayoutContainer.js","components/game/Summary.js","containers/game/SummaryContainer.js","components/game/Creation.js","containers/game/CreationContainer.js","components/game/GameLayout.js","containers/game/GameLayoutContainer.js","pages/GamePage.js","lib/base/pieceConverter.js","components/gameplay/Canvas.js","lib/base/board.js","lib/base/rules.js","lib/base/validation.js","modules/canvas.js","lib/api/canvas.js","containers/gameplay/CanvasContainer.js","modules/chat.js","lib/api/chat.js","components/gameplay/Chat.js","containers/gameplay/ChatContainer.js","components/gameplay/Timer.js","containers/gameplay/TimerContainer.js","components/gameplay/Status.js","containers/gameplay/StatusContainer.js","components/gameplay/PieceMoveList.js","containers/gameplay/PieceMoveListContainer.js","components/gameplay/TimeLine.js","modules/record.js","containers/gameplay/TimeLineContainer.js","components/gameplay/UndoRedo.js","containers/gameplay/UndoRedoContainer.js","components/gameplay/Util.js","containers/gameplay/UtilContainer.js","components/gameplay/Record.js","containers/gameplay/RecordContainer.js","components/gameplay/GamePlayLayout.js","modules/game.js","containers/gameplay/GamePlayLayoutContainer.js","pages/GamePlayPage.js","components/community/CommunityTableRow.js","components/community/CommunityLayout.js","containers/community/CommunityLayoutContainer.js","pages/CommunityPage.js","App.js","modules/index.js","serviceWorker.js","index.js"],"names":["GridRowBlock","styled","div","GridBoxBlock","BoxTitleBlock","BoxContentBlock","GridBox","React","memo","game","rest","console","dir","name","participant","GridLayoutBlock","games","onGameClick","list","gridArr","rowSize","Math","floor","length","i","push","key","splice","map","onClick","e","GridLayoutContainer","props","SubmitFormBlock","form","buttonStyle","css","ConfirmButtonBlock","button","CancelButtonBlock","onConfirmClick","onCancelClick","onSubmit","type","createEventChannel","connectNamespace","io","eventChannel","emit","on","socket","id","message","close","params","url","initializeSocket","initializeValue","changeValue","updateValue","query","SocketIo","reconnection","secure","call","channel","take","put","cancelled","createRequestActionTypes","createRequestThunk","request","SUCCESS","FAILURE","dispatch","a","async","response","payload","data","error","connectWebsocketSaga","gamesSaga","CONNECT_WEBSOCKET","DISCONNECT_WEBSOCKET","connectWebsocket","createAction","disconnectWebsocket","CREATE_GAME","CREATE_GAME_SUCCESS","CREATE_GAME_FAILURE","createGameThunk","axios","post","fork","socketTask","cancel","takeEvery","handleActions","state","withRouter","history","useDispatch","useCallback","preventDefault","GamesModalBackgroundBlock","open","GamesModalBlock","onBackgroundClick","onContentClick","openModal","setOpenModal","useState","modal","setModal","useSelector","disconnectGamesWebsocket","stopPropagation","useEffect","HeaderBlock","titleStyle","TitleBlock","Link","TitleFadeBlock","ControllBlock","GroupBlock","TabBlock","TabLinkBlock","hidden","Tab","to","children","AuthBlock","UserWelcomeBlock","username","onToggle","onRecord","onLogout","onLogin","session","auth","nickname","setLocalStorage","Object","keys","forEach","localStorage","setItem","JSON","stringify","getLocalStorage","parse","getItem","removeLocalStorage","removeItem","clearLocalStorage","clear","authSaga","SET_SESSION","SET_SESSION_SUCCESS","SET_SESSION_FAILURE","setSessionThunk","get","LOGIN","LOGIN_SUCCESS","LOGIN_FAILURE","REGISTER","REGISTER_SUCCESS","REGISTER_FAILURE","LOGOUT","LOGOUT_SUCCESS","LOGOUT_FAILURE","CHECK","CHECK_SUCCESS","CHECK_FAILURE","loginThunk","password","registerThunk","logoutThunk","checkThunk","changeField","clearField","clearSpecificField","action","initialState","tempAuth","authError","login","register","passwordConfirm","value","produce","draft","getState","alert","reducer","loading","Error","useAsync","callback","deps","useReducer","fetchData","MainLayoutBlock","MainLayout","MainLayoutContainer","MainPage","AuthFrameBlock","AuthFormBlock","InputFrameBlock","InputFormBlock","blink","inputStyle","EmailInputBlock","input","PasswordInputBlock","OptionFormBlock","SaveInputFormBlock","SaveInputBlock","SaveInputTextBlock","ForgetBlock","SubmitFrameBlock","SubmitBlock","CreateFormBlock","CreateBlock","CreateButtonBlock","ErrorBlock","onChange","onRegister","ref","useRef","tag","current","focus","autoComplete","autoCorrect","autoCapitalize","spellCheck","bind","count","Provider","style","width","height","cursor","placeholder","el","setError","target","prevState","nextError","reduce","acc","filter","param","schema","Joi","object","string","max","email","minDomainAtoms","required","min","result","validate","abortEarly","details","detail","path","errorMention","LoginPage","any","valid","RegisterPage","SummaryContainer","CreationContainer","GameLayoutBlock","GameLayoutContainer","GamePage","pieceMapper","GiChessPawn","GiChessKing","GiChessQueen","GiChessBishop","GiChessKnight","GiChessRook","GiPlainCircle","playerMapper","color","pieceConverter","piece","owner","covered","cellNum","coveredCanvas","Component","capturedObject","opacity","styleObject","CanvasBlock","CanvasRowBlock","CanvasCellBlock","clicked","tracked","CanvasRow","row","y","onClickCell","cell","x","CanvasCell","prevProps","nextProps","CanvasContentBlock","blocked","CanvasContent","board","rules","pawn","move","dy","dx","except","knight","king","enemy","dirty","coveredAxisBundle","checkPlayersEveryMove","axis","bishop","rook","queen","player","castling","j","coveredAxis","checkCovered","inform","cur","flatMap","counter","coveredArr","canvasSaga","clearValue","initializeBlocked","changeBlocked","SET_MOVE_PIECE","SET_MOVE_PIECE_SUCCESS","SET_MOVE_PIECE_FAILURE","setMovePieceThunk","changeValueThunk","prev","next","canvas","turn","role","clearBoard","genClearBoard","pieceStore","arr","leng","pass","popedCell","newCell","CanvasContainer","clickPieceThunk","chatSaga","changeTextfield","initializeTextfield","SEND_MESSAGE","SEND_MESSAGE_SUCCESS","SEND_MESSAGE_FAILURE","sendMessageThunk","messages","text","ChatSubmitBlock","ChatFrameBlock","ChatHiddenBlock","ChatBlock","ChatFormBlock","ChatInputBlock","ChatButtonBlock","MessageBlock","BalloonBlock","Balloon","ballonBlock","Message","myName","scrollTop","scrollHeight","ChatContainer","chat","TimerBlock","time","TimeSliceBlock","ColonBlock","timeConverter","timeSlice","convertedTime","String","Timer","second","millisecond","undefined","TimerContainer","white","record","whiteTime","blackTime","start","order","StatusBlock","NameBlock","light","iconStyle","display","justifyContent","alignItems","StatusContainer","black","blackNick","whiteNick","participantSet","Set","has","PieceMoveListHiddenBlock","PieceMoveListBlock","PieceMoveBlock","moveConverter","fromCharCode","MoveBlock","TextBlock","IndexBlock","PieceMove","index","onClickBlock","NextComponent","nextStyle","PrevComponent","prevPiece","prevStyle","nextPiece","pieceMove","PieceMoveListContainer","TimeLineBlock","recordSaga","updateValueThunk","newRecord","startTime","endTime","blackMaxTime","whiteMaxTime","whiteRatio","blackRatio","TimeLineContainer","UndoRedoBlock","ButtonBlock","backgroundColor","UndoRedoContainer","UtilBlock","UtilContainer","RecordBlock","RecordContainer","GamePlayLayoutBlock","sideBlockStyle","LeftSideBlock","RightSideBlock","gameSaga","GamePlayLayoutContainer","gameId","disconnectAuthWebsocket","disconnectGameWebsocket","disconnectChatWebsocket","disconnectCanvasWebsocket","disconnectRecordWebsocket","setTimeout","connectAuthWebsocket","connectGameWebsocket","connectChatWebsocket","connectCanvasWebsocket","connectRecordWebsocket","match","CommunityTableRowBlock","tr","CommunityTableRow","title","comments","CommunityLayoutBlock","CommunityMainBlcok","main","CommunityHeaderBlock","h1","PageDivBlock","CommunityTableBlock","table","CommunityTheadBlock","thead","CommunityLayout","tableRow","CommunityLayoutContainer","CommunityPage","ErrorPageDiv","App","component","exact","GamePlayPage","render","location","rootSaga","all","rootReducer","combineReducers","Boolean","window","hostname","sagaMiddleware","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","ReduxThunk","run","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"qoDAGA,IAEMA,EAAeC,IAAOC,IAAV,KAiBZC,EAAeF,IAAOC,IAAV,KAqBZE,EAAgBH,IAAOC,IAAV,KAIbG,EAAkBJ,IAAOC,IAAV,KAIfI,EAAUC,IAAMC,MAAK,YAAwB,IAArBC,EAAoB,EAApBA,KAASC,EAAW,wBAG9C,OAFAC,QAAQC,IAAI,SAGR,kBAACT,EAAiBO,EACd,kBAACN,EAAD,KACKK,EAAKI,MAEV,kBAACR,EAAD,KACKI,EAAKK,iBAMhBC,EAAkBd,IAAOC,IAAV,KA4CNK,MAAMC,MAjCF,SAAC,GAA4B,IAA1BQ,EAAyB,EAAzBA,MAAOC,EAAkB,EAAlBA,YAEzB,IAAID,EAAO,OAAO,kBAACD,EAAD,MAMlB,IAJA,IAAMG,EAAI,YAAQF,GAEZG,EAAU,GACVC,EAAUC,KAAKC,MAAMJ,EAAKK,OAjFnB,GAkFLC,EAAE,EAAGA,GAAGJ,IAAWI,EACvBL,EAAQM,KACJ,kBAACzB,EAAD,CACI0B,IAAG,uBAAkBF,IAGjBN,EAAKS,OAAO,EAxFf,GAwF4BC,KAAI,SAAAnB,GAAI,OAC7B,kBAACH,EAAD,CACIoB,IAAG,iBAAYjB,EAAKI,MACpBJ,KAAMA,EACNoB,QAAS,SAAAC,GAAC,OAAIb,EAAYa,EAAGrB,EAAKiB,aAQ1D,OACI,kBAACX,EAAD,KACKI,MC/FEY,EAPa,SAAAC,GAExB,OACI,kBAAC,EAAeA,I,mrBCHxB,IAAMC,EAAkBhC,IAAOiC,KAAV,KAIfC,EAAcC,YAAH,KAiBXC,EAAqBpC,IAAOqC,OAAV,IAClBH,GAGAI,EAAoBtC,IAAOqC,OAAV,IACjBH,GAoBS5B,MAAMC,MAhBF,SAAC,GAAuC,IAArCgC,EAAoC,EAApCA,eAAgBC,EAAoB,EAApBA,cAClC,OACI,kBAACR,EAAD,CAAiBS,SAAUF,GACvB,kBAACH,EAAD,CAAoBM,KAAK,UAAzB,eAGA,kBAACJ,EAAD,CACII,KAAK,SACLd,QAAWY,GAFf,c,qEClCFG,G,WAqBOC,IArBjB,SAAUD,EAAmBE,GAA7B,0FACWC,aAAa,SAAAC,GAchB,OAbAF,EAAGG,GAAG,WAAW,SAAAC,GACbF,EAAK,CACDL,KAAM,SACNO,OAAQJ,EAAGK,QAMnBL,EAAGG,GAAG,WAAW,SAAAG,GACbJ,EAAKI,MAGF,WACHN,EAAGO,aAhBf,uCAqBO,SAAUR,GAAiBS,GAA3B,uFAqBW,OAjBVC,EAMAD,EANAC,IACAC,EAKAF,EALAE,iBACAC,EAIAH,EAJAG,gBACAC,EAGAJ,EAHAI,YACAC,EAEAL,EAFAK,YACAC,EACAN,EADAM,MAGJjD,QAAQC,IAAI2C,GACZ5C,QAAQC,IAAIgD,GAbT,SAeOd,EAAKe,IAASN,EAAK,CACrBK,QACAE,cAAc,EACdC,QAAQ,IAlBb,SAqBiBC,YAAKpB,EAAoBE,GArB1C,OAqBCmB,EArBD,cAwBqB,OAxBrB,UAwB2BC,YAAKD,GAxBhC,QAwBWb,EAxBX,YAyBYA,EAAQT,KAzBpB,OA0Bc,WA1Bd,QA6Bc,eA7Bd,QAgCc,WAhCd,QAmCc,WAnCd,yBA2Ba,OA3Bb,UA2BmBwB,YAAIX,EAAiBJ,IA3BxC,4CA8Ba,OA9Bb,UA8BmBe,YAAIV,EAAgBL,IA9BvC,4CAiCa,OAjCb,UAiCmBe,YAAIT,EAAYN,IAjCnC,4CAoCa,OApCb,UAoCmBe,YAAIR,EAAYP,IApCnC,4CAuCazC,QAAQC,IAAIwC,GAvCzB,iFA2CCzC,QAAQC,IAAR,MA3CD,QA6CK,OA7CL,oBA6CWwD,cA7CX,oCA8CKH,EAAQZ,QA9Cb,wFC1BA,IAAMgB,GAA2B,SAAA1B,GAGpC,MAAO,CAAEA,EAFI,UAAMA,EAAN,YACA,UAAMA,EAAN,cAIF,SAAS2B,GAAoB3B,EAAM4B,GAC9C,IAAMC,EAAO,UAAM7B,EAAN,YACP8B,EAAO,UAAM9B,EAAN,YACb,OAAO,SAAAW,GAAM,OAAI,SAAMoB,GAAN,eAAAC,EAAAC,OAAA,2EAAAD,EAAA,MAEcJ,EAAQjB,IAFtB,cAEHuB,EAFG,OAGTH,EAAS,CACL/B,KAAM6B,EACNM,QAASD,EAASE,OALb,kBAOFF,EAASE,MAPP,sCASTpE,QAAQC,IAAR,MACA8D,EAAS,CACL/B,KAAM8B,EACNK,QAAQ,EAAD,GACPE,OAAO,IAbF,+D,uCCWXC,I,YAWOC,IAxBXC,GAAoB,0BACpBC,GAAuB,6BAChBC,GAAmBC,YAAaH,IAChCI,GAAsBD,YAAaF,IAInC5B,GAAmB8B,YADN,2BACsC,SAAAR,GAAO,OAAIA,KAC9DrB,GAAkB6B,YAHN,0BAGqC,SAAAR,GAAO,OAAIA,K,GAEPT,GAAyB,qB,qBAAnFmB,G,MAAaC,G,MAAqBC,G,MAC7BC,GAAkBrB,GAAmBkB,ICdxB,kBACtBI,KAAMC,KAAK,iBDef,SAAUZ,KAAV,uEACuB,OADvB,SAC6Ba,YAAKjD,GAAkB,CAC5CU,IAAK,SACLC,oBACAC,qBAJR,OAOI,OANMsC,EADV,gBAOU7B,YAAKkB,IAPf,OAQI,OARJ,SAQUY,YAAOD,GARjB,wCAWO,SAAUb,KAAV,iEACH,OADG,SACGe,YAAUd,GAAmBF,IADhC,wCAIP,IAMeiB,gBAAa,qBA5BF,2BA6BD,SAACC,EAAD,OAAqBjD,EAArB,EAAU4B,QAAW5B,OAArB,sBACdiD,EADc,CAEjBjD,cAHoB,eA7BH,0BAkCD,SAACiD,EAAD,OAAqBnF,EAArB,EAAU8D,QAAW9D,MAArB,sBACbmF,EADa,CAEhBnF,aAPoB,eASvByE,IAAsB,SAAAU,GAAK,OAAIA,KATR,eAUvBT,IAAsB,SAACS,EAAD,OAAmBnB,EAAnB,EAAUF,QAAV,sBAChBqB,EADgB,CAEnBnB,aAZoB,IANP,CACjB9B,OAAQ,KACRlC,MAAO,KACPgE,MAAO,OEVIoB,gBAtBa,SAAC,GAAyC,IAAvCC,EAAsC,EAAtCA,QAAS5D,EAA6B,EAA7BA,cAAkB/B,EAAW,2CAC3DgE,EAAW4B,cAEX9D,EAAiB+D,uBAAY,SAAAzE,GAC/BA,EAAE0E,iBACF,WAAC,QAAA7B,EAAAC,OAAA,uDACGF,EAASa,MADZ,WAAAZ,EAAA,MAEqBD,EAASiB,OAF9B,OAESjE,EAFT,OAGGe,IACA4D,EAAQ5E,KAAR,gBAAsBC,IAJzB,qCAAD,KAMD,CAACgD,EAAU2B,EAAS5D,IAEvB,OACI,kBAAC,EAAD,iBACQ/B,EADR,CAEI8B,eAAgBA,EAChBC,cAAeA,Q,4yBClB3B,IAAMgE,GAA4BxG,IAAOC,IAAV,MAYzB,SAAA8B,GAAK,OAAIA,EAAM0E,MAAQtE,YAAd,SAMTuE,GAAkB1G,IAAOC,IAAV,MAsCNK,OAAMC,MAtBF,SAAC,GAAwE,IAAtEoG,EAAqE,EAArEA,kBAAmBC,EAAkD,EAAlDA,eAAgB5F,EAAkC,EAAlCA,YAAaD,EAAqB,EAArBA,MAAUN,EAAW,4EAEvF,OADAC,QAAQC,IAAI,kBAER,kBAAC6F,GAAD,iBACQ/F,EADR,CAEImB,QAAS+E,IAET,kBAACD,GAAD,CACI9E,QAASgF,GAET,kBAAC,EAAD,CACI7F,MAAOA,EACPC,YAAaA,IAEjB,kBAAC,GAAD,CACIwB,cAAemE,SCEpBR,gBAlDa,SAAC,GAAmD,IAAjDC,EAAgD,EAAhDA,QAASS,EAAuC,EAAvCA,UAAWC,EAA4B,EAA5BA,aAAiBrG,EAAW,wDAC/CsG,oBAAS,GADsC,mBACnEC,EADmE,KAC5DC,EAD4D,KAEnElG,EAAUmG,aAAY,kBAAgB,CAC1CnG,MAD0B,EAAGA,MAChBA,UADTA,MAGF0D,EAAW4B,cAEXM,EAAoBL,uBAAY,SAAAzE,GAClCoF,GAAS,GACTH,GAAa,GACbrC,EAAS0C,QACV,CAAC1C,EAAUqC,IAERF,EAAiBN,uBAAY,SAAAzE,GAC/BA,EAAEuF,oBACH,IAEGpG,EAAcsF,uBAAY,SAACzE,EAAGJ,GAChCwF,GAAS,GACTH,GAAa,GACbrC,EAAS0C,MACTf,EAAQ5E,KAAR,gBAAsBC,MACvB,CAACgD,EAAU2B,EAASU,IAavB,OAXAO,qBAAU,WACNJ,EAASJ,KACV,CAACA,IAEJnG,QAAQC,IAAI,gBACZ0G,qBAAU,WACN,OAAO,WACH5C,EAAS0C,SAEd,CAAC1C,IAGA,oCACI,kBAAC,GAAD,iBACQhE,EADR,CAEIM,MAAOA,EACP0F,KAAMO,EACNL,kBAAmBA,EACnBC,eAAgBA,EAChB5F,YAAaA,S,gqECzC7B,I,GAAMsG,GAActH,IAAOC,IAAV,MAQXsH,GAAapF,YAAH,MAaVqF,GAAaxH,YAAOyH,IAAPzH,CAAH,KACVuH,IAIAG,GAAiB1H,YAAOyH,IAAPzH,CAAH,KACduH,IAIAI,GAAgB3H,IAAOC,IAAV,MAMb2H,GAAa5H,IAAOC,IAAV,MAKV4H,GAAW7H,IAAOC,IAAV,MAYR6H,GAAe9H,YAAOyH,IAAPzH,CAAH,MAYZ,SAAA+B,GAAK,OAAIA,EAAMgG,QAAU5F,YAAhB,SAMT6F,GAAM,SAAAjG,GACR,OAAGA,EAAMkG,GAED,kBAACH,GAAiB/F,EACbA,EAAMmG,UAKX,kBAACL,GAAa9F,EACTA,EAAMmG,WAMjBC,GAAYnI,IAAOC,IAAV,MAMTmI,GAAmBpI,IAAOC,IAAV,MA2FPK,OAAMC,MA/EN,SAAC,GAST,IACC8H,EATJC,EAQE,EARFA,SACAzB,EAOE,EAPFA,UACAC,EAME,EANFA,aACAyB,EAKE,EALFA,SACAC,EAIE,EAJFA,SACAC,EAGE,EAHFA,QACAC,EAEE,EAFFA,QACAC,EACE,EADFA,KAYA,OARGD,IACCL,EAAWK,EAAQE,UAGpBD,IACCN,EAAWM,EAAKN,UAIhB,oCACI,kBAACf,GAAD,KACI,kBAACK,GAAD,KACI,kBAACH,GAAD,CAAYS,GAAG,KAAf,WAGA,kBAACP,GAAD,CAAgBO,GAAG,KAAnB,QAGA,kBAACL,GAAD,KACI,kBAAC,GAAD,CAAKhG,QAAS0G,GAAd,aAGA,kBAAC,GAAD,CAAKL,GAAG,SAAR,QAGA,kBAAC,GAAD,CAAKA,GAAG,cAAR,eAKR,kBAACE,GAAD,KACI,kBAAC,GAAD,CAAKvG,QAAS2G,GAAd,UAGCI,EACG,oCACI,kBAAC,GAAD,CAAK/G,QAAS2G,GAAd,WAGA,kBAAC,GAAD,CAAK3G,QAAS2G,GAAd,UAGA,kBAAC,GAAD,CAAK3G,QAAS4G,GAAd,SAEI,kBAACJ,GAAD,KACKC,KAKb,kBAAC,GAAD,CAAKzG,QAAS6G,GAAd,QAEI,kBAACL,GAAD,KACKC,MAMrB,kBAAC,GAAD,CACIxB,UAAWA,EACXC,aAAcA,Q,oBC3LjB+B,GAAkB,SAAC,GAAiB,IAAZpI,EAAW,mBAC5C,IACIqI,OAAOC,KAAKtI,GAAMuI,SAAQ,SAAAvH,GACtBwH,aAAaC,QAAQzH,EAAK0H,KAAKC,UAAU3I,EAAKgB,QAEpD,MAAMI,GACJnB,QAAQC,IAAI,2BACZD,QAAQC,IAAIkB,KAIPwH,GAAkB,SAAA5H,GAC3B,IACI,OAAO0H,KAAKG,MAAML,aAAaM,QAAQ9H,IACzC,MAAMI,GACJnB,QAAQC,IAAI,2BACZD,QAAQC,IAAIkB,KAIP2H,GAAqB,SAAA/H,GAC9B,IACIwH,aAAaQ,WAAWhI,GAC1B,MAAMI,GACJnB,QAAQC,IAAI,8BACZD,QAAQC,IAAIkB,KAIP6H,GAAoB,WAC7B,IACIT,aAAaU,QACf,MAAM9H,GACJnB,QAAQC,IAAI,6BACZD,QAAQC,IAAIkB,K,YCqCVmD,I,YAgBO4E,IA9EX1E,GAAoB,yBACpBC,GAAuB,4BAChBC,GAAmBC,YAAaH,IAChCI,GAAsBD,YAAaF,IAInC5B,GAAmB8B,YAFN,0BAEsC,SAAAR,GAAO,OAAIA,KAC9DrB,GAAkB6B,YAFN,yBAEqC,SAAAR,GAAO,OAAIA,K,GAEPT,GAAyB,oB,qBAAnFyF,G,MAAaC,G,MAAqBC,G,MAC7BC,GAAkB3F,GAAmBwF,IClBxB,kBACtBlE,KAAMsE,IAAI,2B,GDmBkC7F,GAAyB,c,qBAAjE8F,G,MAAOC,G,MAAeC,G,SAC2BhG,GAAyB,iB,qBAA1EiG,G,MAAUC,G,MAAkBC,G,SACenG,GAAyB,e,qBAApEoG,G,MAAQC,G,MAAgBC,G,SACgBtG,GAAyB,c,qBAAjEuG,G,MAAOC,G,MAAeC,G,MACjBC,GAAazG,GAAmB6F,ICrBxB,SAAC,GAAD,IAAG7B,EAAH,EAAGA,SAAU0C,EAAb,EAAaA,SAAb,OACjBpF,KAAMC,KAAK,kBAAoB,CAAEyC,WAAU0C,gBDqBlCC,GAAgB3G,GAAmBgG,IChBxB,SAAC,GAAD,IAAGhC,EAAH,EAAGA,SAAU0C,EAAb,EAAaA,SAAb,OACpBpF,KAAMC,KAAK,qBAAuB,CAAEyC,WAAU0C,gBDgBrCE,GAAc5G,GAAmBmG,ICpBxB,kBAClB7E,KAAMC,KAAK,uBDoBFsF,GAAa7G,GAAmBsG,ICfxB,kBACjBhF,KAAMsE,IAAI,sBDmBDkB,GAAc9F,YAHN,qBAGiC,SAAAR,GAAO,OAAIA,KACpDuG,GAAa/F,YAHN,oBAGgC,SAAAR,GAAO,OAAIA,KAClDwG,GAAqBhG,YAHL,6BAGwC,SAAAR,GAAO,OAAIA,KAmChF,SAAUG,GAAsBsG,GAAhC,2EAKuB,OAJb7J,EAAM6J,EAAOzG,QAEblB,EAHV,cAGyBlC,GAHzB,SAK6BoE,YAAKjD,GAAkB,CAC5CU,IAAK,QACLC,oBACAC,mBACAG,UATR,OAYI,OAPMmC,EALV,gBAYU7B,YAAKkB,IAZf,OAaI,OAbJ,SAaUY,YAAOD,GAbjB,wCAgBO,SAAU8D,KAAV,iEACH,OADG,SACG5D,YAAUd,GAAmBF,IADhC,wCAMP,IAAMuG,GAAe,CACjBtI,OAAQ,KACRuI,SAAU,KACV9C,QAAS,KACT3D,MAAO,KACP4D,KAAM,KACN8C,UAAW,KACXC,MAAO,CACHrD,SAAU,GACV0C,SAAU,IAEdY,SAAU,CACNtD,SAAU,GACV0C,SAAU,GACVa,gBAAiB,KAIV3F,gBAAa,kBAAC,GAjGH,0BAkGD,SAACC,EAAD,OAAqBjD,EAArB,EAAU4B,QAAW5B,OAArB,sBACdiD,EADc,CAEjBjD,cAHoB,YAAC,GAhGJ,yBAqGD,SAACiD,EAAD,WAAUrB,QAAoBpE,GAA9B,EAAqBiC,KAArB,+CACbwD,EADa,CAEhBsF,SAAS,eAAM/K,QAPK,YAAC,GASxBqJ,IAAsB,SAAC5D,EAAD,OAAmBwC,EAAnB,EAAU7D,QAAV,sBAChBqB,EADgB,CAEnBwC,eAXoB,YAAC,GAaxBqB,IAAsB,SAAC7D,EAAD,OAAmBnB,EAAnB,EAAUF,QAAV,sBAChBqB,EADgB,CAEnBwC,QAAS,KACT3D,aAhBoB,YAAC,GAhFR,qBAkGD,SAACmB,EAAD,WAAUrB,QAAW5C,EAArB,EAAqBA,KAAMR,EAA3B,EAA2BA,IAAKoK,EAAhC,EAAgCA,MAAhC,OACZC,aAAQ5F,GAAO,SAAA6F,GACXA,EAAM9J,GAAMR,GAAOoK,QApBH,YAAC,GA/ET,oBAqGD,SAAC3F,EAAD,SAAqBjE,EAArB,EAAU4C,QAAW5C,KAArB,sBACRiE,GADQ,mBAEVjE,EAAOsJ,GAAatJ,IAFV,0BAGAsJ,GAAaE,WAHb,OAtBS,YAAC,GA9EA,6BAyGD,SAACvF,EAAD,aAAUrB,QAAW5C,EAArB,EAAqBA,KAAMR,EAA3B,EAA2BA,IAA3B,sBACjByE,GADiB,mBAEnBjE,EAFmB,eAGbiE,EAAMjE,GAHO,eAIfR,EAAM8J,GAAatJ,GAAMR,MAJV,0BAMT8J,GAAaE,WANJ,OA3BA,YAAC,GAmCxBtB,IAAgB,SAACjE,EAAD,OAAoByC,EAApB,EAAU9D,QAAV,sBACVqB,EADU,CAEbyC,OACA8C,UAAW,UAtCS,YAAC,GAwCxBrB,IAAgB,SAAClE,EAAD,OAAmBuF,EAAnB,EAAU5G,QAAV,sBACVqB,EADU,CAEbyC,KAAM,KACN8C,iBA3CoB,YAAC,GA6CxBnB,IAAmB,SAACpE,EAAD,OAAmByC,EAAnB,EAAU9D,QAAV,sBACbqB,EADa,CAEhByC,OACA8C,UAAW,UAhDS,YAAC,GAkDxBlB,IAAmB,SAACrE,EAAD,OAAmBuF,EAAnB,EAAU5G,QAAV,sBACbqB,EADa,CAEhByC,KAAM,KACN8C,iBArDoB,YAAC,GAuDxBhB,IAAiB,SAAAvE,GAAK,sBAChBA,EADgB,CAEnByC,KAAM,KACN8C,UAAW,UA1DS,YAAC,GA4DxBf,IAAiB,SAAExE,EAAF,OAAoBuF,EAApB,EAAW5G,QAAX,sBACXqB,EADW,CAEdyC,KAAM,KACN8C,iBA/DoB,YAAC,GAiExBb,IAAgB,SAAE1E,EAAF,OAAoByC,EAApB,EAAW9D,QAAX,sBACVqB,EADU,CAEbyC,OACA8C,UAAW,UApES,YAAC,GAsExBZ,IAAgB,SAAE3E,EAAF,OAAoBuF,EAApB,EAAW5G,QAAX,sBACVqB,EADU,CAEbyC,KAAM,KACN8C,iBAzEoB,IA2EzBF,IExIYpF,gBA3CS,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACXc,aAAY,gBAAGyB,EAAH,EAAGA,KAAH,MAAe,CACjDD,QAASC,EAAKD,QACdC,KAAMA,EAAKA,SAFPD,EAD6B,EAC7BA,QAASC,EADoB,EACpBA,KAIXlE,EAAW4B,cALoB,EAODU,oBAAS,GAPR,mBAO7BF,EAP6B,KAOlBC,EAPkB,KAS/BwB,EAAWhC,uBAAY,WACzBQ,GAAa,GACbrC,EAASW,QACV,CAACX,IAEE+D,EAAWlC,uBAAY,WACzB7B,GFwCgC,SAAOA,EAAUuH,GAAjB,SAAAtH,EAAAC,OAAA,2EAAAD,EAAA,MAE1BD,EAASwG,OAFiB,OAGhCzB,GAAmB,QAHa,+CAKhC9I,QAAQC,IAAI,iBALoB,4DEvCjC,CAAC8D,IAEE8D,EAAWjC,uBAAY,WACzB2F,MAAM,cACP,IAIGxD,EAAUnC,uBAAY,WACxB7B,EAAS2G,GAAW,CAAEnJ,KAAM,WAC5BmE,EAAQ5E,KAAK,YACd,CAACiD,EAAU2B,IAEd,OACI,kBAAC,GAAD,CACIkC,SAAUA,EACVzB,UAAWA,EACXC,aAAcA,EACdyB,SAAUA,EACVC,SAAUA,EACVC,QAASA,EACTC,QAASA,EACTC,KAAMA,OC3ClB,SAASuD,GAAQhG,EAAOoF,GACpB,OAAQA,EAAO5I,MACX,IAAK,UACD,MAAO,CACHyJ,SAAS,EACTrH,KAAM,KACNC,MAAO,MAEf,IAAK,UACD,MAAO,CACHoH,SAAS,EACTrH,KAAMwG,EAAOxG,KACbC,MAAO,MAEf,IAAK,UACD,MAAO,CACHoH,SAAS,EACTrH,KAAM,KACNC,MAAOuG,EAAOvG,OAEtB,QACI,MAAM,IAAIqH,MAAM,gCA6BbC,OAzBf,SAAkBC,GAAsB,IAAZC,EAAW,uDAAJ,GAAI,EACPC,qBAAWN,GAAS,CAC5CC,SAAS,EACTrH,KAAM,KACNC,OAAO,IAJwB,mBAC3BmB,EAD2B,KACpBzB,EADoB,KAO7BgI,EAAY,0BAAA/H,EAAAC,OAAA,uDACdF,EAAS,CAAE/B,KAAM,YADH,oBAAAgC,EAAA,MAGS4H,KAHT,OAGJxH,EAHI,OAIVL,EAAS,CAAE/B,KAAM,UAAWoC,SAJlB,gDAMVL,EAAS,CAAE/B,KAAM,UAAWqC,MAAM,EAAD,KANvB,yDAelB,OALAsC,qBAAU,WACNoF,MAEDF,GAEI,CAACrG,EAAOuG,I,+GC9CnB,IAAMC,GAAkB1M,IAAOC,IAAV,MAaN0M,GARI,WACf,OACI,kBAACD,GAAD,OCqBOE,GAvBa,WACxB,IAAMnI,EAAW4B,cADa,EASdgG,IANG,oBAAA3H,EAAAC,OAAA,kEAAAD,EAAA,MACTD,EAASuF,OADA,iCAGR,GAHQ,uCAMkB,CAAEvF,IAAhCyB,EATuB,oBAWtBiG,EAAyBjG,EAAzBiG,QAASrH,EAAgBoB,EAAhBpB,KAAMC,EAAUmB,EAAVnB,MAEvB,OAAGoH,EAAgB,KAChBpH,EAAc,KACdD,EAEK,kBAAC,GAAD,MAGD,MCdI+H,GAVE,WAEb,OACI,oCACI,kBAAC,GAAD,MACA,kBAAC,GAAD,Q,ipJCHZ,IAAMC,GAAiB9M,IAAOiC,KAAV,MAQd8K,GAAgB/M,IAAOC,IAAV,MAUbuH,GAAaxH,IAAOC,IAAV,MAUV+M,GAAkBhN,IAAOC,IAAV,MASfgN,GAAiBjN,IAAOC,IAAV,MAyBd,SAAA8B,GAAK,OAAIA,EAAMmL,OAAS/K,YAAf,SAKTgL,GAAahL,YAAH,MAQViL,GAAkBpN,IAAOqN,MAAV,KACfF,IAGAG,GAAqBtN,IAAOqN,MAAV,KAClBF,IAGAI,GAAkBvN,IAAOC,IAAV,MASfuN,GAAqBxN,IAAOC,IAAV,MAOlBwN,GAAiBzN,IAAOqN,MAAV,MAMdK,GAAqB1N,IAAOC,IAAV,MAUlB0N,GAAc3N,IAAOC,IAAV,MAMX2N,GAAmB5N,IAAOC,IAAV,MAShB4N,GAAc7N,IAAOqC,OAAV,MAaXyL,GAAkB9N,IAAOC,IAAV,MAOf8N,GAAc/N,IAAOC,IAAV,MAKX+N,GAAoBhO,IAAOqC,OAAV,MAUjB4L,GAAajO,IAAOC,IAAV,MA0JDK,OAAMC,MAtIJ,SAAC,GAAsE,IAApEmL,EAAmE,EAAnEA,MAAOC,EAA4D,EAA5DA,SAAU1J,EAAkD,EAAlDA,KAAM8C,EAA4C,EAA5CA,MAAOtC,EAAqC,EAArCA,SAAUyL,EAA2B,EAA3BA,SAAUC,EAAiB,EAAjBA,WAC5DC,EAAMC,iBAAO,IAEbzM,EAAU0E,uBAAY,SAAAgI,GACxBF,EAAIG,QAAQD,GAAKE,UAClB,IAEH,OACI,kBAAC1B,GAAD,CACI2B,aAAa,MACbC,YAAY,MACZC,eAAe,MACfC,WAAW,QACXnM,SAAUA,GAEV,kBAACsK,GAAD,KACI,kBAAC,GAAD,KACMrB,EAAQ,UAAcC,EAAW,UAAY,MAEnD,kBAACqB,GAAD,KACI,kBAACC,GAAD,CACIrL,QAASA,EAAQiN,KAAK,KAAM,YAC5B3B,MAAOnI,EAAMsD,SACb5G,IAAG,mBAAcsD,EAAM+J,QAEvB,kBAAC,KAAYC,SAAb,CAAsBlD,MAAO,CAAEmD,MAAO,CAAEC,MAAO,OAAQC,OAAQ,OAAQC,OAAQ,aAC3E,kBAAC,KAAD,OAEJ,kBAAC/B,GAAD,CACI1K,KAAK,OACL9B,KAAK,WACLwO,YAAY,QACZlB,SAAUA,EACVrC,MAAO5J,EAAKoG,SACZ+F,IAAK,SAAAiB,GAAE,OAAIjB,EAAIG,QAAQlG,SAAWgH,KAEtC,kBAACpB,GAAD,KACKlJ,EAAMsD,WAGf,kBAAC4E,GAAD,CACIrL,QAASA,EAAQiN,KAAK,KAAM,YAC5B3B,MAAOnI,EAAMgG,SACbtJ,IAAG,mBAAcsD,EAAM+J,QAEvB,kBAAC,KAAYC,SAAb,CAAsBlD,MAAO,CAAEmD,MAAO,CAAEC,MAAO,OAAQC,OAAQ,OAAQC,OAAQ,aAC3E,kBAAC,KAAD,OAEJ,kBAAC7B,GAAD,CACI5K,KAAK,WACL9B,KAAK,WACLwO,YAAY,WACZlB,SAAUA,EACVrC,MAAO5J,EAAK8I,SACZqD,IAAK,SAAAiB,GAAE,OAAIjB,EAAIG,QAAQxD,SAAWsE,KAEtC,kBAACpB,GAAD,KACKlJ,EAAMgG,WAGdY,EACG,kBAACsB,GAAD,CACIrL,QAASA,EAAQiN,KAAK,KAAM,mBAC5B3B,MAAOnI,EAAM6G,gBACbnK,IAAG,0BAAqBsD,EAAM+J,QAE9B,kBAAC,KAAYC,SAAb,CAAsBlD,MAAO,CAAEmD,MAAO,CAAEC,MAAO,OAAQC,OAAQ,OAAQC,OAAQ,aAC3E,kBAAC,KAAD,OAEJ,kBAAC7B,GAAD,CACI5K,KAAK,WACL9B,KAAK,kBACLwO,YAAY,mBACZlB,SAAUA,EACVrC,MAAO5J,EAAK2J,gBACZwC,IAAK,SAAAiB,GAAE,OAAIjB,EAAIG,QAAQ3C,gBAAkByD,KAE7C,kBAACpB,GAAD,KACKlJ,EAAM6G,kBAGhB,KACFF,EACG,kBAAC6B,GAAD,KACI,kBAACC,GAAD,KACI,kBAACC,GAAD,CACI/K,KAAK,aAET,kBAACgL,GAAD,qBAIJ,kBAACC,GAAD,0BAIL,MAEP,kBAACC,GAAD,KACI,kBAACC,GAAD,CACInL,KAAK,UADT,UAKCgJ,EACG,kBAACoC,GAAD,KACI,kBAACC,GAAD,+BAGA,kBAACC,GAAD,CACItL,KAAK,SACLd,QAASuM,GAFb,WAQJ,kBAACL,GAAD,KACI,kBAACC,GAAD,+BAGA,kBAACC,GAAD,CACItL,KAAK,UADT,iBC5KbyD,gBArIQ,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACFc,aAAY,gBAAGyB,EAAH,EAAGA,KAAH,MAAe,CACzD1G,KAAM0G,EAAK+C,MACX/C,KAAMA,EAAKA,KACX8C,UAAW9C,EAAK8C,cAHZxJ,EAD4B,EAC5BA,KAAM0G,EADsB,EACtBA,KAAM8C,EADgB,EAChBA,UAMdhH,EAAW4B,cAPmB,EASRU,mBAAS,CACjCsB,SAAU,GACV0C,SAAU,KAXsB,mBAS5BhG,EAT4B,KASrBuK,EATqB,KAc9BpB,EAAW5H,uBAAY,SAAAzE,GAAM,IAAD,EACNA,EAAE0N,OAAlB3O,EADsB,EACtBA,KAAMiL,EADgB,EAChBA,MACK,KAAhB9G,EAAMnE,IACL0O,GAAS,SAAAE,GAAS,sBACXA,EADW,eAEb5O,EAAO,QAGhB6D,EAAS0G,GAAY,CACjBlJ,KAAM,QACNR,IAAKb,EACLiL,aAEL,CAACpH,EAAUM,IAERtC,EAAW6D,uBAAY,SAAAzE,GACzBA,EAAE0E,iBAD4B,IAEtB8B,EAAuBpG,EAAvBoG,SAAU0C,EAAa9I,EAAb8I,SAGd0E,EAAY3G,OAAOC,KAAK9G,GACvByN,QAAO,SAACC,EAAKlO,GAAN,sBAEGkO,EAFH,eAGClO,GAAM,MACR,IAGXqH,OAAOC,KAAK0G,GACPG,QAAO,SAAAnO,GAAG,MAAkB,KAAdQ,EAAKR,MACnBuH,SAAQ,SAAAvH,GACLgO,EAAS,eACFA,EADE,eAEJhO,EAAM,sBAInB,IRpByBoO,EQoBnBC,EAASC,KAAIC,SAASjH,KAAK,CAC7BV,SAAU0H,KAAIE,SAASC,IAAI,IAAIC,MAAM,CAAEC,eAAgB,IAAKC,WAAWtL,OAAM,iBAAO,CAAE5B,QAAS,mBAC/F4H,SAAUgF,KAAIE,SAASK,IAAI,GAAGJ,IAAI,IAAIG,WAAWtL,OAAM,iBAAO,CAAE5B,QAAS,sBAGvEoN,EAASR,KAAIS,SAASvO,EAAM6N,EAAQ,CAAEW,YAAY,IAaxD,GAXGF,EAAOxL,OACNwL,EAAOxL,MAAM2L,QAAQ1H,SAAQ,SAAA2H,GACrBlB,EAAUkB,EAAOC,KAAK,MACtBnB,EAAS,eACFA,EADE,eAEJkB,EAAOC,KAAK,GAAKD,EAAOxN,cAMtC2F,OAAOC,KAAK0G,GAAWG,QAAO,SAAAnO,GAAG,OAAIgO,EAAUhO,MAAMH,OAAS,EAY7D,OAXAgO,GAAS,SAAAE,GAAS,sBACXC,EADW,CAEdX,MAAOU,EAAUV,MAAQ,YAE7BhG,OAAOC,KAAK0G,GAAWzG,SAAQ,SAAAvH,GAExBgO,EAAUhO,IACTgD,EAAS4G,GAAmB,CAAEpJ,KAAM,QAASR,YAOzDgD,GRrDyBoL,EQqDE,CAAExH,WAAU0C,YRrDL,SAAQtG,EAAUuH,GAAlB,eAAAtH,EAAAC,OAAA,2EAAAD,EAAA,MAEfD,EAASqG,GAAW+E,KAFL,QAE5BlH,EAF4B,SAI9BE,GAAgB,CAAEF,SAJY,gDAOlCjI,QAAQC,IAAI,gBAPsB,2DQsDlC8D,EAAS2G,GAAW,CAAEnJ,KAAM,aAC7B,CAACwC,EAAUxC,IAEdoF,qBAAU,WACN,GAAGoE,EAAW,CACV,IAAIgE,EAAY,GACVoB,EAAepF,EAAU7G,SAASE,KAWxC,OAVAgE,OAAOC,KAAK8H,GAAc7H,SAAQ,SAAAvH,GAC9BgO,EAAS,eACFA,EADE,eAEJhO,EAAMoP,EAAapP,aAK5B6N,EAASG,GAKV9G,GACCvC,EAAQ5E,KAAK,OAElB,CAAC4E,EAASuC,EAAM8C,IAEnBpE,qBAAU,WACN,OAAO,WACH5C,EAAS2G,GAAW,CAAEnJ,KAAM,cAEjC,CAACwC,IAEJ,IAAM0J,EAAa7H,uBAAY,WAC3B7B,EAAS2G,GAAW,CAAEnJ,KAAM,cAC5BmE,EAAQ5E,KAAK,eACd,CAACiD,EAAU2B,IAEd,OACI,kBAAC,GAAD,CACIsF,OAAK,EACLjJ,SAAUA,EACVyL,SAAUA,EACVjM,KAAMA,EACN8C,MAAOA,EACPoJ,WAAYA,OCrHT2C,GAZG,WACd,OACI,oCACI,kBAAC,IAAD,KACI,+DAEJ,kBAAC,GAAD,MACA,kBAAC,GAAD,QC0HG3K,gBAhIW,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACLc,aAAY,gBAAGyB,EAAH,EAAGA,KAAH,MAAe,CACzD1G,KAAM0G,EAAKgD,SACXhD,KAAMA,EAAKA,KACX8C,UAAW9C,EAAK8C,cAHZxJ,EAD+B,EAC/BA,KAAM0G,EADyB,EACzBA,KAAM8C,EADmB,EACnBA,UAMdhH,EAAW4B,cAPsB,EASXU,mBAAS,CACjCsB,SAAU,GACV0C,SAAU,GACVa,gBAAiB,KAZkB,mBAS/B7G,EAT+B,KASxBuK,EATwB,KAejCpB,EAAW5H,uBAAY,SAAAzE,GAAM,IAAD,EACNA,EAAE0N,OAAlB3O,EADsB,EACtBA,KAAMiL,EADgB,EAChBA,MACK,KAAhB9G,EAAMnE,IACL0O,GAAS,SAAAE,GAAS,sBACXA,EADW,eAEb5O,EAAO,QAGhB6D,EAAS0G,GAAY,CACjBlJ,KAAM,WACNR,IAAKb,EACLiL,aAEL,CAACpH,EAAUM,IAERtC,EAAW6D,uBAAY,SAAAzE,GACzBA,EAAE0E,iBAD4B,IAEtB8B,EAAuBpG,EAAvBoG,SAAU0C,EAAa9I,EAAb8I,SAGb0E,EAAY3G,OAAOC,KAAK9G,GAC3ByN,QAAO,SAACC,EAAKlO,GAAN,sBAEGkO,EAFH,eAGClO,GAAM,MACR,IAGRqH,OAAOC,KAAK0G,GACPG,QAAO,SAAAnO,GAAG,MAAkB,KAAdQ,EAAKR,MACnBuH,SAAQ,SAAAvH,GACLgO,EAAS,eACFA,EADE,eAEJhO,EAAM,sBAInB,IVT4BoO,EUStBC,EAASC,KAAIC,SAASjH,KAAK,CAC7BV,SAAU0H,KAAIE,SAASC,IAAI,IAAIC,MAAM,CAAEC,eAAgB,IAAKC,WAAWtL,OAAM,iBAAO,CAAE5B,QAAS,mBAC/F4H,SAAUgF,KAAIE,SAASK,IAAI,GAAGJ,IAAI,IAAIG,WAAWtL,OAAM,iBAAO,CAAE5B,QAAS,oBACzEyI,gBAAiBmE,KAAIgB,MAAMC,MAAMjB,KAAI3B,IAAI,aAAaiC,WAAWtL,OAAM,iBAAO,CAAE5B,QAAS,0BAGvFoN,EAASR,KAAIS,SAASvO,EAAM6N,EAAQ,CAAEW,YAAY,IAaxD,GAXGF,EAAOxL,OACNwL,EAAOxL,MAAM2L,QAAQ1H,SAAQ,SAAA2H,GACrBlB,EAAUkB,EAAOC,KAAK,MACtBnB,EAAS,eACFA,EADE,eAEJkB,EAAOC,KAAK,GAAKD,EAAOxN,cAMtC2F,OAAOC,KAAK0G,GAAWG,QAAO,SAAAnO,GAAG,OAAIgO,EAAUhO,MAAMH,OAAS,EAW7D,OAVAgO,GAAS,SAAAE,GAAS,sBACXC,EADW,CAEdX,MAAOU,EAAUV,MAAQ,YAE7BhG,OAAOC,KAAK0G,GAAWzG,SAAQ,SAAAvH,GACxBgO,EAAUhO,IACTgD,EAAS4G,GAAmB,CAAEpJ,KAAM,WAAYR,YAO5DgD,GV1C4BoL,EU0CE,CAAExH,WAAU0C,YV1CL,SAAQtG,EAAUuH,GAAlB,eAAAtH,EAAAC,OAAA,2EAAAD,EAAA,MAElBD,EAASuG,GAAc6E,KAFL,QAE/BlH,EAF+B,SAIjCE,GAAgB,CAAEF,SAJe,gDAOrCjI,QAAQC,IAAI,mBAPyB,2DU2CrC8D,EAAS2G,GAAW,CAAEnJ,KAAM,gBAC7B,CAACwC,EAAUxC,IA8Bd,OA5BAoF,qBAAU,WACN,GAAGoE,EAAW,CACV,IAAIgE,EAAY,GACVoB,EAAepF,EAAU7G,SAASE,KAWxC,OAVAgE,OAAOC,KAAK8H,GAAc7H,SAAQ,SAAAvH,GAC9BgO,EAAS,eACFA,EADE,eAEJhO,EAAMoP,EAAapP,aAK5B6N,EAASG,GAKV9G,GACCvC,EAAQ5E,KAAK,OAElB,CAAC4E,EAASuC,EAAM8C,IAEnBpE,qBAAU,WACN,OAAO,WACH5C,EAAS2G,GAAW,CAAEnJ,KAAM,iBAEjC,CAACwC,IAGA,kBAAC,GAAD,CACIkH,UAAQ,EACRlJ,SAAUA,EACVyL,SAAUA,EACVjM,KAAMA,EACN8C,MAAOA,OC/GJkM,GAbM,WAEjB,OACI,oCACI,kBAAC,IAAD,KACI,+DAEJ,kBAAC,GAAD,MACA,kBAAC,GAAD,Q,qQCXZ,IAAMnQ,GAAkBd,IAAOC,IAAV,MAgBNK,OAAMC,MATF,SAAC,GAA2B,EAAzBQ,MAAyB,EAAlBC,YAEzB,OACI,kBAAC,GAAD,SCJOc,GANa,WACxB,OACI,kBAAC,GAAD,OCIOxB,OAAMC,MAPL,WACZ,OACI,wCCKO2Q,GANU,WACrB,OACI,kBAAC,GAAD,OCIO5Q,OAAMC,MAPJ,WACb,OACI,wCCKO4Q,GANW,WACtB,OACI,kBAAC,GAAD,O,2LCER,IAAMC,GAAkBpR,IAAOC,IAAV,MAoBNK,OAAMC,MAZF,WACf,OACI,oCACI,kBAAC6Q,GAAD,KACI,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,WCNDC,GAVa,WAAO,IAAD,EACjBnK,aAAY,mCAAW,MAIpC,OAL8B,gBAM1B,kBAAC,GAAD,OCOOoK,GAZE,WACb,OACI,oCACI,kBAAC,IAAD,KACI,4DAEJ,kBAAC,GAAD,MACA,kBAAC,GAAD,Q,SCVCC,GAAc,CACvB,KAAQC,KACR,KAAQC,KACR,MAASC,KACT,OAAUC,KACV,OAAUC,KACV,KAAQC,KACR,QAAWC,MAGFC,GAAe,CACxB,MAAS,CACLC,MAAO,QACPhD,MAAO,CACHY,OAAO,iCACPX,MAAO,MACPC,OAAQ,QAGhB,MAAS,CACL8C,MAAO,QACPhD,MAAO,CACHY,OAAO,iCACPX,MAAO,MACPC,OAAQ,QAGhB,SAAY,CACRF,MAAO,CACHY,OAAO,iCACPX,MAAO,MACPC,OAAQ,MACR8C,MAAO,uBAIf,SAAY,CACRhD,MAAO,CACHY,OAAO,iCACPX,MAAO,MACPC,OAAQ,MACR8C,MAAO,uB,qwDCvCnB,I,GAAMC,GAAiB,SAAC,GAAwC,IAAtCC,EAAqC,EAArCA,MAAOC,EAA8B,EAA9BA,MAAOC,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,QACzCC,EAAgB,KAEpB,GAAGF,EAAS,CACR,IAAMG,EAAYhB,GAAW,QAE7Be,EACI,kBAAC,KAAYvD,SAAb,CAAsBlD,MAAOkG,GAAa,UAAD,OAAWM,KAChD,kBAAC,EAAD,OAKZ,IAAIH,IAAUC,EACV,OAAOG,EAGX,IAAMC,EAAYhB,GAAYW,GACxBM,EAAiBF,EAAgB,CACnCG,QAAS,GACT7C,OAAkB,UAAVuC,EAAA,mEACR,KAEEO,EAAW,eACVX,GAAaI,GADH,CAEbnD,MAAM,eACC+C,GAAaI,GAAOnD,MADtB,GAEEwD,KAIX,OACI,kBAAC,KAAYzD,SAAb,CAAsBlD,MAAO6G,GACzB,kBAACH,EAAD,QAKNI,GAAc3S,IAAOC,IAAV,MAIX2S,GAAiB5S,IAAOC,IAAV,MAId4S,GAAkB7S,IAAOC,IAAV,MAQf,SAAA8B,GAAK,OAAsB,IAAlBA,EAAMsQ,SAAiBlQ,YAAvB,SAIT,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMsQ,SAAiBlQ,YAAvB,SAIT,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMsQ,SAAiBtQ,EAAM+Q,SAAW3Q,YAAxC,SAIT,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMsQ,SAAiBtQ,EAAM+Q,SAAW3Q,YAAxC,SAIT,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMsQ,SAAiBtQ,EAAMgR,SAAW5Q,YAAxC,SAIT,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMsQ,SAAiBtQ,EAAMgR,SAAW5Q,YAAxC,SAKL,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMsQ,SAAiBtQ,EAAMqQ,SAAWjQ,YAAxC,SAIT,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMsQ,SAAiBtQ,EAAMqQ,SAAWjQ,YAAxC,SAMb6Q,GAAY1S,IAAMC,MAAK,YAA8C,IAA3C0S,EAA0C,EAA1CA,IAAKC,EAAqC,EAArCA,EAAGC,EAAkC,EAAlCA,YAAalB,EAAqB,EAArBA,eAEjD,OACI,kBAACW,GAAD,KACKK,EAAItR,KAAI,SAACyR,EAAMC,GAAP,OACL,kBAACC,GAAD,CACI7R,IAAG,eAAUyR,EAAV,YAAeG,GAClBzR,QAASuR,EAAYtE,KAAK,KAAM,CAACqE,IAAGG,MACpCpB,eAAgBA,EAChBI,SAAUgB,EAAIH,GAAK,EACnBE,KAAMA,WAKvB,SAACG,EAAWC,GACX,OAAOD,EAAUN,MAAQO,EAAUP,OAGjCK,GAAahT,IAAMC,MAAK,YAAiD,IAA9C6S,EAA6C,EAA7CA,KAAMxR,EAAuC,EAAvCA,QAASyQ,EAA8B,EAA9BA,QAASJ,EAAqB,EAArBA,eAErD,OACI,kBAACY,GAAD,eACIjR,QAASA,EACTyQ,QAASA,GACLe,GAEHnB,EAAe,CACZC,MAAOkB,EAAKlB,MACZC,MAAOiB,EAAKjB,MACZC,QAASgB,EAAKhB,QACdC,gBAIb,SAACkB,EAAWC,GACX,OAAOD,EAAUH,OAASI,EAAUJ,QAGlCK,GAAqBzT,IAAOC,IAAV,MAClB,SAAA8B,GAAK,OAAIA,EAAM2R,SAAWvR,YAAjB,SAKTwR,GAAgB,SAAC,GAAiC,IAA/BC,EAA8B,EAA9BA,MAAOF,EAAuB,EAAvBA,QAAS9R,EAAc,EAAdA,QAE/BuR,EAAc7M,uBAAY,YAAa,IAAX4M,EAAU,EAAVA,EAAGG,EAAO,EAAPA,EACjCzR,EAAQsR,EAAGG,KACZ,CAACzR,IAEJ,OACI,kBAAC6R,GAAD,CAAoBC,QAASA,GACxBE,EAAMjS,KAAI,SAACsR,EAAKC,GAAN,OACP,kBAACF,GAAD,CACIvR,IAAG,cAASyR,GACZD,IAAKA,EACLC,EAAGA,EACHC,YAAaA,EACblB,eAAgBA,UAerB3R,OAAMC,MARN,SAAAwB,GACX,OACI,kBAAC4Q,GAAD,KACI,kBAAC,GAAkB5Q,OCxJhB6R,GAXD,CACV,CAAE,CAACxB,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,KC8Q/HyB,I,MApRD,CACVC,KAAM,CACFpR,KAAM,UACNqR,KAAM,CACF,CACIC,IAAK,EACLC,GAAI,EACJC,OAAQ,SAASnS,GAAQ,IACb6R,EAAkB7R,EAAlB6R,MAAOI,EAAWjS,EAAXiS,GAAIC,EAAOlS,EAAPkS,GACnB,OAAGL,EAAMI,GAAIC,GAAI/B,QAMzB,CACI8B,IAAK,EACLC,GAAI,EACJC,OAAQ,SAASnS,GAAQ,IACb6R,EAAuB7R,EAAvB6R,MAAOV,EAAgBnR,EAAhBmR,EAAGG,EAAatR,EAAbsR,EAAGlB,EAAUpQ,EAAVoQ,MACrB,QAAc,UAAVA,GAA2B,IAANe,GAAuB,UAAVf,GAA2B,IAANe,OAC7C,UAAVf,GAAqByB,EAAM,GAAGP,GAAGnB,OAAqB,UAAVC,GAAqByB,EAAM,GAAGP,GAAGnB,UACnE,UAAVC,GAAqByB,EAAM,GAAGP,GAAGnB,OAAqB,UAAVC,GAAqByB,EAAM,GAAGP,GAAGnB,UAIzF,CACI8B,IAAK,EACLC,IAAK,EACLC,OAAQ,SAASnS,GAAQ,IACb6R,EAAkB7R,EAAlB6R,MAAOI,EAAWjS,EAAXiS,GAAIC,EAAOlS,EAAPkS,GACnB,QAAGL,EAAMI,GAAIC,GAAI/B,QAMzB,CACI8B,IAAK,EACLC,GAAI,EACJC,OAAQ,SAASnS,GAAQ,IACb6R,EAAkB7R,EAAlB6R,MAAOI,EAAWjS,EAAXiS,GAAIC,EAAOlS,EAAPkS,GACnB,QAAGL,EAAMI,GAAIC,GAAI/B,UAQjCiC,OAAQ,CACJzR,KAAM,UACNqR,KAAM,CACF,CACIC,IAAK,EACLC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,KAIhBG,KAAM,CACF1R,KAAM,UACNqR,KAAM,CACF,CACIC,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,GAER,CACID,IAAK,EACLC,IAAK,GAET,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,GAER,CACID,GAAI,EACJC,GAAI,EACJC,OAAQ,SAASnS,GAAQ,IACb6R,EAAuB7R,EAAvB6R,MAAOV,EAAgBnR,EAAhBmR,EAAGG,EAAatR,EAAbsR,EACZgB,EAAmB,UADMtS,EAAVoQ,MACe,QAAU,QAG9C,IAAIyB,EAAMV,GAAGG,GAAGnB,OAAS0B,EAAMV,GAAGG,GAAGiB,MACjC,OAAO,EAIX,IAAIV,EAAMV,GAAGG,EAAE,GAAGnB,OAAS0B,EAAMV,GAAGG,EAAE,GAAGiB,MACrC,OAAO,EAIX,GAAGV,EAAMV,GAAGG,EAAE,GAAGnB,OAAS0B,EAAMV,GAAGG,EAAE,GAAGnB,MACpC,OAAO,EAMX,IAFA,IAAMqC,EAAoBC,GAAsBH,EAAOT,GAAO,GACxDtS,EAASiT,EAAkBjT,OACzBC,EAAE,EAAGA,EAAED,IAAUC,EAAG,CACxB,IAAMkT,EAAOF,EAAkBhT,GAC/B,GAAGkT,EAAKT,KAAOd,IAAMuB,EAAKR,KAAOZ,GAAKoB,EAAKR,KAAOZ,EAAE,GAAKoB,EAAKR,KAAOZ,EAAE,GACnE,OAAO,EAKf,OAAO,IAGf,CACIW,GAAI,EACJC,IAAK,EACLC,OAAQ,SAASnS,GAAQ,IACb6R,EAAuB7R,EAAvB6R,MAAOV,EAAgBnR,EAAhBmR,EAAGG,EAAatR,EAAbsR,EACZgB,EAAmB,UADMtS,EAAVoQ,MACe,QAAU,QAG9C,IAAIyB,EAAMV,GAAGG,GAAGnB,OAAS0B,EAAMV,GAAGG,GAAGiB,MACjC,OAAO,EAIX,IAAIV,EAAMV,GAAGG,EAAE,GAAGnB,OAAS0B,EAAMV,GAAGG,EAAE,GAAGiB,MACrC,OAAO,EAIX,GAAGV,EAAMV,GAAGG,EAAE,GAAGnB,OAAS0B,EAAMV,GAAGG,EAAE,GAAGnB,OAAS0B,EAAMV,GAAGG,EAAE,GAAGnB,MAC3D,OAAO,EAMX,IAFA,IAAMqC,EAAoBC,GAAsBH,EAAOT,GAAO,GACxDtS,EAASiT,EAAkBjT,OACzBC,EAAE,EAAGA,EAAED,IAAUC,EAAG,CACxB,IAAMkT,EAAOF,EAAkBhT,GAC/B,GAAGkT,EAAKT,KAAOd,IAAMuB,EAAKR,KAAOZ,GAAKoB,EAAKR,KAAOZ,EAAE,GAAKoB,EAAKR,KAAOZ,EAAE,GACnE,OAAO,EAIf,OAAO,MAKvBqB,OAAQ,CACJhS,KAAM,YACNqR,KAAM,CACF,CACIC,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,KAIhBU,KAAM,CACFjS,KAAM,YACNqR,KAAM,CACF,CACIC,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,KAIhBW,MAAO,CACHlS,KAAM,YACNqR,KAAM,CACF,CACIC,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,OC9PPO,GAAwB,SAACK,EAAQjB,EAAOkB,GAEjD,IADA,IAAIP,EAAoB,GAChBhT,EAAE,EAAGA,EAAE,IAAKA,EAChB,IAAI,IAAIwT,EAAE,EAAGA,EAAE,IAAKA,EAChB,GAAGnB,EAAMrS,GAAGwT,GAAG5C,QAAU0C,EAAQ,CAC7B,IAAMG,EAAcC,GAAarB,EAAOrS,EAAGwT,EAAGD,GAC9CP,EAAiB,sBAAQA,GAAR,YAA8BS,IAK3D,OAAOT,GA6CEU,GAAe,SAACrB,EAAOV,EAAGG,EAAGyB,GAAc,IAAD,EAC1BlB,EAAMV,GAAGG,GAA1BnB,EAD2C,EAC3CA,MAAOC,EADoC,EACpCA,MACX+C,EAAS,CAAEtB,QAAOV,IAAGG,IAAGlB,SAC5B,GAAID,EAAJ,CAHmD,MAK7B2B,GAAM3B,GAApBxP,EAL2C,EAK3CA,KAAMqR,EALqC,EAKrCA,KAqCd,MAlCY,YAATrR,EACeqR,EAAKrE,QAAO,SAACC,EAAKwF,GAC5B,IAAMnB,EAAKd,GAAe,UAAVf,GAAqBgD,EAAInB,IAAKmB,EAAInB,IAC5CC,EAAKZ,EAAI8B,EAAIlB,GACnB,OAAGD,EAAK,GAAKC,EAAK,GAAKD,EAAK,GAAKC,EAAK,EAAUtE,GAEhDuF,EAAM,eAAQA,EAAR,CAAgBlB,KAAIC,OAEtBkB,EAAIjB,SAAuB,SAAVhC,GAAoB4C,IAAaK,EAAIjB,SAAUiB,EAAIjB,OAAOgB,KACvEtB,EAAMI,GAAIC,GAAI9B,OAASyB,EAAMV,GAAGG,GAAGlB,QAAUyB,EAAMI,GAAIC,GAAI9B,OAC3DxC,EAAInO,KAAK,CAACwS,KAAIC,OAIftE,KACR,IAEWoE,EAAKqB,SAAQ,SAAAD,GAGvB,IAFA,IAAIE,EAAU,EACVC,EAAa,KACL,GACND,EACF,IAAMrB,EAAKd,EAAImC,GAAqB,UAAVlD,GAAqBgD,EAAInB,IAAKmB,EAAInB,IACtDC,EAAKZ,EAAIgC,EAAUF,EAAIlB,GAE7B,GAAGD,EAAK,GAAKC,EAAK,GAAKD,EAAK,GAAKC,EAAK,EAAG,MACzC,GAAGL,EAAMI,GAAIC,GAAI9B,OAASyB,EAAMI,GAAIC,GAAI9B,QAAUA,EAAO,MAEzD,GADAmD,EAAW9T,KAAK,CAACwS,KAAIC,OAClBL,EAAMI,GAAIC,GAAI9B,OAASyB,EAAMI,GAAIC,GAAI9B,QAAUA,EAAO,MAE7D,OAAOmD,O,YC+BTtQ,I,YAiBOuQ,IArJXrQ,GAAoB,2BACpBC,GAAuB,8BAChBC,GAAmBC,YAAaH,IAAmB,SAAAL,GAAO,OAAIA,KAC9DS,GAAsBD,YAAaF,IAQnC5B,GAAmB8B,YANN,4BAMsC,SAAAR,GAAO,OAAIA,KAC9DrB,GAAkB6B,YANN,2BAMqC,SAAAR,GAAO,OAAIA,KAC5DpB,GAAc4B,YANN,uBAMiC,SAAAR,GAAO,OAAIA,KACpD2Q,GAAanQ,YANN,sBAOPoQ,GAAoBpQ,YANN,6BAMuC,SAAAR,GAAO,OAAIA,KAChE6Q,GAAgBrQ,YANN,yBAMmC,SAAAR,GAAO,OAAIA,K,GAEMT,GAAyB,yB,qBAA5FuR,G,MAAgBC,G,MAAwBC,G,MACnCC,GAAoBzR,GAAmBsR,IC5B3B,SAAAtS,GAAM,OAC3BsC,KAAMC,KAAK,wBAAyBvC,MD6B3B0S,GAAmB,SAAC,GAAD,IAAGhC,EAAH,EAAGA,KAAH,OAAc,SAAEtP,EAAUuH,GAAe,IAC7DgK,EAAejC,EAAfiC,KAAMC,EAASlC,EAATkC,KADsD,EAK5DjK,IAHU4H,EAFkD,EAE5DsC,OAAUtC,MACFpI,EAHoD,EAG5D7C,KAAQ6C,SACA2K,EAJoD,EAI5D3V,KAAQ2V,KAGb3K,IACuB,UAAlBA,EAAS4K,MAAoBD,EAAO,IAAM,GAAyB,UAAlB3K,EAAS4K,MAAoBD,EAAO,IAAM,EAC3F1R,EAASiR,GAAc,CAAEhC,SAAS,KAElCjP,EAASiR,GAAc,CAAEhC,SAAS,MAI1C,IAAMN,EAAOQ,EAAMoC,EAAK9C,GAAG8C,EAAK3C,GAC1BgD,EAAaC,GAAc,YAAI1C,GAAQ,CACzC,UACA,UACA,YAGJyC,EAAWJ,EAAK/C,GAAhB,YAA0BmD,EAAWJ,EAAK/C,IAC1CmD,EAAWJ,EAAK/C,GAAG+C,EAAK5C,GAAxB,eACOD,EADP,CAEIL,SAAS,EACTuB,OAAO,IAGX+B,EAAWL,EAAK9C,GAAhB,YAAyBmD,EAAWL,EAAK9C,IACzCmD,EAAWL,EAAK9C,GAAG8C,EAAK3C,GAAK,CACzBjB,SAAS,EACTW,SAAS,GAhCuD,MAoC3CsD,EAAWJ,EAAK/C,GAAG+C,EAAK5C,GAAzClB,EApC4D,EAoC5DA,MAAOD,EApCqD,EAoCrDA,MASf,IARc,UAAVC,GAA+B,SAAVD,GAA+B,IAAX+D,EAAK/C,GAAuB,UAAVf,GAA+B,SAAVD,GAA+B,IAAX+D,EAAK/C,KACzGmD,EAAWJ,EAAK/C,GAAG+C,EAAK5C,GAAxB,eACOgD,EAAWJ,EAAK/C,GAAG+C,EAAK5C,GAD/B,CAEInB,MAAO,WAKyB,SAArCmE,EAAWJ,EAAK/C,GAAG+C,EAAK5C,GAAGnB,MAAkB,CAC5C,GAAG+D,EAAK5C,EAAI2C,EAAK3C,IAAM,EAAG,CACtBgD,EAAWL,EAAK9C,GAAhB,YAA0BmD,EAAWL,EAAK9C,IAE1C,IAAMqD,EAAU,eAAQF,EAAWL,EAAK9C,GAAG8C,EAAK3C,EAAE,IAClDgD,EAAWL,EAAK9C,GAAG8C,EAAK3C,EAAE,GAAK,CAC3BjB,SAAS,GAEbiE,EAAWL,EAAK9C,GAAG8C,EAAK3C,EAAE,GAA1B,eACOkD,EADP,CAEIjC,OAAO,IAIf,GAAG2B,EAAK5C,EAAI2C,EAAK3C,KAAO,EAAG,CACvBgD,EAAWL,EAAK9C,GAAhB,YAA0BmD,EAAWL,EAAK9C,IAE1C,IAAMqD,EAAU,eAAQF,EAAWL,EAAK9C,GAAG8C,EAAK3C,EAAE,IAClDgD,EAAWL,EAAK9C,GAAG8C,EAAK3C,EAAE,GAAK,CAC3BjB,SAAS,GAEbiE,EAAWL,EAAK9C,GAAG8C,EAAK3C,EAAE,GAA1B,eACOkD,EADP,CAEIjC,OAAO,KAKnB7P,EAAShB,GAAY,CAAEmQ,MAAOyC,EAAYvD,QAAS,UAGjDwD,GAAgB,SAAC1C,EAAOvQ,GAI1B,IAHA,IAAMmT,EAAM,GAENC,EAAO7C,EAAMtS,OAHkB,WAI7BC,GACJ,IALiC,eAKzBwT,GACJ,IAAI2B,GAAO,EACXrT,EAAO2F,SAAQ,SAAA6G,GACX6G,GAAQ9C,EAAMrS,GAAGwT,GAAGlF,MAErB6G,GACCF,EAAIhV,KAAK,CACL0R,EAAG3R,EACH8R,EAAG0B,KARPA,EAAE,EAAGA,EAAE0B,IAAQ1B,EAAI,EAAnBA,IADJxT,EAAE,EAAGA,EAAEkV,IAAQlV,EAAI,EAAnBA,GA4BR,OAbAiV,EAAIxN,SAAQ,SAAAoK,GACRQ,EAAMR,EAAKF,GAAX,YAAqBU,EAAMR,EAAKF,IAChC,IAAMyD,EAAY/C,EAAMR,EAAKF,GAAGE,EAAKC,GAC/BuD,EAAO,eACND,GAEPtT,EAAO2F,SAAQ,SAAA6G,GACX+G,EAAQ/G,IAAS,KAGrB+D,EAAMR,EAAKF,GAAGxR,OAAO0R,EAAKC,EAAG,EAAGuD,MAG7BhD,GAGX,SAAU5O,GAAsBsG,GAAhC,2EAKuB,OAJb7J,EAAM6J,EAAOzG,QAEblB,EAHV,cAGyBlC,GAHzB,SAK6BoE,YAAKjD,GAAkB,CAC5CU,IAAK,UACLC,oBACAC,mBACAC,YAAasS,GACbpS,UAVR,OAaI,OARMmC,EALV,gBAaU7B,YAAKkB,IAbf,OAcI,OAdJ,SAcUY,YAAOD,GAdjB,wCAiBO,SAAUyP,KAAV,iEACH,OADG,SACGvP,YAAUd,GAAmBF,IADhC,wCAIA,I,GA2CDuG,GAAe,CACjBtI,OAAQ,KACR8B,MAAO,KACP6O,SACAd,QAAS,KACTY,SAAS,GAGEzN,gBAAa,kBAAC,GAvMH,4BAwMD,SAACC,EAAD,OAAqBjD,EAArB,EAAU4B,QAAW5B,OAArB,sBACdiD,EADc,CAEjBjD,cAHoB,YAAC,GAtMJ,2BA2MD,SAACiD,EAAD,OAAqB0N,EAArB,EAAU/O,QAAW+O,MAArB,sBACb1N,EADa,CAEhB0N,aAPoB,YAAC,GArMR,uBA8MD,SAAC1N,EAAD,WAAUrB,QAAY+O,EAAtB,EAAsBA,MAAOd,EAA7B,EAA6BA,QAA7B,sBACT5M,EADS,CAEZ0N,QACAd,eAZoB,YAAC,GApMT,sBAkND,SAAA5M,GAAK,OAAIqF,MAdA,YAAC,GAnMF,6BAkND,SAACrF,EAAD,OAAqBwN,EAArB,EAAU7O,QAAW6O,QAArB,sBACfxN,EADe,CAElBwN,eAjBoB,YAAC,GAlMN,yBAqND,SAACxN,EAAD,OAAqBwN,EAArB,EAAU7O,QAAW6O,QAArB,sBACXxN,EADW,CAEdwN,eArBoB,YAAC,GAuBxBkC,IAAyB,SAAA1P,GAAK,OAAIA,KAvBX,YAAC,GAwBxB2P,IAAyB,SAAA3P,GAAK,OAAIA,KAxBX,IAyBzBqF,IE9LYsL,GA5CS,WAAO,IAAD,EACiB3P,aAAY,gBAAGgP,EAAH,EAAGA,OAAQvN,EAAX,EAAWA,KAAMnI,EAAjB,EAAiBA,KAAjB,MAA6B,CAChFoT,MAAOsC,EAAOtC,MACdF,QAASwC,EAAOxC,QAChByC,KAAM3V,EAAK2V,KACX3K,SAAU7C,EAAK6C,aAJXoI,EADkB,EAClBA,MAAOF,EADW,EACXA,QAASyC,EADE,EACFA,KAAM3K,EADJ,EACIA,SAOxB/G,EAAW4B,cAEjBgB,qBAAU,WACHmE,IACuB,UAAlBA,EAAS4K,MAAoBD,EAAO,IAAM,GAAyB,UAAlB3K,EAAS4K,MAAoBD,EAAO,IAAM,EAC3F1R,EAASgR,GAAkB,CAAE/B,SAAS,KAEtCjP,EAASgR,GAAkB,CAAE/B,SAAS,QAG/C,CAACjP,EAAU0R,EAAM3K,IAEpBnE,qBAAU,WACN,OAAO,WACH5C,EAAS+Q,SAEd,CAAC/Q,IAOJ,IAAM7C,EAAU0E,uBAAY,SAAC4M,EAAGG,GAC5B5O,EF8HuB,SAAC,GAAD,IAAGyO,EAAH,EAAGA,EAAGG,EAAN,EAAMA,EAAN,OAAc,SAAC5O,EAAUuH,GAAc,IAAD,EAGzDA,IADAkK,OAAUtC,EAF+C,EAE/CA,MAAOd,EAFwC,EAExCA,QAGzB,GAAGA,GAAWc,EAAMV,GAAGG,GAAGjB,QAA1B,CAAoC,IACdnP,EAAa+I,IAAvBkK,OAAUjT,OAElBwB,EAASqR,GAAkB,CACvB7S,SACA8Q,KAAM,CACFiC,KAAMlD,EACNmD,KAAM,CAAC/C,IAAGG,aAPtB,CAcA,IAAI2B,EAAcC,GAAarB,EAAOV,EAAGG,GACnCgD,EAAaC,GAAc,YAAI1C,GAAQ,CACzC,UACA,YAGJoB,EAAYhM,SAAQ,SAAAyL,GAChB4B,EAAW5B,EAAKT,IAAhB,YAA2BqC,EAAW5B,EAAKT,KAC3C,IAAM2C,EAAYN,EAAW5B,EAAKT,IAAIS,EAAKR,IAC3CoC,EAAW5B,EAAKT,IAAItS,OAAO+S,EAAKR,GAAI,EAApC,eACO0C,EADP,CAEIvE,SAAQ,QAIhBiE,EAAWnD,GAAX,YAAqBmD,EAAWnD,IAChCmD,EAAWnD,GAAGG,GAAd,eACOgD,EAAWnD,GAAGG,GADrB,CAEIP,SAAS,IAGbrO,EAAShB,GAAY,CAAEmQ,MAAOyC,EAAYvD,QAAS,CAAEI,IAAGG,UEtK3CyD,CAAgB,CAAE5D,IAAGG,SAC/B,CAAC5O,IAEJ,OACI,kBAAC,GAAD,CACImP,MAAOA,EACPF,QAASA,EACT9R,QAASA,K,YClBXoD,I,YAiBO+R,IArCX7R,GAAoB,yBACpBC,GAAuB,4BAChBC,GAAmBC,YAAaH,IAAmB,SAAAL,GAAO,OAAIA,KAC9DS,GAAsBD,YAAaF,IAKnC5B,GAAmB8B,YAHN,0BAGsC,SAAAR,GAAO,OAAIA,KAC9DrB,GAAkB6B,YAHN,yBAGqC,SAAAR,GAAO,OAAIA,KAC5DpB,GAAc4B,YAHN,qBAGiC,SAAAR,GAAO,OAAIA,KAIpDmS,GAAkB3R,YAFN,yBAEqC,SAAAR,GAAO,OAAIA,KAC5DoS,GAAsB5R,YAFN,6B,GAIwCjB,GAAyB,qB,qBAAtF8S,G,MAAcC,G,MAAsBC,G,MAC/BC,GAAmBhT,GAAmB6S,ICvBxB,SAAA/T,GAAO,OAC9BwC,KAAMC,KAAK,wBAAyBzC,MDwBxC,SAAU6B,GAAsBsG,GAAhC,2EAKuB,OAJb7J,EAAM6J,EAAOzG,QAEblB,EAHV,cAGyBlC,GAHzB,SAK6BoE,YAAKjD,GAAkB,CAC5CU,IAAK,QACLC,oBACAC,mBACAC,eACAE,UAVR,OAaI,OARMmC,EALV,gBAaU7B,YAAKkB,IAbf,OAcI,OAdJ,SAcUY,YAAOD,GAdjB,wCAiBO,SAAUiR,KAAV,iEACH,OADG,SACG/Q,YAAUd,GAAmBF,IADhC,wCAIP,IAMeiB,gBAAa,kBAAC,GA1CH,0BA2CD,SAACC,EAAD,OAAqBjD,EAArB,EAAU4B,QAAW5B,OAArB,sBACdiD,EADc,CAEjBjD,cAHoB,YAAC,GAzCJ,yBA8CD,SAACiD,EAAD,WAAUrB,QAAW+D,EAArB,EAAqBA,SAAUoJ,EAA/B,EAA+BA,MAAO7O,EAAtC,EAAsCA,QAAtC,sBACb+C,EADa,CAEhBoR,SAAU,CAAC,CAAE1O,WAAUoJ,QAAO7O,iBAPV,YAAC,GAxCR,qBAiDD,SAAC+C,EAAD,WAAUrB,QAAW+D,EAArB,EAAqBA,SAAUoJ,EAA/B,EAA+BA,MAAO7O,EAAtC,EAAsCA,QAAtC,sBACT+C,EADS,CAEZoR,SAAS,GAAD,mBAAOpR,EAAMoR,UAAb,CAAuB,CAAE1O,WAAUoJ,QAAO7O,kBAX9B,YAAC,GAaxBgU,IAAuB,SAAAjR,GAAK,OAAIA,KAbT,YAAC,GAcxBkR,IAAuB,SAAAlR,GAAK,OAAIA,KAdT,YAAC,GAlCA,6BAiDD,SAAAA,GAAK,sBACtBA,EADsB,CAEzBqR,KAAM,QAjBc,YAAC,GAnCJ,yBAsDD,SAACrR,EAAD,OAAmBqR,EAAnB,EAAU1S,QAAV,sBACbqB,EADa,CAEhBqR,YArBoB,IANP,CACjBtU,OAAQ,KACRqU,SAAU,GACVC,KAAM,K,4xGE9CV,IAAMC,GAAkBxX,IAAOiC,KAAV,MAGfwV,GAAiBzX,IAAOC,IAAV,MAMdyX,GAAkB1X,IAAOC,IAAV,MAMf0X,GAAY3X,IAAOC,IAAV,MAUT2X,GAAgB5X,IAAOC,IAAV,MAUb4X,GAAiB7X,IAAOqN,MAAV,MAYdyK,GAAkB9X,IAAOqC,OAAV,MAef0V,GAAe/X,IAAOC,IAAV,MASZ,SAAA8B,GAAK,MAAoB,OAAhBA,EAAMoQ,OAAkBhQ,YAAxB,SAIT,SAAAJ,GAAK,MAAoB,UAAhBA,EAAMoQ,OAAqBhQ,YAA3B,SAIT,SAAAJ,GAAK,MAAoB,WAAhBA,EAAMoQ,OAAsBhQ,YAA5B,SAKT6V,GAAehY,IAAOC,IAAV,MAqBZ,SAAA8B,GAAK,MAAoB,UAAhBA,EAAMoQ,OAAqBhQ,YAA3B,SAoBT8V,GAAU,SAAC,GAAyB,IAClCC,EADW/F,EAAsB,EAAtBA,MAAOjK,EAAe,EAAfA,SAsBtB,MApBa,OAAViK,EACC+F,EACI,kBAACF,GAAD,CAAc7F,MAAOA,GAChBjK,GAGO,UAAViK,EACN+F,EACI,kBAACF,GAAD,CAAc7F,MAAOA,GAChBjK,GAGO,WAAViK,IACN+F,EACI,oCACKhQ,IAMT,oCACKgQ,IAKPC,GAAU7X,IAAMC,MAAK,YAAmC,IAAhC4C,EAA+B,EAA/BA,QAASiV,EAAsB,EAAtBA,OAAW3X,EAAW,oCACnD0R,EAAQhP,EAAQyF,SAAYzF,EAAQyF,WAAawP,EAAS,KAAO,QAAW,SAC5Eb,EAAiB,UAAVpF,EAAoBhP,EAAQyF,SAAW,MAAQzF,EAAQA,QAAUA,EAAQA,QAEtF,OACI,kBAAC4U,GAAD,iBACQtX,EADR,CAEIuR,MAAO7O,EAAQ6O,MACfG,MAAOA,IAEP,kBAAC,GAAD,CAASA,MAAOA,GACXoF,OA6CFjX,OAAMC,MAvCR,SAAC,GAAsD,IAApD+W,EAAmD,EAAnDA,SAAU7U,EAAyC,EAAzCA,SAAUyL,EAA+B,EAA/BA,SAAUqJ,EAAqB,EAArBA,KAAM/L,EAAe,EAAfA,SAC1C4C,EAAMC,mBAKZ,OAJAhH,qBAAU,WACN+G,EAAIG,QAAQ8J,UAAYjK,EAAIG,QAAQ+J,eACrC,CAAChB,IAGA,oCACI,kBAACE,GAAD,CAAiB/U,SAAUA,GACvB,kBAACgV,GAAD,KACI,kBAACC,GAAD,KACI,kBAACC,GAAD,CAAWvJ,IAAKA,GACXkJ,EAAS3V,KAAI,SAAAwB,GAAO,OACjB,kBAACgV,GAAD,CACIC,OAAQ5M,EAAS5C,SACjBzF,QAASA,SAKzB,kBAACyU,GAAD,KACI,kBAACC,GAAD,CACI3J,SAAUA,EACVrC,MAAO0L,IAEX,kBAACO,GAAD,CACIrV,SAAUA,GAEV,kBAAC,KAAYsM,SAAb,CAAsBlD,MAAO,CAACmD,MAAO,CAAEC,MAAM,MAAOC,OAAO,SACvD,kBAAC,KAAD,eCxKjBqJ,GA/BO,WAClB,IAAM9T,EAAW4B,cADO,EAGqBa,aAAY,gBAAGsR,EAAH,EAAGA,KAAM7P,EAAT,EAASA,KAAT,MAAqB,CAC1E1F,OAAQuV,EAAKvV,OACbqU,SAAUkB,EAAKlB,SACfC,KAAMiB,EAAKjB,KACX/L,SAAU7C,EAAK6C,aAJXvI,EAHgB,EAGhBA,OAAQqU,EAHQ,EAGRA,SAAUC,EAHF,EAGEA,KAAM/L,EAHR,EAGQA,SAO1B/I,EAAW6D,uBAAY,SAAAzE,GACzBA,EAAE0E,iBACF9B,EAAS4S,GAAiB,CAAEpU,SAAQE,QAASoU,KAC7C9S,EAASwS,QACV,CAACxS,EAAU8S,EAAMtU,IAEdiL,EAAW5H,uBAAY,SAAAzE,GACzB4C,EAASuS,GAAgBnV,EAAE0N,OAAO1D,UACpC,CAACpH,IAEH,OACI,kBAAC,GAAD,CACI6S,SAAUA,EACV7U,SAAUA,EACVyL,SAAUA,EACVqJ,KAAMA,EACN/L,SAAUA,K,qiCC7BtB,IAAMiN,GAAazY,IAAOC,IAAV,MAQV,SAAA8B,GAAK,OAAIA,EAAMiQ,OAAS7P,YAAf,SAGT,SAAAJ,GAAK,OAAIA,EAAM2W,MAAQ,KAASvW,YAAvB,SAKTwW,GAAiB3Y,IAAOC,IAAV,MAUd2Y,GAAa5Y,IAAOC,IAAV,MAWV4Y,GAAgB,SAAAC,GAClB,IAAIC,EAAgB,GAGpB,OAFAA,GAAiBC,OAAO5X,KAAKC,MAAMyX,EAAY,KAC/CC,GAAiBC,OAAO5X,KAAKC,MAAMyX,EAAY,MAgCpCG,GA5BD,SAAC,GAAqB,IAAnBP,EAAkB,EAAlBA,KAAM1G,EAAY,EAAZA,MAEbkH,EAAS9X,KAAKC,MAAMqX,EAAO,KAC3BS,EAAc/X,KAAKC,MAAOqX,EAAO,IAAQ,IAG/C,YAAWU,GAARV,GAA8B,OAATA,EACb,kBAACD,GAAD,MAIP,kBAACA,GAAD,CACIC,KAAMA,EACN1G,MAAOA,EAAQ,EAAI,GAEnB,kBAAC2G,GAAD,KACKE,GAAcK,IAEnB,kBAACN,GAAD,UAGA,kBAACD,GAAD,KACCE,GAAcM,MC5CZE,GArBQ,SAAC,GAAe,IAAbC,EAAY,EAAZA,MAAY,EAEapS,aAAY,gBAAGqS,EAAH,EAAGA,OAAQ/Y,EAAX,EAAWA,KAAX,MAAuB,CAC9EgZ,UAAWD,EAAOC,UAClBC,UAAWF,EAAOE,UAClBC,MAAOlZ,EAAKkZ,MACZC,MAAOnZ,EAAKmZ,UAJRH,EAF0B,EAE1BA,UAAWC,EAFe,EAEfA,UAAWC,EAFI,EAEJA,MAAOC,EAFH,EAEGA,MAO/BjB,EAAOY,EAAQE,EAAYC,EAC3BzH,EAAQsH,EAASI,GAAmB,UAAVC,EAAsBD,GAAmB,UAAVC,EAE/D,OACI,kBAAC,GAAD,CACEjB,KAAMA,EACN1G,MAAOA,K,0fCdjB,IAAM4H,GAAc5Z,IAAOC,IAAV,MAQX,SAAA8B,GAAK,OAAIA,EAAMuX,OAASnX,YAAf,SAKT0X,GAAY7Z,IAAOC,IAAV,MAwCAK,OAAMC,MAjCN,SAAC,GAA4B,IAA1BuZ,EAAyB,EAAzBA,MAAOlZ,EAAkB,EAAlBA,KAAM0Y,EAAY,EAAZA,MACrBS,EAAY,CACd/K,MAAO,CACHE,OAAQ,OACRD,MAAO,MACP+C,MAAO,QACPgI,QAAS,OACTC,eAAgB,SAChBC,WAAY,WAIpB,OACI,kBAACN,GAAD,CAAaN,MAAOA,EAAQ,EAAI,GAC3BQ,EAEO,kBAAC,KAAY/K,SAAb,CAAsBlD,MAAOkO,GACzB,kBAAC,KAAD,OAIJ,kBAAC,KAAYhL,SAAb,CAAsBlD,MAAO,CAAEmD,MAAM,eAAM+K,EAAU/K,MAAjB,CAAwBgD,MAAO,YAC/D,kBAAC,KAAD,OAIZ,kBAAC6H,GAAD,KACKjZ,OC5BFuZ,GApBS,SAAC,GAAsB,IAApBC,EAAmB,EAAnBA,MAAOd,EAAY,EAAZA,MAAY,EACIpS,aAAY,gBAAG1G,EAAH,EAAGA,KAAH,MAAe,CACrE6Z,UAAW7Z,EAAK4Z,MAChBE,UAAW9Z,EAAK8Y,MAChBzY,YAAaL,EAAKK,gBAHdwZ,EADkC,EAClCA,UAAWC,EADuB,EACvBA,UAAWzZ,EADY,EACZA,YAMxB0Z,EAAiB,IAAIC,IAAI3Z,GACzBiZ,EAASR,GAASiB,EAAeE,IAAIH,IAAgBF,GAASG,EAAeE,IAAIJ,GACjFzZ,EAAQ0Y,GAASgB,GAAeF,GAASC,EAE/C,OACI,kBAAC,GAAD,CACIP,MAAOA,EACPlZ,KAAMA,EACN0Y,MAAOA,K,0xCCbnB,IAAMoB,GAA2B1a,IAAOC,IAAV,MAMxB0a,GAAqB3a,IAAOC,IAAV,MAOlB2a,GAAiB5a,IAAOC,IAAV,MAcd4a,GAAgB,SAAC,GAAY,IAAXxH,EAAU,EAAVA,EAAGH,EAAO,EAAPA,EACvB,OAAO8F,OAAO8B,aAAa,GAAKzH,IAAM,EAAIH,IAGxC6H,GAAY/a,IAAOC,IAAV,MAYT+a,GAAYhb,IAAOC,IAAV,MAQTgb,GAAajb,IAAOC,IAAV,MAUVib,GAAY5a,IAAMC,MAAK,YAAoC,IAAjCwT,EAAgC,EAAhCA,KAAMoH,EAA0B,EAA1BA,MAAOC,EAAmB,EAAnBA,aACzC1a,QAAQC,IAAI,aACZD,QAAQC,IAAIoT,GACZ,IAeIsH,EAAeC,EAfbC,EAAgBhK,GAAYwC,EAAKyH,UAAUtJ,OAC3CuJ,EAAY,CACdzJ,MAAO+B,EAAKyH,UAAUrJ,MACtBnD,MAAO,CACHC,MAAO,MACPW,OAAO,2BAAD,OAAsD,UAAzBmE,EAAKyH,UAAUrJ,MAAoB,QAAU,QAA1E,OAIRqJ,EACF,kBAAC,KAAYzM,SAAb,CAAsBlD,MAAO4P,GACzB,kBAACF,EAAD,OAMJG,EACA,yBAAK1M,MAAO,CAAEC,MAAO,SAoBzB,OAjBG8E,EAAK2H,UAAUxJ,QACdmJ,EAAgB9J,GAAYwC,EAAK2H,UAAUxJ,OAC3CoJ,EAAY,CACRtJ,MAAO+B,EAAK2H,UAAUvJ,MACtBnD,MAAO,CACHC,MAAO,MACPW,OAAO,2BAAD,OAAsD,UAAzBmE,EAAK2H,UAAUvJ,MAAoB,QAAU,QAA1E,OAGduJ,EACI,kBAAC,KAAY3M,SAAb,CAAsBlD,MAAOyP,GACzB,kBAACD,EAAD,QAOR,kBAACT,GAAD,KACI,kBAACK,GAAD,KACKE,EAAQ,GAEb,kBAACJ,GAAD,CAAWnZ,QAASwZ,GACfI,EACD,kBAACR,GAAD,KACKH,GAAc9G,EAAKiC,OAExB,kBAAC,KAAYjH,SAAb,CAAsBlD,MAAO,CAAEmD,MAAO,CAAEgD,MAAO,sBAC3C,kBAAC,KAAD,OAEJ,kBAACgJ,GAAD,KACKH,GAAc9G,EAAKkC,OAEvByF,OA4BFpb,OAAMC,MArBC,SAAC,GAAiC,IAA/Bob,EAA8B,EAA9BA,UAAWP,EAAmB,EAAnBA,aAC1BhN,EAAMC,mBAKZ,OAJAhH,qBAAU,WACN+G,EAAIG,QAAQ8J,UAAYjK,EAAIG,QAAQ+J,eACrC,CAACqD,IAGA,kBAACjB,GAAD,KACI,kBAACC,GAAD,CAAoBvM,IAAKA,GACpBuN,EAAUha,KAAI,SAACoS,EAAMoH,GAAP,OACX,kBAACD,GAAD,CACItZ,QAASwZ,EACTrH,KAAMA,EACNoH,MAAOA,YCxHhBS,GApBgB,WAAM,IAIzBD,EAAczU,aAAY,kBAAiB,CAC/CyU,UAD8B,EAAGpC,OACfoC,cADdA,UAIFP,EAAe9U,uBAAY,cAE9B,IAEH,OACI,kBAAC,GAAD,CACI8U,aAAgBA,EAChBO,UAAWA,K,kWChBvB,I,GAAME,GAAgB7b,IAAOC,IAAV,MAON,SAAA8B,GAAK,OAAkB,IAAbA,EAAM2W,KAAc,OACrC,SAAA3W,GAAK,OAAIA,EAAM2W,MAAQ,IAAOvW,YAArB,SAWA7B,OAAMC,MANJ,SAAC,GAAc,IAAZmY,EAAW,EAAXA,KAChB,OACI,kBAACmD,GAAD,CAAenD,KAAMA,O,YCoBnB1T,I,YAkBO8W,IApDX5W,GAAoB,2BACpBC,GAAuB,8BAChBC,GAAmBC,YAAaH,IAChCI,GAAsBD,YAAaF,IAOnC5B,GAAmB8B,YAJN,4BAIsC,SAAAR,GAAO,OAAIA,KAC9DrB,GAAkB6B,YANN,2BAMqC,SAAAR,GAAO,OAAIA,KAC5DpB,GAAc4B,YALN,uBAKiC,SAAAR,GAAO,OAAIA,KACpDnB,GAAc2B,YALN,uBAKiC,SAAAR,GAAO,OAAIA,KACpD2Q,GAAanQ,YALN,sBAOP0W,GAAmB,SAAA1Y,GAAM,OAAI,SAAEoB,EAAUuH,GAAe,IACzDuN,EAAWvN,IAAXuN,OACJyC,EAAS,eAAQzC,GACrBzQ,OAAOC,KAAK1F,GAAQ2F,SAAQ,SAAAvH,GACE,kBAAhB4B,EAAO5B,KACbua,EAAS,eACFA,EADE,eAEJva,EAFI,sBAGEua,EAAUva,IAHZ,CAID4B,EAAO5B,WAMvBgD,EAASf,GAAY,CAAE6V,OAAQyC,OAGnC,SAAUhX,GAAsBsG,GAAhC,2EAKuB,OAJb7J,EAAM6J,EAAOzG,QAEblB,EAHV,cAGyBlC,GAHzB,SAK6BoE,YAAKjD,GAAkB,CAC5CU,IAAK,UACLC,oBACAC,mBACAC,eACAC,YAAaqY,GACbpY,UAXR,OAcI,OATMmC,EALV,gBAcU7B,YAAKkB,IAdf,OAeI,OAfJ,SAeUY,YAAOD,GAfjB,wCAkBO,SAAUgW,KAAV,iEACH,OADG,SACG9V,YAAUd,GAAmBF,IADhC,wCAIP,IAAMuG,GAAe,CACjBtI,OAAQ,KACR8B,MAAO,KACPkX,UAAW,KACXC,QAAS,KACTzC,UAAW,KACXD,UAAW,KACX2C,aAAc,KACdC,aAAc,KACdC,WAAY,EACZC,WAAY,EACZX,UAAW,IAGA1V,gBAAa,kBAAC,GAhEH,4BAiED,SAACC,EAAD,OAAqBjD,EAArB,EAAU4B,QAAW5B,OAArB,sBACdiD,EADc,CAEjBjD,cAHoB,YAAC,GAjEJ,2BAsED,SAACiD,EAAD,WAAUrB,QAAoBpE,GAA9B,EAAqBiC,KAArB,+CACbwD,EADa,GAEbzF,MAPiB,YAAC,GA/DR,uBAwED,SAACyF,EAAD,WAAUrB,QAAoBpE,GAA9B,EAAqBiC,KAArB,+CACTwD,EADS,GAETzF,MAXiB,YAAC,GA9DR,uBA2ED,SAACyF,EAAD,OAAqBqT,EAArB,EAAU1U,QAAW0U,OAArB,sBACTA,MAdiB,YAAC,GA7DT,sBA6ED,SAAArT,GAAK,OAAIqF,MAhBA,IAiBzBA,ICrDYgR,GAjCW,SAAC,GAAsB,IAApBjD,EAAmB,EAAnBA,MAAOc,EAAY,EAAZA,MAAY,EAC0BlT,aAAY,gBAAGqS,EAAH,EAAGA,OAAQ/Y,EAAX,EAAWA,KAAX,MAAuB,CACrG6b,WAAY9C,EAAO8C,WACnBC,WAAY/C,EAAO+C,WACnBhC,UAAW9Z,EAAK8Y,MAChBe,UAAW7Z,EAAK4Z,MAChBvZ,YAAaL,EAAKK,gBALdwb,EADoC,EACpCA,WAAYC,EADwB,EACxBA,WAAYhC,EADY,EACZA,UAAWD,EADC,EACDA,UAAWxZ,EADV,EACUA,YAQhD4D,EAAW4B,cAEjBgB,qBAAU,WACN,OAAO,WACH5C,EAAS+Q,SAEd,CAAC/Q,IAEJ,IAAM8V,EAAiB,IAAIC,IAAI3Z,GAC3B6X,EAAO,EAQX,OANIY,GAASiB,EAAeE,IAAIH,IAAgBF,GAASG,EAAeE,IAAIJ,MACxE3B,EAAOY,EAAQ+C,EAAaC,GAGhC5D,EAAOtX,KAAKkP,IAAIoI,EAAM,GAGlB,kBAAC,GAAD,CACIA,KAAMA,K,unBC5BlB,IAAM8D,GAAgBxc,IAAOC,IAAV,MAWbwc,GAAczc,IAAOC,IAAV,MAaXiC,GAAc,CAChB8M,MAAO,CACHgD,MAAO,UACP/C,MAAO,MACPC,OAAQ,MACRwN,gBAAiB,gBA+BVpc,OAAMC,MA3BJ,WACb,OACI,kBAACic,GAAD,KACI,kBAACC,GAAD,KACI,kBAAC,KAAY1N,SAAb,CAAsBlD,MAAO3J,IACzB,kBAAC,KAAD,QAGR,kBAACua,GAAD,KACI,kBAAC,KAAY1N,SAAb,CAAsBlD,MAAO3J,IACzB,kBAAC,KAAD,QAGR,kBAACua,GAAD,KACI,kBAAC,KAAY1N,SAAb,CAAsBlD,MAAO3J,IACzB,kBAAC,KAAD,QAGR,kBAACua,GAAD,KACI,kBAAC,KAAY1N,SAAb,CAAsBlD,MAAO3J,IACzB,kBAAC,KAAD,YChDLya,GAPW,WAEtB,OACI,kBAAC,GAAD,O,0mBCAR,IAAMC,GAAY5c,IAAOC,IAAV,MAWTwc,GAAczc,IAAOC,IAAV,MAaXiC,GAAc,CAChB8M,MAAO,CACHgD,MAAO,UACP/C,MAAO,MACPC,OAAQ,MACRwN,gBAAiB,gBA+BVpc,OAAMC,MA3BR,WACT,OACI,kBAACqc,GAAD,KACI,kBAAC,GAAD,KACI,kBAAC,KAAY7N,SAAb,CAAsBlD,MAAO,CAAEmD,MAAM,eAAM9M,GAAY8M,MAAnB,CAA0BC,MAAO,MAAOC,OAAO,UAC/E,kBAAC,KAAD,QAGR,kBAAC,GAAD,KACI,kBAAC,KAAYH,SAAb,CAAsBlD,MAAO,CAAEmD,MAAM,eAAM9M,GAAY8M,MAAnB,CAA0BC,MAAO,MAAOC,OAAO,UAC/E,kBAAC,KAAD,QAGR,kBAAC,GAAD,KACI,kBAAC,KAAYH,SAAb,CAAsBlD,MAAO3J,IACzB,kBAAC,KAAD,QAGR,kBAAC,GAAD,KACI,kBAAC,KAAY6M,SAAb,CAAsBlD,MAAO3J,IACzB,kBAAC,KAAD,YClDL2a,GANO,WAClB,OACI,kBAAC,GAAD,O,kRCIR,IAAMC,GAAc9c,IAAOC,IAAV,MA0BFK,OAAMC,MAlBN,WACX,OACI,oCACI,kBAAC,GAAD,CAAgB6Z,OAAK,IACrB,kBAAC0C,GAAD,KACI,kBAAC,GAAD,CAAmB1C,OAAK,IACxB,kBAAC,GAAD,CAAiBA,OAAK,IACtB,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAiBd,OAAK,IACtB,kBAAC,GAAD,CAAmBA,OAAK,KAE5B,kBAAC,GAAD,CAAgBA,OAAK,QCpBlByD,GAPS,WAEpB,OACI,kBAAC,GAAD,O,knBCAR,I,GAAMC,GAAsBhd,IAAOC,IAAV,MASnBgd,GAAiB9a,YAAH,MAQd+a,GAAgBld,IAAOC,IAAV,KACbgd,IAIAE,GAAiBnd,IAAOC,IAAV,KACdgd,IAkBS3c,OAAMC,MAdE,WACnB,OACI,kBAACyc,GAAD,KACI,kBAACE,GAAD,KACI,kBAAC,GAAD,OAEJ,kBAAC,GAAD,MACA,kBAACC,GAAD,KACI,kBAAC,GAAD,W,YC1BNnY,I,YAgBOoY,IA1BXlY,GAAoB,yBACpBC,GAAuB,4BAChBC,GAAmBC,YAAaH,IAChCI,GAAsBD,YAAaF,IAInC5B,GAAmB8B,YADN,0BACsC,SAAAR,GAAO,OAAIA,KAC9DrB,GAAkB6B,YAHN,yBAGqC,SAAAR,GAAO,OAAIA,KAEzE,SAAUG,GAAsBsG,GAAhC,2EAKuB,OAJb7J,EAAM6J,EAAOzG,QAEblB,EAHV,cAGyBlC,GAHzB,SAK6BoE,YAAKjD,GAAkB,CAC5CU,IAAK,QACLC,oBACAC,mBACAG,UATR,OAYI,OAPMmC,EALV,gBAYU7B,YAAKkB,IAZf,OAaI,OAbJ,SAaUY,YAAOD,GAbjB,wCAgBO,SAAUsX,KAAV,iEACH,OADG,SACGpX,YAAUd,GAAmBF,IADhC,wCAIP,IAMeiB,gBAAa,kBAAC,GA9BH,0BA+BD,SAACC,EAAD,OAAqBjD,EAArB,EAAU4B,QAAW5B,OAArB,sBACdiD,EADc,CAEjBjD,cAHoB,YAAC,GA/BJ,yBAoCD,SAACiD,EAAD,WAAUrB,QAAoBpE,GAA9B,EAAqBiC,KAArB,+CACbwD,EADa,GAEbzF,MAPiB,IANP,CACjBwC,OAAQ,KACR8B,MAAO,KACPlE,YAAa,KCyBFwc,GA7CiB,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACzB7Y,EAAW4B,cAoBjBgB,qBAAU,WACN,OAAO,WACH5C,EAAS8Y,MACT9Y,EAAS+Y,MACT/Y,EAASgZ,MACThZ,EAASiZ,MACTjZ,EAASkZ,SAEd,CAAClZ,IA7BwC,MA+B5B4H,IA5BG,oBAAA3H,EAAAC,OAAA,kEAAAD,EAAA,MACTD,EAASuF,OADA,cAGfvF,EAAS8Y,MACT9Y,EAAS+Y,MACT/Y,EAASgZ,MACThZ,EAASiZ,MACTjZ,EAASkZ,MACTC,YAAW,WACPnZ,EAASoZ,GAAqBP,IAC9B7Y,EAASqZ,GAAqBR,IAC9B7Y,EAASsZ,GAAqBT,IAC9B7Y,EAASuZ,GAAuBV,IAChC7Y,EAASwZ,GAAuBX,MACjC,GAdY,mBAeR,GAfQ,uCA4BkB,CAAE7Y,EAAU6Y,IAA1CpX,EA/BqC,oBAiCpCiG,EAAyBjG,EAAzBiG,QAASrH,EAAgBoB,EAAhBpB,KAAMC,EAAUmB,EAAVnB,MAEvB,OAAGoH,EAAgB,KAChBpH,EAAc,KACdD,EAEK,kBAAC,GAAD,MAGD,MC/BIqB,gBAtBM,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,QAAS8X,EAAY,EAAZA,MAO7B,GANA7W,qBAAU,WACF6W,EAAM7a,OAAOH,IACbkD,EAAQ5E,KAAK,OAElB,CAAC4E,EAAS8X,KAETA,EAAM7a,OAAOH,GAAI,OAAO,KAPa,IAQjCA,EAAOgb,EAAM7a,OAAbH,GACR,OAAIA,EAGA,oCACI,kBAAC,IAAD,KACI,gEAEJ,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAyBoa,OAAQpa,KAR1B,Q,4KCbnB,IAAMib,GAAyBne,IAAOoe,GAAV,MAmBbC,GAXW,SAAC,GAAqC,IAAnCC,EAAkC,EAAlCA,MAAOxP,EAA2B,EAA3BA,MAAOyP,EAAoB,EAApBA,SAAU7F,EAAU,EAAVA,KACjD,OACI,kBAACyF,GAAD,KACI,4BAAKG,GACL,4BAAKxP,GACL,4BAAKyP,GACL,4BAAK7F,K,4nCCbjB,IAAM8F,GAAuBxe,IAAOC,IAAV,MASpBwe,GAAqBze,IAAO0e,KAAV,MAQlBC,GAAuB3e,IAAO4e,GAAV,MAUpBC,GAAe7e,IAAOC,IAAV,MASZ6e,GAAsB9e,IAAO+e,MAAV,MAMnBC,GAAsBhf,IAAOif,MAAV,MAyEVC,GAjES,WA2BpB,OACI,kBAACV,GAAD,KACI,kBAACC,GAAD,KACI,kBAACE,GAAD,iCAGA,kBAACE,GAAD,wBAGA,kBAACC,GAAD,KACI,kBAACE,GAAD,KACI,wBAAI9P,OAAO,QACP,wBAAID,MAAM,QAEV,4CAGA,4CAGA,qDA9CN,CACd,CACIqP,MAAO,+EACPxP,MAAO,IACPyP,SAAU,EACV7F,KAAM,wBAEV,CACI4F,MAAO,+EACPxP,MAAO,IACPyP,SAAU,EACV7F,KAAM,wBAEV,CACI4F,MAAO,+EACPxP,MAAO,IACPyP,SAAU,EACV7F,KAAM,wBAEV,CACI4F,MAAO,+EACPxP,MAAO,IACPyP,SAAU,GACV7F,KAAM,yBA4Ba/W,KAAI,SAAAwd,GAAQ,OACnB,kBAAC,GAAD,CAAmBb,MAAOa,EAASb,MAAOxP,MAAOqQ,EAASrQ,MAAOyP,SAAUY,EAASZ,SAAU7F,KAAMyG,EAASzG,WAGrH,kBAACmG,GAAD,2BCrGDO,GANkB,WAC7B,OACI,kBAAC,GAAD,OCcOC,GAbO,WAElB,OACI,oCACI,kBAAC,IAAD,KACI,iEAEJ,kBAAC,GAAD,MACA,kBAAC,GAAD,Q,oNCFZ,IAAMC,GAAetf,IAAOC,IAAV,MAoCHsf,GA1BH,WACV,OACE,oCACE,kBAAC,IAAD,KACE,gDAEF,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,UAAW3S,GAAU+D,KAAK,IAAI6O,OAAK,IAC1C,kBAAC,IAAD,CAAOD,UAAW1O,GAAWF,KAAK,SAAS6O,OAAK,IAChD,kBAAC,IAAD,CAAOD,UAAWvO,GAAcL,KAAK,YAAY6O,OAAK,IACtD,kBAAC,IAAD,CAAOD,UAAWlO,GAAUV,KAAK,QAAQ6O,OAAK,IAC9C,kBAAC,IAAD,CAAOD,UAAWE,GAAc9O,KAAK,YAAY6O,OAAK,IACtD,kBAAC,IAAD,CAAOD,UAAWH,GAAezO,KAAK,aAAa6O,OAAK,IACxD,kBAAC,IAAD,CACEE,OAAQ,cAAGC,SAAH,OACN,kBAACN,GAAD,KACE,yCACA,+H,YCnBGO,IAAV,SAAUA,KAAV,iEACH,OADG,SACGC,YAAI,CAAElW,KAAYwT,KAAYnY,KAAasQ,KAAcwB,KAAY+E,OADxE,wCAIQiE,OAdKC,0BAAgB,CAChCrX,QACAnI,QACAO,SACAmV,UACAsC,QACAe,YCJgB0G,QACW,cAA7BC,OAAON,SAASO,UAEe,UAA7BD,OAAON,SAASO,UAEhBD,OAAON,SAASO,SAASjC,MACvB,2DCDN,IAAMkC,GAAiBC,cACjBC,GAAQC,sBACVR,GACAS,8BAAoBC,0BAAgBC,IAAYN,MAGpDA,GAAeO,IAAId,IAEnB,WAAC,QAAAnb,EAAAC,OAAA,mDACSgE,EAAOU,GAAgB,QADhC,4EAAA3E,EAAA,MAOiC4b,GAAM7b,SAASyG,OAPhD,iBAQsB7C,WAAaM,EAAKN,SARxC,uBASWqB,KAEM,gBAXjB,0DAcOhJ,QAAQC,IAAI,qBAdnB,yDAAD,GAkBAigB,IAASjB,OACL,kBAAC,IAAD,CAAUW,MAAOA,IACb,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,kBAAC,GAAD,SAIXO,SAASC,eAAe,SD8EvB,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.a983ada0.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\n\nconst gridSize = 3;\n\nconst GridRowBlock = styled.div`\n    display: flex;\n    width: 85%;\n\n    & + & {\n        margin-top: 50px;\n    }\n\n    &:first-child {\n        margin-top: 50px;\n    }\n\n    &:last-child {\n        margin-bottom: 50px;\n    }\n`;\n\nconst GridBoxBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 24%;\n    height: 300px;\n    background-color: rgb(0,0,0, 0.4);\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.6);\n    cursor: pointer;\n    \n    & + & {\n        margin-left: 13%;\n    }\n\n    &:active {\n        background-color: rgb(0,0,0, 0.6);\n        box-shadow: 5px 5px 5px rgb(0,0,0,0.8);\n    }\n`\n\nconst BoxTitleBlock = styled.div`\n    \n`;\n\nconst BoxContentBlock = styled.div`\n    \n`;\n\nconst GridBox = React.memo(({ game, ...rest }) => {\n    console.dir('game~');\n    \n    return (\n        <GridBoxBlock {...rest}>\n            <BoxTitleBlock>\n                {game.name}\n            </BoxTitleBlock>\n            <BoxContentBlock>\n                {game.participant}\n            </BoxContentBlock>\n        </GridBoxBlock>\n    )\n});\n\nconst GridLayoutBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    height: 90%;\n    overflow-y: scroll;\n    background-color: rgb(0,0,0, 0.2);\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.4);\n`;\n\nconst GridLayout = ({ games, onGameClick }) => {\n\n    if(!games) return <GridLayoutBlock />;\n\n    const list = [ ...games ];\n    \n    const gridArr = [];\n    const rowSize = Math.floor(list.length / gridSize);\n    for(let i=0; i<=rowSize; ++i) {\n        gridArr.push(\n            <GridRowBlock\n                key={`GridRowBlock_${i}`}\n            >\n                {\n                    list.splice(0, gridSize).map(game => (\n                        <GridBox\n                            key={`GridBox${game.name}`}\n                            game={game}\n                            onClick={e => onGameClick(e, game.key)}\n                        />\n                    ))\n                }\n            </GridRowBlock>\n        );\n    }\n\n    return (\n        <GridLayoutBlock>\n            {gridArr}\n        </GridLayoutBlock>\n    )\n};\n\nexport default React.memo(GridLayout);","import React from 'react';\nimport GridLayout from '../../components/common/GridLayout';\n\nconst GridLayoutContainer = props => {\n\n    return (\n        <GridLayout {...props} />\n    )\n};\n\nexport default GridLayoutContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst SubmitFormBlock = styled.form`\n    display: flex;\n`;\n\nconst buttonStyle = css`\n    outline: none;\n    background-color: rgb(0,0,0, 0.2);\n    padding: 0px;\n    border: none;\n    width: 200px;\n    height: 30px;\n    cursor: pointer;\n    box-shadow: 5px 5px 5px rgb(0,0,0, 0.6);\n\n    &:hover {\n        background-color: rgb(0,0,0, 0.8);\n        color: white;\n        box-shadow: 5px 5px 5px rgb(0,0,0, 0.2);\n    }\n`\n\nconst ConfirmButtonBlock = styled.button`\n    ${buttonStyle}\n`;\n\nconst CancelButtonBlock = styled.button`\n    ${buttonStyle}\n    margin-left: 20px;\n`;\n\nconst SubmitForm = ({ onConfirmClick, onCancelClick }) => {\n    return (\n        <SubmitFormBlock onSubmit={onConfirmClick}>\n            <ConfirmButtonBlock type='submit'>\n                Create Game\n            </ConfirmButtonBlock>\n            <CancelButtonBlock\n                type='button'\n                onClick = {onCancelClick}\n            >\n                Cancel\n            </CancelButtonBlock>\n        </SubmitFormBlock>\n    )\n};\n\nexport default React.memo(SubmitForm);","import { eventChannel } from 'redux-saga';\nimport SocketIo from 'socket.io-client';\nimport { put, call, take, cancelled } from 'redux-saga/effects';\n\n// eslint-disable-next-line\nfunction* createEventChannel(io) {\n    return eventChannel(emit => {\n        io.on('connect', socket => {\n            emit({\n                type: 'socket',\n                socket: io.id\n            });\n        })\n\n        //  reconnect 전에 session연결을 위한 http call 추가 예정\n\n        io.on('message', message => {\n            emit(message)\n        });\n\n        return () => {\n            io.close();\n        }\n    })\n}\n\nexport function* connectNamespace(params) {\n    let channel;\n\n    const {\n        url,\n        initializeSocket,\n        initializeValue,\n        changeValue,\n        updateValue,\n        query,\n    } = params;\n\n    console.dir(url);\n    console.dir(query);\n    try {\n        const io = SocketIo(url, {\n            query,\n            reconnection: false,\n            secure: true,\n        });\n        \n        channel = yield call(createEventChannel, io);\n    \n        while(true) {\n            const message = yield take(channel);\n            switch(message.type) {\n                case 'socket':\n                    yield put(initializeSocket(message));\n                    break;\n                case 'initialize':\n                    yield put(initializeValue(message));\n                    break;\n                case 'change':\n                    yield put(changeValue(message));\n                    break;\n                case 'update':\n                    yield put(updateValue(message));\n                    break;\n                default:\n                    console.dir(message);\n            }\n        }\n    } catch(e) {\n        console.dir(e);\n    } finally {\n        if (yield cancelled()) {\n            channel.close();\n        }\n    }\n}","export const createRequestActionTypes = type => {\n    const SUCCESS = `${type}_SUCCESS`;\n    const FAILURE = `${type}_FAILURE`;\n    return [ type, SUCCESS, FAILURE ];\n};\n\nexport default function createRequestThunk (type, request) {\n    const SUCCESS = `${type}_SUCCESS`;\n    const FAILURE = `${type}_FAILURE`;\n    return params => async dispatch => {\n        try {\n            const response = await request(params);\n            dispatch({\n                type: SUCCESS,\n                payload: response.data,\n            });\n            return response.data;\n        } catch(e) {\n            console.dir(e);\n            dispatch({\n                type: FAILURE,\n                payload: e,\n                error: true,\n            });\n            throw e;\n        }\n    }\n};","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as gamesCtrl from '../lib/api/games';\n\nconst CONNECT_WEBSOCKET = 'games/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'games/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'games/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'games/INITIALIZE_SOCKET';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\n\nconst [ CREATE_GAME, CREATE_GAME_SUCCESS, CREATE_GAME_FAILURE ] = createRequestActionTypes('games/CREATE_GAME');\nexport const createGameThunk = createRequestThunk(CREATE_GAME, gamesCtrl.createGame);\n\nfunction* connectWebsocketSaga () {\n    const socketTask = yield fork(connectNamespace, { \n        url: '/games',\n        initializeSocket,\n        initializeValue,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* gamesSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    games: null,\n    error: null,\n}\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { games }}) => ({\n        ...state,\n        games,\n    }),\n    [CREATE_GAME_SUCCESS]: state => state,\n    [CREATE_GAME_FAILURE]: (state, { payload: error }) => ({\n        ...state,\n        error,\n    }),\n}, initialState);","import axios from 'axios';\n\n//  REST API 방식\n\nexport const createGame = () =>\n    axios.post('/api/games');","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport SubmitForm from '../../components/common/SubmitForm';\nimport { disconnectWebsocket, createGameThunk } from '../../modules/games';\n\nconst SubmitFormContainer = ({ history, onCancelClick, ...rest }) => {\n    const dispatch = useDispatch();\n\n    const onConfirmClick = useCallback(e => {\n        e.preventDefault();\n        (async() => {\n            dispatch(disconnectWebsocket());\n            const key = await dispatch(createGameThunk());\n            onCancelClick();\n            history.push(`/game/${key}`);\n        })();\n    }, [dispatch, history, onCancelClick]);\n\n    return (\n        <SubmitForm\n            {...rest}    \n            onConfirmClick={onConfirmClick}\n            onCancelClick={onCancelClick}    \n        />\n    )\n};\n\nexport default withRouter(SubmitFormContainer);","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport GridLayoutContainer from '../../containers/common/GridLayoutContainer';\nimport SubmitFormContainer from '../../containers/common/SubmitFormContainer';\n\nconst GamesModalBackgroundBlock = styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgb(0,0,0, 0.5);\n    z-index: 100;\n    opacity: 0;\n    visibility: hidden;\n    transition: 1s;\n\n    ${props => props.open && css`\n        opacity: 1;\n        visibility: visible;\n    `}\n`;\n\nconst GamesModalBlock = styled.div`\n    position: fixed;\n    top: 20%;\n    left: 20%;\n    height: 60%;\n    width: 60%;\n    padding: 2%;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    justify-content: space-between;\n    background-color: rgb(245,245,245, 0.8);\n    box-shadow: 10px 10px 10px;\n    z-index: 1000;\n`;\n\nconst GamesModal = ({ onBackgroundClick, onContentClick, onGameClick, games, ...rest }) => {\n    console.dir('game mooooodal')\n    return (\n        <GamesModalBackgroundBlock\n            {...rest}\n            onClick={onBackgroundClick}\n        >\n            <GamesModalBlock\n                onClick={onContentClick}\n            >\n                <GridLayoutContainer\n                    games={games}\n                    onGameClick={onGameClick}\n                />\n                <SubmitFormContainer\n                    onCancelClick={onBackgroundClick}\n                />\n            </GamesModalBlock>\n        </GamesModalBackgroundBlock>\n    )\n};\n\nexport default React.memo(GamesModal);","import React, { useState, useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport GamesModal from '../../components/modal/GamesModal';\nimport { disconnectWebsocket as disconnectGamesWebsocket } from '../../modules/games';\n    \nconst GamesModalContainer = ({ history, openModal, setOpenModal, ...rest }) => {\n    const [ modal, setModal ] = useState(false);\n    const { games } = useSelector(({ games }) => ({\n        games: games.games,\n    }));\n    const dispatch = useDispatch();\n\n    const onBackgroundClick = useCallback(e => {\n        setModal(false);\n        setOpenModal(false);\n        dispatch(disconnectGamesWebsocket());\n    }, [dispatch, setOpenModal])\n\n    const onContentClick = useCallback(e => {\n        e.stopPropagation();\n    }, [])\n\n    const onGameClick = useCallback((e, key) => {\n        setModal(false);\n        setOpenModal(false);\n        dispatch(disconnectGamesWebsocket());\n        history.push(`/game/${key}`);\n    }, [dispatch, history, setOpenModal]);\n\n    useEffect(() => {\n        setModal(openModal);\n    }, [openModal]);\n\n    console.dir('gamesmodal~~');\n    useEffect(() => {\n        return () => {\n            dispatch(disconnectGamesWebsocket());\n        }\n    }, [dispatch]);\n\n    return (\n        <>\n            <GamesModal\n                {...rest}\n                games={games}\n                open={modal}\n                onBackgroundClick={onBackgroundClick}\n                onContentClick={onContentClick}\n                onGameClick={onGameClick}\n            >\n            </GamesModal>\n        </>\n    )\n};\n\nexport default withRouter(GamesModalContainer);","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { Link } from 'react-router-dom';\n// import { GoSearch } from 'react-icons/go';\n// import { IconContext } from 'react-icons';\n\nimport GamesModalContainer from '../../containers/modal/GamesModalContainer';\n\nconst HeaderBlock = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 50px;\n`;\n\nconst titleStyle = css`\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n    height: 40px;\n    background-color: transparent;\n    cursor: pointer;\n    font-size: 30px;\n    text-decoration: none;\n    text-shadow: 2px 2px 2px rgb(0, 0, 0, 0.2);\n    font-style: italic;\n`;\n\nconst TitleBlock = styled(Link)`\n    ${titleStyle}\n    color: rgb(0, 0, 0, 0.6);\n`;\n\nconst TitleFadeBlock = styled(Link)`\n    ${titleStyle}\n    color: rgb(0, 0, 0, 0.4);\n`;\n\nconst ControllBlock = styled.div`\n    display: flex;\n    align-items: center;\n    margin-left: 8%;\n`;\n\nconst GroupBlock = styled.div`\n    margin-left: 30px;\n    display: flex;\n`;\n\nconst TabBlock = styled.div`\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n`;\n\nconst TabLinkBlock = styled(Link)`\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n    text-decoration: none;\n    \n    ${props => props.hidden && css`\n        display: none;\n        visibility: hidden;\n    `};\n`;\n\nconst Tab = props => {\n    if(props.to) {\n        return (\n            <TabLinkBlock {...props}>\n                {props.children}\n            </TabLinkBlock>\n        )\n    } else {\n        return (\n            <TabBlock {...props}>\n                {props.children}\n            </TabBlock>\n        )\n    }\n}\n\nconst AuthBlock = styled.div`\n    display: flex;\n    align-items: center;\n    margin-right: 8%;\n`;\n\nconst UserWelcomeBlock = styled.div`\n    position: absolute;\n    top: 10%;\n    left: 0%;\n    width: 100%;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.4);\n`\n\nconst Header = ({\n    onToggle,\n    openModal,\n    setOpenModal,\n    onRecord,\n    onLogout,\n    onLogin,\n    session,\n    auth\n}) => {\n    let username;\n    \n    if(session) {\n        username = session.nickname;\n    };\n\n    if(auth) {\n        username = auth.username;\n    };\n\n    return (\n        <>\n            <HeaderBlock>\n                <ControllBlock>\n                    <TitleBlock to='/'>\n                        chessup\n                    </TitleBlock>\n                    <TitleFadeBlock to='/'>\n                        .com\n                    </TitleFadeBlock>\n                    <GroupBlock>\n                        <Tab onClick={onToggle}>\n                            Quickplay\n                        </Tab>\n                        <Tab to='/game'>\n                            Play\n                        </Tab>\n                        <Tab to='/community'>\n                            Community\n                        </Tab>\n                    </GroupBlock>\n                </ControllBlock>\n                <AuthBlock>\n                    <Tab onClick={onRecord}>\n                        Search\n                    </Tab>\n                    {auth ? (\n                        <>\n                            <Tab onClick={onRecord}>\n                                Setting\n                            </Tab>\n                            <Tab onClick={onRecord}>\n                                Record\n                            </Tab>\n                            <Tab onClick={onLogout}>\n                                Logout\n                                <UserWelcomeBlock>\n                                    {username}\n                                </UserWelcomeBlock>\n                            </Tab>\n                        </>\n                    ):(\n                        <Tab onClick={onLogin}>\n                            Login\n                            <UserWelcomeBlock>\n                                {username}\n                            </UserWelcomeBlock>\n                        </Tab>\n                    )}\n                </AuthBlock>\n            </HeaderBlock>\n            <GamesModalContainer\n                openModal={openModal}\n                setOpenModal={setOpenModal}\n            />\n        </>\n    )\n};\n\nexport default React.memo(Header);","export const setLocalStorage = ({ ...rest }) => {\n    try {\n        Object.keys(rest).forEach(key => {\n            localStorage.setItem(key, JSON.stringify(rest[key]));\n        })\n    } catch(e) {\n        console.dir('Set localStorage failed');\n        console.dir(e);\n    }\n}\n\nexport const getLocalStorage = key => {\n    try {\n        return JSON.parse(localStorage.getItem(key));\n    } catch(e) {\n        console.dir('Get localStorage failed');\n        console.dir(e);\n    }   \n}\n\nexport const removeLocalStorage = key => {\n    try {\n        localStorage.removeItem(key);\n    } catch(e) {\n        console.dir('Remove localStorage failed');\n        console.dir(e);\n    }\n}\n\nexport const clearLocalStorage = () => {\n    try {\n        localStorage.clear();\n    } catch(e) {\n        console.dir('Clear localStorage failed');\n        console.dir(e);\n    }   \n};","import { createAction, handleActions } from 'redux-actions';\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\nimport produce from 'immer';\n\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as authAPI from '../lib/api/auth';\nimport { setLocalStorage, removeLocalStorage } from '../lib/storage/storage';\n\nconst CONNECT_WEBSOCKET = 'auth/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'auth/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_SOCKET = 'auth/INITIALIZE_SOCKET';\nconst INITIALIZE_VALUE = 'auth/INITIALIZE_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\n\nconst [ SET_SESSION, SET_SESSION_SUCCESS, SET_SESSION_FAILURE ] = createRequestActionTypes('auth/SET_SESSION');\nexport const setSessionThunk = createRequestThunk(SET_SESSION, authAPI.getSession);\n\nconst [ LOGIN, LOGIN_SUCCESS, LOGIN_FAILURE ] = createRequestActionTypes('auth/LOGIN');\nconst [ REGISTER, REGISTER_SUCCESS, REGISTER_FAILURE ] = createRequestActionTypes('auth/REGISTER');\nconst [ LOGOUT, LOGOUT_SUCCESS, LOGOUT_FAILURE ] = createRequestActionTypes('auth/LOGOUT');\nconst [ CHECK, CHECK_SUCCESS, CHECK_FAILURE ] = createRequestActionTypes('auth/CHECK');\nexport const loginThunk = createRequestThunk(LOGIN, authAPI.login);\nexport const registerThunk = createRequestThunk(REGISTER, authAPI.register);\nexport const logoutThunk = createRequestThunk(LOGOUT, authAPI.logout);\nexport const checkThunk = createRequestThunk(CHECK, authAPI.check);\n\nconst CHANGE_FIELD = 'auth/CHANGE_FIELD';\nconst CLEAR_FIELD = 'auth/CLEAR_FIELD';\nconst CLEAR_SPECIFIC_FIELD = 'auth/CLEAR_SPECIFIC_FIELD';\nexport const changeField = createAction(CHANGE_FIELD, payload => payload);\nexport const clearField = createAction(CLEAR_FIELD, payload => payload);\nexport const clearSpecificField = createAction(CLEAR_SPECIFIC_FIELD, payload => payload);\n\nexport const loginProcessThunk = param => async ( dispatch, getState ) => {\n    try {\n        const auth = await dispatch(loginThunk(param));\n        if(auth) {\n            setLocalStorage({ auth });\n        }\n    } catch(e) {\n        console.dir('Login failed');\n    }\n    \n}\n\nexport const registerProcessThunk = param => async ( dispatch, getState ) => {\n    try {\n        const auth = await dispatch(registerThunk(param));\n        if(auth) {\n            setLocalStorage({ auth });\n        }\n    } catch(e) {\n        console.dir('Register failed');\n    }\n    \n}\n\nexport const logoutProcessThunk = () => async( dispatch, getState ) => {\n    try {\n        await dispatch(logoutThunk());\n        removeLocalStorage('auth');\n    } catch(e) {\n        console.dir('Logout failed');\n    }\n}\n\nfunction* connectWebsocketSaga (action) {\n    const key = action.payload;\n        \n    const query = `key=${key}`;\n    \n    const socketTask = yield fork(connectNamespace, {\n        url: '/auth',\n        initializeSocket,\n        initializeValue,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* authSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\n//  session 정보와 socket정보가 혼재되어 있는 reducer\n//  tempAuth의 경우 key로 소켓마다 가지고 있는 정보\nconst initialState = {\n    socket: null,\n    tempAuth: null,\n    session: null,\n    error: null,\n    auth: null,\n    authError: null,\n    login: {\n        username: '',\n        password: '',\n    },\n    register: {\n        username: '',\n        password: '',\n        passwordConfirm: '',\n    }\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        tempAuth: { ...rest },\n    }),\n    [SET_SESSION_SUCCESS]: (state, { payload: session }) => ({\n        ...state,\n        session,\n    }),\n    [SET_SESSION_FAILURE]: (state, { payload: error }) => ({\n        ...state,\n        session: null,\n        error,\n    }),\n    [CHANGE_FIELD]: (state, { payload: { form, key, value } }) =>\n        produce(state, draft => {\n            draft[form][key] = value;\n        }),\n    [CLEAR_FIELD]: (state, { payload: { form } }) => ({\n        ...state,\n        [form]: initialState[form],\n        authError: initialState.authError,\n    }),\n    [CLEAR_SPECIFIC_FIELD]: (state, { payload: { form, key } }) => ({\n        ...state,\n        [form]: {\n            ...state[form],\n            [key]: initialState[form][key],\n        },\n        authError: initialState.authError,\n    }),\n    [LOGIN_SUCCESS]: (state, { payload : auth }) => ({\n        ...state,\n        auth,\n        authError: null,\n    }),\n    [LOGIN_FAILURE]: (state, { payload: authError }) => ({\n        ...state,\n        auth: null,\n        authError,\n    }),\n    [REGISTER_SUCCESS]: (state, { payload: auth }) => ({\n        ...state,\n        auth,\n        authError: null,\n    }),\n    [REGISTER_FAILURE]: (state, { payload: authError }) => ({\n        ...state,\n        auth: null,\n        authError,\n    }),\n    [LOGOUT_SUCCESS]: state => ({\n        ...state,\n        auth: null,\n        authError: null,\n    }),\n    [LOGOUT_FAILURE]: ( state, { payload: authError }) => ({\n        ...state,\n        auth: null,\n        authError,\n    }),\n    [CHECK_SUCCESS]: ( state, { payload: auth }) => ({\n        ...state,\n        auth,\n        authError: null,\n    }),\n    [CHECK_FAILURE]: ( state, { payload: authError }) => ({\n        ...state,\n        auth: null,\n        authError,\n    })\n}, initialState);","import axios from 'axios';\n\nexport const getSession = () =>\n    axios.get('/api/auth/getSession');\n\nexport const login = ({ username, password }) => \n    axios.post('/api/auth/login', ({ username, password }));\n\nexport const logout = () =>\n    axios.post('/api/auth/logout');\n\nexport const register = ({ username, password }) =>\n    axios.post('/api/auth/register', ({ username, password }));\n\nexport const check = () =>\n    axios.get('/api/auth/check');","import React, { useState, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Header from '../../components/common/Header';\nimport { connectWebsocket } from '../../modules/games';\nimport { logoutProcessThunk, clearField } from '../../modules/auth';\nimport { withRouter } from 'react-router-dom';\n\nconst HeaderContainer = ({ history }) => {\n    const { session, auth } = useSelector(({ auth }) => ({\n        session: auth.session,\n        auth: auth.auth,\n    }));\n    const dispatch = useDispatch();\n\n    const [ openModal, setOpenModal ] = useState(false);\n\n    const onToggle = useCallback(() => {\n        setOpenModal(true);\n        dispatch(connectWebsocket());\n    }, [dispatch]);\n\n    const onLogout = useCallback(() => {\n        dispatch(logoutProcessThunk());\n    }, [dispatch]);\n    \n    const onRecord = useCallback(() => {\n        alert('onRecord');\n    }, []);\n    \n    //  link 태그로 단순히 넘어갈 경우 dispatch전에 라우팅이 먼저 넘어가기 때문에\n    //  onClick으로 받아 dispatch를 마치고 routing이 넘어가도록 변경\n    const onLogin = useCallback(() => {\n        dispatch(clearField({ form: 'login' }));\n        history.push('/login');\n    }, [dispatch, history]);\n\n    return (\n        <Header\n            onToggle={onToggle}\n            openModal={openModal}\n            setOpenModal={setOpenModal}\n            onRecord={onRecord}\n            onLogout={onLogout}\n            onLogin={onLogin}\n            session={session}\n            auth={auth}\n        />\n    );\n};\n\nexport default withRouter(HeaderContainer);","import { useReducer, useEffect } from 'react';\n\nfunction reducer(state, action) {\n    switch (action.type) {\n        case 'LOADING':\n            return {\n                loading: true,\n                data: null,\n                error: null,\n            };\n        case 'SUCCESS':\n            return {\n                loading: false,\n                data: action.data,\n                error: null,\n            };\n        case 'FAILURE':\n            return {\n                loading: false,\n                data: null,\n                error: action.error,\n            };\n        default:\n            throw new Error('Unhandled action type Error')\n    }\n}\n\nfunction useAsync(callback, deps = []) {\n    const [ state, dispatch ] = useReducer(reducer, {\n        loading: false,\n        data: null,\n        error: false,\n    })\n\n    const fetchData = async () => {\n        dispatch({ type: 'LOADING' });\n        try {\n            const data = await callback();\n            dispatch({ type: 'SUCCESS', data });\n        } catch(e) {\n            dispatch({ type: 'FAILURE', error: e });\n        }\n    };\n\n    useEffect(() => {\n        fetchData();\n    // eslint-disable-next-line\n    }, deps);\n\n    return [state, fetchData];\n}\n\nexport default useAsync;","import React from 'react';\nimport styled from 'styled-components';\n\nconst MainLayoutBlock = styled.div`\n    width: 100%;\n    height: 800px;\n`;\n\nconst MainLayout = () => {\n    return (\n        <MainLayoutBlock>\n            \n        </MainLayoutBlock>\n    )\n};\n\nexport default MainLayout;","import React from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport useAsync from '../../lib/hook/useAsync';\nimport { setSessionThunk } from '../../modules/auth';\n\nimport MainLayout from '../../components/main/MainLayout';\n\nconst MainLayoutContainer = () => {\n    const dispatch = useDispatch();\n\n    const connection = async () => {\n        await dispatch(setSessionThunk());\n\n        return true;\n    };\n\n    const [state] = useAsync(connection, [ dispatch ]);\n\n    const { loading, data, error } = state;\n\n    if(loading) return null;\n    if(error) return null;\n    if(data) {\n        return (\n            <MainLayout />\n        )\n    }\n    return null;\n};\n\nexport default MainLayoutContainer;","import React from 'react';\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport MainLayoutContainer from '../containers/main/MainLayoutContainer';\n\nconst MainPage = () => {\n\n    return (\n        <>\n            <HeaderContainer />\n            <MainLayoutContainer />\n        </>\n    )\n};\n\nexport default MainPage;","import React, { useRef, useCallback } from 'react';\nimport styled, { css } from 'styled-components';\nimport { IoMdMail } from 'react-icons/io';\nimport { FaLock } from 'react-icons/fa';\nimport { IconContext } from 'react-icons';\n\nconst AuthFrameBlock = styled.form`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 800px;\n`;\n\nconst AuthFormBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 30%;\n    height: 400px;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst TitleBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    font-size: 20px;\n    height: 100px;\n    text-shadow: 2px 2px 2px rgba(0,0,0,0.14);\n`;\n\nconst InputFrameBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 150px;\n`;\n\nconst InputFormBlock = styled.div`\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding-left: 1%;\n    width: 60%;\n\n    &+& {\n        margin-top: 10px;\n    }\n\n    @keyframes blinking {\n        0%{\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        }\n        50% {\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.56), 0 3px 1px -2px rgba(0,0,0,0.8), 0 1px 5px 0 rgba(0,0,0,0.48);\n        }\n        100%{\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        }\n      }\n\n    ${props => props.blink && css`\n        animation: blinking 1s 2;\n    `}\n`\n\nconst inputStyle = css`\n    outline: none;\n    border: none;\n    height: 40px;\n    width: 80%;\n    padding-left: 5%;\n`;\n\nconst EmailInputBlock = styled.input`\n    ${inputStyle}\n`\n\nconst PasswordInputBlock = styled.input`\n    ${inputStyle}\n`;\n\nconst OptionFormBlock = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 10px;\n    width: 60%;\n    height: 20px;\n`;\n\nconst SaveInputFormBlock = styled.div`\n    display: flex;\n    align-content: center;\n    width: 30%;\n    height: 100%;\n`;\n\nconst SaveInputBlock = styled.input`\n    height: 100%;\n    outline: none;\n    margin: 0px;\n`;\n\nconst SaveInputTextBlock = styled.div`\n    display: flex;\n    align-items: center;\n    height: 100%;\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.5);\n    cursor: pointer;\n    margin-left: 5px;\n`;\n\nconst ForgetBlock = styled.div`\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.5);\n    cursor: pointer;\n`;\n\nconst SubmitFrameBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 150px;\n`;\n\nconst SubmitBlock = styled.button`\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    border: none;\n    outline: none;\n    width: 30%;\n    cursor: pointer;\n    height: 40px;\n\n    &:hover, :active {\n        background-color: rgb(0, 0, 0, 0.05);\n    }\n`;\n\nconst CreateFormBlock = styled.div`\n    display: flex;\n    align-items: center;\n    margin-top: 10px;\n    height: 40px;\n`;\n\nconst CreateBlock = styled.div`\n    color: rgb(0, 0, 0, 0.5);\n    font-size: 10px;\n`;\n\nconst CreateButtonBlock = styled.button`\n    outline: none;\n    border: none;\n    font-size: 10px;\n    color: black;\n    text-decoration: none;\n    cursor: pointer;\n    margin-left: 5px;\n`;\n\nconst ErrorBlock = styled.div`\n    position: absolute;\n    top: 0;\n    left: 48%;\n    width: 50%;\n    display: flex;\n    justify-content: flex-end;\n    font-size: 12px;\n    @keyframes fontOpacity {\n        0%{\n            color: rgb(0, 0, 0, 0);\n        }\n        100%{\n            color: rgb(0, 0, 0, 0.4);\n        }\n      }\n    animation: fontOpacity 1s 1;\n    color: rgb(0, 0, 0, 0.4);\n`\n\nconst AuthForm = ({ login, register, form, error, onSubmit, onChange, onRegister }) => {\n    const ref = useRef({});\n\n    const onClick = useCallback(tag => {\n        ref.current[tag].focus();\n    }, []);\n\n    return (\n        <AuthFrameBlock\n            autoComplete='off'\n            autoCorrect='off'\n            autoCapitalize='off'\n            spellCheck='false'\n            onSubmit={onSubmit}\n        >\n            <AuthFormBlock>\n                <TitleBlock>\n                    { login ? 'Sign In' : ( register ? 'Sign Up' : null ) }\n                </TitleBlock>\n                <InputFrameBlock>\n                    <InputFormBlock\n                        onClick={onClick.bind(null, 'username')}\n                        blink={error.username}\n                        key={`username_${error.count}`}\n                    >\n                        <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer'} }}>\n                            <IoMdMail />\n                        </IconContext.Provider>\n                        <EmailInputBlock\n                            type='text'\n                            name='username'\n                            placeholder='Email'\n                            onChange={onChange}\n                            value={form.username}\n                            ref={el => ref.current.username = el}\n                        />\n                        <ErrorBlock>\n                            {error.username}\n                        </ErrorBlock>\n                    </InputFormBlock>\n                    <InputFormBlock\n                        onClick={onClick.bind(null, 'password')}\n                        blink={error.password}\n                        key={`password_${error.count}`}\n                    >\n                        <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer' } }}>\n                            <FaLock />\n                        </IconContext.Provider>\n                        <PasswordInputBlock\n                            type='password'\n                            name='password'\n                            placeholder='Password'\n                            onChange={onChange}\n                            value={form.password}\n                            ref={el => ref.current.password = el}\n                        />\n                        <ErrorBlock>\n                            {error.password}\n                        </ErrorBlock>\n                    </InputFormBlock>\n                    {register ? (\n                        <InputFormBlock\n                            onClick={onClick.bind(null, 'passwordConfirm')}\n                            blink={error.passwordConfirm}\n                            key={`passwordConfirm_${error.count}`}\n                        >\n                            <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer' } }}>\n                                <FaLock />\n                            </IconContext.Provider>\n                            <PasswordInputBlock\n                                type='password'\n                                name='passwordConfirm'\n                                placeholder='Confirm Password'\n                                onChange={onChange}\n                                value={form.passwordConfirm}\n                                ref={el => ref.current.passwordConfirm = el}\n                            />\n                            <ErrorBlock>\n                                {error.passwordConfirm}\n                            </ErrorBlock>\n                        </InputFormBlock>\n                    ): null}\n                    {login ? (\n                        <OptionFormBlock>\n                            <SaveInputFormBlock>\n                                <SaveInputBlock\n                                    type='checkbox'\n                                />\n                                <SaveInputTextBlock>\n                                    Remember Me\n                                </SaveInputTextBlock>\n                            </SaveInputFormBlock>\n                            <ForgetBlock>\n                                Forget password?    \n                            </ForgetBlock>\n                        </OptionFormBlock>\n                    ): null}\n                </InputFrameBlock>\n                <SubmitFrameBlock>\n                    <SubmitBlock\n                        type='submit'\n                    >\n                        Submit\n                    </SubmitBlock>\n                    {login ? (\n                        <CreateFormBlock>\n                            <CreateBlock>\n                                Don't have an account?\n                            </CreateBlock>\n                            <CreateButtonBlock\n                                type='button'\n                                onClick={onRegister}\n                            >\n                                Create\n                            </CreateButtonBlock>\n                        </CreateFormBlock>\n                    ) : (\n                        <CreateFormBlock>\n                            <CreateBlock>\n                                Don't have an account?\n                            </CreateBlock>\n                            <CreateButtonBlock\n                                type='button'\n                            >\n                                Create\n                            </CreateButtonBlock>\n                        </CreateFormBlock>\n                    )}\n                </SubmitFrameBlock>\n            </AuthFormBlock>\n        </AuthFrameBlock>\n    )\n};\n\nexport default React.memo(AuthForm);","import React, { useCallback, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport Joi from 'joi';\nimport { loginProcessThunk, changeField, clearField, clearSpecificField } from '../../modules/auth';\nimport AuthForm from '../../components/auth/AuthForm';\n\nconst LoginContainer = ({ history }) => {\n    const { form, auth, authError } = useSelector(({ auth }) => ({\n        form: auth.login,\n        auth: auth.auth,\n        authError: auth.authError,\n    }));\n\n    const dispatch = useDispatch();\n\n    const [ error, setError ] = useState({\n        username: '',\n        password: ''\n    });\n\n    const onChange = useCallback(e => {\n        const { name, value } = e.target;\n        if(error[name] !== '') {\n            setError(prevState => ({\n                ...prevState,\n                [name]: '',\n            }));\n        }\n        dispatch(changeField({\n            form: 'login',\n            key: name,\n            value,\n        }));\n    }, [dispatch, error]);\n\n    const onSubmit = useCallback(e => {\n        e.preventDefault();\n        const { username, password } = form;\n\n        //  initialize\n        let nextError = Object.keys(form)\n            .reduce((acc, key) =>\n                ({\n                    ...acc,\n                    [key]: false,\n                }),{});\n\n        //  empty check\n        Object.keys(nextError)\n            .filter(key => form[key] === '')\n            .forEach(key => {\n                nextError = {\n                    ...nextError,\n                    [key]: 'Required field'\n                }\n            });\n\n        const schema = Joi.object().keys({\n            username: Joi.string().max(80).email({ minDomainAtoms: 2 }).required().error(() => ({ message: 'Wrong format' })),\n            password: Joi.string().min(4).max(16).required().error(() => ({ message: '4 ~ 16 digits' })),\n        });\n\n        const result = Joi.validate(form, schema, { abortEarly: false });\n\n        if(result.error) {\n            result.error.details.forEach(detail => {\n                if(!nextError[detail.path[0]]) {\n                    nextError = {\n                        ...nextError,\n                        [detail.path[0]]: detail.message,\n                    }\n                }\n            });\n        }\n\n        if(Object.keys(nextError).filter(key => nextError[key]).length > 0) {\n            setError(prevState => ({\n                ...nextError,\n                count: prevState.count + 1,\n            }));\n            Object.keys(nextError).forEach(key => {\n\n                if(nextError[key]) {\n                    dispatch(clearSpecificField({ form: 'login', key }))\n                }\n            });\n\n            return;\n        };\n\n        dispatch(loginProcessThunk({ username, password }));\n        dispatch(clearField({ form: 'login' }));\n    }, [dispatch, form]);\n\n    useEffect(() => {\n        if(authError) {\n            let nextError = {};\n            const errorMention = authError.response.data;\n            Object.keys(errorMention).forEach(key => {\n                nextError = {\n                    ...nextError,\n                    [key]: errorMention[key],\n                }\n                // dispatch(clearSpecificField({ form: 'login', key }))\n            });\n\n            setError(nextError);\n            \n            return;\n        };\n\n        if(auth) {\n            history.push('/');\n        }\n    }, [history, auth, authError]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearField({ form: 'login' }));\n        }\n    }, [dispatch]);\n\n    const onRegister = useCallback(() => {\n        dispatch(clearField({ form: 'register' }));\n        history.push('/register');\n    }, [dispatch, history]);\n    \n    return (\n        <AuthForm\n            login\n            onSubmit={onSubmit}\n            onChange={onChange}\n            form={form}\n            error={error}\n            onRegister={onRegister}\n        />\n    )\n};\n\nexport default withRouter(LoginContainer);","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport LoginContainer from '../containers/auth/LoginContainer';\n\nconst LoginPage = () => {\n    return (\n        <>\n            <Helmet>\n                <title>Sign In • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <LoginContainer />\n        </>\n    )\n};\n\nexport default LoginPage;","import React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport Joi from 'joi';\nimport AuthForm from '../../components/auth/AuthForm';\nimport { registerProcessThunk, changeField, clearField, clearSpecificField } from '../../modules/auth';\n\nconst RegisterContainer = ({ history }) => {\n    const { form, auth, authError } = useSelector(({ auth }) => ({\n        form: auth.register,\n        auth: auth.auth,\n        authError: auth.authError,\n    }));\n\n    const dispatch = useDispatch();\n\n    const [ error, setError ] = useState({\n        username: '',\n        password: '',\n        passwordConfirm: ''\n    })\n\n    const onChange = useCallback(e => {\n        const { name, value } = e.target;\n        if(error[name] !== '') {\n            setError(prevState => ({\n                ...prevState,\n                [name]: '',\n            }));\n        }\n        dispatch(changeField({\n            form: 'register',\n            key: name,\n            value,\n        }));\n    }, [dispatch, error]);\n\n    const onSubmit = useCallback(e => {\n        e.preventDefault();\n        const { username, password } = form;\n\n         //  initialize\n         let nextError = Object.keys(form)\n         .reduce((acc, key) =>\n             ({\n                 ...acc,\n                 [key]: false,\n             }),{});\n\n        //  empty check\n        Object.keys(nextError)\n            .filter(key => form[key] === '')\n            .forEach(key => {\n                nextError = {\n                    ...nextError,\n                    [key]: 'Required field'\n                }\n            });\n\n        const schema = Joi.object().keys({\n            username: Joi.string().max(80).email({ minDomainAtoms: 2 }).required().error(() => ({ message: 'Wrong format' })),\n            password: Joi.string().min(4).max(16).required().error(() => ({ message: '4 ~ 16 digits' })),\n            passwordConfirm: Joi.any().valid(Joi.ref('password')).required().error(() => ({ message: 'Password mismatch' })),\n        });\n\n        const result = Joi.validate(form, schema, { abortEarly: false });\n\n        if(result.error) {\n            result.error.details.forEach(detail => {\n                if(!nextError[detail.path[0]]) {\n                    nextError = {\n                        ...nextError,\n                        [detail.path[0]]: detail.message,\n                    }\n                }\n            });\n        }\n\n        if(Object.keys(nextError).filter(key => nextError[key]).length > 0) {\n            setError(prevState => ({\n                ...nextError,\n                count: prevState.count + 1,\n            }));\n            Object.keys(nextError).forEach(key => {\n                if(nextError[key]) {\n                    dispatch(clearSpecificField({ form: 'register', key }))\n                }\n            });\n\n            return;\n        };\n\n        dispatch(registerProcessThunk({ username, password }));\n        dispatch(clearField({ form: 'register' }));\n    }, [dispatch, form]);\n\n    useEffect(() => {\n        if(authError) {\n            let nextError = {};\n            const errorMention = authError.response.data;\n            Object.keys(errorMention).forEach(key => {\n                nextError = {\n                    ...nextError,\n                    [key]: errorMention[key],\n                }\n                // dispatch(clearSpecificField({ form: 'register', key }))\n            });\n\n            setError(nextError);\n            \n            return;\n        }\n\n        if(auth) {\n            history.push('/');\n        }\n    }, [history, auth, authError])\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearField({ form: 'register' }));\n        };\n    }, [dispatch]);\n\n    return (\n        <AuthForm \n            register\n            onSubmit={onSubmit}\n            onChange={onChange}\n            form={form}\n            error={error}\n        />\n    )\n};\n\nexport default withRouter(RegisterContainer);","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport RegisterContainer from '../containers/auth/RegisterContainer';\n\nconst RegisterPage = () => {\n\n    return (\n        <>\n            <Helmet>\n                <title>Sign Up • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <RegisterContainer />\n        </>\n    )\n};\n\nexport default RegisterPage;","import React from 'react';\nimport styled from 'styled-components';\n\nconst GridLayoutBlock = styled.div`\n    width: 720px;\n    height: 720px;\n    background-color: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst GridLayout = ({ games, onGameClick }) => {\n    \n    return (\n        <GridLayoutBlock>\n\n        </GridLayoutBlock>\n    )\n};\n\nexport default React.memo(GridLayout);","import React from 'react';\nimport GridLayout from '../../components/game/GridLayout';\n\nconst GridLayoutContainer = () => {\n    return (\n        <GridLayout />\n    )\n};\n\nexport default GridLayoutContainer;","import React from 'react';\n\nconst Summary = () => {\n    return (\n        <>\n        </>\n    )\n};\n\nexport default React.memo(Summary);","import React from 'react';\nimport Summary from '../../components/game/Summary';\n\nconst SummaryContainer = () => {\n    return (\n        <Summary />\n    )\n};\n\nexport default SummaryContainer;","import React from 'react';\n\nconst Creation = () => {\n    return (\n        <>\n        </>\n    )\n};\n\nexport default React.memo(Creation);","import React from 'react';\nimport Creation from '../../components/game/Creation';\n\nconst CreationContainer = () => {\n    return (\n        <Creation />\n    )\n};\n\nexport default CreationContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nimport GridLayoutContainer from '../../containers/game/GridLayoutContainer';\nimport SummaryContainer from '../../containers/game/SummaryContainer';\nimport CreationContainer from '../../containers/game/CreationContainer';\n\nconst GameLayoutBlock = styled.div`\n    height: 800px;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst GameLayout = () => {\n    return (\n        <>\n            <GameLayoutBlock>\n                <SummaryContainer />\n                <GridLayoutContainer />\n                <CreationContainer />\n            </GameLayoutBlock>          \n        </>\n    )\n};\n\nexport default React.memo(GameLayout);","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport GameLayout from '../../components/game/GameLayout';\n\nconst GameLayoutContainer = () => {\n    const {  } = useSelector(({  }) => ({\n\n    }));\n\n    return (\n        <GameLayout />\n    )\n};\n\nexport default GameLayoutContainer;","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nimport GameLayoutContainer from '../containers/game/GameLayoutContainer';\nimport HeaderContainer from '../containers/common/HeaderContainer';\n\nconst GamePage = () => {\n    return (\n        <>\n            <Helmet>\n                <title>Game • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <GameLayoutContainer />\n        </>\n    )\n};\n\nexport default GamePage;","import { GiChessPawn, GiChessKing, GiChessQueen,\n    GiChessBishop, GiChessKnight, GiChessRook, GiPlainCircle } from 'react-icons/gi';\n\nexport const pieceMapper = {\n    'pawn': GiChessPawn,\n    'king': GiChessKing,\n    'queen': GiChessQueen,\n    'bishop': GiChessBishop,\n    'knight': GiChessKnight,\n    'rook': GiChessRook,\n    'covered': GiPlainCircle,\n}\n\nexport const playerMapper = {\n    'white': {\n        color: 'white',\n        style: {\n            filter: `drop-shadow(1px 1px 1px white)`,\n            width: '80%',\n            height: '80%',\n        }\n    },\n    'black': {\n        color: 'black',\n        style: {\n            filter: `drop-shadow(1px 1px 1px black)`,\n            width: '80%',\n            height: '80%',\n        }\n    },\n    'covered0': {\n        style: {\n            filter: `drop-shadow(1px 1px 1px black)`,\n            width: '30%',\n            height: '30%',\n            color: 'rgb(130, 151, 105)',\n            \n        }\n    },\n    'covered1': {\n        style: {\n            filter: `drop-shadow(1px 1px 1px black)`,\n            width: '30%',\n            height: '30%',\n            color: 'rgb(100, 111, 64)',\n        }\n    }\n}","import React, {useCallback} from 'react';\nimport styled, { css } from 'styled-components';\nimport { IconContext } from 'react-icons';\nimport { pieceMapper, playerMapper } from '../../lib/base/pieceConverter';\n\nconst pieceConverter = ({ piece, owner, covered, cellNum }) => {\n    let coveredCanvas = null;\n    \n    if(covered) {\n        const Component = pieceMapper['covered'];\n\n        coveredCanvas = (\n            <IconContext.Provider value={playerMapper[`covered${cellNum}`]}>\n                <Component />\n            </IconContext.Provider>\n        );\n    }\n\n    if(!piece || !owner) {\n        return coveredCanvas;\n    }\n\n    const Component = pieceMapper[piece];\n    const capturedObject = coveredCanvas ? {\n        opacity: 0.5,\n        filter: owner === 'black' ? `drop-shadow(1px 1px 1px white)` : `drop-shadow(1px 1px 1px black)`,\n    } : null;\n\n    const styleObject = {\n        ...playerMapper[owner],\n        style: {\n            ...playerMapper[owner].style,\n            ...capturedObject,\n        }\n    };\n\n    return (\n        <IconContext.Provider value={styleObject}>\n            <Component />\n        </IconContext.Provider>\n    )\n};\n\nconst CanvasBlock = styled.div`\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst CanvasRowBlock = styled.div`\n    display: flex;\n`;\n\nconst CanvasCellBlock = styled.div`\n    display: flex;\n    cursor: pointer;\n    justify-content: center;\n    align-items: center;\n    width: 90px;\n    height: 90px;\n\n    ${props => props.cellNum === 0 && css`\n        background-color: rgb(240, 217, 181);\n    `}\n\n    ${props => props.cellNum === 1 && css`\n        background-color: rgb(181, 136, 99);\n    `}\n\n    ${props => props.cellNum === 0 && props.clicked && css`\n        background-color: rgb(130, 151, 105);\n    `}\n\n    ${props => props.cellNum === 1 && props.clicked && css`\n        background-color: rgb(100, 111, 64);\n    `}\n\n    ${props => props.cellNum === 0 && props.tracked && css`\n        background-color: rgb(205, 210, 106);\n    `}\n\n    ${props => props.cellNum === 1 && props.tracked && css`\n        background-color: rgb(170, 162, 58);\n    `}\n\n    &:hover {\n        ${props => props.cellNum === 0 && props.covered && css`\n            background-color: rgb(174, 177, 135);\n        `}\n\n        ${props => props.cellNum === 1 && props.covered && css`\n            background-color: rgb(132, 121, 78);\n        `}  \n    }\n`\n\nconst CanvasRow = React.memo(({ row, y, onClickCell, pieceConverter }) => {\n    // console.dir('Canvas Row');\n    return (\n        <CanvasRowBlock>\n            {row.map((cell, x) => (\n                <CanvasCell\n                    key={`cell_${y}_${x}`}\n                    onClick={onClickCell.bind(null, {y, x})}\n                    pieceConverter={pieceConverter}\n                    cellNum={(x + y) % 2}\n                    cell={cell}\n                />\n            ))}\n        </CanvasRowBlock>\n    )\n}, (prevProps, nextProps) => {\n    return prevProps.row === nextProps.row;\n});\n\nconst CanvasCell = React.memo(({ cell, onClick, cellNum, pieceConverter }) => {\n    // console.dir('Canvas Cell')\n    return (\n        <CanvasCellBlock\n            onClick={onClick}\n            cellNum={cellNum}\n            {...cell}\n        >\n            {pieceConverter({\n                piece: cell.piece,\n                owner: cell.owner,\n                covered: cell.covered,\n                cellNum,\n            })}\n        </CanvasCellBlock>\n    )\n}, (prevProps, nextProps) => {\n    return prevProps.cell === nextProps.cell;\n});\n\nconst CanvasContentBlock = styled.div`\n    ${props => props.blocked && css`\n        pointer-events: none;\n    `}\n`;\n\nconst CanvasContent = ({ board, blocked, onClick }) => {\n    //  can't memoization\n    const onClickCell = useCallback(({y, x}) => {\n        onClick(y, x);\n    }, [onClick]);\n    \n    return  (\n        <CanvasContentBlock blocked={blocked}>\n            {board.map((row, y) => (\n                <CanvasRow\n                    key={`row_${y}`}\n                    row={row}\n                    y={y}\n                    onClickCell={onClickCell}\n                    pieceConverter={pieceConverter}\n                />\n            ))}\n        </ CanvasContentBlock>\n    )\n}\n\nconst Canvas = props => {\n    return (\n        <CanvasBlock>\n            <CanvasContent {...props} />\n        </CanvasBlock>\n    )\n};\n\nexport default React.memo(Canvas);","const board = [\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n];\n\nexport default board;","import { checkPlayersEveryMove } from './validation';\n\nconst rules = {\n    pawn: {\n        type: 'onetime',\n        move: [\n            {\n                dy: -1,\n                dx: 0,\n                except: function(props) {\n                    const { board, dy, dx } = props;\n                    if(board[dy][dx].piece) {\n                        return false;\n                    }\n                    return true;\n                }\n            },\n            {\n                dy: -2,\n                dx: 0,\n                except: function(props) {\n                    const { board, y, x, owner } = props;\n                    if((owner === 'black' && y !== 1) || (owner === 'white' && y !== 6)) return false;\n                    if((owner === 'black' && board[2][x].piece) || (owner === 'white' && board[5][x].piece)) return false;\n                    if((owner === 'black' && board[3][x].piece) || (owner === 'white' && board[4][x].piece)) return false;\n                    return true;\n                }\n            },\n            {\n                dy: -1,\n                dx: -1,\n                except: function(props) {\n                    const { board, dy, dx } = props;\n                    if(board[dy][dx].piece) {\n                        return true;\n                    }\n                    return false;\n                }\n            },\n            {\n                dy: -1,\n                dx: 1,\n                except: function(props) {\n                    const { board, dy, dx } = props;\n                    if(board[dy][dx].piece) {\n                        return true;\n                    }\n                    return false;\n                }\n            }\n        ],\n    },\n    knight: {\n        type: 'onetime',\n        move: [\n            {\n                dy: -2,\n                dx: -1,\n            },\n            {\n                dy: -2,\n                dx: 1,\n            },\n            {\n                dy: 2,\n                dx: -1,\n            },\n            {\n                dy: 2,\n                dx: 1,\n            },\n            {\n                dy: -1,\n                dx: -2,\n            },\n            {\n                dy: -1,\n                dx: 2,\n            },\n            {\n                dy: 1,\n                dx: -2,\n            },\n            {\n                dy: 1,\n                dx: 2,\n            },\n        ]\n    },\n    king: {\n        type: 'onetime',\n        move: [\n            {\n                dy: 1,\n                dx: 0\n            },\n            {\n                dy: -1,\n                dx: 0\n            },\n            {\n                dy: 0,\n                dx: 1\n            },\n            {\n                dy: 0,\n                dx: -1\n            },\n            {\n                dy: -1,\n                dx: 1\n            },\n            {\n                dy: -1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: 1\n            },\n            {\n                dy: 0,\n                dx: 2,\n                except: function(props) {\n                    const { board, y, x, owner } = props;\n                    const enemy = (owner === 'white') ? 'black' : 'white';\n\n                   //  king dirty check\n                    if(!board[y][x].piece || board[y][x].dirty) {\n                        return false;\n                    }\n\n                    //  rook dirty check\n                    if(!board[y][x+3].piece || board[y][x+3].dirty) {\n                        return false;\n                    }\n\n                    //  check path is empty\n                    if(board[y][x+1].piece || board[y][x+2].piece) {\n                        return false;\n                    }\n\n                    //  is king & path safe?, prevent castling loop by flag\n                    const coveredAxisBundle = checkPlayersEveryMove(enemy, board, true);\n                    const length = coveredAxisBundle.length;\n                    for(let i=0; i<length; ++i) {\n                        const axis = coveredAxisBundle[i];\n                        if(axis.dy === y && (axis.dx === x || axis.dx === x+1 || axis.dx === x+2)) {\n                            return false;\n                        }\n                    }\n\n\n                    return true;\n                },             \n            },\n            {\n                dy: 0,\n                dx: -2,\n                except: function(props) {\n                    const { board, y, x, owner } = props;\n                    const enemy = (owner === 'white') ? 'black' : 'white';\n                    \n                    //  king dirty check\n                    if(!board[y][x].piece || board[y][x].dirty) {\n                        return false;\n                    }\n\n                    //  rook dirty check\n                    if(!board[y][x-4].piece || board[y][x-4].dirty) {\n                        return false;\n                    }\n\n                    //  check path is empty\n                    if(board[y][x-1].piece || board[y][x-2].piece || board[y][x-3].piece ) {\n                        return false;\n                    }\n\n                    //  is king & path safe?, prevent castling loop by flag\n                    const coveredAxisBundle = checkPlayersEveryMove(enemy, board, true);\n                    const length = coveredAxisBundle.length;\n                    for(let i=0; i<length; ++i) {\n                        const axis = coveredAxisBundle[i];\n                        if(axis.dy === y && (axis.dx === x || axis.dx === x-1 || axis.dx === x-2)) {\n                            return false;\n                        }\n                    }\n\n                    return true;\n                },             \n            }\n        ]\n    },\n    bishop: {\n        type: 'multitime',\n        move: [\n            {\n                dy: 1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: 1\n            },\n            {\n                dy: -1,\n                dx: -1\n            },\n            {\n                dy: -1,\n                dx: 1\n            },\n        ]\n    },\n    rook: {\n        type: 'multitime',\n        move: [\n            {\n                dy: 1,\n                dx: 0\n            },\n            {\n                dy: -1,\n                dx: 0\n            },\n            {\n                dy: 0,\n                dx: -1,\n            },\n            {\n                dy: 0,\n                dx: 1\n            },\n        ]\n    },\n    queen: {\n        type: 'multitime',\n        move: [\n            {\n                dy: 1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: 1\n            },\n            {\n                dy: -1,\n                dx: -1\n            },\n            {\n                dy: -1,\n                dx: 1\n            },\n            {\n                dy: 1,\n                dx: 0\n            },\n            {\n                dy: -1,\n                dx: 0\n            },\n            {\n                dy: 0,\n                dx: -1,\n            },\n            {\n                dy: 0,\n                dx: 1\n            },\n        ]\n    }\n};\n\nexport default rules;","import _ from 'lodash';\n\nimport rules from './rules';\nimport { genBoard } from './genBoard';\n\nexport const findKingLocation = (player, board) => {\n    for(let i=0; i<8; ++i) {\n        for(let j=0; j<8; ++j) {\n            if(board[i][j].owner === player && board[i][j].piece === 'king') {\n                return {\n                    y: i,\n                    x: j,\n                };\n            };\n        }\n    }\n}\n\nexport const checkPlayersEveryMove = (player, board, castling) => {\n    let coveredAxisBundle = [];\n    for(let i=0; i<8; ++i) {\n        for(let j=0; j<8; ++j) {\n            if(board[i][j].owner === player) {\n                const coveredAxis = checkCovered(board, i, j, castling);\n                coveredAxisBundle = [ ...coveredAxisBundle, ...coveredAxis ];\n            }\n        }\n    };\n\n    return coveredAxisBundle;\n};\n\nexport const checkSafeMove = (player, board) => {\n    const enemy = player === 'white' ? 'black' : 'white';\n    const clonedBoard = _.cloneDeep(board);\n\n    const playerKing = findKingLocation(player, clonedBoard);\n    const coveredAxisBundle = checkPlayersEveryMove(enemy, clonedBoard);\n\n    coveredAxisBundle.forEach(axis => {\n        clonedBoard[axis.dy][axis.dx] = {\n            ...clonedBoard[axis.dy][axis.dx],\n            movable: true,\n        }\n    });\n\n    //  is king in danger?\n    if(clonedBoard[playerKing.y][playerKing.x].movable) {\n        return false;\n    }\n\n    return true;\n};\n\nexport const checkCheckmate = (player, board) => {\n\n    for(let i=0; i<8; ++i) {\n        for(let j=0; j<8; ++j) {\n            if(board[i][j].owner === player) {\n                const coveredAxis = checkCovered(board, i, j);\n                const length = coveredAxis.length;\n                for(let k=0; k<length; ++k) {\n                    const tempBoard = genBoard(board, { y: i, x: j }, { y: coveredAxis[k].dy, x: coveredAxis[k].dx })\n                    if(checkSafeMove(player, tempBoard)) {\n                        return false;\n                    };\n                }\n            }\n        }\n    };\n\n    return true;\n}\n\nexport const checkCovered = (board, y, x, castling) => {\n    const { piece, owner } = board[y][x];\n    let inform = { board, y, x, owner };\n    if(!piece) return;\n\n    const { type, move }= rules[piece];\n    let coveredAxis = [];\n\n    if(type === 'onetime') {\n        coveredAxis = move.reduce((acc, cur) => {\n            const dy = y + (owner === 'black' ? -cur.dy: +cur.dy);\n            const dx = x + cur.dx;\n            if(dy < 0 || dx < 0 || dy > 7 || dx > 7) return acc;\n            \n            inform = { ...inform, dy, dx };\n            \n            if(!cur.except || (!(piece === 'king' && castling) && cur.except && cur.except(inform))) {\n                if(!board[dy][dx].owner || board[y][x].owner !== board[dy][dx].owner) {\n                    acc.push({dy, dx});\n                }\n            }\n\n            return acc;\n        }, []);\n    } else {\n        coveredAxis = move.flatMap(cur => {\n            let counter = 0;\n            let coveredArr = [];\n            while(true) {\n                ++counter;\n                const dy = y + counter * (owner === 'black' ? -cur.dy: +cur.dy);\n                const dx = x + counter * cur.dx;\n                \n                if(dy < 0 || dx < 0 || dy > 7 || dx > 7) break;\n                if(board[dy][dx].owner && board[dy][dx].owner === owner) break;\n                coveredArr.push({dy, dx});\n                if(board[dy][dx].owner && board[dy][dx].owner !== owner) break;\n            }\n            return coveredArr;\n        });\n    }\n\n    return coveredAxis;\n};","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport * as canvasCtrl from '../lib/api/canvas';\n\n// import rules from '../lib/base/rules';\nimport board from '../lib/base/board';\nimport { checkCovered } from '../lib/base/validation';\n\nconst CONNECT_WEBSOCKET = 'canvas/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'canvas/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_SOCKET = 'canvas/INITIALIZE_SOCKET';\nconst INITIALIZE_VALUE = 'canvas/INITIALIZE_VALUE';\nconst CHANGE_VALUE = 'canvas/CHANGE_VALUE';\nconst CLEAR_VALUE = 'canvas/CLEAR_VALUE';\nconst INITIALIZE_BLOCKED = 'canvas/INITIALIZE_BLOCKED';\nconst CHANGE_BLOCKED = 'canvas/CHANGE_BLOCKED';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\nexport const initializeBlocked = createAction(INITIALIZE_BLOCKED, payload => payload);\nexport const changeBlocked = createAction(CHANGE_BLOCKED, payload => payload);\n\nconst [ SET_MOVE_PIECE, SET_MOVE_PIECE_SUCCESS, SET_MOVE_PIECE_FAILURE ] = createRequestActionTypes('canvas/SET_MOVE_PIECE');\nexport const setMovePieceThunk = createRequestThunk(SET_MOVE_PIECE, canvasCtrl.movePiece);\n\nexport const changeValueThunk = ({ move }) => ( dispatch, getState ) => {\n    const { prev, next } = move;\n    const { canvas: { board },\n            auth: { tempAuth },\n            game: { turn }\n        } = getState();\n    \n    if(tempAuth) {\n        if((tempAuth.role === 'white' && turn % 2 === 0) || (tempAuth.role === 'black' && turn % 2 === 1)) {\n            dispatch(changeBlocked({ blocked: false }));\n        } else {\n            dispatch(changeBlocked({ blocked: true }));\n        };\n    }\n\n    const cell = board[prev.y][prev.x];\n    const clearBoard = genClearBoard([...board], [\n        'covered',\n        'clicked',\n        'tracked',\n    ]);\n    \n    clearBoard[next.y] = [ ...clearBoard[next.y] ];\n    clearBoard[next.y][next.x] = {\n        ...cell,\n        tracked: true,\n        dirty: true,\n    };\n\n    clearBoard[prev.y]= [ ...clearBoard[prev.y] ];\n    clearBoard[prev.y][prev.x] = {\n        covered: false,\n        tracked: true,\n    };\n\n    //  promotion\n    const { owner, piece } = clearBoard[next.y][next.x];\n    if((owner === 'white' && piece === 'pawn' && next.y === 0) || (owner === 'black' && piece === 'pawn' && next.y === 7)) {\n        clearBoard[next.y][next.x] = {\n            ...clearBoard[next.y][next.x],\n            piece: 'queen',\n        }\n    };\n\n    //  castling\n    if(clearBoard[next.y][next.x].piece === 'king') {\n        if(next.x - prev.x === 2) {\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\n            \n            const pieceStore = { ...clearBoard[prev.y][prev.x+3] };\n            clearBoard[prev.y][prev.x+3] = {\n                covered: false\n            };\n            clearBoard[prev.y][prev.x+1] = {\n                ...pieceStore,\n                dirty: true,\n            };\n        }\n\n        if(next.x - prev.x === -2) {\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\n\n            const pieceStore = { ...clearBoard[prev.y][prev.x-4] };\n            clearBoard[prev.y][prev.x-4] = {\n                covered: false\n            };\n            clearBoard[prev.y][prev.x-1] = {\n                ...pieceStore,\n                dirty: true,\n            };\n        }\n    }\n    \n    dispatch(changeValue({ board: clearBoard, clicked: null }));\n}\n\nconst genClearBoard = (board, params) => {\n    const arr = [];\n\n    const leng = board.length;\n    for(let i=0; i<leng; ++i) {\n        for(let j=0; j<leng; ++j) {\n            let pass = false;\n            params.forEach(param => {\n                pass |= board[i][j][param];\n            });\n            if(pass) {\n                arr.push({\n                    y: i,\n                    x: j,\n                })\n            }\n        }\n    }\n\n    arr.forEach(cell => {\n        board[cell.y] = [ ...board[cell.y]];\n        const popedCell = board[cell.y][cell.x];\n        const newCell = {\n            ...popedCell,\n        };\n        params.forEach(param => {\n            newCell[param] = false;\n        });\n\n        board[cell.y].splice(cell.x, 1, newCell);\n    });\n\n    return board;\n}\n\nfunction* connectWebsocketSaga (action) {\n    const key = action.payload;\n    \n    const query = `key=${key}`;\n\n    const socketTask = yield fork(connectNamespace, {\n        url: '/canvas',\n        initializeSocket,\n        initializeValue,\n        changeValue: changeValueThunk,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* canvasSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nexport const clickPieceThunk = ({ y, x }) => (dispatch, getState) => {\n    const {\n            canvas: { board, clicked },\n        } = getState();\n\n    if(clicked && board[y][x].covered) {\n        const { canvas: { socket } } = getState();\n\n        dispatch(setMovePieceThunk({\n            socket,\n            move: {\n                prev: clicked,\n                next: {y, x}\n            }\n        }));\n        \n        return;\n    }\n    \n    let coveredAxis = checkCovered(board, y, x);\n    const clearBoard = genClearBoard([...board], [\n        'covered',\n        'clicked',\n    ]);\n\n    coveredAxis.forEach(axis => {\n        clearBoard[axis.dy] = [ ...clearBoard[axis.dy] ];\n        const popedCell = clearBoard[axis.dy][axis.dx];\n        clearBoard[axis.dy].splice(axis.dx, 1, {\n            ...popedCell,\n            covered:true,\n        });\n    });\n\n    clearBoard[y] = [ ...clearBoard[y] ];\n    clearBoard[y][x] = {\n        ...clearBoard[y][x],\n        clicked: true,\n    }\n\n    dispatch(changeValue({ board: clearBoard, clicked: { y, x } }));\n};\n\nconst initialState = {\n    socket: null,\n    error: null,\n    board,\n    clicked: null,\n    blocked: false,\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { board } }) => ({\n        ...state,\n        board,\n    }),\n    [CHANGE_VALUE]: (state, { payload : { board, clicked } }) => ({\n        ...state,\n        board,\n        clicked,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n    [INITIALIZE_BLOCKED]: (state, { payload: { blocked } }) => ({\n        ...state,\n        blocked,\n    }),\n    [CHANGE_BLOCKED]: (state, { payload: { blocked } }) => ({\n        ...state,\n        blocked,\n    }),\n    [SET_MOVE_PIECE_SUCCESS]: state => state,\n    [SET_MOVE_PIECE_FAILURE]: state => state,\n}, initialState);","import axios from 'axios';\n\nexport const movePiece = params =>\n    axios.post('/api/canvas/movePiece', params);","import React, { useCallback, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Canvas from '../../components/gameplay/Canvas';\nimport { clickPieceThunk, initializeBlocked } from '../../modules/canvas';\nimport { clearValue } from '../../modules/canvas';\n\nconst CanvasContainer = () => {\n    const { board, blocked, turn, tempAuth } = useSelector(({ canvas, auth, game }) => ({\n        board: canvas.board,\n        blocked: canvas.blocked,\n        turn: game.turn,\n        tempAuth: auth.tempAuth,\n    }));\n\n    const dispatch = useDispatch();\n    \n    useEffect(() => {\n        if(tempAuth) {\n            if((tempAuth.role === 'white' && turn % 2 === 0) || (tempAuth.role === 'black' && turn % 2 === 1)) {\n                dispatch(initializeBlocked({ blocked: false }));\n            } else {\n                dispatch(initializeBlocked({ blocked: true }));\n            }\n        }\n    }, [dispatch, turn, tempAuth]);\n    \n    useEffect(() => {\n        return () => {\n            dispatch(clearValue());\n        }\n    }, [dispatch])\n\n    //  function은 생성 당시의 Context를 가지고 있기 때문에 redux state값이 제대로 반영되지 않는다\n    //  생성되었던 event handler가 React dom에 붙어있기 때문에 dom이 rerender되지 않는 이상\n    //  오래된 state를 가지고 있을 수 밖에 없다. 따라서 ref를 통해 참조값을 가지고 있거나\n    //  혹은 redux state라면 이 코드와 같이 thunk를 사용하는 방법이 있다\n\n    const onClick = useCallback((y, x) => {\n        dispatch(clickPieceThunk({ y, x }));\n    }, [dispatch]);\n\n    return (\n        <Canvas\n            board={board}\n            blocked={blocked}\n            onClick={onClick}\n        />\n    )\n};\n\nexport default CanvasContainer;","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as chatAPI from '../lib/api/chat';\n\nconst CONNECT_WEBSOCKET = 'chat/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'chat/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_SOCKET = 'chat/INITIALIZE_SOCKET';\nconst INITIALIZE_VALUE = 'chat/INITIALIZE_VALUE';\nconst CHANGE_VALUE = 'chat/CHANGE_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\n\nconst CHANGE_TEXTFIELD = 'chat/CHANGE_TEXTFIELD';\nconst INITIALIZE_TEXTFIELD = 'chat/INITIALIZE_TEXTFIELD';\nexport const changeTextfield = createAction(CHANGE_TEXTFIELD, payload => payload);\nexport const initializeTextfield = createAction(INITIALIZE_TEXTFIELD);\n\nconst [ SEND_MESSAGE, SEND_MESSAGE_SUCCESS, SEND_MESSAGE_FAILURE ] = createRequestActionTypes('chat/SEND_MESSAGE');\nexport const sendMessageThunk = createRequestThunk(SEND_MESSAGE, chatAPI.sendMessage);\n\nfunction* connectWebsocketSaga (action) {\n    const key = action.payload;\n\n    const query = `key=${key}`;\n    \n    const socketTask = yield fork(connectNamespace, {\n        url: '/chat',\n        initializeSocket,\n        initializeValue,\n        changeValue,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* chatSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    messages: [],\n    text: '',\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { nickname, color, message }}) => ({\n        ...state,\n        messages: [{ nickname, color, message }],\n    }),\n    [CHANGE_VALUE]: (state, { payload: { nickname, color, message} }) => ({\n        ...state,\n        messages: [ ...state.messages, { nickname, color, message} ],\n    }),\n    [SEND_MESSAGE_SUCCESS]: state => state,\n    [SEND_MESSAGE_FAILURE]: state => state,\n    [INITIALIZE_TEXTFIELD]: state => ({\n        ...state,\n        text: '',\n    }),\n    [CHANGE_TEXTFIELD]: (state, { payload: text}) => ({\n        ...state,\n        text,\n    }),\n}\n, initialState);","import axios from 'axios';\n\nexport const sendMessage = message =>\n    axios.post('/api/chat/sendMessage', message);\n    \n// export const sendMessage = message =>\n//     axios.post('http://localhost:5000/api/chat/sendMessage', message);","import React, { useRef, useEffect } from 'react';\nimport styled, { css } from 'styled-components';\nimport { IoIosSend } from 'react-icons/io';\nimport { IconContext } from 'react-icons';\n\nconst ChatSubmitBlock = styled.form`\n`;\n\nconst ChatFrameBlock = styled.div`\n    position: relative;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst ChatHiddenBlock = styled.div`\n    height: 360px;\n    width: 100%;\n    overflow: hidden;\n`;\n\nconst ChatBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 360px;\n    width: 100%;\n    padding-right: 20px;\n    overflow-y: overlay;\n`;\n\nconst ChatFormBlock = styled.div`\n    position: absolute;\n    width: 100%;\n    display: flex;\n    background-color: white;\n    top: 365px;\n    /* box-shadow: rgba(0,0,0,0.05) 0px -2px 2px 0px, rgba(0,0,0,0.08) 0px -3px 1px -2px, rgba(0,0,0,0.04) 0px -1px 5px 0px; */\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\n`;\n\nconst ChatInputBlock = styled.input`\n    outline: none;\n    border: none;\n    align-items : center;\n    color: black;\n    background-color: transparent;\n    font-size: 12px;\n    width: 80%;\n    height : 30px;\n    padding-left: 10px;\n`;\n\nconst ChatButtonBlock = styled.button`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 20%;\n    font-size: 12px;\n    background-color: rgb(247,246,245);\n    border: none;\n    cursor: pointer;\n\n    &:hover, &:focus {\n        background-color: #D3D3D3;\n    } \n`;\n\nconst MessageBlock = styled.div`\n    display: flex;\n    align-items: center;\n    width: 90%;\n    height : 36px;\n    min-height : 36px;\n    font-size : 12px;\n    background-color: white;\n\n    ${props => props.owner === 'my' && css`\n        justify-content: flex-end;\n    `};\n\n    ${props => props.owner === 'other' && css`\n        justify-content: flex-start;\n    `};\n\n    ${props => props.owner === 'server' && css`\n        justify-content: center;\n    `};\n`;\n\nconst BalloonBlock = styled.div`\n    position: relative;\n    background: #ffff80;\n    padding: 5px;\n\n    &:after {\n        content: '';\n        position: absolute;\n        right: 0;\n        top: 50%;\n        width: 0;\n        height: 0;\n        border: 8px solid transparent;\n        border-left-color: #ffff80;\n        border-right: 0;\n        border-top: 0;\n        margin-top: -5px;\n        margin-right: -8px;\n    }\n\n    \n    ${props => props.owner === 'other' && css `\n        background: rgb(247,246,245);\n\n        &:after {\n            content: '';\n            position: absolute;\n            left: 0;\n            top: 50%;\n            width: 0;\n            height: 0;\n            border: 8px solid transparent;\n            border-top: 0;\n            margin-top: -5px;\n            border-right-color: rgb(247,246,245);\n            border-left: 0;\n            margin-left: -8px;\n        }\n    `}\n`;\n\nconst Balloon = ({ owner, children }) => {\n    let ballonBlock;\n    if(owner === 'my') {\n        ballonBlock = (\n            <BalloonBlock owner={owner}>\n                {children}\n            </BalloonBlock>\n        )\n    } else if(owner === 'other') {\n        ballonBlock = (\n            <BalloonBlock owner={owner}>\n                {children}\n            </BalloonBlock>\n        )\n    } else if(owner === 'server') {\n        ballonBlock = (\n            <>\n                {children}\n            </>\n        )\n    }\n\n    return (\n        <>\n            {ballonBlock}\n        </>\n    )\n}\n\nconst Message = React.memo(({ message, myName, ...rest }) => {\n    const owner = message.nickname ? (message.nickname === myName ? 'my' : 'other') : 'server';\n    const text = owner === 'other' ? message.nickname + ' : ' + message.message : message.message;\n\n    return (\n        <MessageBlock\n            {...rest} \n            color={message.color}\n            owner={owner}\n        >\n            <Balloon owner={owner}>\n                {text}\n            </Balloon>\n        </MessageBlock>\n    )\n});\n\nconst Chat = ({ messages, onSubmit, onChange, text, tempAuth }) => {\n    const ref = useRef();\n    useEffect(() => {\n        ref.current.scrollTop = ref.current.scrollHeight;\n    }, [messages]);\n\n    return (\n        <>\n            <ChatSubmitBlock onSubmit={onSubmit}>\n                <ChatFrameBlock>\n                    <ChatHiddenBlock>\n                        <ChatBlock ref={ref}>\n                            {messages.map(message => (\n                                <Message\n                                    myName={tempAuth.nickname}\n                                    message={message}\n                                />\n                            ))}\n                        </ChatBlock>\n                    </ChatHiddenBlock>\n                    <ChatFormBlock>\n                        <ChatInputBlock\n                            onChange={onChange}\n                            value={text}\n                        />\n                        <ChatButtonBlock\n                            onSubmit={onSubmit}\n                        >\n                            <IconContext.Provider value={{style: { width:'40%', height:'40%' }}}>\n                                <IoIosSend />\n                            </IconContext.Provider>\n                        </ ChatButtonBlock>\n                    </ChatFormBlock>\n                </ChatFrameBlock>\n            </ChatSubmitBlock>\n        </>\n    )\n};\n\nexport default React.memo(Chat);","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changeTextfield, initializeTextfield } from '../../modules/chat';\nimport { sendMessageThunk } from '../../modules/chat';\nimport Chat from '../../components/gameplay/Chat';\n\nconst ChatContainer = () => {\n    const dispatch = useDispatch();\n\n    const { socket, messages, text, tempAuth } = useSelector(({ chat, auth }) => ({\n        socket: chat.socket,\n        messages: chat.messages,\n        text: chat.text,\n        tempAuth: auth.tempAuth,\n    }));\n\n    const onSubmit = useCallback(e => {\n        e.preventDefault();\n        dispatch(sendMessageThunk({ socket, message: text }));\n        dispatch(initializeTextfield());\n    }, [dispatch, text, socket]);\n\n    const onChange = useCallback(e => {\n        dispatch(changeTextfield(e.target.value));\n    },[dispatch]);\n\n    return (\n        <Chat\n            messages={messages}\n            onSubmit={onSubmit}\n            onChange={onChange}\n            text={text}\n            tempAuth={tempAuth}\n        />\n    )\n};\n\nexport default ChatContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst TimerBlock = styled.div`\n    width: 50%;\n    height: 60px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    background-color: white;\n    ${props => props.color && css`\n        background-color: rgb(208, 224, 189);\n    `}\n    ${props => props.time <= 10000 && css`\n        background-color: rgb(230, 153, 153);\n    `}\n`;\n\nconst TimeSliceBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 47%;\n    color: black;\n    font-size: 50px;\n`;\n\nconst ColonBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 100%;\n    width: 6%;\n    color: black;\n    opacity: 0.5;\n    font-size: 50px;\n`;\n\nconst timeConverter = timeSlice => {\n    let convertedTime = '';\n    convertedTime += String(Math.floor(timeSlice / 10));\n    convertedTime += String(Math.floor(timeSlice % 10));\n    return convertedTime;\n}\n\nconst Timer = ({ time, color }) => {\n    \n    const second = Math.floor(time / 1000);\n    const millisecond = Math.floor((time % 1000) / 10);\n\n    // eslint-disable-next-line\n    if(time == undefined || time === null) {\n        return <TimerBlock />\n    }\n\n    return (\n        <TimerBlock\n            time={time}\n            color={color ? 1 : 0}\n        >\n            <TimeSliceBlock>\n                {timeConverter(second)}\n            </TimeSliceBlock>\n            <ColonBlock>\n                :\n            </ColonBlock>\n            <TimeSliceBlock>\n            {timeConverter(millisecond)}\n            </TimeSliceBlock>\n        </TimerBlock>\n    )\n}\n\nexport default Timer;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Timer from '../../components/gameplay/Timer';\n\nconst TimerContainer = ({ white }) => {\n\n    const { whiteTime, blackTime, start, order } = useSelector(({ record, game }) => ({\n        whiteTime: record.whiteTime,\n        blackTime: record.blackTime,\n        start: game.start,\n        order: game.order,\n    }));\n\n    const time = white ? whiteTime : blackTime;\n    const color = white ? (start && order === 'white') : (start && order === 'black');\n\n    return (\n        <Timer\n          time={time}\n          color={color}\n        />\n    )\n    \n};\n\nexport default TimerContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { IconContext } from 'react-icons';\nimport { FaCircle, FaRegCircle } from 'react-icons/fa';\n\nconst StatusBlock = styled.div`\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 30px;\n    background-color: white;\n\n    ${props => props.white && css`\n        margin-top: 30px;\n    `}\n`;\n\nconst NameBlock = styled.div`\n    font-size: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`\n\nconst Status = ({ light, name, white }) => {\n    const iconStyle = {\n        style: {\n            height: '15px',\n            width: '10%',\n            color: 'green',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n        }\n    };\n\n    return (\n        <StatusBlock white={white ? 1 : 0}>\n            {light\n                ? (\n                    <IconContext.Provider value={iconStyle}>\n                        <FaCircle />\n                    </IconContext.Provider>\n                )\n                : (\n                    <IconContext.Provider value={{ style: { ...iconStyle.style, color: 'black' }}}>\n                        <FaRegCircle />\n                    </IconContext.Provider>\n                )\n            }\n            <NameBlock>\n                {name}\n            </NameBlock>\n        </StatusBlock>\n    )\n};\n\nexport default React.memo(Status);","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Status from '../../components/gameplay/Status';\n\nconst StatusContainer = ({ black, white }) => {\n    const { blackNick, whiteNick, participant } = useSelector(({ game }) => ({\n        blackNick: game.black,\n        whiteNick: game.white,\n        participant: game.participant,\n    }));\n\n    const participantSet = new Set(participant);\n    const light = (white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick));\n    const name = (white && whiteNick) || (black && blackNick);\n\n    return (\n        <Status\n            light={light}\n            name={name}\n            white={white}\n        />\n    )\n};\n\nexport default StatusContainer;","import React, { useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { IconContext } from 'react-icons';\nimport { IoIosArrowRoundForward } from 'react-icons/io';\nimport { pieceMapper } from '../../lib/base/pieceConverter';\n\nconst PieceMoveListHiddenBlock = styled.div`\n    height: 270px;\n    width: 100%;\n    overflow: hidden;\n`\n\nconst PieceMoveListBlock = styled.div`\n    height: 270px;\n    width: 100%;\n    overflow-y: overlay;\n    padding-right: 20px;\n`;\n\nconst PieceMoveBlock = styled.div`\n    width: 100%;\n    height: 30px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n\n    &:first-child {\n        margin-top: 30px;\n    }\n`;\n\nconst moveConverter = ({x, y}) => {\n    return String.fromCharCode(97 + x) + (8 - y);\n}\n\nconst MoveBlock = styled.div`\n    width: 80%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    &:hover {\n        background-color: rgb(209, 228, 246);\n    }\n`;\n\nconst TextBlock = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20%;\n    font-size: 18px;\n`\n\nconst IndexBlock = styled.div`\n    width: 20%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 18px;\n    background-color: rgb(247, 246, 245);\n`\n\nconst PieceMove = React.memo(({ move, index, onClickBlock }) => {\n    console.dir('PieceMove');\n    console.dir(move);\n    const PrevComponent = pieceMapper[move.prevPiece.piece];\n    const prevStyle = {\n        color: move.prevPiece.owner,\n        style: {\n            width: '10%',\n            filter: `drop-shadow(1px 1px 1px ${move.prevPiece.owner === 'white' ? 'black' : 'white'})`,\n        }\n    };\n\n    const prevPiece = (\n        <IconContext.Provider value={prevStyle}>\n            <PrevComponent />\n        </IconContext.Provider>\n    )\n\n    let NextComponent, nextStyle;\n\n    let nextPiece = (\n        <div style={{ width: '10%' }}/>\n    )\n\n    if(move.nextPiece.piece) {\n        NextComponent = pieceMapper[move.nextPiece.piece];\n        nextStyle = {\n            color: move.nextPiece.owner,\n            style: {\n                width: '10%',\n                filter: `drop-shadow(1px 1px 1px ${move.nextPiece.owner === 'white' ? 'black' : 'white'})`,\n            }\n        };\n        nextPiece = (\n            <IconContext.Provider value={nextStyle}>\n                <NextComponent />\n            </IconContext.Provider>\n        )\n    }\n\n    \n    return (\n        <PieceMoveBlock>\n            <IndexBlock>\n                {index + 1}\n            </IndexBlock>\n            <MoveBlock onClick={onClickBlock}>\n                {prevPiece}\n                <TextBlock>\n                    {moveConverter(move.prev)}\n                </TextBlock>\n                <IconContext.Provider value={{ style: { color: 'rgb(169,169,169)' }}}>\n                    <IoIosArrowRoundForward />\n                </IconContext.Provider>\n                <TextBlock>\n                    {moveConverter(move.next)}\n                </TextBlock>\n                {nextPiece}\n            </MoveBlock>\n        </PieceMoveBlock>\n    )\n});\n\n\nconst PieceMoveList = ({ pieceMove, onClickBlock }) => {\n    const ref = useRef();\n    useEffect(() => {\n        ref.current.scrollTop = ref.current.scrollHeight;\n    }, [pieceMove]);\n\n    return (\n        <PieceMoveListHiddenBlock>\n            <PieceMoveListBlock ref={ref}>\n                {pieceMove.map((move, index) => (\n                    <PieceMove \n                        onClick={onClickBlock}\n                        move={move}\n                        index={index}\n                    />\n                ))}\n            </PieceMoveListBlock>\n        </PieceMoveListHiddenBlock>\n    )\n};\n\nexport default React.memo(PieceMoveList);","import React, { useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport PieceMoveList from '../../components/gameplay/PieceMoveList';\n\nconst PieceMoveListContainer = () => {\n    \n    // const dispatch = useDispatch();\n\n    const { pieceMove } = useSelector(({ record }) => ({\n        pieceMove: record.pieceMove,\n    }));\n\n    const onClickBlock = useCallback(() => {\n\n    }, []);\n\n    return (\n        <PieceMoveList\n            onClickBlock = {onClickBlock}\n            pieceMove={pieceMove}\n        />\n    )\n};\n\nexport default PieceMoveListContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst TimeLineBlock = styled.div`\n    position: absolute;\n    height: 2px;\n    background-color: green;\n    transition-duration: 1s;\n    transition-timing-function: linear;\n\n    width: ${props => (props.time * 100) + '%'};\n    ${props => props.time <= 0.1 && css`\n        background-color: red;\n    `}\n`;\n\nconst TimeLine = ({ time }) => {\n    return (\n        <TimeLineBlock time={time}/>\n    )\n};\n\nexport default React.memo(TimeLine);","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\nimport { connectNamespace } from '../lib/websocket/websocket';\n\nconst CONNECT_WEBSOCKET = 'record/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'record/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'record/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'record/INITIALIZE_SOCKET';\nconst CHANGE_VALUE = 'record/CHANGE_VALUE';\nconst UPDATE_VALUE = 'record/UPDATE_VALUE';\nconst CLEAR_VALUE = 'record/CLEAR_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\nexport const updateValue = createAction(UPDATE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nexport const updateValueThunk = params => ( dispatch, getState ) => {\n    const { record } = getState();\n    let newRecord = { ...record };\n    Object.keys(params).forEach(key => {\n        if(typeof params[key] === 'object') {\n            newRecord = {\n                ...newRecord,\n                [key]: [\n                    ...newRecord[key],\n                    params[key],\n                ]\n            };\n        }\n    });\n\n    dispatch(updateValue({ record: newRecord }));\n};\n\nfunction* connectWebsocketSaga (action) {\n    const key = action.payload;\n    \n    const query = `key=${key}`;\n\n    const socketTask = yield fork(connectNamespace, { \n        url: '/record',\n        initializeSocket,\n        initializeValue,\n        changeValue,\n        updateValue: updateValueThunk,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* recordSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    error: null,\n    startTime: null,\n    endTime: null,\n    blackTime: null,\n    whiteTime: null,\n    blackMaxTime: null,\n    whiteMaxTime: null,\n    whiteRatio: 0,\n    blackRatio: 0,\n    pieceMove: [],\n}\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        ...rest,\n    }),\n    [CHANGE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        ...rest,\n    }),\n    [UPDATE_VALUE]: (state, { payload: { record } }) => ({\n        ...record,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n}, initialState);\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport TimeLine from '../../components/gameplay/TimeLine';\nimport { clearValue } from '../../modules/record';\n\nconst TimeLineContainer = ({ white, black }) => {\n    const { whiteRatio, blackRatio, whiteNick, blackNick, participant } = useSelector(({ record, game }) => ({\n        whiteRatio: record.whiteRatio,\n        blackRatio: record.blackRatio,\n        whiteNick: game.white,\n        blackNick: game.black,\n        participant: game.participant,\n    }));\n    \n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearValue());\n        }\n    }, [dispatch]);\n\n    const participantSet = new Set(participant);\n    let time = 0;\n\n    if((white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick))) {\n        time = white ? whiteRatio : blackRatio;\n    }\n \n    time = Math.min(time, 1);\n\n    return (\n        <TimeLine\n            time={time}\n        />\n    )\n};\n\nexport default TimeLineContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport { FaFastBackward, FaStepBackward, FaFastForward, FaStepForward } from 'react-icons/fa';\nimport { IconContext } from 'react-icons';\n\nconst UndoRedoBlock = styled.div`\n    position: absolute;\n    top: 300px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    background-color: rgb(247, 246, 245);\n    z-index: 10;\n    box-shadow: rgba(0, 0, 0, 0.14) 0px -2px 2px 0px, rgba(0, 0, 0, 0.2) 0px -3px 1px -2px, rgba(0, 0, 0, 0.12) 0px -1px 5px 0px;\n`;\n\nconst ButtonBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n`;\n\nconst buttonStyle = {\n    style: {\n        color: '#4d4d4d',\n        width: '50%',\n        height: '50%',\n        backgroundColor: 'transparent'\n    }\n}\n\nconst UndoRedo = () => {\n    return (\n        <UndoRedoBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaFastBackward />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaStepBackward />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaStepForward />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaFastForward />\n                </IconContext.Provider>\n            </ButtonBlock>\n        </UndoRedoBlock>\n    )\n};\n\nexport default React.memo(UndoRedo);","import React from 'react';\nimport UndoRedo from '../../components/gameplay/UndoRedo';\n\nconst UndoRedoContainer = () => {\n    \n    return (\n        <UndoRedo />\n    )\n};\n\nexport default UndoRedoContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport { FaExchangeAlt, FaFlag, FaHandRock } from 'react-icons/fa';\nimport { TiArrowBack } from 'react-icons/ti';\nimport { IconContext } from 'react-icons';\n\nconst UtilBlock = styled.div`\n    position: absolute;\n    top: 30px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    z-index: 10;\n    background-color: rgb(247, 246, 245);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst ButtonBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n`;\n\nconst buttonStyle = {\n    style: {\n        color: '#4d4d4d',\n        width: '50%',\n        height: '50%',\n        backgroundColor: 'transparent'\n    }\n};\n\nconst Util = () => {\n    return (\n        <UtilBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={{ style: { ...buttonStyle.style, width: '60%', height:'60%' }} }>\n                    <FaExchangeAlt />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={{ style: { ...buttonStyle.style, width: '80%', height:'80%' }} }>\n                    <TiArrowBack />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaHandRock />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaFlag />\n                </IconContext.Provider>\n            </ButtonBlock>\n        </UtilBlock>\n    )\n};\n\nexport default React.memo(Util);","import React from 'react';\nimport Util from '../../components/gameplay/Util';\n\nconst UtilContainer = () => {\n    return (\n        <Util />\n    )\n};\n\nexport default UtilContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport TimerContainer from '../../containers/gameplay/TimerContainer';\nimport StatusContainer from '../../containers/gameplay/StatusContainer';\nimport PieceMoveListContainer from '../../containers/gameplay/PieceMoveListContainer';\nimport TimeLineContainer from '../../containers/gameplay/TimeLineContainer';\nimport UndoRedoContainer from '../../containers/gameplay/UndoRedoContainer';\nimport UtilContainer from '../../containers/gameplay/UtilContainer';\n\nconst RecordBlock = styled.div`\n    position: relative;\n    width: 100%;\n    height: 360px;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst Record = () => {\n    return (\n        <>\n            <TimerContainer black />\n            <RecordBlock>\n                <TimeLineContainer black />\n                <StatusContainer black />\n                <UtilContainer />\n                <PieceMoveListContainer />\n                <UndoRedoContainer />\n                <StatusContainer white />\n                <TimeLineContainer white />\n            </RecordBlock>\n            <TimerContainer white />\n        </>\n    )\n};\n\nexport default React.memo(Record);","import React from 'react';\nimport Record from '../../components/gameplay/Record';\n\nconst RecordContainer = () => {\n\n    return (\n        <Record />\n    );\n};\n\nexport default RecordContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport CanvasContainer from '../../containers/gameplay/CanvasContainer';\nimport ChatContainer from '../../containers/gameplay/ChatContainer';\nimport RecordContainer from '../../containers/gameplay/RecordContainer';\n\nconst GamePlayLayoutBlock = styled.div`\n    height: 800px;\n    width: 100%;\n    background-color: rgb(237, 235, 233);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst sideBlockStyle = css`\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n`;\n\nconst LeftSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-right: 1%;\n`;\n\nconst RightSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-left: 1%;\n`;\n\nconst GamePlayLayout = () => {\n    return (\n        <GamePlayLayoutBlock>\n            <LeftSideBlock>\n                <ChatContainer />\n            </LeftSideBlock>\n            <CanvasContainer />\n            <RightSideBlock>\n                <RecordContainer />\n            </RightSideBlock>\n        </GamePlayLayoutBlock>\n    )\n};\n\nexport default React.memo(GamePlayLayout);","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\n\nconst CONNECT_WEBSOCKET = 'game/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'game/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'game/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'game/INITIALIZE_SOCKET';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\n\nfunction* connectWebsocketSaga (action) {\n    const key = action.payload;\n    \n    const query = `key=${key}`;\n\n    const socketTask = yield fork(connectNamespace, { \n        url: '/game',\n        initializeSocket,\n        initializeValue,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* gameSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    error: null,\n    participant: [],\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest }}) => ({\n        ...state,\n        ...rest,\n    }),\n}, initialState);","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport GamePlayLayout from '../../components/gameplay/GamePlayLayout';\nimport { setSessionThunk } from '../../modules/auth';\nimport { connectWebsocket as connectAuthWebsocket } from '../../modules/auth';\nimport { connectWebsocket as connectGameWebsocket } from '../../modules/game';\nimport { connectWebsocket as connectChatWebsocket } from '../../modules/chat';\nimport { connectWebsocket as connectCanvasWebsocket} from '../../modules/canvas';\nimport { connectWebsocket as connectRecordWebsocket } from '../../modules/record';\n\nimport { disconnectWebsocket as disconnectAuthWebsocket } from '../../modules/auth';\nimport { disconnectWebsocket as disconnectGameWebsocket } from '../../modules/game';\nimport { disconnectWebsocket as disconnectChatWebsocket } from '../../modules/chat';\nimport { disconnectWebsocket as disconnectCanvasWebsocket } from '../../modules/canvas';\nimport { disconnectWebsocket as disconnectRecordWebsocket } from '../../modules/record';\n\nimport useAsync from '../../lib/hook/useAsync';\n\nconst GamePlayLayoutContainer = ({ gameId }) => {\n    const dispatch = useDispatch();\n\n    const connection = async () => {\n        await dispatch(setSessionThunk());\n      \n        dispatch(disconnectAuthWebsocket());\n        dispatch(disconnectGameWebsocket());\n        dispatch(disconnectChatWebsocket());\n        dispatch(disconnectCanvasWebsocket());\n        dispatch(disconnectRecordWebsocket());\n        setTimeout(() => {\n            dispatch(connectAuthWebsocket(gameId));\n            dispatch(connectGameWebsocket(gameId));\n            dispatch(connectChatWebsocket(gameId));\n            dispatch(connectCanvasWebsocket(gameId));\n            dispatch(connectRecordWebsocket(gameId));\n        }, 0);\n        return true;\n    };\n\n    useEffect(() => {\n        return () => {\n            dispatch(disconnectAuthWebsocket());\n            dispatch(disconnectGameWebsocket());\n            dispatch(disconnectChatWebsocket());\n            dispatch(disconnectCanvasWebsocket());\n            dispatch(disconnectRecordWebsocket());\n        }\n    }, [dispatch]);\n\n    const [state] = useAsync(connection, [ dispatch, gameId ]);\n\n    const { loading, data, error } = state;\n\n    if(loading) return null;\n    if(error) return null;\n    if(data) {\n        return (\n            <GamePlayLayout />\n        )\n    }\n    return null;\n};\n\nexport default GamePlayLayoutContainer;","import React, { useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\n\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport GamePlayLayoutContainer from '../containers/gameplay/GamePlayLayoutContainer';\n\nconst GamePlayPage = ({ history, match }) => {\n    useEffect(() => {\n        if(!match.params.id) {\n            history.push('/');\n        }\n    }, [history, match]);\n\n    if(!match.params.id) return null;\n    const { id } = match.params;\n    if(!id) return null;\n    \n    return (\n        <>\n            <Helmet>\n                <title>GamePlay • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <GamePlayLayoutContainer gameId={id}/>\n        </>\n    )\n};\n\nexport default withRouter(GamePlayPage);","import React from 'react';\nimport styled from 'styled-components';\n\nconst CommunityTableRowBlock = styled.tr`\n    width: 100%;\n    height: 100px;\n    &:nth-child(odd) {\n        background: #F7F6F4;\n    }\n`;\n\nconst CommunityTableRow = ( {title, count, comments, time}) => {\n    return (\n        <CommunityTableRowBlock>\n            <td>{title}</td>\n            <td>{count}</td>\n            <td>{comments}</td>\n            <td>{time}</td>\n        </CommunityTableRowBlock>\n    );\n};\n\nexport default CommunityTableRow;","import React from 'react';\nimport styled from 'styled-components';\nimport CommunityTableRow from './CommunityTableRow';\n\nconst CommunityLayoutBlock = styled.div`\n    width: 100%;\n    height: 1000px;\n    background-color:#EDEBE9;\n    display: flex;\n    justify-content: center;\n    /* flex-direction: column; */\n`;\n\nconst CommunityMainBlcok = styled.main`\n    width: 80%;\n    height: 1000px;\n    background-color:lightblue;\n    display: flex;\n    flex-direction: column;\n`;\n\nconst CommunityHeaderBlock = styled.h1`\n    width: 100%;\n    height: 150px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin: 0px 0px 0px 0px;\n`;\n\nconst PageDivBlock = styled.div`\n    width: 100%;\n    height: 50px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst CommunityTableBlock = styled.table`\n    width: 100%;\n    height: 700px;\n    background-color: white;\n`;\n\nconst CommunityTheadBlock = styled.thead`\n    width: 100%;\n    background-color: #F1F1F1;\n`;\n\n\n\n\nconst CommunityLayout = () => {\n    const tableRows = [\n        {\n            title: '가즈아 가즈아 가즈아 가즈아1',\n            count: 250,\n            comments: 7,\n            time: '1시간 전'\n        },\n        {\n            title: '가즈아 가즈아 가즈아 가즈아2',\n            count: 251,\n            comments: 8,\n            time: '2시간 전'\n        },\n        {\n            title: '가즈아 가즈아 가즈아 가즈아3',\n            count: 252,\n            comments: 9,\n            time: '3시간 전'\n        },\n        {\n            title: '가즈아 가즈아 가즈아 가즈아4',\n            count: 253,\n            comments: 10,\n            time: '4시간 전'\n        }\n    ];\n    return (\n        <CommunityLayoutBlock>\n            <CommunityMainBlcok>\n                <CommunityHeaderBlock>\n                    General Chess Discussion\n                </CommunityHeaderBlock>\n                <PageDivBlock>\n                    &lt; 1 2 3 4 ... &gt;\n                </PageDivBlock>\n                <CommunityTableBlock>  \n                    <CommunityTheadBlock>\n                        <tr height='60px'>\n                            <th width='70%'>\n                            </th>\n                            <th>\n                                조회\n                            </th>\n                            <th>\n                                답글\n                            </th>\n                            <th>\n                                최근 글\n                            </th>\n                        </tr>\n                    </CommunityTheadBlock>\n                    {tableRows.map(tableRow => (\n                        <CommunityTableRow title={tableRow.title} count={tableRow.count} comments={tableRow.comments} time={tableRow.time} />\n                    ))}\n                </CommunityTableBlock>\n                <PageDivBlock>\n                    &lt; 1 2 3 4 ... &gt;\n                </PageDivBlock>\n\n            </CommunityMainBlcok>\n        </CommunityLayoutBlock>\n    )\n};\n\nexport default CommunityLayout;","import React from 'react';\nimport CommunityLayout from '../../components/community/CommunityLayout';\n\nconst CommunityLayoutContainer = () => {\n    return (\n        <CommunityLayout />\n    );\n};\n\nexport default CommunityLayoutContainer;","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport CommunityLayoutContainer from '../containers/community/CommunityLayoutContainer';\n\nconst CommunityPage = () => {\n\n    return (\n        <>\n            <Helmet>\n                <title>Community • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <CommunityLayoutContainer />\n        </>\n    )\n};\n\nexport default CommunityPage;","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { Helmet } from 'react-helmet-async';\n\nimport MainPage from './pages/MainPage';\nimport LoginPage from './pages/LoginPage';\nimport RegisterPage from './pages/RegisterPage';\nimport GamePage from './pages/GamePage';\nimport GamePlayPage from './pages/GamePlayPage';\nimport CommunityPage from './pages/CommunityPage';\n\nconst ErrorPageDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 200px;\n  font-size: 50px;\n`;\n\n\nconst App = () => {\n  return (\n    <>\n      <Helmet>\n        <title>Chesssup.com</title>\n      </Helmet>\n      <Switch>\n        <Route component={MainPage} path='/' exact />\n        <Route component={LoginPage} path='/login' exact />\n        <Route component={RegisterPage} path='/register' exact />\n        <Route component={GamePage} path='/game' exact />\n        <Route component={GamePlayPage} path='/game/:id' exact />\n        <Route component={CommunityPage} path='/community' exact />\n        <Route \n          render={({ location }) => (\n            <ErrorPageDiv>\n              <h1>404 Error</h1>\n              <p>요청한 페이지를 찾을 수 없습니다.</p>\n            </ErrorPageDiv>\n          )}\n          />\n      </Switch>\n    </>\n  )\n}\n\nexport default App;\n","import { combineReducers } from 'redux';\nimport { all } from 'redux-saga/effects';\nimport game, { gameSaga } from './game';\nimport games, { gamesSaga } from './games';\nimport auth, { authSaga } from './auth';\nimport canvas, { canvasSaga } from './canvas';\nimport chat, { chatSaga } from './chat';\nimport record, { recordSaga }  from './record';\n\n\nconst rootReducer = combineReducers({\n    auth,\n    game,\n    games,\n    canvas,\n    chat,\n    record,\n})\n\n\nexport function* rootSaga() {\n    yield all([ authSaga(), gameSaga(), gamesSaga(), canvasSaga(), chatSaga(), recordSaga() ]);\n};\n\nexport default rootReducer;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport ReduxThunk from 'redux-thunk';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport createSagaMiddleware from 'redux-saga';\nimport { HelmetProvider } from 'react-helmet-async';\n\nimport './index.css';\nimport App from './App';\nimport rootReducer, { rootSaga } from './modules';\nimport * as serviceWorker from './serviceWorker';\nimport { getLocalStorage, clearLocalStorage } from './lib/storage/storage';\nimport { checkThunk } from './modules/auth';\n\nconst sagaMiddleware = createSagaMiddleware();\nconst store = createStore(\n    rootReducer,\n    composeWithDevTools(applyMiddleware(ReduxThunk, sagaMiddleware))\n)\n\nsagaMiddleware.run(rootSaga);\n\n(async() => {\n    const auth = getLocalStorage('auth');\n    if(!auth) {\n        return;\n    }\n\n    try {\n        const checkedAuth = await store.dispatch(checkThunk());\n        if(checkedAuth.username !== auth.username) {\n            clearLocalStorage();\n            //  eslint-disable-next-line\n            throw 'Auth mismatch';\n        }\n    } catch(e) {\n        console.dir('Check auth failed');\n    }\n})();\n\nReactDOM.render(\n    <Provider store={store}>\n        <BrowserRouter>\n            <HelmetProvider>\n                <App />\n            </HelmetProvider>\n        </BrowserRouter>\n    </Provider>\n    ,document.getElementById('root')\n);\n\nserviceWorker.unregister();"],"sourceRoot":""}