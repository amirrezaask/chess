(this["webpackJsonpchess-frontend"]=this["webpackJsonpchess-frontend"]||[]).push([[0],{194:function(e,n,t){e.exports=t.p+"static/media/ranking.78f675e7.svg"},202:function(e,n,t){e.exports=t(375)},212:function(e,n,t){},241:function(e,n){},269:function(e,n){},271:function(e,n){},303:function(e,n){},304:function(e,n){},375:function(e,n,t){"use strict";t.r(n);var r=t(7),a=t.n(r),c=t(1),o=t.n(c),i=t(79),u=t.n(i),l=t(33),s=t(8),f=t(46),b=t(184),d=t(185),p=t(82),m=t(31),x=(t(212),t(2)),v=t(47),h=t(3);function O(){var e=Object(x.a)(["\n    position: absolute;\n    top: 10%;\n    left: 0%;\n    width: 100%;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.4);\n"]);return O=function(){return e},e}function j(){var e=Object(x.a)(["\n    display: flex;\n    align-items: center;\n    margin-right: 8%;\n"]);return j=function(){return e},e}function g(){var e=Object(x.a)(["\n        display: none;\n        visibility: hidden;\n    "]);return g=function(){return e},e}function E(){var e=Object(x.a)(["\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n    text-decoration: none;\n    \n    ",";\n"]);return E=function(){return e},e}function y(){var e=Object(x.a)(["\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n"]);return y=function(){return e},e}function k(){var e=Object(x.a)(["\n    margin-left: 30px;\n    display: flex;\n"]);return k=function(){return e},e}function w(){var e=Object(x.a)(["\n    display: flex;\n    align-items: center;\n    margin-left: 8%;\n"]);return w=function(){return e},e}function C(){var e=Object(x.a)(["\n    ","\n    color: rgb(0, 0, 0, 0.4);\n"]);return C=function(){return e},e}function I(){var e=Object(x.a)(["\n    ","\n    color: rgb(0, 0, 0, 0.6);\n"]);return I=function(){return e},e}function A(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n    height: 40px;\n    background-color: transparent;\n    cursor: pointer;\n    font-size: 30px;\n    text-decoration: none;\n    text-shadow: 2px 2px 2px rgb(0, 0, 0, 0.2);\n    font-style: italic;\n"]);return A=function(){return e},e}function S(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 50px;\n"]);return S=function(){return e},e}var T=h.c.div(S()),L=Object(h.b)(A()),_=Object(h.c)(l.b)(I(),L),N=Object(h.c)(l.b)(C(),L),z=h.c.div(w()),R=h.c.div(k()),U=h.c.div(y()),V=Object(h.c)(l.b)(E(),(function(e){return e.hidden&&Object(h.b)(g())})),M=function(e){return e.to?o.a.createElement(V,e,e.children):o.a.createElement(U,e,e.children)},K=h.c.div(j()),B=h.c.div(O()),D=o.a.memo((function(e){var n,t=e.onRecord,r=e.onLogout,a=e.onLogin,c=e.tempAuth,i=e.auth;return c&&(n=c.nickname),i&&(n=i.username),o.a.createElement(o.a.Fragment,null,o.a.createElement(T,null,o.a.createElement(z,null,o.a.createElement(_,{to:"/"},"chesssup"),o.a.createElement(N,{to:"/"},".com"),o.a.createElement(R,null,o.a.createElement(M,{to:"/game"},"Play"),o.a.createElement(M,{to:"/community"},"Community"))),o.a.createElement(K,null,o.a.createElement(M,{onClick:t},"Search"),i?o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{onClick:t},"Setting"),o.a.createElement(M,{onClick:t},"Record"),o.a.createElement(M,{onClick:r},"Logout",o.a.createElement(B,null,n))):o.a.createElement(M,{onClick:a},"Login",o.a.createElement(B,null,n)))))})),P=t(6),F=t(4),G=t(19),Z=t(10),H=t(377),W=t(376),q=t(191),J=t.n(q),X=t(9),Q=a.a.mark($),Y=a.a.mark(ee);function $(e){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(p.b)((function(n){return e.on("connect",(function(t){n({type:"socket",socket:e.id})})),e.on("reconnect",(function(){console.dir("socketio reconnect")})),e.on("message",(function(e){n(e)})),function(){e.close()}})));case 1:case"end":return n.stop()}}),Q)}function ee(e){var n,t,r,c,o,i,u,l,s,f,b;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.url,r=e.query,c=e.initializeSocket,o=e.initializeValue,i=e.changeValue,u=e.updateValue,l=e.clearValue,s=e.notifyRequest,a.prev=1,f=J()(t,{query:r,secure:!0}),a.next=5,Object(X.b)($,f);case 5:n=a.sent;case 6:return a.next=9,Object(X.g)(n);case 9:b=a.sent,a.t0=b.type,a.next="socket"===a.t0?13:"initialize"===a.t0?18:"change"===a.t0?21:"update"===a.t0?24:"clear"===a.t0?27:"notify"===a.t0?30:33;break;case 13:if(!c){a.next=16;break}return a.next=16,Object(X.f)(c(b));case 16:return a.abrupt("break",34);case 18:return a.next=20,Object(X.f)(o(b));case 20:return a.abrupt("break",34);case 21:return a.next=23,Object(X.f)(i(b));case 23:return a.abrupt("break",34);case 24:return a.next=26,Object(X.f)(u(b));case 26:return a.abrupt("break",34);case 27:return a.next=29,Object(X.f)(l(b));case 29:return a.abrupt("break",34);case 30:return a.next=32,Object(X.f)(s(b));case 32:return a.abrupt("break",34);case 33:console.dir(b);case 34:a.next=6;break;case 36:a.next=41;break;case 38:a.prev=38,a.t1=a.catch(1),console.dir(a.t1);case 41:return a.prev=41,a.next=44,Object(X.d)();case 44:if(!a.sent){a.next=46;break}n.close();case 46:return a.finish(41);case 47:case"end":return a.stop()}}),Y,null,[[1,38,41,47]])}var ne=t(192),te=function(e){return[e,"".concat(e,"_SUCCESS"),"".concat(e,"_FAILURE")]};function re(e,n){var t="".concat(e,"_SUCCESS"),r="".concat(e,"_FAILURE");return function(e){return function(c){var o;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,a.a.awrap(n(e));case 3:return o=i.sent,c({type:t,payload:o.data}),i.abrupt("return",o.data);case 8:throw i.prev=8,i.t0=i.catch(0),console.dir(i.t0),c({type:r,payload:i.t0,error:!0}),i.t0;case 13:case"end":return i.stop()}}),null,null,[[0,8]])}}}var ae,ce=t(21),oe=t.n(ce),ie=t(193),ue=function(e){var n=Object(ie.a)({},e);try{Object.keys(n).forEach((function(e){localStorage.setItem(e,JSON.stringify(n[e]))}))}catch(t){console.dir("Set localStorage failed"),console.dir(t)}},le=function(e){try{return JSON.parse(localStorage.getItem(e))}catch(n){console.dir("Get localStorage failed"),console.dir(n)}},se=function(e){try{localStorage.removeItem(e)}catch(n){console.dir("Remove localStorage failed"),console.dir(n)}},fe=function(){try{localStorage.clear()}catch(e){console.dir("Clear localStorage failed"),console.dir(e)}},be=a.a.mark($e),de=a.a.mark(en),pe="sessionAuth/CONNECT_WEBSOCKET",me="sessionAuth/DISCONNECT_WEBSOCKET",xe=Object(H.a)(pe),ve=Object(H.a)(me),he=Object(H.a)("sessionAuth/INITIALIZE_VALUE",(function(e){return e})),Oe=Object(H.a)("sessionAuth/CLEAR_VALUE"),je=te("sessionAuth/SET_SESSION"),ge=Object(Z.a)(je,3),Ee=ge[0],ye=ge[1],ke=ge[2],we=re(Ee,(function(){return oe.a.get("/api/auth/getSession")})),Ce=te("sessionAuth/LOGIN"),Ie=Object(Z.a)(Ce,3),Ae=Ie[0],Se=Ie[1],Te=Ie[2],Le=te("sessionAuth/REGISTER"),_e=Object(Z.a)(Le,3),Ne=_e[0],ze=_e[1],Re=_e[2],Ue=te("sessionAuth/LOGOUT"),Ve=Object(Z.a)(Ue,3),Me=Ve[0],Ke=Ve[1],Be=Ve[2],De=te("sessionAuth/CHECK"),Pe=Object(Z.a)(De,3),Fe=Pe[0],Ge=Pe[1],Ze=Pe[2],He=re(Ae,(function(e){var n=e.username,t=e.password;return oe.a.post("/api/auth/login",{username:n,password:t})})),We=re(Ne,(function(e){var n=e.username,t=e.password;return oe.a.post("/api/auth/register",{username:n,password:t})})),qe=re(Me,(function(){return oe.a.post("/api/auth/logout")})),Je=re(Fe,(function(){return oe.a.get("/api/auth/check")})),Xe=Object(H.a)("sessionAuth/CHANGE_FIELD",(function(e){return e})),Qe=Object(H.a)("sessionAuth/CLEAR_FIELD",(function(e){return e})),Ye=Object(H.a)("sessionAuth/CLEAR_SPECIFIC_FIELD",(function(e){return e}));function $e(){var e;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(X.e)(ee,{url:"/sessionAuth",initializeValue:he,clearValue:Oe});case 2:return e=n.sent,n.next=5,Object(X.g)(me);case 5:return n.next=7,Object(X.c)(e);case 7:case"end":return n.stop()}}),be)}function en(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.h)(pe,$e);case 2:case"end":return e.stop()}}),de)}var nn={tempAuth:null,auth:null,authError:null,login:{username:"",password:""},register:{username:"",password:"",passwordConfirm:""}},tn=Object(W.a)((ae={},Object(P.a)(ae,"sessionAuth/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(G.a)(t,["type"]));return Object(F.a)({},e,{auth:Object(F.a)({},r)})})),Object(P.a)(ae,"sessionAuth/CLEAR_VALUE",(function(e){return Object(F.a)({},nn,{tempAuth:e.tempAuth})})),Object(P.a)(ae,ye,(function(e,n){var t=n.payload;return Object(F.a)({},e,{tempAuth:t})})),Object(P.a)(ae,ke,(function(e,n){var t=n.payload;return Object(F.a)({},e,{tempAuth:null,error:t})})),Object(P.a)(ae,"sessionAuth/CHANGE_FIELD",(function(e,n){var t=n.payload,r=t.form,a=t.key,c=t.value;return Object(ne.a)(e,(function(e){e[r][a]=c}))})),Object(P.a)(ae,"sessionAuth/CLEAR_FIELD",(function(e,n){var t,r=n.payload.form;return Object(F.a)({},e,(t={},Object(P.a)(t,r,nn[r]),Object(P.a)(t,"authError",nn.authError),t))})),Object(P.a)(ae,"sessionAuth/CLEAR_SPECIFIC_FIELD",(function(e,n){var t,r=n.payload,a=r.form,c=r.key;return Object(F.a)({},e,(t={},Object(P.a)(t,a,Object(F.a)({},e[a],Object(P.a)({},c,nn[a][c]))),Object(P.a)(t,"authError",nn.authError),t))})),Object(P.a)(ae,Se,(function(e,n){var t=n.payload;return Object(F.a)({},e,{auth:t,authError:null})})),Object(P.a)(ae,Te,(function(e,n){var t=n.payload;return Object(F.a)({},e,{auth:null,authError:t})})),Object(P.a)(ae,ze,(function(e,n){var t=n.payload;return Object(F.a)({},e,{auth:t,authError:null})})),Object(P.a)(ae,Re,(function(e,n){var t=n.payload;return Object(F.a)({},e,{auth:null,authError:t})})),Object(P.a)(ae,Ke,(function(e){return Object(F.a)({},e,{auth:null,authError:null})})),Object(P.a)(ae,Be,(function(e,n){var t=n.payload;return Object(F.a)({},e,{auth:null,authError:t})})),Object(P.a)(ae,Ge,(function(e,n){var t=n.payload;return Object(F.a)({},e,{auth:t,authError:null})})),Object(P.a)(ae,Ze,(function(e,n){var t=n.payload;return Object(F.a)({},e,{auth:null,authError:t})})),ae),nn),rn=Object(v.f)((function(e){var n=e.history,t=Object(s.c)((function(e){var n=e.sessionAuth;return{tempAuth:n.tempAuth,auth:n.auth}})),r=t.tempAuth,i=t.auth,u=Object(s.b)(),l=Object(c.useCallback)((function(){u((function(e,n){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.a.awrap(e(qe()));case 3:se("auth"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.dir("Logout failed");case 9:case"end":return n.stop()}}),null,null,[[0,6]])}))}),[u]),f=Object(c.useCallback)((function(){alert("onRecord")}),[]),b=Object(c.useCallback)((function(){u(Qe({form:"login"})),n.push("/login")}),[u,n]);return Object(c.useEffect)((function(){return u(xe()),function(){u(ve())}}),[u]),o.a.createElement(D,{onRecord:f,onLogout:l,onLogin:b,tempAuth:r,auth:i})}));function an(e,n){switch(n.type){case"LOADING":return{loading:!0,data:null,error:null};case"SUCCESS":return{loading:!1,data:n.data,error:null};case"FAILURE":return{loading:!1,data:null,error:n.error};default:throw new Error("Unhandled action type Error")}}var cn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=Object(c.useReducer)(an,{loading:!1,data:null,error:!1}),r=Object(Z.a)(t,2),o=r[0],i=r[1],u=function(){var n;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return i({type:"LOADING"}),t.prev=1,t.next=4,a.a.awrap(e());case 4:n=t.sent,i({type:"SUCCESS",data:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),i({type:"FAILURE",error:t.t0});case 11:case"end":return t.stop()}}),null,null,[[1,8]])};return Object(c.useEffect)((function(){u()}),n),[o,u]},on=t(13),un=t(194),ln=t.n(un);function sn(){var e=Object(x.a)(["\n    position: absolute;\n    display: flex;\n    height: 40px;\n    width: 100%;\n    border-bottom: 2px solid rgba(0, 0, 0, 0.7);\n    top: 0;\n    left: 0;\n"]);return sn=function(){return e},e}function fn(){var e=Object(x.a)(["\n    position: absolute;\n    height: 1px;\n    width: 100%;\n    background-color: #ccc;\n    top: ",";\n    left: 0;\n"]);return fn=function(){return e},e}function bn(){var e=Object(x.a)(["\n        justify-content: center;\n    "]);return bn=function(){return e},e}function dn(){var e=Object(x.a)(["\n        width: 240px;\n        justify-content: flex-start;\n    "]);return dn=function(){return e},e}function pn(){var e=Object(x.a)(["\n        width: 120px;\n    "]);return pn=function(){return e},e}function mn(){var e=Object(x.a)(["\n    width: 100px;\n    font-size: 13px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    ","\n\n    ","\n\n    ",";\n\n"]);return mn=function(){return e},e}function xn(){var e=Object(x.a)(["\n    position: absolute;\n    height: 40px;\n    width: 100%;\n    display: flex;\n    cursor: pointer;\n    transition: 1s top;\n    top: ",";\n    left: 0;\n\n    &:hover {\n        background-color: rgba(255, 255, 255, 0.8);\n    }\n    \n"]);return xn=function(){return e},e}function vn(){var e=Object(x.a)(["\n    position: relative;\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n    z-index: 10;\n"]);return vn=function(){return e},e}var hn=h.c.div(vn()),On=h.c.div(xn(),(function(e){return 41*e.index+42+"px"})),jn=h.c.div(mn(),(function(e){return e.elo&&Object(h.b)(pn())}),(function(e){return e.mail&&Object(h.b)(dn())}),(function(e){return e.header&&Object(h.b)(bn())})),gn=o.a.memo((function(e){var n=e.cell;return o.a.createElement(On,{index:n.index},o.a.createElement(jn,null,n.index+1),o.a.createElement(jn,{mail:!0},n.username),o.a.createElement(jn,{elo:!0},n.elo),o.a.createElement(jn,null,n.ratio),o.a.createElement(jn,null,n.win),o.a.createElement(jn,null,n.lose))})),En=h.c.div(fn(),(function(e){return 41*e.index-1+42+"px"})),yn=o.a.memo((function(){return o.a.createElement(kn,null,o.a.createElement(jn,null,"Rank"),o.a.createElement(jn,{mail:!0,header:!0},"Email"),o.a.createElement(jn,{elo:!0},"Elo"),o.a.createElement(jn,null,"Ratio"),o.a.createElement(jn,null,"Win"),o.a.createElement(jn,null,"Lose"))})),kn=h.c.div(sn()),wn=o.a.memo((function(e){var n=e.list,t=n&&n.map((function(e){return o.a.createElement(gn,{key:e.username,cell:e})})),r=[];if(n)for(var a=n.reduce((function(e,n){return e+(n.index<15?1:0)}),0),c=1;c<a;++c)r.push(o.a.createElement(En,{key:"border_".concat(c),index:c}));return o.a.createElement(hn,null,o.a.createElement(yn,null),t,r)})),Cn=function(e){var n=e.list;return o.a.createElement(wn,{list:n})};function In(){var e=Object(x.a)(["\n    position: absolute;\n    top: 10%;\n    left: 10%;\n    width: 80%;\n    height: 80%;\n    opacity: 0.1;\n    z-index: -1;\n"]);return In=function(){return e},e}function An(){var e=Object(x.a)(["\n    position: relative;\n    width: 720px;\n    height: 720px;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: center;\n    padding: 30px;\n    background-color: rgba(255,255,255,0.5);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return An=function(){return e},e}var Sn=h.c.div(An()),Tn=h.c.img(In()),Ln=o.a.memo((function(e){var n=e.rank;return o.a.createElement(Sn,null,o.a.createElement(Tn,{src:ln.a}),o.a.createElement(Cn,{list:n}))})),_n=function(){var e=Object(s.c)((function(e){return{ranking:e.ranking.ranking}})).ranking,n=Object(c.useState)(),t=Object(Z.a)(n,2),r=t[0],a=t[1];return Object(c.useEffect)((function(){e&&a((function(n){if(!n)return e.map((function(e,n){return Object(F.a)({},e,{index:n})}));var t=[],r=n.filter((function(e){return 15!==e.index})).map((function(n){var r=e.findIndex((function(e){return e.username===n.username}));return r>=0?(t.push(r),JSON.stringify(Object(F.a)({},e[r],{index:r}))==JSON.stringify(n)?n:Object(F.a)({},e[r],{index:r})):Object(F.a)({},n,{index:15})})),c=0,o=[];return t.sort((function(e,n){return e-n})).reduce((function(e,n){for(var t=c;t<n;++t)e.push(t);return c=n+1,e}),[]).forEach((function(n){r.push(Object(F.a)({},e[n],{index:15})),o.push(Object(F.a)({},e[n],{index:n}))})),t.length>0&&setTimeout((function(){a((function(e){var n=Object(on.a)(e);return o.forEach((function(e){var t=n.findIndex((function(n){return n.username===e.username}));t&&n.splice(t,1,Object(F.a)({},e))})),n}))}),0),r}))}),[e]),Object(c.useEffect)((function(){return function(){a(null)}}),[]),o.a.createElement(Ln,{rank:r})},Nn=t(81),zn=t.n(Nn);function Rn(){var e=Object(x.a)(["\n        visibility: visible;\n        opacity: 1;\n    "]);return Rn=function(){return e},e}function Un(){var e=Object(x.a)(["\n    width: 100%;\n    height: 100%;\n    border: none;\n    /* box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12); */\n    z-index: 10;\n    visibility: hidden;\n    opacity: 0;\n    transition: 2s;\n\n    ","\n"]);return Un=function(){return e},e}function Vn(){var e=Object(x.a)(["\n    width: 50px;\n    height: 50px;\n"]);return Vn=function(){return e},e}function Mn(){var e=Object(x.a)(["\n        display: none;\n    "]);return Mn=function(){return e},e}function Kn(){var e=Object(x.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    ",";\n"]);return Kn=function(){return e},e}function Bn(){var e=Object(x.a)(["\n    width: 216px;\n    height: 280px;\n    position: relative;\n"]);return Bn=function(){return e},e}function Dn(){var e=Object(x.a)(["\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    padding: 10px;\n    box-sizing: border-box;\n    background: rgba(255,255,255,0.5);\n    width: 236px;\n    height: 300px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    z-index: -10;\n"]);return Dn=function(){return e},e}var Pn=h.c.div(Dn()),Fn=h.c.div(Bn()),Gn=h.c.div(Kn(),(function(e){return e.open&&Object(h.b)(Mn())})),Zn=h.c.img(Vn()),Hn=h.c.iframe(Un(),(function(e){return e.open&&Object(h.b)(Rn())})),Wn=function(e){var n=e.roomKey,t=e.open,r="./billBoard/".concat(n);return o.a.createElement(Pn,null,o.a.createElement(Gn,{open:t},o.a.createElement(Zn,{src:zn.a})),o.a.createElement(Fn,null,o.a.createElement(Hn,{open:t,src:r})))},qn=function(e){var n=e.roomKey,t=Object(c.useState)(!1),r=Object(Z.a)(t,2),a=r[0],i=r[1];return Object(c.useEffect)((function(){setTimeout((function(){i(!0)}),1500)}),[]),o.a.createElement(Wn,{open:a,roomKey:n})};function Jn(){var e=Object(x.a)(["\n    ","\n    margin-left: 1%;\n"]);return Jn=function(){return e},e}function Xn(){var e=Object(x.a)(["\n    ","\n    margin-right: 1%;\n"]);return Xn=function(){return e},e}function Qn(){var e=Object(x.a)(["\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    width: 20%;\n    align-items: center;\n"]);return Qn=function(){return e},e}function Yn(){var e=Object(x.a)(["\n    height: 800px;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Yn=function(){return e},e}var $n,et=h.c.div(Yn()),nt=Object(h.b)(Qn()),tt=h.c.div(Xn(),nt),rt=h.c.div(Jn(),nt),at=o.a.memo((function(){return o.a.createElement(et,null,o.a.createElement(tt,null,o.a.createElement(qn,{roomKey:0}),o.a.createElement(qn,{roomKey:1})),o.a.createElement(_n,null),o.a.createElement(rt,null,o.a.createElement(qn,{roomKey:2}),o.a.createElement(qn,{roomKey:3})))})),ct=a.a.mark(pt),ot=a.a.mark(mt),it="ranking/CONNECT_WEBSOCKET",ut="ranking/DISCONNECT_WEBSOCKET",lt=Object(H.a)(it),st=Object(H.a)(ut),ft=Object(H.a)("ranking/INITIALIZE_SOCKET"),bt=Object(H.a)("ranking/INITIALIZE_VALUE"),dt=Object(H.a)("ranking/CLEAR_VALUE");function pt(){var e;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(X.e)(ee,{url:"/ranking",initializeSocket:ft,initializeValue:bt});case 2:return e=n.sent,n.next=5,Object(X.g)(ut);case 5:return n.next=7,Object(X.c)(e);case 7:case"end":return n.stop()}}),ct)}function mt(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.h)(it,pt);case 2:case"end":return e.stop()}}),ot)}var xt={socket:null,ranking:null,error:null},vt=Object(W.a)(($n={},Object(P.a)($n,"ranking/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(F.a)({},e,{socket:t})})),Object(P.a)($n,"ranking/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(G.a)(t,["type"]));return Object(F.a)({},e,{},r)})),Object(P.a)($n,"ranking/CLEAR_VALUE",(function(e){return xt})),$n),xt),ht=function(){var e=Object(s.b)();Object(c.useEffect)((function(){return function(){e(st())}}),[e]),Object(c.useEffect)((function(){e(dt())}),[e]);var n=cn((function(){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(e(we()));case 2:return e(st()),n.next=5,a.a.awrap(Promise.resolve().then((function(){e(lt())})));case 5:return n.abrupt("return",!0);case 6:case"end":return n.stop()}}))}),[e]),t=Object(Z.a)(n,1)[0];t.loading,t.data,t.error;return o.a.createElement(at,null)};function Ot(){var e=Object(x.a)(["\n    font-size: 12px;\n    color: rgba(0, 0, 0, 0.3);\n"]);return Ot=function(){return e},e}function jt(){var e=Object(x.a)(["\n    /* position: absolute;\n    top: 850px; */\n    width: 100%;\n    height: 66px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n"]);return jt=function(){return e},e}var gt=h.c.div(jt()),Et=h.c.div(Ot()),yt=function(){return o.a.createElement(gt,null,o.a.createElement(Et,null,"COPYRIGHT \xa9 SJCorp ALL RIGHTS RESERVED."),o.a.createElement(Et,null,"Powered by SJCorp. Designs \xa9 2019 - 2020 SJCorp"))},kt=function(){return o.a.createElement(yt,null)},wt=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(rn,null),o.a.createElement(ht,null),o.a.createElement(kt,null))},Ct=t(35),It=t.n(Ct),At=t(59),St=t(20),Tt=t(0);function Lt(){var e=Object(x.a)(["\n    position: absolute;\n    top: 0;\n    left: 48%;\n    width: 50%;\n    display: flex;\n    justify-content: flex-end;\n    font-size: 12px;\n    @keyframes fontOpacity {\n        0%{\n            color: rgb(0, 0, 0, 0);\n        }\n        100%{\n            color: rgb(0, 0, 0, 0.4);\n        }\n      }\n    animation: fontOpacity 1s 1;\n    color: rgb(0, 0, 0, 0.4);\n"]);return Lt=function(){return e},e}function _t(){var e=Object(x.a)(["\n    outline: none;\n    border: none;\n    font-size: 10px;\n    color: black;\n    text-decoration: none;\n    cursor: pointer;\n    margin-left: 5px;\n    background-color: transparent;\n"]);return _t=function(){return e},e}function Nt(){var e=Object(x.a)(["\n    color: rgb(0, 0, 0, 0.5);\n    font-size: 10px;\n"]);return Nt=function(){return e},e}function zt(){var e=Object(x.a)(["\n    display: flex;\n    align-items: center;\n    margin-top: 10px;\n    height: 40px;\n"]);return zt=function(){return e},e}function Rt(){var e=Object(x.a)(["\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    border: none;\n    outline: none;\n    width: 30%;\n    cursor: pointer;\n    height: 40px;\n    background-color: transparent;\n\n    &:hover, :active {\n        background-color: rgb(0, 0, 0, 0.05);\n    }\n"]);return Rt=function(){return e},e}function Ut(){var e=Object(x.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 150px;\n"]);return Ut=function(){return e},e}function Vt(){var e=Object(x.a)(["\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.5);\n    cursor: pointer;\n"]);return Vt=function(){return e},e}function Mt(){var e=Object(x.a)(["\n    display: flex;\n    align-items: center;\n    height: 100%;\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.5);\n    cursor: pointer;\n    margin-left: 5px;\n"]);return Mt=function(){return e},e}function Kt(){var e=Object(x.a)(["\n    height: 100%;\n    outline: none;\n    margin: 0px;\n"]);return Kt=function(){return e},e}function Bt(){var e=Object(x.a)(["\n    display: flex;\n    align-content: center;\n    width: 30%;\n    height: 100%;\n"]);return Bt=function(){return e},e}function Dt(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 10px;\n    width: 60%;\n    height: 20px;\n"]);return Dt=function(){return e},e}function Pt(){var e=Object(x.a)(["\n    ","\n"]);return Pt=function(){return e},e}function Ft(){var e=Object(x.a)(["\n    ","\n"]);return Ft=function(){return e},e}function Gt(){var e=Object(x.a)(["\n    outline: none;\n    border: none;\n    height: 40px;\n    width: 80%;\n    padding-left: 5%;\n"]);return Gt=function(){return e},e}function Zt(){var e=Object(x.a)(["\n        animation: blinking 1s 2;\n    "]);return Zt=function(){return e},e}function Ht(){var e=Object(x.a)(["\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding-left: 1%;\n    width: 60%;\n\n    &+& {\n        margin-top: 10px;\n    }\n\n    @keyframes blinking {\n        0%{\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        }\n        50% {\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.56), 0 3px 1px -2px rgba(0,0,0,0.8), 0 1px 5px 0 rgba(0,0,0,0.48);\n        }\n        100%{\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        }\n      }\n\n    ","\n"]);return Ht=function(){return e},e}function Wt(){var e=Object(x.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 150px;\n"]);return Wt=function(){return e},e}function qt(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    font-size: 20px;\n    height: 100px;\n    text-shadow: 2px 2px 2px rgba(0,0,0,0.14);\n"]);return qt=function(){return e},e}function Jt(){var e=Object(x.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 30%;\n    height: 400px;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Jt=function(){return e},e}function Xt(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 800px;\n"]);return Xt=function(){return e},e}var Qt,Yt=h.c.form(Xt()),$t=h.c.div(Jt()),er=h.c.div(qt()),nr=h.c.div(Wt()),tr=h.c.div(Ht(),(function(e){return e.blink&&Object(h.b)(Zt())})),rr=Object(h.b)(Gt()),ar=h.c.input(Ft(),rr),cr=h.c.input(Pt(),rr),or=h.c.div(Dt()),ir=h.c.div(Bt()),ur=h.c.input(Kt()),lr=h.c.div(Mt()),sr=h.c.div(Vt()),fr=h.c.div(Ut()),br=h.c.button(Rt()),dr=h.c.div(zt()),pr=h.c.div(Nt()),mr=h.c.button(_t()),xr=h.c.div(Lt()),vr=o.a.memo((function(e){var n=e.login,t=e.register,r=e.form,a=e.error,i=e.onSubmit,u=e.onChange,l=e.onRegister,s=Object(c.useRef)({}),f=Object(c.useCallback)((function(e){s.current[e].focus()}),[]);return o.a.createElement(Yt,{autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",onSubmit:i},o.a.createElement($t,null,o.a.createElement(er,null,n?"Sign In":t?"Sign Up":null),o.a.createElement(nr,null,o.a.createElement(tr,{onClick:f.bind(null,"username"),blink:a.username,key:"username_".concat(a.count)},o.a.createElement(Tt.b.Provider,{value:{style:{width:"20px",height:"20px",cursor:"pointer"}}},o.a.createElement(At.c,null)),o.a.createElement(ar,{type:"text",name:"username",placeholder:"Email",onChange:u,value:r.username,ref:function(e){return s.current.username=e}}),o.a.createElement(xr,null,a.username)),o.a.createElement(tr,{onClick:f.bind(null,"password"),blink:a.password,key:"password_".concat(a.count)},o.a.createElement(Tt.b.Provider,{value:{style:{width:"20px",height:"20px",cursor:"pointer"}}},o.a.createElement(St.i,null)),o.a.createElement(cr,{type:"password",name:"password",placeholder:"Password",onChange:u,value:r.password,ref:function(e){return s.current.password=e}}),o.a.createElement(xr,null,a.password)),t?o.a.createElement(tr,{onClick:f.bind(null,"passwordConfirm"),blink:a.passwordConfirm,key:"passwordConfirm_".concat(a.count)},o.a.createElement(Tt.b.Provider,{value:{style:{width:"20px",height:"20px",cursor:"pointer"}}},o.a.createElement(St.i,null)),o.a.createElement(cr,{type:"password",name:"passwordConfirm",placeholder:"Confirm Password",onChange:u,value:r.passwordConfirm,ref:function(e){return s.current.passwordConfirm=e}}),o.a.createElement(xr,null,a.passwordConfirm)):null,n?o.a.createElement(or,null,o.a.createElement(ir,null,o.a.createElement(ur,{type:"checkbox"}),o.a.createElement(lr,null,"Remember Me")),o.a.createElement(sr,null,"Forget password?")):null),o.a.createElement(fr,null,o.a.createElement(br,{type:"submit"},"Submit"),n?o.a.createElement(dr,null,o.a.createElement(pr,null,"Don't have an account?"),o.a.createElement(mr,{type:"button",onClick:l},"Create")):o.a.createElement(dr,null,o.a.createElement(pr,null,"Don't have an account?"),o.a.createElement(mr,{type:"button"},"Create")))))})),hr=Object(v.f)((function(e){var n=e.history,t=Object(s.c)((function(e){var n=e.sessionAuth;return{form:n.login,auth:n.auth,authError:n.authError}})),r=t.form,i=t.auth,u=t.authError,l=Object(s.b)(),f=Object(c.useState)({username:"",password:""}),b=Object(Z.a)(f,2),d=b[0],p=b[1],m=Object(c.useCallback)((function(e){var n=e.target,t=n.name,r=n.value;""!==d[t]&&p((function(e){return Object(F.a)({},e,Object(P.a)({},t,""))})),l(Xe({form:"login",key:t,value:r}))}),[l,d]),x=Object(c.useCallback)((function(e){e.preventDefault();var n=r.username,t=r.password,c=Object.keys(r).reduce((function(e,n){return Object(F.a)({},e,Object(P.a)({},n,!1))}),{});Object.keys(c).filter((function(e){return""===r[e]})).forEach((function(e){c=Object(F.a)({},c,Object(P.a)({},e,"Required field"))}));var o,i=It.a.object().keys({username:It.a.string().max(80).email({minDomainAtoms:2}).required().error((function(){return{message:"Wrong format"}})),password:It.a.string().min(4).max(16).required().error((function(){return{message:"4 ~ 16 digits"}}))}),u=It.a.validate(r,i,{abortEarly:!1});if(u.error&&u.error.details.forEach((function(e){c[e.path[0]]||(c=Object(F.a)({},c,Object(P.a)({},e.path[0],e.message)))})),Object.keys(c).filter((function(e){return c[e]})).length>0)return p((function(e){return Object(F.a)({},c,{count:e.count+1})})),void Object.keys(c).forEach((function(e){c[e]&&l(Ye({form:"login",key:e}))}));l((o={username:n,password:t},function(e,n){var t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.a.awrap(e(He(o)));case 3:(t=n.sent)&&ue({auth:t}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.dir("Login failed");case 10:case"end":return n.stop()}}),null,null,[[0,7]])})),l(Qe({form:"login"}))}),[l,r]);Object(c.useEffect)((function(){if(u){var e={},t=u.response.data;return Object.keys(t).forEach((function(n){e=Object(F.a)({},e,Object(P.a)({},n,t[n]))})),void p(e)}i&&n.push("/")}),[n,i,u]),Object(c.useEffect)((function(){return function(){l(Qe({form:"login"}))}}),[l]);var v=Object(c.useCallback)((function(){l(Qe({form:"register"})),n.push("/register")}),[l,n]);return o.a.createElement(vr,{login:!0,onSubmit:x,onChange:m,form:r,error:d,onRegister:v})})),Or=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Sign In \u2022 Chesssup.com")),o.a.createElement(rn,null),o.a.createElement(hr,null),o.a.createElement(kt,null))},jr=Object(v.f)((function(e){var n=e.history,t=Object(s.c)((function(e){var n=e.sessionAuth;return{form:n.register,auth:n.auth,authError:n.authError}})),r=t.form,i=t.auth,u=t.authError,l=Object(s.b)(),f=Object(c.useState)({username:"",password:"",passwordConfirm:""}),b=Object(Z.a)(f,2),d=b[0],p=b[1],m=Object(c.useCallback)((function(e){var n=e.target,t=n.name,r=n.value;""!==d[t]&&p((function(e){return Object(F.a)({},e,Object(P.a)({},t,""))})),l(Xe({form:"register",key:t,value:r}))}),[l,d]),x=Object(c.useCallback)((function(e){e.preventDefault();var n=r.username,t=r.password,c=Object.keys(r).reduce((function(e,n){return Object(F.a)({},e,Object(P.a)({},n,!1))}),{});Object.keys(c).filter((function(e){return""===r[e]})).forEach((function(e){c=Object(F.a)({},c,Object(P.a)({},e,"Required field"))}));var o,i=It.a.object().keys({username:It.a.string().max(80).email({minDomainAtoms:2}).required().error((function(){return{message:"Wrong format"}})),password:It.a.string().min(4).max(16).required().error((function(){return{message:"4 ~ 16 digits"}})),passwordConfirm:It.a.any().valid(It.a.ref("password")).required().error((function(){return{message:"Password mismatch"}}))}),u=It.a.validate(r,i,{abortEarly:!1});if(u.error&&u.error.details.forEach((function(e){c[e.path[0]]||(c=Object(F.a)({},c,Object(P.a)({},e.path[0],e.message)))})),Object.keys(c).filter((function(e){return c[e]})).length>0)return p((function(e){return Object(F.a)({},c,{count:e.count+1})})),void Object.keys(c).forEach((function(e){c[e]&&l(Ye({form:"register",key:e}))}));l((o={username:n,password:t},function(e,n){var t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.a.awrap(e(We(o)));case 3:(t=n.sent)&&ue({auth:t}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.dir("Register failed");case 10:case"end":return n.stop()}}),null,null,[[0,7]])})),l(Qe({form:"register"}))}),[l,r]);return Object(c.useEffect)((function(){if(u){var e={},t=u.response.data;return Object.keys(t).forEach((function(n){e=Object(F.a)({},e,Object(P.a)({},n,t[n]))})),void p(e)}i&&n.push("/")}),[n,i,u]),Object(c.useEffect)((function(){return function(){l(Qe({form:"register"}))}}),[l]),o.a.createElement(vr,{register:!0,onSubmit:x,onChange:m,form:r,error:d})})),gr=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Sign Up \u2022 Chesssup.com")),o.a.createElement(rn,null),o.a.createElement(jr,null),o.a.createElement(kt,null))},Er=t(53),yr=t.n(Er),kr=[[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}]],wr={pawn:{type:"onetime",move:[{dy:-1,dx:0,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!n[t][r].piece}},{dy:-2,dx:0,except:function(e){var n=e.board,t=e.y,r=e.x,a=e.owner;return!("black"===a&&1!==t||"white"===a&&6!==t)&&(!("black"===a&&n[2][r].piece||"white"===a&&n[5][r].piece)&&!("black"===a&&n[3][r].piece||"white"===a&&n[4][r].piece))}},{dy:-1,dx:-1,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!!n[t][r].piece}},{dy:-1,dx:1,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!!n[t][r].piece}}]},knight:{type:"onetime",move:[{dy:-2,dx:-1},{dy:-2,dx:1},{dy:2,dx:-1},{dy:2,dx:1},{dy:-1,dx:-2},{dy:-1,dx:2},{dy:1,dx:-2},{dy:1,dx:2}]},king:{type:"onetime",move:[{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:1},{dy:0,dx:-1},{dy:-1,dx:1},{dy:-1,dx:-1},{dy:1,dx:-1},{dy:1,dx:1},{dy:0,dx:2,except:function(e){var n=e.board,t=e.y,r=e.x,a="white"===e.owner?"black":"white";if(!n[t][r].piece||n[t][r].dirty)return!1;if(!n[t][r+3].piece||n[t][r+3].dirty)return!1;if(n[t][r+1].piece||n[t][r+2].piece)return!1;for(var c=Sr(a,n,!0),o=c.length,i=0;i<o;++i){var u=c[i];if(u.dy===t&&(u.dx===r||u.dx===r+1||u.dx===r+2))return!1}return!0}},{dy:0,dx:-2,except:function(e){var n=e.board,t=e.y,r=e.x,a="white"===e.owner?"black":"white";if(!n[t][r].piece||n[t][r].dirty)return!1;if(!n[t][r-4].piece||n[t][r-4].dirty)return!1;if(n[t][r-1].piece||n[t][r-2].piece||n[t][r-3].piece)return!1;for(var c=Sr(a,n,!0),o=c.length,i=0;i<o;++i){var u=c[i];if(u.dy===t&&(u.dx===r||u.dx===r-1||u.dx===r-2))return!1}return!0}}]},bishop:{type:"multitime",move:[{dy:1,dx:-1},{dy:1,dx:1},{dy:-1,dx:-1},{dy:-1,dx:1}]},rook:{type:"multitime",move:[{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:-1},{dy:0,dx:1}]},queen:{type:"multitime",move:[{dy:1,dx:-1},{dy:1,dx:1},{dy:-1,dx:-1},{dy:-1,dx:1},{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:-1},{dy:0,dx:1}]}},Cr=function(e,n,t){var r=yr.a.cloneDeep(e),a=Object(F.a)({},r[n.y][n.x]);r[n.y][n.x]={covered:!1},r[t.y][t.x]=Object(F.a)({},a,{dirty:!0});var c=r[t.y][t.x],o=c.owner,i=c.piece;if(("white"===o&&"pawn"===i&&0===t.y||"black"===o&&"pawn"===i&&7===t.y)&&(r[t.y][t.x]=Object(F.a)({},r[t.y][t.x],{piece:"queen"})),"king"===r[t.y][t.x].piece){if(t.x-n.x===2){var u=Object(F.a)({},r[n.y][n.x+3]);r[n.y][n.x+3]={covered:!1},r[n.y][n.x+1]=Object(F.a)({},u,{dirty:!0})}if(t.x-n.x===-2){var l=Object(F.a)({},r[n.y][n.x-4]);r[n.y][n.x-4]={covered:!1},r[n.y][n.x-1]=Object(F.a)({},l,{dirty:!0})}}return r},Ir=function(e,n){for(var t=[],r=e.length,a=function(a){for(var c=function(r){var c=!1;n.forEach((function(n){c|=e[a][r][n]})),c&&t.push({y:a,x:r})},o=0;o<r;++o)c(o)},c=0;c<r;++c)a(c);return t.forEach((function(t){e[t.y]=Object(on.a)(e[t.y]);var r=e[t.y][t.x],a=Object(F.a)({},r);n.forEach((function(e){a[e]=!1})),e[t.y].splice(t.x,1,a)})),e},Ar=function(e){if(0===e.length)return e;var n=new Set;return e.forEach((function(e){return n.add(10*e.dy+e.dx)})),Object(on.a)(n).map((function(e){return{dy:parseInt(e/10),dx:e%10}}))},Sr=function(e,n,t){for(var r=[],a=0;a<8;++a)for(var c=0;c<8;++c)if(n[a][c].owner===e){var o=Lr(n,a,c,t);r=[].concat(Object(on.a)(r),Object(on.a)(o))}return Ar(r)},Tr=function(e,n){var t="white"===e?"black":"white",r=yr.a.cloneDeep(n),a=function(e,n){for(var t=0;t<8;++t)for(var r=0;r<8;++r)if(n[t][r].owner===e&&"king"===n[t][r].piece)return{y:t,x:r}}(e,r);return Sr(t,r).forEach((function(e){r[e.dy][e.dx]=Object(F.a)({},r[e.dy][e.dx],{movable:!0})})),!r[a.y][a.x].movable},Lr=function(e,n,t,r){var a=e[n][t],c=a.piece,o=a.owner,i={board:e,y:n,x:t,owner:o};if(c){var u=wr[c],l=u.type,s=u.move,f=[];return f="onetime"===l?s.reduce((function(a,u){var l=n+("black"===o?-u.dy:+u.dy),s=t+u.dx;return l<0||s<0||l>7||s>7?a:(i=Object(F.a)({},i,{dy:l,dx:s}),u.except&&("king"===c&&r||!u.except||!u.except(i))||e[l][s].owner&&e[n][t].owner===e[l][s].owner||a.push({dy:l,dx:s}),a)}),[]):s.flatMap((function(r){for(var a=0,c=[];;){++a;var i=n+a*("black"===o?-r.dy:+r.dy),u=t+a*r.dx;if(i<0||u<0||i>7||u>7)break;if(e[i][u].owner&&e[i][u].owner===o)break;if(c.push({dy:i,dx:u}),e[i][u].owner&&e[i][u].owner!==o)break}return c})),Ar(f)}},_r=a.a.mark(la),Nr=a.a.mark(sa),zr="record/CONNECT_WEBSOCKET",Rr="record/DISCONNECT_WEBSOCKET",Ur=Object(H.a)(zr),Vr=Object(H.a)(Rr),Mr=Object(H.a)("record/INITIALIZE_SOCKET",(function(e){return e})),Kr=Object(H.a)("record/INITIALIZE_VALUE",(function(e){return e})),Br=Object(H.a)("record/CHANGE_VALUE",(function(e){return e})),Dr=Object(H.a)("record/UPDATE_VALUE",(function(e){return e})),Pr=Object(H.a)("record/CLEAR_VALUE"),Fr=Object(H.a)("record/CHANGE_REVERSE",(function(e){return e})),Gr=Object(H.a)("record/CLEAR_TOOLTIP"),Zr=Object(H.a)("record/SET_REQUEST_MODAL",(function(e){return e})),Hr=Object(H.a)("record/SET_REQUEST_MESSAGE",(function(e){return e})),Wr=Object(H.a)("record/SET_BANCLICK"),qr=Object(H.a)("record/SET_SHOWINDEX",(function(e){return e})),Jr=te("record/ASKING"),Xr=Object(Z.a)(Jr,3),Qr=Xr[0],Yr=Xr[1],$r=Xr[2],ea=te("record/ANSWERING"),na=Object(Z.a)(ea,3),ta=na[0],ra=na[1],aa=na[2],ca=re(Qr,(function(e){return oe.a.post("/api/record/asking",e)})),oa=re(ta,(function(e){return oe.a.post("/api/record/answering",e)})),ia=function(e){var n=e.genre,t=e.modal,r=e.open,a=e.message;return function(e,c){e(r?a?Hr({type:n,message:a}):Zr({type:n,modal:t}):Gr())}},ua=function(e){return function(n,t){var r=t().record,a=Object(F.a)({},r);Object.keys(e).forEach((function(n){"object"===typeof e[n]&&(a=Object(F.a)({},a,Object(P.a)({},n,[].concat(Object(on.a)(a[n]),[e[n]]))))})),n(Dr({record:a}))}};function la(e){var n,t;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.payload,r.next=3,Object(X.e)(ee,{url:"/record",initializeSocket:Mr,initializeValue:Kr,changeValue:Br,updateValue:ua,notifyRequest:ia,query:n});case 3:return t=r.sent,r.next=6,Object(X.g)(Rr);case 6:return r.next=8,Object(X.c)(t);case 8:case"end":return r.stop()}}),_r)}function sa(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.h)(zr,la);case 2:case"end":return e.stop()}}),Nr)}var fa,ba={socket:null,error:null,startTime:null,endTime:null,blackTime:null,whiteTime:null,blackMaxTime:null,whiteMaxTime:null,whiteRatio:0,blackRatio:0,pieceMove:[],reversed:!1,blocked:!1,banClick:!1,showIndex:null,replayMode:!1,undo:{message:null,modal:null},draw:{message:null,modal:null},surrender:{message:null,modal:null}},da=Object(W.a)((Qt={},Object(P.a)(Qt,"record/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(F.a)({},e,{socket:t})})),Object(P.a)(Qt,"record/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(G.a)(t,["type"]));return Object(F.a)({},e,{},r,{showIndex:r.pieceMove.length-1})})),Object(P.a)(Qt,"record/CHANGE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(G.a)(t,["type"]));return Object(F.a)({},e,{},r)})),Object(P.a)(Qt,"record/UPDATE_VALUE",(function(e,n){var t=n.payload.record;return Object(F.a)({},t)})),Object(P.a)(Qt,"record/CLEAR_VALUE",(function(e){return ba})),Object(P.a)(Qt,"record/CHANGE_REVERSE",(function(e,n){var t=n.payload.reversed;return Object(F.a)({},e,{reversed:t})})),Object(P.a)(Qt,"record/SET_SHOWINDEX",(function(e,n){var t=n.payload,r=t.showIndex,a=t.replayMode;return Object(F.a)({},e,{showIndex:r,replayMode:a})})),Object(P.a)(Qt,Qr,(function(e){return e})),Object(P.a)(Qt,Yr,(function(e){return e})),Object(P.a)(Qt,$r,(function(e){return e})),Object(P.a)(Qt,ta,(function(e){return e})),Object(P.a)(Qt,ra,(function(e){return e})),Object(P.a)(Qt,aa,(function(e){return e})),Object(P.a)(Qt,"record/CLEAR_TOOLTIP",(function(e){return Object(F.a)({},e,{undo:ba.undo,draw:ba.draw,surrender:ba.surrender,blocked:!1,banClick:!1})})),Object(P.a)(Qt,"record/SET_BANCLICK",(function(e){return Object(F.a)({},e,{banClick:!0})})),Object(P.a)(Qt,"record/SET_REQUEST_MODAL",(function(e,n){var t,r=n.payload,a=r.type,c=r.modal;return Object(F.a)({},e,(t={},Object(P.a)(t,a,Object(F.a)({},e[a],{modal:c})),Object(P.a)(t,"blocked",!0),t))})),Object(P.a)(Qt,"record/SET_REQUEST_MESSAGE",(function(e,n){var t,r=n.payload,a=r.type,c=r.message;return Object(F.a)({},e,(t={},Object(P.a)(t,a,Object(F.a)({},e[a],{message:c})),Object(P.a)(t,"blocked",!0),t))})),Qt),ba),pa=a.a.mark(Ra),ma=a.a.mark(Ua),xa="canvas/CONNECT_WEBSOCKET",va="canvas/DISCONNECT_WEBSOCKET",ha=Object(H.a)(xa,(function(e){return e})),Oa=Object(H.a)(va),ja=Object(H.a)("canvas/INITIALIZE_SOCKET",(function(e){return e})),ga=Object(H.a)("canvas/INITIALIZE_VALUE",(function(e){return e})),Ea=Object(H.a)("canvas/CHANGE_VALUE",(function(e){return e})),ya=Object(H.a)("canvas/CLEAR_VALUE"),ka=Object(H.a)("canvas/INITIALIZE_BLOCKED",(function(e){return e})),wa=Object(H.a)("canvas/CHANGE_BLOCKED",(function(e){return e})),Ca=te("canvas/SET_MOVE_PIECE"),Ia=Object(Z.a)(Ca,3),Aa=Ia[0],Sa=Ia[1],Ta=Ia[2],La=re(Aa,(function(e){return oe.a.post("/api/canvas/movePiece",e)})),_a=function(e,n){var t=function(e){var n=yr.a.cloneDeep(e);return n.reverse(),n.forEach((function(e){e.reverse()})),n}(n);e=Object(on.a)(e);for(var r=function(n){for(var r=function(r){var a=t[n][r],c=e[n][r];Object.keys(a).every((function(t){return!(!c[t]||c[t]!==a[t])||(e[n]=Object(on.a)(e[n]),e[n][r]=Object(F.a)({},a),!1)}))},a=0;a<8;++a)r(a)},a=0;a<8;++a)r(a);return e},Na=function(e){var n=e.diff,t=e.index;return function(e,r){var a=r(),c=a.canvas,o=c.board,i=c.reverseBoard,u=a.record,l=u.showIndex,s=u.pieceMove,f=a.socketAuth.role,b=a.game.turn;if(n||(n=t-l),0!==n&&!(l+n<-1||l+n>=s.length)){var d=function(e,n,t,r){var a=Ir(Object(on.a)(e),["covered","clicked","tracked"]);if(t<r)for(var c=t+1;c<=r;++c){var o=n[c].prev,i=n[c].prevPiece,u=n[c].next;n[c].nextPiece;a[o.y]=Object(on.a)(a[o.y]),a[o.y][o.x]={covered:!1},a[u.y]=Object(on.a)(a[u.y]),a[u.y][u.x]=Object(F.a)({},i,{dirty:!0});var l=a[u.y][u.x],s=l.owner,f=l.piece;if(("white"===s&&"pawn"===f&&0===u.y||"black"===s&&"pawn"===f&&7===u.y)&&(a[u.y][u.x]=Object(F.a)({},a[u.y][u.x],{piece:"queen"})),"king"===a[u.y][u.x].piece){if(u.x-o.x===2){a[o.y]=Object(on.a)(a[o.y]);var b=Object(F.a)({},a[o.y][o.x+3]);a[o.y][o.x+3]={covered:!1},a[o.y][o.x+1]=Object(F.a)({},b,{dirty:!0})}if(u.x-o.x===-2){a[o.y]=Object(on.a)(a[o.y]);var d=Object(F.a)({},a[o.y][o.x-4]);a[o.y][o.x-4]={covered:!1},a[o.y][o.x-1]=Object(F.a)({},d,{dirty:!0})}}}else for(var p=t;p>r;--p){var m=n[p].prev,x=n[p].prevPiece,v=n[p].next,h=n[p].nextPiece;if(a[m.y]=Object(on.a)(a[m.y]),a[m.y][m.x]=Object(F.a)({},x),a[v.y]=Object(on.a)(a[v.y]),a[v.y][v.x]=Object(F.a)({},h),"king"===a[m.y][m.x].piece){if(m.x-v.x===-2){a[m.y]=Object(on.a)(a[m.y]);var O=Object(F.a)({},a[m.y][m.x+1]);a[m.y][m.x+3]=Object(F.a)({},O,{dirty:!1}),a[m.y][m.x+1]={covered:!1}}if(m.x-v.x===2){a[m.y]=Object(on.a)(a[m.y]);var j=Object(F.a)({},a[m.y][m.x-1]);a[m.y][m.x-4]=Object(F.a)({},j,{dirty:!1}),a[m.y][m.x-1]={covered:!1}}}}if(0<=r&&r<n.length){var g=n[r],E=g.prev,y=E.y,k=E.x,w=g.next,C=w.y,I=w.x;a[y]=Object(on.a)(a[y]),a[y][k]=Object(F.a)({},a[y][k],{tracked:!0}),a[C]=Object(on.a)(a[C]),a[C][I]=Object(F.a)({},a[C][I],{tracked:!0})}return console.dir(a),a}(o,s,l,l+n),p=_a(i,d);l+n+1===s.length?(e(wa(("white"===f||"spectator"===f)&&b%2===0||"black"===f&&b%2===1?{blocked:!1}:{blocked:!0})),e(qr({showIndex:l+n,replayMode:!1}))):(e(wa({blocked:!0})),e(qr({showIndex:l+n,replayMode:!0}))),e(Ea({board:d,reverseBoard:p,clicked:null}))}}},za=function(e){var n=e.move;return function(e,t){var r=n.prev,a=n.next,c=t(),o=c.canvas,i=o.board,u=o.reverseBoard,l=c.record,s=l.showIndex;if(!l.replayMode){var f=i[r.y][r.x],b=Ir(Object(on.a)(i),["covered","clicked","tracked"]);b[a.y]=Object(on.a)(b[a.y]),b[a.y][a.x]=Object(F.a)({},f,{tracked:!0,dirty:!0}),b[r.y]=Object(on.a)(b[r.y]),b[r.y][r.x]={covered:!1,tracked:!0};var d=b[a.y][a.x],p=d.owner,m=d.piece;if(("white"===p&&"pawn"===m&&0===a.y||"black"===p&&"pawn"===m&&7===a.y)&&(b[a.y][a.x]=Object(F.a)({},b[a.y][a.x],{piece:"queen"})),"king"===b[a.y][a.x].piece){if(a.x-r.x===2){b[r.y]=Object(on.a)(b[r.y]);var x=Object(F.a)({},b[r.y][r.x+3]);b[r.y][r.x+3]={covered:!1},b[r.y][r.x+1]=Object(F.a)({},x,{dirty:!0})}if(a.x-r.x===-2){b[r.y]=Object(on.a)(b[r.y]);var v=Object(F.a)({},b[r.y][r.x-4]);b[r.y][r.x-4]={covered:!1},b[r.y][r.x-1]=Object(F.a)({},v,{dirty:!0})}}var h=_a(u,b);e(Ea({board:b,reverseBoard:h,clicked:null})),e(qr({showIndex:s+1}))}}};function Ra(e){var n,t;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.payload,r.next=3,Object(X.e)(ee,{url:"/canvas",initializeSocket:ja,initializeValue:ga,changeValue:za,query:n});case 3:return t=r.sent,r.next=6,Object(X.g)(va);case 6:return r.next=8,Object(X.c)(t);case 8:case"end":return r.stop()}}),pa)}function Ua(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.h)(xa,Ra);case 2:case"end":return e.stop()}}),ma)}var Va=yr.a.cloneDeep(kr);Va.reverse(),Va.forEach((function(e){e.reverse()}));var Ma={socket:null,error:null,board:kr,reverseBoard:Va,clicked:null,blocked:!0,reversed:!1},Ka=Object(W.a)((fa={},Object(P.a)(fa,"canvas/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(F.a)({},e,{socket:t})})),Object(P.a)(fa,"canvas/INITIALIZE_VALUE",(function(e,n){var t=n.payload.board;return Object(F.a)({},e,{board:t,reverseBoard:_a(e.reverseBoard,t)})})),Object(P.a)(fa,"canvas/CHANGE_VALUE",(function(e,n){var t=n.payload,r=t.board,a=t.reverseBoard,c=t.clicked;return Object(F.a)({},e,{board:r,reverseBoard:a,clicked:c})})),Object(P.a)(fa,"canvas/CLEAR_VALUE",(function(e){return Ma})),Object(P.a)(fa,"canvas/INITIALIZE_BLOCKED",(function(e,n){var t=n.payload.blocked;return Object(F.a)({},e,{blocked:t})})),Object(P.a)(fa,"canvas/CHANGE_BLOCKED",(function(e,n){var t=n.payload.blocked;return Object(F.a)({},e,{blocked:t})})),Object(P.a)(fa,Sa,(function(e){return e})),Object(P.a)(fa,Ta,(function(e){return e})),fa),Ma),Ba=t(50),Da={pawn:Ba.d,king:Ba.b,queen:Ba.e,bishop:Ba.a,knight:Ba.c,rook:Ba.f,covered:Ba.g},Pa={white:{color:"white",style:{filter:"drop-shadow(1px 1px 1px white)",width:"80%",height:"80%"}},black:{color:"black",style:{filter:"drop-shadow(1px 1px 1px black)",width:"80%",height:"80%"}},covered0:{style:{filter:"drop-shadow(1px 1px 1px black)",width:"30%",height:"30%",color:"rgb(130, 151, 105)"}},covered1:{style:{filter:"drop-shadow(1px 1px 1px black)",width:"30%",height:"30%",color:"rgb(100, 111, 64)"}}};function Fa(){var e=Object(x.a)(["\n    body {\n        background: rgba(255,255,255,0.5);\n    }\n"]);return Fa=function(){return e},e}function Ga(){var e=Object(x.a)(["\n        visibility: visible;\n        opacity: 1;\n    "]);return Ga=function(){return e},e}function Za(){var e=Object(x.a)(["\n    position: absolute;\n    top: 0;\n    left: calc(100% + 17px);\n    width: 60px;\n    height: 30px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    font-size: 12px;\n    visibility: hidden;\n    opacity: 0;\n    transition: 0.5s;\n    font-weight: bold;\n\n    ","\n"]);return Za=function(){return e},e}function Ha(){var e=Object(x.a)(["\n        pointer-events: none;\n    "]);return Ha=function(){return e},e}function Wa(){var e=Object(x.a)(["\n    ","\n"]);return Wa=function(){return e},e}function qa(){var e=Object(x.a)(["\n            background-color: rgb(132, 121, 78);\n        "]);return qa=function(){return e},e}function Ja(){var e=Object(x.a)(["\n            background-color: rgb(174, 177, 135);\n        "]);return Ja=function(){return e},e}function Xa(){var e=Object(x.a)(["\n        background-color: rgb(170, 162, 58);\n    "]);return Xa=function(){return e},e}function Qa(){var e=Object(x.a)(["\n        background-color: rgb(205, 210, 106);\n    "]);return Qa=function(){return e},e}function Ya(){var e=Object(x.a)(["\n        background-color: rgb(100, 111, 64);\n    "]);return Ya=function(){return e},e}function $a(){var e=Object(x.a)(["\n        background-color: rgb(130, 151, 105);\n    "]);return $a=function(){return e},e}function ec(){var e=Object(x.a)(["\n        background-color: rgb(181, 136, 99);\n    "]);return ec=function(){return e},e}function nc(){var e=Object(x.a)(["\n        background-color: rgb(240, 217, 181);\n    "]);return nc=function(){return e},e}function tc(){var e=Object(x.a)(["\n    display: flex;\n    cursor: pointer;\n    justify-content: center;\n    align-items: center;\n    /* width: 90px;\n    height: 90px; */\n    \n    width: ",";\n\n    height: ",";\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    &:hover {\n        ","\n\n        ","  \n    }\n"]);return tc=function(){return e},e}function rc(){var e=Object(x.a)(["\n    display: flex;\n"]);return rc=function(){return e},e}function ac(){var e=Object(x.a)(["\n        opacity: 0.8;\n    "]);return ac=function(){return e},e}function cc(){var e=Object(x.a)(["\n    position: relative;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    transition: 0.5s;\n\n    ","\n"]);return cc=function(){return e},e}var oc=function(e){var n=e.piece,t=e.owner,r=e.covered,a=e.cellNum,c=null;if(r){var i=Da.covered;c=o.a.createElement(Tt.b.Provider,{value:Pa["covered".concat(a)]},o.a.createElement(i,null))}if(!n||!t)return c;var u=Da[n],l=c?{opacity:.5,filter:"black"===t?"drop-shadow(1px 1px 1px white)":"drop-shadow(1px 1px 1px black)"}:null,s=Object(F.a)({},Pa[t],{style:Object(F.a)({},Pa[t].style,{},l)});return o.a.createElement(Tt.b.Provider,{value:s},o.a.createElement(u,null))},ic=h.c.div(cc(),(function(e){return e.replayMode&&Object(h.b)(ac())})),uc=h.c.div(rc()),lc=h.c.div(tc(),(function(e){return e.cellSize?e.cellSize:"90px"}),(function(e){return e.cellSize?e.cellSize:"90px"}),(function(e){return 0===e.cellNum&&Object(h.b)(nc())}),(function(e){return 1===e.cellNum&&Object(h.b)(ec())}),(function(e){return 0===e.cellNum&&e.clicked&&Object(h.b)($a())}),(function(e){return 1===e.cellNum&&e.clicked&&Object(h.b)(Ya())}),(function(e){return 0===e.cellNum&&e.tracked&&Object(h.b)(Qa())}),(function(e){return 1===e.cellNum&&e.tracked&&Object(h.b)(Xa())}),(function(e){return 0===e.cellNum&&e.covered&&Object(h.b)(Ja())}),(function(e){return 1===e.cellNum&&e.covered&&Object(h.b)(qa())})),sc=o.a.memo((function(e){var n=e.row,t=e.y,r=e.cellSize,a=e.onClickCell,c=e.pieceConverter;return o.a.createElement(uc,null,n.map((function(e,n){return o.a.createElement(fc,{key:"cell_".concat(t,"_").concat(n),onClick:a.bind(null,{y:t,x:n}),pieceConverter:c,cellNum:(n+t)%2,cellSize:r,cell:e,y:t,x:n})})))}),(function(e,n){return e.row===n.row})),fc=o.a.memo((function(e){var n=e.cell,t=e.cellSize,r=e.cellNum,a=e.onClick,c=e.pieceConverter;e.y,e.x;return o.a.createElement(lc,Object.assign({onClick:a,cellNum:r,cellSize:t},n),c({piece:n.piece,owner:n.owner,covered:n.covered,cellNum:r}))}),(function(e,n){return e.cell===n.cell})),bc=h.c.div(Wa(),(function(e){return e.blocked&&Object(h.b)(Ha())})),dc=function(e){var n=e.board,t=e.blocked,r=e.cellSize,a=e.onClick,i=Object(c.useCallback)((function(e){var n=e.y,t=e.x;a(n,t)}),[a]);return o.a.createElement(bc,{blocked:t},n.map((function(e,n){return o.a.createElement(sc,{key:"row_".concat(n),row:e,y:n,cellSize:r,onClickCell:i,pieceConverter:oc})})))},pc=h.c.div(Za(),(function(e){return e.replayMode&&Object(h.b)(Ga())})),mc=Object(h.a)(Fa()),xc=o.a.memo((function(e){var n=e.onContextMenu,t=e.replayMode,r=e.billBoard,a=Object(G.a)(e,["onContextMenu","replayMode","billBoard"]);return o.a.createElement(o.a.Fragment,null,r&&o.a.createElement(mc,null),o.a.createElement(ic,{replayMode:t,onContextMenu:n},o.a.createElement(dc,a),o.a.createElement(pc,{replayMode:t},"Replay")))})),vc=function(e){var n=e.cellSize,t=e.glanceAt,r=Object(s.c)((function(e){var n=e.canvas,t=e.socketAuth,r=e.game,a=e.record;return{board:n.board,reverseBoard:n.reverseBoard,blocked:n.blocked,reversed:a.reversed,replayMode:a.replayMode,turn:r.turn,role:t.role}})),a=r.board,i=r.reverseBoard,u=r.blocked,l=r.reversed,f=r.replayMode,b=r.turn,d=r.role,p=Object(s.b)(),m=Object(c.useState)(!1),x=Object(Z.a)(m,2),v=x[0],h=x[1];Object(c.useEffect)((function(){(d&&!v||t&&!v)&&h(!0)}),[v,d,t]),Object(c.useEffect)((function(){f||p(ka(("white"===d||"spectator"===d)&&b%2===0||"black"===d&&b%2===1?{blocked:!1}:{blocked:!0}))}),[p,b,d,f]),Object(c.useEffect)((function(){return function(){p(ya())}}),[p]);var O=Object(c.useCallback)((function(e,n){p(function(e){var n=e.y,t=e.x;return function(e,r){var a=r(),c=a.canvas,o=c.board,i=c.reverseBoard,u=c.clicked,l=a.record.reversed,s=a.socketAuth.role,f=!1;("white"===s&&l||"black"===s&&!l)&&(f=!0);var b=n,d=t;if(f&&(b=7-n,d=7-t),(u||o[b][d].owner===s)&&(!u||o[b][d].covered||o[b][d].owner===s))if(u&&o[b][d].covered){var p=r().canvas.socket;e(La({socket:p,move:{prev:u,next:{y:b,x:d}}}))}else{var m=Lr(o,b,d),x=Ir(Object(on.a)(o),["covered","clicked"]);m.forEach((function(e){var n=Cr(x,{y:b,x:d},{y:e.dy,x:e.dx});if(Tr(o[b][d].owner,n)){x[e.dy]=Object(on.a)(x[e.dy]);var t=x[e.dy][e.dx];x[e.dy].splice(e.dx,1,Object(F.a)({},t,{covered:!0}))}})),x[b]=Object(on.a)(x[b]),x[b][d]=Object(F.a)({},x[b][d],{clicked:!0});var v=_a(i,x);e(Ea({board:x,reverseBoard:v,clicked:{y:b,x:d}}))}}}({y:e,x:n}))}),[p]),j=Object(c.useCallback)((function(e){e.preventDefault(),p((function(e,n){var t=n().canvas,r=t.board,a=t.reverseBoard,c=Ir(Object(on.a)(r),["covered","clicked"]),o=_a(a,c);e(Ea({board:c,reverseBoard:o,clicked:null}))}))}),[p]),g=!1;(("white"===d||"spectator"===d)&&l||"black"===d&&!l)&&(g=!0);var E=a;return g&&(E=i),v||(E=Object(on.a)(kr)),o.a.createElement(xc,{board:E,blocked:u,onClick:O,onContextMenu:j,cellSize:n,replayMode:f})};function hc(){var e=Object(x.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* pointer-events: none; */\n"]);return hc=function(){return e},e}function Oc(){var e=Object(x.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    transition: 0.5s;\n    opacity: 0;\n\n    &:hover {\n        opacity: 1;\n    }\n"]);return Oc=function(){return e},e}var jc=h.c.div(Oc()),gc=h.c.div(hc()),Ec=o.a.memo((function(e){var n=e.cellSize;e.glanceAt;return o.a.createElement(jc,null,o.a.createElement(gc,null,o.a.createElement(vc,{cellSize:n,glanceAt:!0})))})),yc=function(e){var n=e.gameKey,t=e.cellSize,r=Object(s.b)();Object(c.useEffect)((function(){return function(){r(Oa())}}),[r]);var i=cn((function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return r(Oa()),e.next=3,a.a.awrap(Promise.resolve().then((function(){r(ha({gameKey:n}))})));case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}))}),[r]),u=Object(Z.a)(i,1)[0];u.loading,u.data,u.error;return o.a.createElement(Ec,{cellSize:t,glanceAt:!0})};function kc(){var e=Object(x.a)(["\n    \n"]);return kc=function(){return e},e}function wc(){var e=Object(x.a)(["\n    \n"]);return wc=function(){return e},e}function Cc(){var e=Object(x.a)(["\n    z-index: 1;\n    display: flex;\n    position: relative;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 216px;\n    height: 216px;\n    background-color: rgb(255,255,255, 0.6);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    cursor: pointer;\n    transition: 0.5s;\n\n    &:hover {\n        background-color: rgb(255,255,255, 0.1);\n    }\n\n    &:first-child {\n        margin-left: 18px;\n    }\n\n    & + & {\n        margin-left: 18px;\n    }\n"]);return Cc=function(){return e},e}var Ic=h.c.div(Cc()),Ac=h.c.div(wc()),Sc=h.c.div(kc()),Tc=o.a.memo((function(e){var n=e.game,t=e.canvas,r=e.onClick,a=e.onMouseEnter,c=e.onMouseLeave,i=Object(G.a)(e,["game","canvas","onClick","onMouseEnter","onMouseLeave"]);return console.dir("game~"),o.a.createElement(Ic,Object.assign({onClick:function(){return r(n.key)},onMouseEnter:a,onMouseLeave:c},i),o.a.createElement(Ac,null,n.name),o.a.createElement(Sc,null,n.participant),t?o.a.createElement(yc,{gameKey:n.key,cellSize:"27px"}):null)})),Lc=Object(v.f)((function(e){var n=e.history,t=Object(G.a)(e,["history"]),r=Object(c.useState)(!1),a=Object(Z.a)(r,2),i=a[0],u=a[1],l=Object(c.useCallback)((function(){u(!0)}),[]),s=Object(c.useCallback)((function(){u(!1)}),[]),f=Object(c.useCallback)((function(e){n.push("/game/".concat(e))}),[n]);return o.a.createElement(Tc,Object.assign({},t,{canvas:i,onClick:f,onMouseEnter:l,onMouseLeave:s}))}));function _c(){var e=Object(x.a)(["\n    width: 720px;\n    height: 720px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    overflow-y: overlay;\n    padding-right: 20px;\n"]);return _c=function(){return e},e}function Nc(){var e=Object(x.a)(["\n    width: 720px;\n    height: 720px;\n    overflow: hidden;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Nc=function(){return e},e}function zc(){var e=Object(x.a)(["\n    position: relative;\n    background-color: rgba(255, 255, 255, 0.5);\n"]);return zc=function(){return e},e}function Rc(){var e=Object(x.a)(["\n    display: flex;\n    width: 100%;\n\n    &:first-child {\n        margin-top: 18px;\n    }\n\n    &:last-child {\n        margin-bottom: 18px;\n    }\n\n    & + & {\n        margin-top: 18px;\n    }\n"]);return Rc=function(){return e},e}var Uc=h.c.div(Rc()),Vc=h.c.div(zc()),Mc=h.c.div(Nc()),Kc=h.c.div(_c()),Bc=o.a.memo((function(e){var n=e.games,t=e.onGameClick,r=[];n&&(r=Object(on.a)(n));for(var a=[],c=Math.floor(r.length/3),i=0;i<=c;++i)a.push(o.a.createElement(Uc,{key:"GridRowBlock_".concat(i)},r.splice(0,3).map((function(e){return o.a.createElement(Lc,{key:"GridBox".concat(e.name),game:e,onClick:function(n){return t(n,e.key)}})}))));return o.a.createElement(Vc,null,o.a.createElement(Mc,null,o.a.createElement(Kc,null,a)),o.a.createElement(Tt.b.Provider,{value:{style:{position:"absolute",top:"0",left:"0",width:"720px",height:"720px",opacity:"0.2",zIndex:-1}}},o.a.createElement(St.a,null)))})),Dc=function(){var e=Object(s.c)((function(e){return{games:e.games.games}})).games;return o.a.createElement(Bc,{games:e})},Pc=o.a.memo((function(){return o.a.createElement(o.a.Fragment,null)})),Fc=function(){return o.a.createElement(Pc,null)},Gc=function(e){var n=Object(c.useState)(e),t=Object(Z.a)(n,2),r=t[0],a=t[1],o=Object(c.useRef)(null),i=Object(c.useCallback)((function(e){o.current&&!o.current.contains(e.target)&&a(!1)}),[]);return Object(c.useEffect)((function(){return document.addEventListener("click",i),function(){document.removeEventListener("click",i)}}),[i]),{ref:o,componentState:r,setComponentState:a}};function Zc(){var e=Object(x.a)(["\n    width: 100%;\n    box-sizing: border-box;\n    height: 30px;\n    padding-left: 10px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    font-size: 13px;\n\n    &:hover {\n        background-color: rgba(0,0,0,0.1);\n    }\n"]);return Zc=function(){return e},e}function Hc(){var e=Object(x.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    margin-top: 40px;\n    z-index: 10;\n    background-color: white;\n    display: flex;\n    flex-direction: column;\n    width: 130px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Hc=function(){return e},e}function Wc(){var e=Object(x.a)(["\n    width: 130px;\n    height: 30px;\n    box-sizing: border-box;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding-left: 10px;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    font-size: 13px;\n    \n    cursor: pointer;\n    &:active {\n        background-color: rgba(0,0,0,0.1);\n    }\n"]);return Wc=function(){return e},e}function qc(){var e=Object(x.a)(["\n    position: absolute;\n    top: -10px;\n    left: 70%;\n    width: 30%;\n    display: flex;\n    justify-content: flex-end;\n    font-weight: 500;\n    font-size: 12px;\n    color: rgba(0,0,0,0.3);\n"]);return qc=function(){return e},e}function Jc(){var e=Object(x.a)(["\n    position: relative;\n"]);return Jc=function(){return e},e}var Xc,Qc=h.c.div(Jc()),Yc=h.c.div(qc()),$c=h.c.div(Wc()),eo=h.c.div(Hc()),no=h.c.div(Zc()),to=o.a.memo((function(e){var n=e.kind,t=e.name,r=e.list,a=e.reference,c=e.componentState,i=e.onClickSelection,u=e.onClickOption;return o.a.createElement(Qc,null,o.a.createElement(Yc,null,n),o.a.createElement($c,{ref:a,onClick:i},t),c&&o.a.createElement(eo,null,r.map((function(e){return o.a.createElement(no,{key:e,onClick:function(){return u(e)}},e)}))))})),ro=Object(H.a)("create/CHANGE_FIELD",(function(e){return e})),ao=Object(H.a)("create/CLEAR_FIELD",(function(e){return e})),co={map:"Classical",mapList:["Classical","Crazy House","Racing Kings"],mode:"Normal",modeList:["Normal","Rank"],defaultTime:15,extraTime:30,config:{defaultTime:{min:1,max:30,step:1},extraTime:{min:0,max:60,step:5}},piece:"white"},oo=Object(W.a)((Xc={},Object(P.a)(Xc,"create/CHANGE_FIELD",(function(e,n){var t=n.payload,r=t.key,a=t.value;return Object(F.a)({},e,Object(P.a)({},r,a))})),Object(P.a)(Xc,"create/CLEAR_FIELD",(function(e){return co})),Xc),co),io=function(e){var n=e.kind,t=Object(s.c)((function(e){var t=e.create;return{name:t[n],list:t["".concat(n,"List")]}})),r=t.name,a=t.list,i=Object(s.b)(),u=Gc(!1),l=u.ref,f=u.componentState,b=u.setComponentState,d=Object(c.useCallback)((function(){b((function(e){return!e}))}),[b]),p=Object(c.useCallback)((function(e){i(ro({key:n,value:e}))}),[i,n]);return o.a.createElement(to,{kind:n,name:r,list:a,reference:l,componentState:f,onClickSelection:d,onClickOption:p})};function uo(){var e=Object(x.a)(["\n    display: flex;\n    position: relative;\n    justify-content: center;\n    align-items: center;\n    font-size: 15px;\n    width: 60px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return uo=function(){return e},e}function lo(){var e=Object(x.a)(["\n    position: absolute;\n    top: -10px;\n    left: 70%;\n    width: 30%;\n    display: flex;\n    justify-content: flex-end;\n    font-weight: 500;\n    font-size: 12px;\n    color: rgba(0,0,0,0.3);\n"]);return lo=function(){return e},e}function so(){var e=Object(x.a)(["\n    -webkit-appearance: none;\n    width: 150px;\n    height: 30px;\n    cursor: pointer;\n    background: ",";\n    background-size: 140px 5px;\n    background-position: center;\n    background-repeat: no-repeat;\n    overflow: hidden;\n    outline: none;\n    /* zoom: 100%; */\n    display: block;\n\n    &::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        width: 10px;\n        height: 10px;\n        box-shadow: 0 2px 2px 0 rgba(0,0,0,0.36), 0 3px 1px -2px rgba(0,0,0,0.6), 0 1px 5px 0 rgba(0,0,0,0.36);\n        position: relative;\n        background-color: rgba(255,255,255, 0.8);\n        z-index: 3;\n    };\n"]);return so=function(){return e},e}function fo(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 200px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return fo=function(){return e},e}function bo(){var e=Object(x.a)(["\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    & + & {\n        margin-top: 15px;\n    }\n"]);return bo=function(){return e},e}var po=h.c.div(bo()),mo=h.c.div(fo()),xo=h.c.input(so(),(function(e){return e.kind,"linear-gradient(to right, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.6) 100%)"})),vo=h.c.div(lo()),ho=h.c.div(uo()),Oo=o.a.memo((function(e){var n=e.onChange,t=e.kind,r=e.value,a=e.config,c=t.substring(0,t.length-4);return o.a.createElement(po,null,o.a.createElement(mo,null,o.a.createElement(xo,Object.assign({type:"range",onChange:n},a,{kind:t,value:r}))),o.a.createElement(ho,null,o.a.createElement(vo,null,c),r))})),jo=function(e){var n=e.kind,t=Object(s.c)((function(e){var t=e.create;return{value:t[n],config:t.config[n]}})),r=t.value,a=t.config,i=Object(s.b)(),u=Object(c.useCallback)((function(e){i(ro({key:n,value:e.target.value}))}),[i,n]);return o.a.createElement(Oo,{onChange:u,kind:n,value:r,config:a})};function go(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n\n    background-color: ",";\n    &:hover {\n        background-color: rgba(0, 0, 0, 0.1);\n    }\n"]);return go=function(){return e},e}var Eo=h.c.div(go(),(function(e){return e.checked&&"rgba(0,0,0,0.1)"})),yo=o.a.memo((function(e){var n=e.checked,t=e.kind,r=e.onClick,a={style:{color:t,filter:"drop-shadow(1px 1px 1px ".concat("white"===t?"black":"white",")"),width:"30px",height:"30px"}};return o.a.createElement(Eo,{checked:n?1:0,onClick:function(){return r(t)}},o.a.createElement(Tt.b.Provider,{value:a},o.a.createElement(St.b,null)))})),ko=function(e){var n=e.white,t=e.black,r=Object(s.c)((function(e){return{piece:e.create.piece}})).piece,a=Object(s.b)(),i=Object(c.useCallback)((function(e){a(ro({key:"piece",value:e}))}),[a]),u=n?"white":t?"black":null,l=r===u;return o.a.createElement(yo,{kind:u,checked:l,onClick:i})};function wo(){var e=Object(x.a)(["\n    position: absolute;\n    top: -10px;\n    left: 70%;\n    width: 30%;\n    display: flex;\n    justify-content: flex-end;\n    font-weight: 500;\n    font-size: 12px;\n    color: rgba(0,0,0,0.3);\n"]);return wo=function(){return e},e}function Co(){var e=Object(x.a)(["\n    cursor: pointer;\n    position: absolute;\n    border: none;\n    outline: none;\n    margin: 0;\n    padding: 0;\n    font-size: 20px;\n    font-weight: 700;\n    top: 0px;\n    left: 0px;\n    display: flex;\n    justify-content: flex-end;\n    width: 65px;\n    height: 40px;\n    color: rgba(0, 0, 0, 0.3);\n    transition: 0.5s;\n    background-color: transparent;\n\n    @keyframes jump {\n        0%, 100% {\n            top: 0;\n        }\n        50% {\n            top: -3px;\n        }\n    }\n\n    &:hover {\n        animation: jump 0.5s 1;\n        color: rgba(0, 0, 0, 0.6);\n    }\n"]);return Co=function(){return e},e}function Io(){var e=Object(x.a)(["\n    position: relative;\n    width: 65px;\n    height: 40px;\n"]);return Io=function(){return e},e}function Ao(){var e=Object(x.a)(["\n    margin-top: 30px;\n    position: relative;\n    display: flex;\n    justify-content: flex-end;\n    width: 100%;\n"]);return Ao=function(){return e},e}function So(){var e=Object(x.a)(["\n    position: relative;\n    height: 60px;\n    margin-top: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return So=function(){return e},e}function To(){var e=Object(x.a)(["\n    margin-top: 20px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n"]);return To=function(){return e},e}function Lo(){var e=Object(x.a)(["\n    margin-top: 40px;\n    display: flex;\n    justify-content: space-between;\n"]);return Lo=function(){return e},e}function _o(){var e=Object(x.a)(["\n    font-size: 24px;\n    font-weight: 700;\n"]);return _o=function(){return e},e}function No(){var e=Object(x.a)(["\n    padding: 30px;\n    box-sizing: border-box;\n    width: 100%;\n    height: 400px;\n    background-color: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return No=function(){return e},e}var zo,Ro=h.c.form(No()),Uo=h.c.div(_o()),Vo=h.c.div(Lo()),Mo=h.c.div(To()),Ko=h.c.div(So()),Bo=h.c.div(Ao()),Do=h.c.div(Io()),Po=h.c.button(Co()),Fo=h.c.div(wo()),Go=o.a.memo((function(e){var n=e.onSubmit;return o.a.createElement(Ro,{onSubmit:n},o.a.createElement(Uo,null,"New Game"),o.a.createElement(Vo,null,o.a.createElement(io,{kind:"map"}),o.a.createElement(io,{kind:"mode"})),o.a.createElement(Mo,null,o.a.createElement(jo,{kind:"defaultTime"}),o.a.createElement(jo,{kind:"extraTime"})),o.a.createElement(Ko,null,o.a.createElement(Fo,null,"Piece"),o.a.createElement(ko,{white:!0}),o.a.createElement(ko,{black:!0})),o.a.createElement(Bo,null,o.a.createElement(Do,null,o.a.createElement(Po,{type:"submit"},"Create"))))})),Zo=a.a.mark(oi),Ho=a.a.mark(ii),Wo="games/CONNECT_WEBSOCKET",qo="games/DISCONNECT_WEBSOCKET",Jo=Object(H.a)(Wo),Xo=Object(H.a)(qo),Qo=Object(H.a)("games/INITIALIZE_SOCKET",(function(e){return e})),Yo=Object(H.a)("games/INITIALIZE_VALUE",(function(e){return e})),$o=Object(H.a)("games/CLEAR_VALUE"),ei=te("games/CREATE_GAME"),ni=Object(Z.a)(ei,3),ti=ni[0],ri=ni[1],ai=ni[2],ci=re(ti,(function(e){return oe.a.post("/api/games",e)}));function oi(){var e;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(X.e)(ee,{url:"/games",initializeSocket:Qo,initializeValue:Yo});case 2:return e=n.sent,n.next=5,Object(X.g)(qo);case 5:return n.next=7,Object(X.c)(e);case 7:case"end":return n.stop()}}),Zo)}function ii(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.h)(Wo,oi);case 2:case"end":return e.stop()}}),Ho)}var ui={socket:null,games:null,error:null},li=Object(W.a)((zo={},Object(P.a)(zo,"games/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(F.a)({},e,{socket:t})})),Object(P.a)(zo,"games/INITIALIZE_VALUE",(function(e,n){var t=n.payload.games;return Object(F.a)({},e,{games:t})})),Object(P.a)(zo,"games/CLEAR_VALUE",(function(e){return ui})),Object(P.a)(zo,ri,(function(e){return e})),Object(P.a)(zo,ai,(function(e,n){var t=n.payload;return Object(F.a)({},e,{error:t})})),zo),ui),si=Object(v.f)((function(e){var n=e.history,t=Object(s.c)((function(e){var n=e.create;return{map:n.map,mode:n.mode,defaultTime:n.defaultTime,extraTime:n.extraTime,piece:n.piece}})),r=t.map,i=t.mode,u=t.defaultTime,l=t.extraTime,f=t.piece,b=Object(s.b)(),d=Object(c.useCallback)((function(e){e.preventDefault(),function(){var e;a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(b(ci({map:r,mode:i,defaultTime:u,extraTime:l,piece:f})));case 2:e=t.sent,console.dir(f),n.push("/game/".concat(e));case 5:case"end":return t.stop()}}))}()}),[b,n,r,i,u,l,f]);return Object(c.useEffect)((function(){return function(){b(ao())}}),[b]),o.a.createElement(Go,{onSubmit:d})}));function fi(){var e=Object(x.a)(["\n    ","\n    margin-left: 1%;\n"]);return fi=function(){return e},e}function bi(){var e=Object(x.a)(["\n    ","\n    margin-right: 1%;\n"]);return bi=function(){return e},e}function di(){var e=Object(x.a)(["\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n"]);return di=function(){return e},e}function pi(){var e=Object(x.a)(["\n    height: 800px;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return pi=function(){return e},e}var mi,xi=h.c.div(pi()),vi=Object(h.b)(di()),hi=h.c.div(bi(),vi),Oi=h.c.div(fi(),vi),ji=o.a.memo((function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(xi,null,o.a.createElement(hi,null,o.a.createElement(Fc,null)),o.a.createElement(Dc,null),o.a.createElement(Oi,null,o.a.createElement(si,null))))})),gi=function(){var e=Object(s.b)();Object(c.useEffect)((function(){return function(){e($o())}}),[e]);var n=cn((function(){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(e(we()));case 2:return e(Xo()),n.next=5,a.a.awrap(Promise.resolve().then((function(){e(Jo())})));case 5:return n.abrupt("return",!0);case 6:case"end":return n.stop()}}))}),[e]),t=Object(Z.a)(n,1)[0];t.loading,t.data,t.error;return o.a.createElement(ji,null)},Ei=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Game \u2022 Chesssup.com")),o.a.createElement(rn,null),o.a.createElement(gi,null),o.a.createElement(kt,null))},yi=t(195),ki=t.n(yi),wi=a.a.mark(Fi),Ci=a.a.mark(Gi),Ii="chat/CONNECT_WEBSOCKET",Ai="chat/DISCONNECT_WEBSOCKET",Si=Object(H.a)(Ii,(function(e){return e})),Ti=Object(H.a)(Ai),Li=Object(H.a)("chat/INITIALIZE_SOCKET",(function(e){return e})),_i=Object(H.a)("chat/INITIALIZE_VALUE",(function(e){return e})),Ni=Object(H.a)("chat/CHANGE_VALUE",(function(e){return e})),zi=Object(H.a)("chat/CLEAR_VALUE"),Ri=Object(H.a)("chat/CHANGE_TEXTFIELD",(function(e){return e})),Ui=Object(H.a)("chat/INITIALIZE_TEXTFIELD"),Vi=te("chat/SEND_MESSAGE"),Mi=Object(Z.a)(Vi,3),Ki=Mi[0],Bi=Mi[1],Di=Mi[2],Pi=re(Ki,(function(e){return oe.a.post("/api/chat/sendMessage",e)}));function Fi(e){var n,t;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.payload,r.next=3,Object(X.e)(ee,{url:"/chat",initializeSocket:Li,initializeValue:_i,changeValue:Ni,query:n});case 3:return t=r.sent,r.next=6,Object(X.g)(Ai);case 6:return r.next=8,Object(X.c)(t);case 8:case"end":return r.stop()}}),wi)}function Gi(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.h)(Ii,Fi);case 2:case"end":return e.stop()}}),Ci)}var Zi={socket:null,messages:[],text:""},Hi=Object(W.a)((mi={},Object(P.a)(mi,"chat/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(F.a)({},e,{socket:t})})),Object(P.a)(mi,"chat/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=t.nickname,a=t.color,c=t.message;return Object(F.a)({},e,{messages:[{nickname:r,color:a,message:c}]})})),Object(P.a)(mi,"chat/CHANGE_VALUE",(function(e,n){var t=n.payload,r=t.nickname,a=t.color,c=t.message;return Object(F.a)({},e,{messages:[].concat(Object(on.a)(e.messages),[{nickname:r,color:a,message:c}])})})),Object(P.a)(mi,Bi,(function(e){return e})),Object(P.a)(mi,Di,(function(e){return e})),Object(P.a)(mi,"chat/INITIALIZE_TEXTFIELD",(function(e){return Object(F.a)({},e,{text:""})})),Object(P.a)(mi,"chat/CHANGE_TEXTFIELD",(function(e,n){var t=n.payload;return Object(F.a)({},e,{text:t})})),Object(P.a)(mi,"chat/CLEAR_VALUE",(function(e){return Zi})),mi),Zi);function Wi(){var e=Object(x.a)(["\n        background: rgb(247,246,245);\n\n        &:after {\n            content: '';\n            position: absolute;\n            left: 0;\n            top: 50%;\n            width: 0;\n            height: 0;\n            border: 8px solid transparent;\n            border-top: 0;\n            margin-top: -5px;\n            border-right-color: rgb(247,246,245);\n            border-left: 0;\n            margin-left: -8px;\n        }\n    "]);return Wi=function(){return e},e}function qi(){var e=Object(x.a)(["\n    position: relative;\n    background: #ffff80;\n    padding: 5px;\n\n    &:after {\n        content: '';\n        position: absolute;\n        right: 0;\n        top: 50%;\n        width: 0;\n        height: 0;\n        border: 8px solid transparent;\n        border-left-color: #ffff80;\n        border-right: 0;\n        border-top: 0;\n        margin-top: -5px;\n        margin-right: -8px;\n    }\n\n    \n    ","\n"]);return qi=function(){return e},e}function Ji(){var e=Object(x.a)(["\n        justify-content: center;\n    "]);return Ji=function(){return e},e}function Xi(){var e=Object(x.a)(["\n        justify-content: flex-start;\n    "]);return Xi=function(){return e},e}function Qi(){var e=Object(x.a)(["\n        justify-content: flex-end;\n    "]);return Qi=function(){return e},e}function Yi(){var e=Object(x.a)(["\n    display: flex;\n    align-items: center;\n    width: 90%;\n    height : 36px;\n    min-height : 36px;\n    font-size : 12px;\n    background-color: white;\n\n    ",";\n\n    ",";\n\n    ",";\n"]);return Yi=function(){return e},e}function $i(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 20%;\n    font-size: 12px;\n    background-color: rgb(247,246,245);\n    border: none;\n    cursor: pointer;\n\n    &:hover, &:focus {\n        background-color: #D3D3D3;\n    } \n"]);return $i=function(){return e},e}function eu(){var e=Object(x.a)(["\n    outline: none;\n    border: none;\n    align-items : center;\n    color: black;\n    background-color: transparent;\n    font-size: 12px;\n    width: 80%;\n    height : 30px;\n    padding-left: 10px;\n"]);return eu=function(){return e},e}function nu(){var e=Object(x.a)(["\n    position: absolute;\n    width: 100%;\n    display: flex;\n    background-color: white;\n    top: 365px;\n    /* box-shadow: rgba(0,0,0,0.05) 0px -2px 2px 0px, rgba(0,0,0,0.08) 0px -3px 1px -2px, rgba(0,0,0,0.04) 0px -1px 5px 0px; */\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\n"]);return nu=function(){return e},e}function tu(){var e=Object(x.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 360px;\n    width: 100%;\n    padding-right: 20px;\n    overflow-y: overlay;\n"]);return tu=function(){return e},e}function ru(){var e=Object(x.a)(["\n    height: 360px;\n    width: 100%;\n    overflow: hidden;\n"]);return ru=function(){return e},e}function au(){var e=Object(x.a)(["\n    position: relative;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return au=function(){return e},e}function cu(){var e=Object(x.a)(["\n    width: 100%;\n"]);return cu=function(){return e},e}var ou=h.c.form(cu()),iu=h.c.div(au()),uu=h.c.div(ru()),lu=h.c.div(tu()),su=h.c.div(nu()),fu=h.c.input(eu()),bu=h.c.button($i()),du=h.c.div(Yi(),(function(e){return"my"===e.owner&&Object(h.b)(Qi())}),(function(e){return"other"===e.owner&&Object(h.b)(Xi())}),(function(e){return"server"===e.owner&&Object(h.b)(Ji())})),pu=h.c.div(qi(),(function(e){return"other"===e.owner&&Object(h.b)(Wi())})),mu=function(e){var n,t=e.owner,r=e.children;return"my"===t?n=o.a.createElement(pu,{owner:t},r):"other"===t?n=o.a.createElement(pu,{owner:t},r):"server"===t&&(n=o.a.createElement(o.a.Fragment,null,r)),o.a.createElement(o.a.Fragment,null,n)},xu=o.a.memo((function(e){var n=e.message,t=e.myName,r=Object(G.a)(e,["message","myName"]),a=n.nickname?n.nickname===t?"my":"other":"server",c="other"===a?n.nickname+" : "+n.message:n.message;return o.a.createElement(du,Object.assign({},r,{color:n.color,owner:a}),o.a.createElement(mu,{owner:a},c))})),vu=o.a.memo((function(e){var n=e.messages,t=e.onSubmit,r=e.onChange,a=e.text,i=e.nickname,u=Object(c.useRef)();return Object(c.useEffect)((function(){u.current.scrollTop=u.current.scrollHeight}),[n]),o.a.createElement(o.a.Fragment,null,o.a.createElement(ou,{onSubmit:t},o.a.createElement(iu,null,o.a.createElement(uu,null,o.a.createElement(lu,{ref:u},n.map((function(e,n){return o.a.createElement(xu,{key:n,myName:i,message:e})})))),o.a.createElement(su,null,o.a.createElement(fu,{onChange:r,value:a}),o.a.createElement(bu,{onSubmit:t},o.a.createElement(Tt.b.Provider,{value:{style:{width:"40%",height:"40%"}}},o.a.createElement(At.b,null)))))))})),hu=function(){var e=Object(s.b)(),n=Object(s.c)((function(e){var n=e.chat,t=e.socketAuth;return{socket:n.socket,messages:n.messages,text:n.text,nickname:t.nickname}})),t=n.socket,r=n.messages,a=n.text,i=n.nickname,u=Object(c.useCallback)((function(n){n.preventDefault(),e(Pi({socket:t,message:a})),e(Ui())}),[e,a,t]),l=Object(c.useCallback)((function(n){e(Ri(n.target.value))}),[e]);return Object(c.useEffect)((function(){return function(){e(zi())}}),[e]),o.a.createElement(vu,{messages:r,onSubmit:u,onChange:l,text:a,nickname:i})};function Ou(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 100%;\n    width: 6%;\n    color: black;\n    opacity: 0.5;\n    font-size: 50px;\n"]);return Ou=function(){return e},e}function ju(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 47%;\n    color: black;\n    font-size: 50px;\n"]);return ju=function(){return e},e}function gu(){var e=Object(x.a)(["\n        background-color: rgb(230, 153, 153);\n    "]);return gu=function(){return e},e}function Eu(){var e=Object(x.a)(["\n        background-color: rgb(208, 224, 189);\n    "]);return Eu=function(){return e},e}function yu(){var e=Object(x.a)(["\n    width: 50%;\n    height: 60px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    background-color: white;\n    ","\n    ","\n"]);return yu=function(){return e},e}var ku=h.c.div(yu(),(function(e){return e.color&&Object(h.b)(Eu())}),(function(e){return e.time<=1e4&&Object(h.b)(gu())})),wu=h.c.div(ju()),Cu=h.c.div(Ou()),Iu=function(e){var n="";return n+=String(Math.floor(e/10)),n+=String(Math.floor(e%10))},Au=function(e){var n=e.time,t=e.color,r=Math.floor(n/6e4),a=Math.floor(n%6e4/1e3);return void 0==n||null===n?o.a.createElement(ku,null):o.a.createElement(ku,{time:n,color:t?1:0},o.a.createElement(wu,null,Iu(r)),o.a.createElement(Cu,null,":"),o.a.createElement(wu,null,Iu(a)))},Su=function(e){var n=e.white,t=e.init,r=Object(s.c)((function(e){var n=e.record,t=e.game;return{whiteTime:n.whiteTime,blackTime:n.blackTime,start:t.start,order:t.order}})),a=r.whiteTime,c=r.blackTime,i=r.start,u=r.order,l=n?a:c,f=n?i&&"white"===u:i&&"black"===u;return t?o.a.createElement(Au,{time:l,color:f}):o.a.createElement(Au,null)};function Tu(){var e=Object(x.a)(["\n    font-size: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Tu=function(){return e},e}function Lu(){var e=Object(x.a)(["\n        margin-top: 30px;\n    "]);return Lu=function(){return e},e}function _u(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 30px;\n    background-color: white;\n\n    ","\n"]);return _u=function(){return e},e}var Nu=h.c.div(_u(),(function(e){return e.beneath&&Object(h.b)(Lu())})),zu=h.c.div(Tu()),Ru=o.a.memo((function(e){var n=e.light,t=e.name,r=e.beneath,a={style:{height:"15px",width:"10%",color:"green",display:"flex",justifyContent:"center",alignItems:"center"}};return o.a.createElement(Nu,{beneath:r?1:0},n?o.a.createElement(Tt.b.Provider,{value:a},o.a.createElement(St.c,null)):o.a.createElement(Tt.b.Provider,{value:{style:Object(F.a)({},a.style,{color:"black"})}},o.a.createElement(St.k,null)),o.a.createElement(zu,null,t))})),Uu=function(e){var n=e.black,t=e.white,r=e.beneath,a=e.init,c=Object(s.c)((function(e){var n=e.game;return{blackNick:n.black,whiteNick:n.white,participant:n.participant}})),i=c.blackNick,u=c.whiteNick,l=c.participant,f=new Set(l),b=t&&f.has(u)||n&&f.has(i),d=t&&u||n&&i;return a?o.a.createElement(Ru,{light:b,name:d,beneath:r}):o.a.createElement(Ru,{beneath:r})};function Vu(){var e=Object(x.a)(["\n    width: 20%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 18px;\n    background-color: rgb(247, 246, 245);\n"]);return Vu=function(){return e},e}function Mu(){var e=Object(x.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20%;\n    font-size: 18px;\n"]);return Mu=function(){return e},e}function Ku(){var e=Object(x.a)(["\n        &:hover {\n            background-color: rgba(209, 228, 246, 0.5);\n        }\n    "]);return Ku=function(){return e},e}function Bu(){var e=Object(x.a)(["\n        background-color: rgba(209, 228, 246, 1);\n    "]);return Bu=function(){return e},e}function Du(){var e=Object(x.a)(["\n    width: 80%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    ","\n\n    ","\n"]);return Du=function(){return e},e}function Pu(){var e=Object(x.a)(["\n    width: 100%;\n    height: 30px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n\n    &:first-child {\n        margin-top: 30px;\n    }\n"]);return Pu=function(){return e},e}function Fu(){var e=Object(x.a)(["\n    height: 270px;\n    width: 100%;\n    overflow-y: overlay;\n    padding-right: 20px;\n"]);return Fu=function(){return e},e}function Gu(){var e=Object(x.a)(["\n    height: 270px;\n    width: 100%;\n    overflow: hidden;\n"]);return Gu=function(){return e},e}var Zu=h.c.div(Gu()),Hu=h.c.div(Fu()),Wu=h.c.div(Pu()),qu=function(e){var n=e.x,t=e.y;return String.fromCharCode(97+n)+(8-t)},Ju=h.c.div(Du(),(function(e){return e.checked&&Object(h.b)(Bu())}),(function(e){return!e.checked&&Object(h.b)(Ku())})),Xu=h.c.div(Mu()),Qu=h.c.div(Vu()),Yu=o.a.memo((function(e){var n=e.move,t=e.index,r=e.onClick,a=e.checked;console.dir("PieceMove"),console.dir(n);var c,i,u=Da[n.prevPiece.piece],l={color:n.prevPiece.owner,style:{width:"10%",filter:"drop-shadow(1px 1px 1px ".concat("white"===n.prevPiece.owner?"black":"white",")")}},s=o.a.createElement(Tt.b.Provider,{value:l},o.a.createElement(u,null)),f=o.a.createElement("div",{style:{width:"10%"}});return n.nextPiece.piece&&(c=Da[n.nextPiece.piece],i={color:n.nextPiece.owner,style:{width:"10%",filter:"drop-shadow(1px 1px 1px ".concat("white"===n.nextPiece.owner?"black":"white",")")}},f=o.a.createElement(Tt.b.Provider,{value:i},o.a.createElement(c,null))),o.a.createElement(Wu,null,o.a.createElement(Qu,null,t+1),o.a.createElement(Ju,{onClick:function(){return r(t)},checked:a},s,o.a.createElement(Xu,null,qu(n.prev)),o.a.createElement(Tt.b.Provider,{value:{style:{color:"rgb(169,169,169)"}}},o.a.createElement(At.a,null)),o.a.createElement(Xu,null,qu(n.next)),f))})),$u=o.a.memo((function(e){var n=e.pieceMove,t=e.onClick,r=e.showIndex,a=e.listRef;return o.a.createElement(Zu,null,o.a.createElement(Hu,{ref:a},n.map((function(e,n){return o.a.createElement(Yu,{onClick:t,move:e,index:n,checked:n===r})}))))})),el=function(){var e=Object(s.b)(),n=Object(s.c)((function(e){var n=e.record;return{pieceMove:n.pieceMove,showIndex:n.showIndex}})),t=n.pieceMove,r=n.showIndex,a=Object(c.useRef)();Object(c.useEffect)((function(){r>=0?(a.current.scrollTop>30*r&&(a.current.scrollTop=30*r),30*r>a.current.scrollTop+210&&(a.current.scrollTop=30*r-210)):a.current.scrollTop=0}),[t,r]);var i=Object(c.useCallback)((function(n){e(Na({index:n}))}),[e]);return o.a.createElement($u,{onClick:i,pieceMove:t,showIndex:r,listRef:a})};function nl(){var e=Object(x.a)(["\n        background-color: red;\n    "]);return nl=function(){return e},e}function tl(){var e=Object(x.a)(["\n    position: absolute;\n    height: 2px;\n    background-color: green;\n    transition-duration: 1s;\n    transition-timing-function: linear;\n\n    width: ",";\n    ","\n"]);return tl=function(){return e},e}var rl=h.c.div(tl(),(function(e){return 100*e.time+"%"}),(function(e){return e.time<=.1&&Object(h.b)(nl())})),al=o.a.memo((function(e){var n=e.time;return o.a.createElement(rl,{time:n})})),cl=function(e){var n=e.white,t=e.black,r=e.init,a=Object(s.c)((function(e){var n=e.record,t=e.game;return{whiteRatio:n.whiteRatio,blackRatio:n.blackRatio,whiteNick:t.white,blackNick:t.black,participant:t.participant}})),i=a.whiteRatio,u=a.blackRatio,l=a.whiteNick,f=a.blackNick,b=a.participant,d=Object(c.useState)(0),p=Object(Z.a)(d,2),m=p[0],x=p[1];return Object(c.useEffect)((function(){var e=new Set(b);if(r&&n&&e.has(l)||r&&t&&e.has(f)){var a=n?i:u;a=Math.min(a,1),x(a)}else x(0)}),[r,n,t,l,f,i,u,b]),o.a.createElement(al,{time:m})};function ol(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n"]);return ol=function(){return e},e}function il(){var e=Object(x.a)(["\n    position: absolute;\n    top: 300px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    background-color: rgb(247, 246, 245);\n    z-index: 10;\n    box-shadow: rgba(0, 0, 0, 0.14) 0px -2px 2px 0px, rgba(0, 0, 0, 0.2) 0px -3px 1px -2px, rgba(0, 0, 0, 0.12) 0px -1px 5px 0px;\n"]);return il=function(){return e},e}var ul=h.c.div(il()),ll=h.c.div(ol()),sl={style:{color:"#4d4d4d",width:"50%",height:"50%",backgroundColor:"transparent"}},fl=o.a.memo((function(e){var n=e.onStepUndo,t=e.onStepRedo,r=e.onFastUndo,a=e.onFastRedo;return o.a.createElement(ul,null,o.a.createElement(ll,{onClick:r},o.a.createElement(Tt.b.Provider,{value:sl},o.a.createElement(St.e,null))),o.a.createElement(ll,{onClick:n},o.a.createElement(Tt.b.Provider,{value:sl},o.a.createElement(St.l,null))),o.a.createElement(ll,{onClick:t},o.a.createElement(Tt.b.Provider,{value:sl},o.a.createElement(St.m,null))),o.a.createElement(ll,{onClick:a},o.a.createElement(Tt.b.Provider,{value:sl},o.a.createElement(St.f,null))))})),bl=function(){var e=Object(s.c)((function(e){return{pieceMove:e.record.pieceMove}})).pieceMove,n=Object(s.b)(),t=Object(c.useCallback)((function(){n(Na({index:-1}))}),[n]),r=Object(c.useCallback)((function(){n(Na({diff:-1}))}),[n]),a=Object(c.useCallback)((function(){n(Na({diff:1}))}),[n]),i=Object(c.useCallback)((function(){n(Na({index:e.length-1}))}),[n,e]);return o.a.createElement(fl,{onStepUndo:r,onStepRedo:a,onFastUndo:t,onFastRedo:i})},dl=t(196);function pl(){var e=Object(x.a)(["\n        visibility: visible;\n        transition: all 5s linear;\n        width: 0px;\n    "]);return pl=function(){return e},e}function ml(){var e=Object(x.a)(["\n    position: absolute;\n    top: -2px;\n    left: 0px;\n    width: 84px;\n    height: 2px;\n    background-color: blue;\n    visibility: hidden;\n    ","\n"]);return ml=function(){return e},e}function xl(){var e=Object(x.a)(["\n        pointer-events: none;\n    "]);return xl=function(){return e},e}function vl(){var e=Object(x.a)(["\n    background-color: transparent;\n    border: none;\n    outline: none;\n    cursor: pointer;\n    width: 30px;\n    height: 30px;\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\n\n    ","\n\n    &+& {\n        margin-left: 10px;\n    }\n\n    &:hover {\n        background-color: rgba(0, 0, 0, 0.2);\n    }\n"]);return vl=function(){return e},e}function hl(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 12px;\n    height: 20px;\n    width: 100%;\n"]);return hl=function(){return e},e}function Ol(){var e=Object(x.a)(["\n    height: 30px;\n    width: 30px;\n"]);return Ol=function(){return e},e}function jl(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 40px;\n    width: 100%;\n"]);return jl=function(){return e},e}function gl(){var e=Object(x.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 40px;\n    font-size: 11px;\n"]);return gl=function(){return e},e}function El(){var e=Object(x.a)(["\n        transition: all 3s cubic-bezier(1.000, 0.015, 1.000, 0.030);\n        top: -90px;\n        opacity: 0;\n    "]);return El=function(){return e},e}function yl(){var e=Object(x.a)(["\n        top: -70px;\n        opacity: 1;\n        visibility: visible;\n    "]);return yl=function(){return e},e}function kl(){var e=Object(x.a)(["\n    position: absolute;\n    top: -90px;\n    left: 0px;\n    height: 60px;\n    width: 84px;\n    opacity: 0;\n    visibility: hidden;\n    ","\n    ","\n    transition: 1s;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n    background-color: white;\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\n"]);return kl=function(){return e},e}var wl=h.c.div(kl(),(function(e){return e.modal&&Object(h.b)(yl())}),(function(e){return e.message&&Object(h.b)(El())})),Cl=h.c.div(gl()),Il=h.c.div(jl()),Al=h.c.img(Ol()),Sl=h.c.div(hl()),Tl=h.c.button(vl(),(function(e){return e.restrict&&Object(h.b)(xl())})),Ll=h.c.div(ml(),(function(e){return e.race&&Object(h.b)(pl())})),_l=function(e){var n,t=e.type,r=e.message,a=e.modal,c=e.race,i=e.restrict,u=e.onClick;return"answer"===a?n=o.a.createElement(Cl,null,o.a.createElement(Tl,{restrict:i,onClick:function(){return u(!0)}},"Y"),o.a.createElement(Tl,{restrict:i,onClick:function(){return u(!1)}},"N")):"ask"===a&&(n=r?o.a.createElement(Cl,null,r):o.a.createElement(Il,null,o.a.createElement(Al,{src:zn.a}))),o.a.createElement(wl,{message:r,modal:a},o.a.createElement(Ll,{race:c}),o.a.createElement(Sl,null,t),n)},Nl=function(e){var n=e.type,t=Object(s.c)((function(e){var t=e.record,r=e.game;return{socket:t.socket,suggestion:t[n],start:r.start}})),r=t.socket,a=t.suggestion,i=t.start,u=Object(s.b)(),l=Object(c.useState)(!1),f=Object(Z.a)(l,2),b=f[0],d=f[1],p=Object(c.useState)(!1),m=Object(Z.a)(p,2),x=m[0],v=m[1];Object(c.useEffect)((function(){a.modal&&(v(!1),d(!0))}),[u,a.modal]),Object(c.useEffect)((function(){a.message&&d(!1)}),[a.message]),Object(c.useEffect)((function(){!i&&a.modal&&(d(!1),u(Gr()))}),[u,i,a.modal,n]),Object(c.useEffect)((function(){return function(){u(Gr())}}),[u,n]);var h=Object(c.useCallback)((function(e){u(oa({socket:r,type:n,response:e})),v(!0)}),[u,r,n]);return o.a.createElement(_l,{type:n,modal:a.modal,message:a.message,race:b,restrict:x,onClick:h})};function zl(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n"]);return zl=function(){return e},e}function Rl(){var e=Object(x.a)(["\n    position: absolute;\n    top: 30px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    z-index: 10;\n    background-color: rgb(247, 246, 245);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Rl=function(){return e},e}var Ul=h.c.div(Rl()),Vl=h.c.div(zl()),Ml={style:{color:"#4d4d4d",width:"50%",height:"50%",backgroundColor:"transparent"}},Kl=o.a.memo((function(e){var n=e.onReverse,t=e.onClick;return o.a.createElement(Ul,null,o.a.createElement(Vl,{onClick:n},o.a.createElement(Tt.b.Provider,{value:{style:Object(F.a)({},Ml.style,{width:"60%",height:"60%"})}},o.a.createElement(St.d,null))),o.a.createElement(Vl,{onClick:function(){return t("undo")}},o.a.createElement(Tt.b.Provider,{value:{style:Object(F.a)({},Ml.style,{width:"80%",height:"80%"})}},o.a.createElement(dl.a,null)),o.a.createElement(Nl,{type:"undo"})),o.a.createElement(Vl,{onClick:function(){return t("draw")}},o.a.createElement(Tt.b.Provider,{value:Ml},o.a.createElement(St.h,null)),o.a.createElement(Nl,{type:"draw"})),o.a.createElement(Vl,{onClick:function(){return t("surrender")}},o.a.createElement(Tt.b.Provider,{value:Ml},o.a.createElement(St.g,null)),o.a.createElement(Nl,{type:"surrender"})))})),Bl=function(){var e=Object(s.c)((function(e){var n=e.record,t=e.game;return{socket:n.socket,reversed:n.reversed,start:t.start,blocked:n.blocked,banClick:n.banClick}})),n=e.reversed,t=e.socket,r=e.start,a=e.blocked,i=e.banClick,u=Object(s.b)(),l=Object(c.useCallback)((function(){u(Fr({reversed:!n}))}),[u,n]),f=Object(c.useCallback)((function(e){!r||a||i||(u(ca({socket:t,type:e})),u(Wr()))}),[u,r,t,a,i]);return o.a.createElement(Kl,{onReverse:l,onClick:f})};function Dl(){var e=Object(x.a)(["\n    position: relative;\n    width: 100%;\n    height: 360px;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Dl=function(){return e},e}var Pl=h.c.div(Dl()),Fl=o.a.memo((function(e){var n=e.reversal,t=e.init;return o.a.createElement(o.a.Fragment,null,n?o.a.createElement(o.a.Fragment,null,o.a.createElement(Su,{init:t,white:!0})):o.a.createElement(o.a.Fragment,null,o.a.createElement(Su,{init:t,black:!0})),o.a.createElement(Pl,null,n?o.a.createElement(o.a.Fragment,null,o.a.createElement(cl,{init:t,white:!0}),o.a.createElement(Uu,{init:t,white:!0})):o.a.createElement(o.a.Fragment,null,o.a.createElement(cl,{init:t,black:!0}),o.a.createElement(Uu,{init:t,black:!0})),o.a.createElement(Bl,null),o.a.createElement(el,null),o.a.createElement(bl,null),n?o.a.createElement(o.a.Fragment,null,o.a.createElement(Uu,{init:t,black:!0,beneath:!0}),o.a.createElement(cl,{init:t,black:!0})):o.a.createElement(o.a.Fragment,null,o.a.createElement(Uu,{init:t,white:!0,beneath:!0}),o.a.createElement(cl,{init:t,white:!0}))),n?o.a.createElement(o.a.Fragment,null,o.a.createElement(Su,{init:t,black:!0})):o.a.createElement(o.a.Fragment,null,o.a.createElement(Su,{init:t,white:!0})))})),Gl=function(){var e=Object(s.c)((function(e){var n=e.socketAuth,t=e.record;return{role:n.role,reversed:t.reversed}})),n=e.role,t=e.reversed,r=Object(s.b)(),a=Object(c.useState)(!1),i=Object(Z.a)(a,2),u=i[0],l=i[1];Object(c.useEffect)((function(){n&&!u&&l(!0)}),[u,n]),Object(c.useEffect)((function(){return function(){r(Pr())}}),[r]);var f=!1;return(("white"===n||"spectator"===n)&&t||"black"===n&&!t)&&(f=!0),o.a.createElement(Fl,{init:u,reversal:f})};function Zl(){var e=Object(x.a)(["\n    ","\n    margin-left: 1%;\n"]);return Zl=function(){return e},e}function Hl(){var e=Object(x.a)(["\n    ","\n    margin-right: 1%;\n"]);return Hl=function(){return e},e}function Wl(){var e=Object(x.a)(["\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n"]);return Wl=function(){return e},e}function ql(){var e=Object(x.a)(["\n    height: 800px;\n    width: 100%;\n    background-color: rgb(237, 235, 233);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return ql=function(){return e},e}var Jl,Xl=h.c.div(ql()),Ql=Object(h.b)(Wl()),Yl=h.c.div(Hl(),Ql),$l=h.c.div(Zl(),Ql),es=o.a.memo((function(){return o.a.createElement(Xl,null,o.a.createElement(Yl,null,o.a.createElement(hu,null)),o.a.createElement(vc,null),o.a.createElement($l,null,o.a.createElement(Gl,null)))})),ns=a.a.mark(ss),ts=a.a.mark(fs),rs="socketAuth/CONNECT_WEBSOCKET",as="socketAuth/DISCONNECT_WEBSOCKET",cs=Object(H.a)(rs),os=Object(H.a)(as),is=Object(H.a)("socketAuth/INITIALIZE_SOCKET",(function(e){return e})),us=Object(H.a)("socketAuth/INITIALIZE_VALUE",(function(e){return e})),ls=Object(H.a)("socketAuth/CLEAR_VALUE");function ss(e){var n,t;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.payload,r.next=3,Object(X.e)(ee,{url:"/socketAuth",initializeSocket:is,initializeValue:us,query:n});case 3:return t=r.sent,r.next=6,Object(X.g)(as);case 6:return r.next=8,Object(X.c)(t);case 8:case"end":return r.stop()}}),ns)}function fs(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.h)(rs,ss);case 2:case"end":return e.stop()}}),ts)}var bs,ds={socket:null,nickname:null,role:null,error:null},ps=Object(W.a)((Jl={},Object(P.a)(Jl,"socketAuth/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(F.a)({},e,{socket:t})})),Object(P.a)(Jl,"socketAuth/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(G.a)(t,["type"]));return Object(F.a)({},e,{},r)})),Object(P.a)(Jl,"socketAuth/CLEAR_VALUE",(function(e){return ds})),Jl),ds),ms=a.a.mark(ks),xs=a.a.mark(ws),vs="game/CONNECT_WEBSOCKET",hs="game/DISCONNECT_WEBSOCKET",Os=Object(H.a)(vs),js=Object(H.a)(hs),gs=Object(H.a)("game/INITIALIZE_SOCKET",(function(e){return e})),Es=Object(H.a)("game/INITIALIZE_VALUE",(function(e){return e})),ys=Object(H.a)("game/CLEAR_VALUE");function ks(e){var n,t;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.payload,r.next=3,Object(X.e)(ee,{url:"/game",initializeSocket:gs,initializeValue:Es,query:n});case 3:return t=r.sent,r.next=6,Object(X.g)(hs);case 6:return r.next=8,Object(X.c)(t);case 8:case"end":return r.stop()}}),ms)}function ws(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.h)(vs,ks);case 2:case"end":return e.stop()}}),xs)}var Cs={socket:null,error:null,participant:[]},Is=Object(W.a)((bs={},Object(P.a)(bs,"game/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(F.a)({},e,{socket:t})})),Object(P.a)(bs,"game/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(G.a)(t,["type"]));return Object(F.a)({},e,{},r)})),Object(P.a)(bs,"game/CLEAR_VALUE",(function(e){return Cs})),bs),Cs),As=function(e){var n=e.gameKey,t=Object(s.b)();Object(c.useEffect)((function(){return function(){t(js()),t(os()),t(Ti()),t(Oa()),t(Vr())}}),[t]),Object(c.useEffect)((function(){return function(){t(ls()),t(ys())}}),[t]);var r=cn((function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(t(we()));case 2:return t(js()),t(os()),t(Ti()),t(Oa()),t(Vr()),e.next=9,a.a.awrap(Promise.resolve().then((function(){var e=ki()(),r={gameKey:n,tabKey:e};t(Os(r)),t(cs(r)),t(Si(r)),t(ha(r)),t(Ur(r))})));case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}))}),[t,n]),i=Object(Z.a)(r,1)[0];i.loading,i.data,i.error;return o.a.createElement(es,null)},Ss=Object(v.f)((function(e){var n=e.history,t=e.match;if(Object(c.useEffect)((function(){t.params.id||n.push("/")}),[n,t]),!t.params.id)return null;var r=t.params.id;return r?o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"GamePlay \u2022 Chesssup.com")),o.a.createElement(rn,null),o.a.createElement(As,{gameKey:r}),o.a.createElement(kt,null)):null})),Ts=t(197);function Ls(){var e=Object(x.a)(["\n    width: 100px;\n    height: 100%;\n    background: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding: 0px;\n    border: none;\n    margin: 0px;\n    outline: none;\n    cursor: pointer;\n\n    & + & {\n        margin-left: 5px;\n    }\n\n    &:hover {\n        background: rgba(0, 0, 0, 0.05);\n    }\n\n    &:active {\n        background: rgba(0, 0, 0, 0.1);\n    }\n"]);return Ls=function(){return e},e}function _s(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: flex-end;\n    width: 100%;\n    height: 100%;\n"]);return _s=function(){return e},e}var Ns=h.c.div(_s()),zs=h.c.button(Ls()),Rs=function(){return o.a.createElement(Ns,null,o.a.createElement(zs,null,"0"),o.a.createElement(zs,null,"1"),o.a.createElement(zs,null,"2"))},Us=function(){return o.a.createElement(Rs,null)};function Vs(){var e=Object(x.a)(["\n    margin-top: 5px;\n    width: 90%;\n    height: 30px;\n"]);return Vs=function(){return e},e}function Ms(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 40%;\n"]);return Ms=function(){return e},e}function Ks(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 30%;\n"]);return Ks=function(){return e},e}function Bs(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 30%;\n"]);return Bs=function(){return e},e}function Ds(){var e=Object(x.a)(["\n    display: flex;\n    width: 100%;\n    height: 31px;\n    background: white;\n    cursor: pointer;\n\n    &+& {\n        border-top: 1px solid rgba(0, 0, 0, 0.2);\n    }\n    \n    &:hover {\n        background: rgba(0, 0, 0, 0.01);\n    }\n"]);return Ds=function(){return e},e}function Ps(){var e=Object(x.a)(["\n    /* border: 1px solid #eee; */\n    width: 90%;\n    height: 479px;\n    box-sizing: border-box;\n    /* border: 1px solid rgba(0, 0, 0, 0.2); */\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Ps=function(){return e},e}function Fs(){var e=Object(x.a)(["\n    margin-left: 10px;\n    font-size: 12px;\n"]);return Fs=function(){return e},e}function Gs(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 90%;\n    height: 30px;\n    background: rgba(102, 204, 255, 0.1);\n    cursor: pointer;\n    box-sizing: border-box;\n    padding: 0px 20px;\n    margin-bottom: 5px;\n    /* border: 1px solid rgba(0, 0, 0, 0.2); */\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Gs=function(){return e},e}function Zs(){var e=Object(x.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n    box-sizing: border-box;\n    padding-top: 5px;\n    width: 100%;\n    height: 100%;\n"]);return Zs=function(){return e},e}var Hs,Ws=h.c.div(Zs()),qs=h.c.div(Gs()),Js=h.c.div(Fs()),Xs=h.c.div(Ps()),Qs=h.c.div(Ds()),Ys=h.c.div(Bs()),$s=h.c.div(Ks()),ef=h.c.div(Ms()),nf=h.c.div(Vs()),tf=function(e){var n=e.post;return o.a.createElement(Qs,null,o.a.createElement(Ys,null,n.title),o.a.createElement($s,null,n.content),o.a.createElement(ef,null,n.user.username))},rf=function(e){var n=e.list;return o.a.createElement(Ws,null,o.a.createElement(qs,null,o.a.createElement(Tt.b.Provider,{value:{style:{width:"20px",height:"20px"}}},o.a.createElement(Ts.a,null)),o.a.createElement(Js,null,"Chesssup ver1 will be released soon.")),o.a.createElement(Xs,null,n&&n.posts.map((function(e){return o.a.createElement(tf,{key:e._id,post:e})}))),o.a.createElement(nf,null,o.a.createElement(Us,null)))},af=t(198),cf=t.n(af),of=te("community/CREATE_POST"),uf=Object(Z.a)(of,3),lf=uf[0],sf=uf[1],ff=uf[2],bf=te("community/LIST_POST"),df=Object(Z.a)(bf,3),pf=df[0],mf=df[1],xf=df[2],vf=Object(H.a)("community/SET_MENU",(function(e){return e})),hf=Object(H.a)("community/SET_STATUS",(function(e){return e})),Of=Object(H.a)("community/SET_FORM",(function(e){return e})),jf=Object(H.a)("community/CLEAR_FORM",(function(e){return e})),gf=re(lf,(function(e){return oe.a.post("/api/community",e)})),Ef=re(pf,(function(e){var n=e.kind,t=e.page,r=cf.a.stringify({kind:n,page:t});return oe.a.get("/api/community?".concat(r))})),yf={status:"list",menu:[{name:"All Posts",checked:!0},{name:"Small Talk",checked:!1},{name:"Know How",checked:!1},{name:"Notice",checked:!1}],list:{page:0,posts:[]},post:{title:"",content:""},write:{title:"",content:""}},kf=Object(W.a)((Hs={},Object(P.a)(Hs,"community/SET_MENU",(function(e,n){var t=n.payload.menu;return Object(F.a)({},e,{menu:t})})),Object(P.a)(Hs,"community/SET_STATUS",(function(e,n){var t=n.payload.status;return Object(F.a)({},e,{status:t})})),Object(P.a)(Hs,"community/SET_FORM",(function(e,n){var t=n.payload,r=t.status,a=t.key,c=t.value;return Object(F.a)({},e,Object(P.a)({},r,Object(F.a)({},e[r],Object(P.a)({},a,c))))})),Object(P.a)(Hs,"community/CLEAR_FORM",(function(e,n){var t=n.payload.status;return Object(F.a)({},e,Object(P.a)({},t,Object(F.a)({},yf[t])))})),Object(P.a)(Hs,sf,(function(e){return e})),Object(P.a)(Hs,ff,(function(e){return e})),Object(P.a)(Hs,mf,(function(e,n){var t=n.payload.posts;return Object(F.a)({},e,{list:Object(F.a)({},e.list,{posts:t})})})),Object(P.a)(Hs,xf,(function(e){return e})),Hs),yf),wf=function(){var e=Object(s.c)((function(e){var n=e.community;return{menu:n.menu,list:n.list}})),n=e.menu,t=e.list,r=Object(s.b)();return Object(c.useEffect)((function(){var e=n.find((function(e){return e.checked}));r(Ef({kind:e.name,page:t.page}))}),[r,n,t.page]),Object(c.useEffect)((function(){return function(){r(jf({status:"list"}))}}),[r]),o.a.createElement(rf,{list:t})},Cf=t(199),If=t.n(Cf);t(374);function Af(){var e=Object(x.a)(["\n    width: 100px;\n    height: 100%;\n    background: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding: 0px;\n    border: none;\n    margin: 0px;\n    outline: none;\n    cursor: pointer;\n\n    & + & {\n        margin-left: 5px;\n    }\n\n    &:hover {\n        background: rgba(0, 0, 0, 0.05);\n    }\n\n    &:active {\n        background: rgba(0, 0, 0, 0.1);\n    }\n"]);return Af=function(){return e},e}function Sf(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: flex-end;\n    width: 90%;\n    height: 30px;\n    margin-top: 5px;\n"]);return Sf=function(){return e},e}function Tf(){var e=Object(x.a)(["\n        font-style: italic;\n    "]);return Tf=function(){return e},e}function Lf(){var e=Object(x.a)(["\n    width: 90%;\n    height: 30px;\n    padding: 0px 15px;\n    box-sizing: border-box;\n    border: none;\n    outline: none;\n    margin-bottom: 5px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    font-size: 13px;\n    font-family: Helvetica, Arial, sans-serif;\n\n    ","\n"]);return Lf=function(){return e},e}function _f(){var e=Object(x.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-start;\n    box-sizing: border-box;\n    padding-top: 5px;\n    width: 100%;\n    height: 100%;\n"]);return _f=function(){return e},e}function Nf(){var e=Object(x.a)([""]);return Nf=function(){return e},e}function zf(){var e=Object(x.a)(["\n    width: 90%;\n    height: 479px;\n    background: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return zf=function(){return e},e}var Rf=h.c.div(zf()),Uf=h.c.div(Nf()),Vf=h.c.div(_f()),Mf=h.c.input(Lf(),(function(e){return e.holding&&Object(h.b)(Tf())})),Kf=h.c.div(Sf()),Bf=h.c.button(Af()),Df=function(e){var n=e.quillElement,t=e.onChangeTitle,r=e.holding,a=e.write,c=e.onSubmit,i=e.onCancel;return o.a.createElement(Vf,null,o.a.createElement(Mf,{onChange:t,value:a.title,placeholder:"title",holding:r}),o.a.createElement(Rf,null,o.a.createElement(Uf,{ref:n})),o.a.createElement(Kf,null,o.a.createElement(Bf,{onClick:c},"Submit"),o.a.createElement(Bf,{onClick:i},"Cancel")))},Pf=function(){var e=Object(s.c)((function(e){var n=e.community;return{write:n.write,menu:n.menu}})),n=e.write,t=e.menu,r=Object(s.b)(),a=Object(c.useRef)(),i=Object(c.useRef)(),u=Object(c.useState)(!0),l=Object(Z.a)(u,2),f=l[0],b=l[1];Object(c.useEffect)((function(){i.current=new If.a(a.current,{theme:"bubble",placeholder:"content",modules:{toolbar:[[{header:"1"},{header:"2"}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block","link","image"]]}});var e=i.current;e.on("text-change",(function(n,t,a){"user"===a&&r(Of({status:"write",key:"content",value:e.root.innerHTML}))}))}),[r]),Object(c.useEffect)((function(){return function(){r(jf({status:"write"}))}}),[r]);var d=Object(c.useCallback)((function(e){f&&""!==e.target.value?b(!1):f||""!==e.target.value||b(!0),r(Of({status:"write",key:"title",value:e.target.value}))}),[r,f]),p=Object(c.useCallback)((function(){var e=t.find((function(e){return e.checked}));r(gf({kind:e.name,title:n.title,content:n.content})),setTimeout((function(){r(hf({status:"list"}))}),100)}),[r,n,t]),m=Object(c.useCallback)((function(){r(hf({status:"list"}))}),[r]);return o.a.createElement(Df,{quillElement:a,onChangeTitle:d,write:n,holding:f,onSubmit:p,onCancel:m})},Ff=function(){return o.a.createElement(o.a.Fragment,null)},Gf=function(){return o.a.createElement(Ff,null)};function Zf(){var e=Object(x.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: 10px;\n    font-size: 14px;\n    height: 30px;\n    cursor: pointer;  \n"]);return Zf=function(){return e},e}function Hf(){var e=Object(x.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: rgba(0, 0, 0, 0.4);\n\n    &:hover {\n        color: rgba(0, 0, 0, 0.8);\n    }\n"]);return Hf=function(){return e},e}function Wf(){var e=Object(x.a)(["\n    width: 900px;\n    margin-top: 30px;\n    height: 30px;\n    display: flex;\n    justify-content: flex-end;    \n"]);return Wf=function(){return e},e}function qf(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    width: 1000px;\n    height: 560px;\n    margin-top: 5px;\n    /* box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12); */\n    /* background: white; */\n    background: transparent;\n"]);return qf=function(){return e},e}function Jf(){var e=Object(x.a)(["\n    position: absolute;\n    top: 30px;\n    left: 0px;\n    width: 125px;\n    height: 2px;\n    background: black;\n    transition: 0.5s;\n    left: ",";\n"]);return Jf=function(){return e},e}function Xf(){var e=Object(x.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 125px;\n    height: 30px;\n    font-size: 15px;\n    cursor: pointer;\n"]);return Xf=function(){return e},e}function Qf(){var e=Object(x.a)(["\n    position: relative;\n    display: flex;\n    margin-top: 20px;\n    width: 500px;\n    height: 30px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    background: white;\n"]);return Qf=function(){return e},e}function Yf(){var e=Object(x.a)(["\n    width: 1200px;\n    height: 720px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background: rgba(255, 255, 255, 0.5);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Yf=function(){return e},e}function $f(){var e=Object(x.a)(["\n    width: 100%;\n    height: 800px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return $f=function(){return e},e}var eb,nb=h.c.div($f()),tb=h.c.div(Yf()),rb=h.c.div(Qf()),ab=h.c.div(Xf()),cb=h.c.div(Jf(),(function(e){return 125*e.checkedIndex+"px"})),ob=h.c.div(qf()),ib=h.c.div(Wf()),ub=h.c.div(Hf()),lb=h.c.div(Zf()),sb=function(e){var n=e.menu,t=e.status,r=e.onClick,a=e.onCreatePost,c=n.findIndex((function(e){return e.checked}));return o.a.createElement(nb,null,o.a.createElement(tb,null,o.a.createElement(rb,null,n.map((function(e,n){return o.a.createElement(ab,{checked:e.checked,onClick:function(){return r(n)}},e.name)})),o.a.createElement(cb,{checkedIndex:c})),o.a.createElement(ib,{onClick:a},0!==c&&o.a.createElement(ub,null,o.a.createElement(Tt.b.Provider,{value:{style:{width:"20px",height:"20px"}}},o.a.createElement(St.j,null)),o.a.createElement(lb,null,"New Post"))),o.a.createElement(ob,null,t&&"list"===t&&o.a.createElement(wf,null),t&&"write"===t&&o.a.createElement(Pf,null),t&&"post"===t&&o.a.createElement(Gf,null))))},fb=function(){var e=Object(s.c)((function(e){var n=e.community;return{menu:n.menu,status:n.status}})),n=e.menu,t=e.status,r=Object(s.b)(),a=Object(c.useCallback)((function(e){r(function(e){return function(n,t){var r=t().community.menu,a=r.findIndex((function(e){return e.checked}));if(e!==a){var c=r.map((function(e){return e.checked?Object(F.a)({},e,{checked:!1}):e}));c[e]=Object(F.a)({},c[e],{checked:!0}),n(vf({menu:c}))}}}(e)),r(hf({status:"list"}))}),[r]),i=Object(c.useCallback)((function(){r(hf({status:"write"}))}),[r]);return o.a.createElement(sb,{menu:n,status:t,onClick:a,onCreatePost:i})},bb=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Community \u2022 Chesssup.com")),o.a.createElement(rn,null),o.a.createElement(fb,null),o.a.createElement(kt,null))},db=a.a.mark(yb),pb=a.a.mark(kb),mb="billBoard/CONNECT_WEBSOCKET",xb="billBoard/DISCONNECT_WEBSOCKET",vb=Object(H.a)(mb),hb=Object(H.a)(xb),Ob=Object(H.a)("billBoard/INITIALIZE_SOCKET",(function(e){return e})),jb=Object(H.a)("billBoard/INITIALIZE_VALUE",(function(e){return e})),gb=(Object(H.a)("billBoard/CLEAR_VALUE"),Object(H.a)("billBoard/CHANGE_VALUE")),Eb=function(e){var n=e.move;return function(e,t){var r=n.prev,a=n.next,c=t().billBoard.board,o=c[r.y][r.x],i=Ir(Object(on.a)(c),["tracked"]);i[a.y]=Object(on.a)(i[a.y]),i[a.y][a.x]=Object(F.a)({},o,{tracked:!0,dirty:!0}),i[r.y]=Object(on.a)(i[r.y]),i[r.y][r.x]={tracked:!0};var u=i[a.y][a.x],l=u.owner,s=u.piece;if(("white"===l&&"pawn"===s&&0===a.y||"black"===l&&"pawn"===s&&7===a.y)&&(i[a.y][a.x]=Object(F.a)({},i[a.y][a.x],{piece:"queen"})),"king"===i[a.y][a.x].piece){if(a.x-r.x===2){i[r.y]=Object(on.a)(i[r.y]);var f=Object(F.a)({},i[r.y][r.x+3]);i[r.y][r.x+3]={},i[r.y][r.x+1]=Object(F.a)({},f,{dirty:!0})}if(a.x-r.x===-2){i[r.y]=Object(on.a)(i[r.y]);var b=Object(F.a)({},i[r.y][r.x-4]);i[r.y][r.x-4]={},i[r.y][r.x-1]=Object(F.a)({},b,{dirty:!0})}}e(gb({board:i}))}};function yb(e){var n,t;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.payload,r.next=3,Object(X.e)(ee,{url:"/billBoard",initializeSocket:Ob,initializeValue:jb,changeValue:Eb,query:n});case 3:return t=r.sent,r.next=6,Object(X.g)(xb);case 6:return r.next=8,Object(X.c)(t);case 8:case"end":return r.stop()}}),db)}function kb(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.h)(mb,yb);case 2:case"end":return e.stop()}}),pb)}var wb={board:null,inform:null},Cb=Object(W.a)((eb={},Object(P.a)(eb,"billBoard/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(F.a)({},e,{socket:t})})),Object(P.a)(eb,"billBoard/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(G.a)(t,["type"]));return Object(F.a)({},e,{},r)})),Object(P.a)(eb,"billBoard/CHANGE_VALUE",(function(e,n){var t=n.payload.board;return Object(F.a)({},e,{board:t})})),Object(P.a)(eb,"billBoard/CLEAR_VALUE",(function(e){return wb})),eb),wb),Ib=function(e){var n=e.roomKey,t=e.cellSize,r=Object(s.c)((function(e){return{board:e.billBoard.board}})).board,i=Object(s.b)();Object(c.useEffect)((function(){return function(){i(hb())}}),[i]);var u=Object(c.useCallback)((function(e){e.preventDefault()}),[]),l=cn((function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return i(hb()),e.next=3,a.a.awrap(Promise.resolve().then((function(){i(vb({roomKey:n}))})));case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}))}),[i]),f=Object(Z.a)(l,1)[0],b=f.loading,d=f.data,p=f.error;return b?null:p?null:d&&r?o.a.createElement(xc,{board:r,billBoard:!0,blocked:!0,onContextMenu:u,cellSize:t}):null};function Ab(){var e=Object(x.a)(["\n  font-size: 10px;\n"]);return Ab=function(){return e},e}function Sb(){var e=Object(x.a)(["\n    height: 40px;\n    width: 100px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n\n    & + & {\n        margin-left: 12px;\n    }\n"]);return Sb=function(){return e},e}function Tb(){var e=Object(x.a)(["\n    margin-top: 4px;\n    height: 60px;\n    width: 216px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Tb=function(){return e},e}function Lb(){var e=Object(x.a)(["\n    width: 216px;\n    height: 216px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transform: scale(0.3);\n"]);return Lb=function(){return e},e}function _b(){var e=Object(x.a)(["\n    display: flex;\n    width: 216px;\n    height: 280px;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n"]);return _b=function(){return e},e}var Nb=h.c.div(_b()),zb=h.c.div(Lb()),Rb=h.c.div(Tb()),Ub=h.c.div(Sb()),Vb=h.c.div(Ab()),Mb=function(e){var n=e.roomKey,t=e.inform;return o.a.createElement(Nb,null,o.a.createElement(zb,null,o.a.createElement(Ib,{roomKey:n})),o.a.createElement(Rb,null,t&&t.map((function(e,t){return o.a.createElement(Ub,{key:n+"_"+t+"_"+e.username},o.a.createElement(Vb,null,e.username.split("@")[0]),o.a.createElement(Vb,null,e.elo))}))))},Kb=function(e){var n=e.roomKey,t=Object(s.c)((function(e){return{inform:e.billBoard.inform}})).inform;return o.a.createElement(Mb,{roomKey:n,inform:t})},Bb=Object(v.f)((function(e){var n=e.history,t=e.match;if(Object(c.useEffect)((function(){t.params.id||n.push("/")}),[n,t]),!t.params.id)return null;var r=t.params.id;return r?o.a.createElement(Kb,{roomKey:r}):null}));function Db(){var e=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 200px;\n  font-size: 50px;\n"]);return Db=function(){return e},e}var Pb=h.c.div(Db()),Fb=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Chesssup.com")),o.a.createElement(v.c,null,o.a.createElement(v.a,{component:wt,path:"/",exact:!0}),o.a.createElement(v.a,{component:Or,path:"/login",exact:!0}),o.a.createElement(v.a,{component:gr,path:"/register",exact:!0}),o.a.createElement(v.a,{component:Ei,path:"/game",exact:!0}),o.a.createElement(v.a,{component:Ss,path:"/game/:id",exact:!0}),o.a.createElement(v.a,{component:bb,path:"/community",exact:!0}),o.a.createElement(v.a,{component:Bb,path:"/billBoard/:id",exact:!0}),o.a.createElement(v.a,{render:function(e){e.location;return o.a.createElement(Pb,null,o.a.createElement("h1",null,"404 Error"),o.a.createElement("p",null,"\uc694\uccad\ud55c \ud398\uc774\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))}})))},Gb=a.a.mark(Zb);function Zb(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.a)([en(),fs(),ws(),ii(),Ua(),Gi(),sa(),mt(),kb()]);case 2:case"end":return e.stop()}}),Gb)}var Hb=Object(f.combineReducers)({sessionAuth:tn,socketAuth:ps,game:Is,games:li,canvas:Ka,chat:Hi,record:da,create:oo,ranking:vt,billBoard:Cb,community:kf});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Wb(){var e=Object(x.a)(["\n    width: 1680px;\n"]);return Wb=function(){return e},e}var qb=h.c.div(Wb()),Jb=function(e){return o.a.createElement(qb,e)},Xb=Object(p.a)(),Qb=Object(f.createStore)(Hb,Object(d.composeWithDevTools)(Object(f.applyMiddleware)(b.a,Xb)));Xb.run(Zb),function(){var e;a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=le("auth")){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,a.a.awrap(Qb.dispatch(Je()));case 6:if(n.sent.username===e.username){n.next=10;break}throw fe(),"Auth mismatch";case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(3),console.dir("Check auth failed");case 15:case"end":return n.stop()}}),null,null,[[3,12]])}(),u.a.render(o.a.createElement(s.a,{store:Qb},o.a.createElement(l.a,null,o.a.createElement(m.b,null,o.a.createElement(Jb,null,o.a.createElement(Fb,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},81:function(e,n,t){e.exports=t.p+"static/media/spinner.390a617d.svg"}},[[202,1,2]]]);
//# sourceMappingURL=main.4c611dc3.chunk.js.map