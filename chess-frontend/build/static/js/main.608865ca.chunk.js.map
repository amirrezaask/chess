{"version":3,"sources":["components/common/GridLayout.js","containers/common/GridLayoutContainer.js","components/common/SubmitForm.js","lib/websocket/websocket.js","lib/createRequestThunk.js","modules/room.js","lib/api/room.js","containers/common/SubmitFormContainer.js","components/modal/RoomModal.js","containers/modal/RoomModalContainer.js","components/common/Header.js","containers/common/HeaderContainer.js","lib/hook/useAsync.js","modules/auth.js","lib/api/auth.js","components/main/MainLayout.js","containers/main/MainLayoutContainer.js","pages/MainPage.js","lib/base/pieceConverter.js","components/content/Canvas.js","lib/base/rules.js","lib/base/board.js","modules/canvas.js","lib/api/canvas.js","containers/content/CanvasContainer.js","modules/chat.js","lib/api/chat.js","components/content/Chat.js","containers/content/ChatContainer.js","components/content/Timer.js","containers/content/TimerContainer.js","components/content/Status.js","containers/content/StatusContainer.js","components/content/PieceMoveList.js","containers/content/PieceMoveListContainer.js","components/content/TimeLine.js","containers/content/TimeLineContainer.js","components/content/Record.js","containers/content/RecordContainer.js","components/common/GameLayout.js","modules/game.js","modules/record.js","containers/common/GameLayoutContainer.js","pages/GamePage.js","pages/RecordPage.js","components/community/CommunityTableRow.js","components/community/CommunityLayout.js","containers/community/CommunityLayoutContainer.js","pages/CommunityPage.js","App.js","serviceWorker.js","modules/index.js","index.js"],"names":["GridRowBlock","styled","div","GridBoxBlock","BoxTitleBlock","BoxContentBlock","GridBox","React","memo","room","rest","console","dir","name","participant","GridLayoutBlock","onRoomClick","list","gridArr","rowSize","Math","floor","length","i","push","key","splice","map","onClick","e","GridLayoutContainer","props","SubmitFormBlock","form","buttonStyle","css","ConfirmButtonBlock","button","CancelButtonBlock","onConfirmClick","onCancelClick","onSubmit","type","createEventChannel","connectNamespace","io","eventChannel","emit","on","socket","id","message","close","params","url","initializeSocket","initializeValue","changeValue","updateValue","query","SocketIo","reconnection","secure","call","channel","take","put","cancelled","createRequestActionTypes","createRequestThunk","request","SUCCESS","FAILURE","dispatch","a","async","response","payload","data","error","connectWebsocketSaga","roomSaga","CONNECT_WEBSOCKET","DISCONNECT_WEBSOCKET","connectWebsocket","createAction","disconnectWebsocket","CREATE_ROOM","CREATE_ROOM_SUCCESS","CREATE_ROOM_FAILURE","createRoomThunk","axios","post","fork","socketTask","cancel","takeEvery","handleActions","state","withRouter","history","useDispatch","useCallback","preventDefault","RoomModalBackgroundBlock","open","RoomModalBlock","onBackgroundClick","onContentClick","openModal","setOpenModal","useState","modal","setModal","useSelector","disconnectRoomWebsocket","stopPropagation","useEffect","RoomBlock","LinkBlock","Link","HeaderBlock","onToggle","to","HeaderContainer","reducer","action","loading","Error","useAsync","callback","deps","useReducer","fetchData","authSaga","SET_SESSION","SET_SESSION_SUCCESS","SET_SESSION_FAILURE","setSessionThunk","get","tempAuth","session","MainLayoutBlock","MainLayout","MainLayoutContainer","MainPage","pieceMapper","GiChessPawn","GiChessKing","GiChessQueen","GiChessBishop","GiChessKnight","GiChessRook","GiPlainCircle","playerMapper","color","style","filter","width","height","pieceConverter","piece","owner","covered","cellNum","coveredCanvas","Component","Provider","value","capturedObject","opacity","styleObject","CanvasBlock","CanvasRowBlock","CanvasCellBlock","clicked","tracked","CanvasRow","row","y","onClickCell","cell","x","CanvasCell","bind","prevProps","nextProps","CanvasContentBlock","blocked","CanvasContent","board","rules","pawn","move","dy","dx","except","knight","king","bishop","rook","queen","canvasSaga","initializeBlocked","changeBlocked","SET_MOVE_PIECE","SET_MOVE_PIECE_SUCCESS","SET_MOVE_PIECE_FAILURE","setMovePieceThunk","changeValueThunk","getState","prev","next","canvas","auth","turn","game","role","clearBoard","genClearBoard","arr","leng","j","pass","forEach","param","popedCell","newCell","initialState","CanvasContainer","inform","coveredAxis","reduce","acc","cur","flatMap","counter","coveredArr","axis","clickPieceThunk","chatSaga","changeTextfield","initializeTextfield","SEND_MESSAGE","SEND_MESSAGE_SUCCESS","SEND_MESSAGE_FAILURE","sendMessageThunk","nickname","messages","text","ChatSubmitBlock","ChatFrameBlock","ChatBlock","ChatFormBlock","ChatInputBlock","input","ChatButtonBlock","MessageBlock","Message","className","onChange","ref","useRef","current","scrollTop","scrollHeight","ChatContainer","chat","target","TimerBlock","time","TimeSliceBlock","ColonBlock","timeConverter","timeSlice","convertedTime","String","Timer","second","millisecond","undefined","TimerContainer","white","record","whiteTime","blackTime","start","order","StatusBlock","NameBlock","light","iconStyle","display","justifyContent","alignItems","StatusContainer","black","blackNick","whiteNick","participantSet","Set","has","PieceMoveListHiddenBlock","PieceMoveListBlock","PieceMoveBlock","moveConverter","fromCharCode","MoveBlock","TextBlock","IndexBlock","PieceMove","index","onClickBlock","NextComponent","nextStyle","PrevComponent","prevPiece","prevStyle","nextPiece","pieceMove","PieceMoveListContainer","TimeLineBlock","TimeLineContainer","maximumTime","max","remainTime","min","RecordBlock","MenuBarBlock","RecordContainer","GameLayoutBlock","sideBlockStyle","LeftSideBlock","RightSideBlock","gameSaga","recordSaga","updateValueThunk","newRecord","Object","keys","startTime","endTime","GameLayoutContainer","gameId","disconnectAuthWebsocket","disconnectGameWebsocket","disconnectChatWebsocket","disconnectCanvasWebsocket","disconnectRecordWebsocket","setTimeout","connectAuthWebsocket","connectGameWebsocket","connectChatWebsocket","connectCanvasWebsocket","connectRecordWebsocket","match","RecordPage","CommunityTableRowBlock","tr","CommunityTableRow","title","count","comments","CommunityLayoutBlock","CommunityMainBlcok","main","CommunityHeaderBlock","h1","PageDivBlock","CommunityTableBlock","table","CommunityTheadBlock","thead","CommunityLayout","tableRow","CommunityLayoutContainer","ErrorPageDiv","App","component","path","exact","GamePage","CommunityPage","render","location","Boolean","window","hostname","rootSaga","all","rootReducer","combineReducers","sagaMiddleware","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","ReduxThunk","run","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"87CAGA,IAEMA,EAAeC,IAAOC,IAAV,KAiBZC,EAAeF,IAAOC,IAAV,KAqBZE,EAAgBH,IAAOC,IAAV,KAIbG,EAAkBJ,IAAOC,IAAV,KAIfI,EAAUC,IAAMC,MAAK,YAAwB,IAArBC,EAAoB,EAApBA,KAASC,EAAW,wBAG9C,OAFAC,QAAQC,IAAI,SAGR,kBAACT,EAAiBO,EACd,kBAACN,EAAD,KACKK,EAAKI,MAEV,kBAACR,EAAD,KACKI,EAAKK,iBAMhBC,EAAkBd,IAAOC,IAAV,KA4CNK,MAAMC,MAjCF,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,KAAMO,EAAkB,EAAlBA,YAExB,IAAIP,EAAM,OAAO,kBAACM,EAAD,MAMjB,IAJA,IAAME,EAAI,YAAQR,GAEZS,EAAU,GACVC,EAAUC,KAAKC,MAAMJ,EAAKK,OAjFnB,GAkFLC,EAAE,EAAGA,GAAGJ,IAAWI,EACvBL,EAAQM,KACJ,kBAACxB,EAAD,CACIyB,IAAG,uBAAkBF,IAGjBN,EAAKS,OAAO,EAxFf,GAwF4BC,KAAI,SAAAlB,GAAI,OAC7B,kBAACH,EAAD,CACImB,IAAG,iBAAYhB,EAAKI,MACpBJ,KAAMA,EACNmB,QAAS,SAAAC,GAAC,OAAIb,EAAYa,EAAGpB,EAAKgB,aAQ1D,OACI,kBAACV,EAAD,KACKG,MC/FEY,EAPa,SAAAC,GAExB,OACI,kBAAC,EAAeA,I,osBCHxB,IAAMC,EAAkB/B,IAAOgC,KAAV,KAIfC,EAAcC,YAAH,KAiBXC,EAAqBnC,IAAOoC,OAAV,IAClBH,GAGAI,EAAoBrC,IAAOoC,OAAV,IACjBH,GAoBS3B,MAAMC,MAhBF,SAAC,GAAuC,IAArC+B,EAAoC,EAApCA,eAAgBC,EAAoB,EAApBA,cAClC,OACI,kBAACR,EAAD,CAAiBS,SAAUF,GACvB,kBAACH,EAAD,CAAoBM,KAAK,UAAzB,eAGA,kBAACJ,EAAD,CACII,KAAK,SACLd,QAAWY,GAFf,c,2EClCFG,G,WAqBOC,GArBjB,SAAUD,EAAmBE,GAA7B,0FACWC,aAAa,SAAAC,GAchB,OAbAF,EAAGG,GAAG,WAAW,SAAAC,GACbF,EAAK,CACDL,KAAM,SACNO,OAAQJ,EAAGK,QAMnBL,EAAGG,GAAG,WAAW,SAAAG,GACbJ,EAAKI,MAGF,WACHN,EAAGO,aAhBf,uCAqBO,SAAUR,EAAiBS,GAA3B,uFAqBW,OAjBVC,EAMAD,EANAC,IACAC,EAKAF,EALAE,iBACAC,EAIAH,EAJAG,gBACAC,EAGAJ,EAHAI,YACAC,EAEAL,EAFAK,YACAC,EACAN,EADAM,MAGJhD,QAAQC,IAAI0C,GACZ3C,QAAQC,IAAI+C,GAbT,SAeOd,EAAKe,IAASN,EAAK,CACrBK,QACAE,cAAc,EACdC,QAAQ,IAlBb,SAqBiBC,YAAKpB,EAAoBE,GArB1C,OAqBCmB,EArBD,cAwBqB,OAxBrB,UAwB2BC,YAAKD,GAxBhC,QAwBWb,EAxBX,YAyBYA,EAAQT,KAzBpB,OA0Bc,WA1Bd,QA6Bc,eA7Bd,QAgCc,WAhCd,QAmCc,WAnCd,yBA2Ba,OA3Bb,UA2BmBwB,YAAIX,EAAiBJ,IA3BxC,4CA8Ba,OA9Bb,UA8BmBe,YAAIV,EAAgBL,IA9BvC,4CAiCa,OAjCb,UAiCmBe,YAAIT,EAAYN,IAjCnC,4CAoCa,OApCb,UAoCmBe,YAAIR,EAAYP,IApCnC,4CAuCaxC,QAAQC,IAAIuC,GAvCzB,iFA2CCxC,QAAQC,IAAR,MA3CD,QA6CK,OA7CL,oBA6CWuD,cA7CX,oCA8CKH,EAAQZ,QA9Cb,wFC1BA,IAAMgB,EAA2B,SAAA1B,GAGpC,MAAO,CAAEA,EAFI,UAAMA,EAAN,YACA,UAAMA,EAAN,cAIF,SAAS2B,EAAoB3B,EAAM4B,GAC9C,IAAMC,EAAO,UAAM7B,EAAN,YACP8B,EAAO,UAAM9B,EAAN,YACb,OAAO,SAAAW,GAAM,OAAI,SAAMoB,GAAN,eAAAC,EAAAC,OAAA,2EAAAD,EAAA,MAEcJ,EAAQjB,IAFtB,cAEHuB,EAFG,OAGTH,EAAS,CACL/B,KAAM6B,EACNM,QAASD,EAASE,OALb,kBAOFF,EAASE,MAPP,sCASTL,EAAS,CACL/B,KAAM8B,EACNK,QAAQ,EAAD,GACPE,OAAO,IAZF,+D,sCCWXC,I,YAWOC,IAxBXC,GAAoB,yBACpBC,GAAuB,4BAChBC,GAAmBC,YAAaH,IAChCI,GAAsBD,YAAaF,IAInC5B,GAAmB8B,YADN,0BACsC,SAAAR,GAAO,OAAIA,KAC9DrB,GAAkB6B,YAHN,yBAGqC,SAAAR,GAAO,OAAIA,K,GAEPT,EAAyB,oB,qBAAnFmB,G,MAAaC,G,MAAqBC,G,MAC7BC,GAAkBrB,EAAmBkB,ICdxB,kBACtBI,KAAMC,KAAK,gBDef,SAAUZ,KAAV,uEACuB,OADvB,SAC6Ba,YAAKjD,EAAkB,CAC5CU,IAAK,QACLC,oBACAC,qBAJR,OAOI,OANMsC,EADV,gBAOU7B,YAAKkB,IAPf,OAQI,OARJ,SAQUY,YAAOD,GARjB,wCAWO,SAAUb,KAAV,iEACH,OADG,SACGe,YAAUd,GAAmBF,IADhC,wCAIP,IAMeiB,gBAAa,mBA5BF,0BA6BD,SAACC,EAAD,OAAqBjD,EAArB,EAAU4B,QAAW5B,OAArB,sBACdiD,EADc,CAEjBjD,cAHoB,cA7BH,yBAkCD,SAACiD,EAAD,OAAqBzF,EAArB,EAAUoE,QAAWpE,KAArB,sBACbyF,EADa,CAEhBzF,YAPoB,cASvB+E,IAAsB,SAAAU,GAAK,OAAIA,KATR,cAUvBT,IAAsB,SAACS,EAAD,OAAmBnB,EAAnB,EAAUF,QAAV,sBAChBqB,EADgB,CAEnBnB,aAZoB,GANP,CACjB9B,OAAQ,KACRxC,KAAM,KACNsE,MAAO,OEVIoB,gBAtBa,SAAC,GAAyC,IAAvCC,EAAsC,EAAtCA,QAAS5D,EAA6B,EAA7BA,cAAkB9B,EAAW,2CAC3D+D,EAAW4B,cAEX9D,EAAiB+D,uBAAY,SAAAzE,GAC/BA,EAAE0E,iBACF,WAAC,QAAA7B,EAAAC,OAAA,uDACGF,EAASa,MADZ,WAAAZ,EAAA,MAEqBD,EAASiB,OAF9B,OAESjE,EAFT,OAGGe,IACA4D,EAAQ5E,KAAR,gBAAsBC,IAJzB,qCAAD,KAMD,CAACgD,EAAU2B,EAAS5D,IAEvB,OACI,kBAAC,EAAD,iBACQ9B,EADR,CAEI6B,eAAgBA,EAChBC,cAAeA,Q,0yBClB3B,IAAMgE,GAA2BvG,IAAOC,IAAV,MAYxB,SAAA6B,GAAK,OAAIA,EAAM0E,MAAQtE,YAAd,SAKTuE,GAAiBzG,IAAOC,IAAV,MAsCLK,OAAMC,MAtBH,SAAC,GAAuE,IAArEmG,EAAoE,EAApEA,kBAAmBC,EAAiD,EAAjDA,eAAgB5F,EAAiC,EAAjCA,YAAaP,EAAoB,EAApBA,KAASC,EAAW,2EAErF,OADAC,QAAQC,IAAI,kBAER,kBAAC4F,GAAD,iBACQ9F,EADR,CAEIkB,QAAS+E,IAET,kBAACD,GAAD,CACI9E,QAASgF,GAET,kBAAC,EAAD,CACInG,KAAMA,EACNO,YAAaA,IAEjB,kBAAC,GAAD,CACIwB,cAAemE,SCGpBR,gBAlDY,SAAC,GAAmD,IAAjDC,EAAgD,EAAhDA,QAASS,EAAuC,EAAvCA,UAAWC,EAA4B,EAA5BA,aAAiBpG,EAAW,wDAC9CqG,oBAAS,GADqC,mBAClEC,EADkE,KAC3DC,EAD2D,KAElExG,EAASyG,aAAY,kBAAe,CACxCzG,KADyB,EAAGA,KACjBA,SADPA,KAGFgE,EAAW4B,cAEXM,EAAoBL,uBAAY,SAAAzE,GAClCoF,GAAS,GACTH,GAAa,GACbrC,EAAS0C,QACV,CAAC1C,EAAUqC,IAERF,EAAiBN,uBAAY,SAAAzE,GAC/BA,EAAEuF,oBACH,IAEGpG,EAAcsF,uBAAY,SAACzE,EAAGJ,GAChCwF,GAAS,GACTH,GAAa,GACbrC,EAAS0C,MACTf,EAAQ5E,KAAR,gBAAsBC,MACvB,CAACgD,EAAU2B,EAASU,IAavB,OAXAO,qBAAU,WACNJ,EAASJ,KACV,CAACA,IAEJlG,QAAQC,IAAI,aACZyG,qBAAU,WACN,OAAO,WACH5C,EAAS0C,SAEd,CAAC1C,IAGA,oCACI,kBAAC,GAAD,iBACQ/D,EADR,CAEID,KAAMA,EACNgG,KAAMO,EACNL,kBAAmBA,EACnBC,eAAgBA,EAChB5F,YAAaA,S,mtBC5C7B,IAAMsG,GAAYrH,IAAOC,IAAV,MAWTqH,GAAYtH,YAAOuH,IAAPvH,CAAH,MAWTwH,GAAcxH,IAAOC,IAAV,MAyBFK,OAAMC,MAjBN,SAAC,GAA2C,IAAzCkH,EAAwC,EAAxCA,SAAUb,EAA8B,EAA9BA,UAAWC,EAAmB,EAAnBA,aACnC,OACI,oCACI,kBAACW,GAAD,KACI,kBAACH,GAAD,CAAW1F,QAAS8F,GAApB,SAGA,kBAACH,GAAD,CAAWI,GAAG,OAElB,kBAAC,GAAD,CACId,UAAWA,EACXC,aAAcA,QCvBfc,GAlBS,WAAO,IAAD,EACUb,oBAAS,GADnB,mBAClBF,EADkB,KACPC,EADO,KAEpBrC,EAAW4B,cAEXqB,EAAWpB,uBAAY,WACzBQ,GAAa,GACbrC,EAASW,QACV,CAACX,IAEJ,OACI,kBAAC,GAAD,CACIiD,SAAUA,EACVb,UAAWA,EACXC,aAAcA,KChB1B,SAASe,GAAQ3B,EAAO4B,GACpB,OAAQA,EAAOpF,MACX,IAAK,UACD,MAAO,CACHqF,SAAS,EACTjD,KAAM,KACNC,MAAO,MAEf,IAAK,UACD,MAAO,CACHgD,SAAS,EACTjD,KAAMgD,EAAOhD,KACbC,MAAO,MAEf,IAAK,UACD,MAAO,CACHgD,SAAS,EACTjD,KAAM,KACNC,MAAO+C,EAAO/C,OAEtB,QACI,MAAM,IAAIiD,MAAM,gCA6BbC,I,GAAAA,GAzBf,SAAkBC,GAAsB,IAAZC,EAAW,uDAAJ,GAAI,EACPC,qBAAWP,GAAS,CAC5CE,SAAS,EACTjD,KAAM,KACNC,OAAO,IAJwB,mBAC3BmB,EAD2B,KACpBzB,EADoB,KAO7B4D,EAAY,0BAAA3D,EAAAC,OAAA,uDACdF,EAAS,CAAE/B,KAAM,YADH,oBAAAgC,EAAA,MAGSwD,KAHT,OAGJpD,EAHI,OAIVL,EAAS,CAAE/B,KAAM,UAAWoC,SAJlB,gDAMVL,EAAS,CAAE/B,KAAM,UAAWqC,MAAM,EAAD,KANvB,yDAelB,OALAsC,qBAAU,WACNgB,MAEDF,GAEI,CAACjC,EAAOmC,I,YC7BTrD,I,YAgBOsD,IA7BXpD,GAAoB,yBACpBC,GAAuB,4BAChBC,GAAmBC,YAAaH,IAChCI,GAAsBD,YAAaF,IAInC5B,GAAmB8B,YAFN,0BAEsC,SAAAR,GAAO,OAAIA,KAC9DrB,GAAkB6B,YAFN,yBAEqC,SAAAR,GAAO,OAAIA,K,GAEPT,EAAyB,oB,qBAAnFmE,G,MAAaC,G,MAAqBC,G,MAC7BC,GAAkBrE,EAAmBkE,IChBxB,kBACtB5C,KAAMgD,IAAI,2BDiBd,SAAU3D,GAAsB8C,GAAhC,2EAKuB,OAJbrG,EAAMqG,EAAOjD,QAEblB,EAHV,cAGyBlC,GAHzB,SAK6BoE,YAAKjD,EAAkB,CAC5CU,IAAK,QACLC,oBACAC,mBACAG,UATR,OAYI,OAPMmC,EALV,gBAYU7B,YAAKkB,IAZf,OAaI,OAbJ,SAaUY,YAAOD,GAbjB,wCAgBO,SAAUwC,KAAV,iEACH,OADG,SACGtC,YAAUd,GAAmBF,IADhC,wCAMP,IAOeiB,gBAAa,kBAAC,GArCH,0BAsCD,SAACC,EAAD,OAAqBjD,EAArB,EAAU4B,QAAW5B,OAArB,sBACdiD,EADc,CAEjBjD,cAHoB,YAAC,GApCJ,yBAyCD,SAACiD,EAAD,WAAUrB,QAAoBnE,GAA9B,EAAqBgC,KAArB,+CACbwD,EADa,CAEhB0C,SAAS,eAAMlI,QAPK,YAAC,GASxB8H,IAAsB,SAACtC,EAAD,OAAmB2C,EAAnB,EAAUhE,QAAV,sBAChBqB,EADgB,CAEnB2C,eAXoB,YAAC,GAaxBJ,IAAsB,SAACvC,EAAD,OAAmBnB,EAAnB,EAAUF,QAAV,sBAChBqB,EADgB,CAEnB2C,QAAS,KACT9D,aAhBoB,IAPP,CACjB9B,OAAQ,KACR2F,SAAU,KACVC,QAAS,KACT9D,MAAO,O,2IE3CX,IAAM+D,GAAkB7I,IAAOC,IAAV,MAcN6I,GARI,WACf,OACI,kBAACD,GAAD,WCkBOE,GAtBa,WACxB,IAAMvE,EAAW4B,cADa,EAQd4B,IALG,oBAAAvD,EAAAC,OAAA,kEAAAD,EAAA,MACTD,EAASiE,OADA,iCAER,GAFQ,uCAKkB,CAAEjE,IAAhCyB,EARuB,oBAUtB6B,EAAyB7B,EAAzB6B,QAASjD,EAAgBoB,EAAhBpB,KAAMC,EAAUmB,EAAVnB,MAEvB,OAAGgD,EAAgB,KAChBhD,EAAc,KACdD,EAEK,kBAAC,GAAD,MAGD,MCZImE,GAVE,WAEb,OACI,oCACI,kBAAC,GAAD,MACA,kBAAC,GAAD,Q,iBCNCC,GAAc,CACvB,KAAQC,KACR,KAAQC,KACR,MAASC,KACT,OAAUC,KACV,OAAUC,KACV,KAAQC,KACR,QAAWC,MAGFC,GAAe,CACxB,MAAS,CACLC,MAAO,QACPC,MAAO,CACHC,OAAO,iCACPC,MAAO,MACPC,OAAQ,QAGhB,MAAS,CACLJ,MAAO,QACPC,MAAO,CACHC,OAAO,iCACPC,MAAO,MACPC,OAAQ,QAGhB,SAAY,CACRH,MAAO,CACHC,OAAO,iCACPC,MAAO,MACPC,OAAQ,MACRJ,MAAO,uBAIf,SAAY,CACRC,MAAO,CACHC,OAAO,iCACPC,MAAO,MACPC,OAAQ,MACRJ,MAAO,uB,qwDCvCnB,I,GAAMK,GAAiB,SAAC,GAAwC,IAAtCC,EAAqC,EAArCA,MAAOC,EAA8B,EAA9BA,MAAOC,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,QACzCC,EAAgB,KAEpB,GAAGF,EAAS,CACR,IAAMG,EAAYpB,GAAW,QAE7BmB,EACI,kBAAC,KAAYE,SAAb,CAAsBC,MAAOd,GAAa,UAAD,OAAWU,KAChD,kBAAC,EAAD,OAKZ,IAAIH,IAAUC,EACV,OAAOG,EAGX,IAAMC,EAAYpB,GAAYe,GACxBQ,EAAiBJ,EAAgB,CACnCK,QAAS,GACTb,OAAkB,UAAVK,EAAA,mEACR,KAEES,EAAW,eACVjB,GAAaQ,GADH,CAEbN,MAAM,eACCF,GAAaQ,GAAON,MADtB,GAEEa,KAIX,OACI,kBAAC,KAAYF,SAAb,CAAsBC,MAAOG,GACzB,kBAACL,EAAD,QAKNM,GAAc3K,IAAOC,IAAV,MAIX2K,GAAiB5K,IAAOC,IAAV,MAId4K,GAAkB7K,IAAOC,IAAV,MAQf,SAAA6B,GAAK,OAAsB,IAAlBA,EAAMqI,SAAiBjI,YAAvB,SAIT,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMqI,SAAiBjI,YAAvB,SAIT,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMqI,SAAiBrI,EAAMgJ,SAAW5I,YAAxC,SAIT,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMqI,SAAiBrI,EAAMgJ,SAAW5I,YAAxC,SAIT,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMqI,SAAiBrI,EAAMiJ,SAAW7I,YAAxC,SAIT,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMqI,SAAiBrI,EAAMiJ,SAAW7I,YAAxC,SAKL,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMqI,SAAiBrI,EAAMoI,SAAWhI,YAAxC,SAIT,SAAAJ,GAAK,OAAsB,IAAlBA,EAAMqI,SAAiBrI,EAAMoI,SAAWhI,YAAxC,SAMb8I,GAAY1K,IAAMC,MAAK,YAA8C,IAA3C0K,EAA0C,EAA1CA,IAAKC,EAAqC,EAArCA,EAAGC,EAAkC,EAAlCA,YAAapB,EAAqB,EAArBA,eAEjD,OACI,kBAACa,GAAD,KACKK,EAAIvJ,KAAI,SAAC0J,EAAMC,GAAP,OACL,kBAACC,GAAD,CACI9J,IAAG,eAAU0J,EAAV,YAAeG,GAClB1J,QAASwJ,EAAYI,KAAK,KAAM,CAACL,IAAGG,MACpCtB,eAAgBA,EAChBI,SAAUkB,EAAIH,GAAK,EACnBE,KAAMA,WAKvB,SAACI,EAAWC,GACX,OAAOD,EAAUP,MAAQQ,EAAUR,OAGjCK,GAAahL,IAAMC,MAAK,YAAiD,IAA9C6K,EAA6C,EAA7CA,KAAMzJ,EAAuC,EAAvCA,QAASwI,EAA8B,EAA9BA,QAASJ,EAAqB,EAArBA,eAErD,OACI,kBAACc,GAAD,eACIlJ,QAASA,EACTwI,QAASA,GACLiB,GAEHrB,EAAe,CACZC,MAAOoB,EAAKpB,MACZC,MAAOmB,EAAKnB,MACZC,QAASkB,EAAKlB,QACdC,gBAIb,SAACqB,EAAWC,GACX,OAAOD,EAAUJ,OAASK,EAAUL,QAGlCM,GAAqB1L,IAAOC,IAAV,MAClB,SAAA6B,GAAK,OAAIA,EAAM6J,SAAWzJ,YAAjB,SAKT0J,GAAgB,SAAC,GAAiC,IAA/BC,EAA8B,EAA9BA,MAAOF,EAAuB,EAAvBA,QAAShK,EAAc,EAAdA,QAE/BwJ,EAAc9E,uBAAY,YAAa,IAAX6E,EAAU,EAAVA,EAAGG,EAAO,EAAPA,EACjC1J,EAAQuJ,EAAGG,KACZ,CAAC1J,IAEJ,OACI,kBAAC+J,GAAD,CAAoBC,QAASA,GACxBE,EAAMnK,KAAI,SAACuJ,EAAKC,GAAN,OACP,kBAACF,GAAD,CACIxJ,IAAG,cAAS0J,GACZD,IAAKA,EACLC,EAAGA,EACHC,YAAaA,EACbpB,eAAgBA,UAerBzJ,OAAMC,MARN,SAAAuB,GACX,OACI,kBAAC6I,GAAD,KACI,kBAAC,GAAkB7I,OC0ChBgK,GA7MD,CACVC,KAAM,CACFtJ,KAAM,UACNuJ,KAAM,CACF,CACIC,IAAK,EACLC,GAAI,EACJC,OAAQ,SAASrK,GAAQ,IACb+J,EAAkB/J,EAAlB+J,MAAOI,EAAWnK,EAAXmK,GAAIC,EAAOpK,EAAPoK,GACnB,OAAGL,EAAMI,GAAIC,GAAIlC,QAMzB,CACIiC,IAAK,EACLC,GAAI,EACJC,OAAQ,SAASrK,GAAQ,IACb+J,EAAuB/J,EAAvB+J,MAAOX,EAAgBpJ,EAAhBoJ,EAAGG,EAAavJ,EAAbuJ,EAAGpB,EAAUnI,EAAVmI,MACrB,QAAc,UAAVA,GAA2B,IAANiB,GAAuB,UAAVjB,GAA2B,IAANiB,OAC7C,UAAVjB,GAAqB4B,EAAM,GAAGR,GAAGrB,OAAqB,UAAVC,GAAqB4B,EAAM,GAAGR,GAAGrB,UACnE,UAAVC,GAAqB4B,EAAM,GAAGR,GAAGrB,OAAqB,UAAVC,GAAqB4B,EAAM,GAAGR,GAAGrB,UAIzF,CACIiC,IAAK,EACLC,IAAK,EACLC,OAAQ,SAASrK,GAAQ,IACb+J,EAAkB/J,EAAlB+J,MAAOI,EAAWnK,EAAXmK,GAAIC,EAAOpK,EAAPoK,GACnB,QAAGL,EAAMI,GAAIC,GAAIlC,QAMzB,CACIiC,IAAK,EACLC,GAAI,EACJC,OAAQ,SAASrK,GAAQ,IACb+J,EAAkB/J,EAAlB+J,MAAOI,EAAWnK,EAAXmK,GAAIC,EAAOpK,EAAPoK,GACnB,QAAGL,EAAMI,GAAIC,GAAIlC,UAQjCoC,OAAQ,CACJ3J,KAAM,UACNuJ,KAAM,CACF,CACIC,IAAK,EACLC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,KAIhBG,KAAM,CACF5J,KAAM,UACNuJ,KAAM,CACF,CACIC,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,GAER,CACID,IAAK,EACLC,IAAK,GAET,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,KAIhBI,OAAQ,CACJ7J,KAAM,YACNuJ,KAAM,CACF,CACIC,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,KAIhBK,KAAM,CACF9J,KAAM,YACNuJ,KAAM,CACF,CACIC,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,KAIhBM,MAAO,CACH/J,KAAM,YACNuJ,KAAM,CACF,CACIC,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,IAAK,GAET,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,GAAI,GAER,CACID,IAAK,EACLC,GAAI,GAER,CACID,GAAI,EACJC,IAAK,GAET,CACID,GAAI,EACJC,GAAI,MC5LLL,GAXD,CACV,CAAE,CAAC3B,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,IAC1I,CAAE,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,GAAQ,CAACA,SAAS,K,YC6FpInF,I,YAiBO0H,IA5GXxH,GAAoB,2BACpBC,GAAuB,8BAChBC,GAAmBC,YAAaH,IAAmB,SAAAL,GAAO,OAAIA,KAC9DS,GAAsBD,YAAaF,IAOnC5B,GAAmB8B,YALN,4BAKsC,SAAAR,GAAO,OAAIA,KAC9DrB,GAAkB6B,YALN,2BAKqC,SAAAR,GAAO,OAAIA,KAC5DpB,GAAc4B,YALN,uBAKiC,SAAAR,GAAO,OAAIA,KACpD8H,GAAoBtH,YALN,6BAKuC,SAAAR,GAAO,OAAIA,KAChE+H,GAAgBvH,YALN,yBAKmC,SAAAR,GAAO,OAAIA,K,GAEMT,EAAyB,yB,qBAA5FyI,G,MAAgBC,G,MAAwBC,G,MACnCC,GAAoB3I,EAAmBwI,ICzB3B,SAAAxJ,GAAM,OAC3BsC,KAAMC,KAAK,wBAAyBvC,MD0B3B4J,GAAmB,SAAC,GAAD,IAAGhB,EAAH,EAAGA,KAAH,OAAc,SAAExH,EAAUyI,GAAe,IAC7DC,EAAelB,EAAfkB,KAAMC,EAASnB,EAATmB,KADsD,EAK5DF,IAHUpB,EAFkD,EAE5DuB,OAAUvB,MACFlD,EAHoD,EAG5D0E,KAAQ1E,SACA2E,EAJoD,EAI5DC,KAAQD,KAGb3E,IACuB,UAAlBA,EAAS6E,MAAoBF,EAAO,IAAM,GAAyB,UAAlB3E,EAAS6E,MAAoBF,EAAO,IAAM,EAC3F9I,EAASmI,GAAc,CAAEhB,SAAS,KAElCnH,EAASmI,GAAc,CAAEhB,SAAS,MAI1C,IAAMP,EAAOS,EAAMqB,EAAKhC,GAAGgC,EAAK7B,GAC1BoC,EAAaC,GAAc,YAAI7B,GAAQ,CACzC,UACA,UACA,YAGJ4B,EAAWN,EAAKjC,GAAhB,YAA0BuC,EAAWN,EAAKjC,IAC1CuC,EAAWN,EAAKjC,GAAGiC,EAAK9B,GAAxB,eACOD,EADP,CAEIL,SAAS,IAGb0C,EAAWP,EAAKhC,GAAhB,YAAyBuC,EAAWP,EAAKhC,IACzCuC,EAAWP,EAAKhC,GAAGgC,EAAK7B,GAAK,CACzBnB,SAAS,EACTa,SAAS,GAGbvG,EAAShB,GAAY,CAAEqI,MAAO4B,EAAY3C,QAAS,UAGjD4C,GAAgB,SAAC7B,EAAOzI,GAI1B,IAHA,IAAMuK,EAAM,GAENC,EAAO/B,EAAMxK,OAHkB,WAI7BC,GACJ,IALiC,eAKzBuM,GACJ,IAAIC,GAAO,EACX1K,EAAO2K,SAAQ,SAAAC,GACXF,GAAQjC,EAAMvK,GAAGuM,GAAGG,MAErBF,GACCH,EAAIpM,KAAK,CACL2J,EAAG5J,EACH+J,EAAGwC,KARPA,EAAE,EAAGA,EAAED,IAAQC,EAAI,EAAnBA,IADJvM,EAAE,EAAGA,EAAEsM,IAAQtM,EAAI,EAAnBA,GA4BR,OAbAqM,EAAII,SAAQ,SAAA3C,GACRS,EAAMT,EAAKF,GAAX,YAAqBW,EAAMT,EAAKF,IAChC,IAAM+C,EAAYpC,EAAMT,EAAKF,GAAGE,EAAKC,GAC/B6C,EAAO,eACND,GAEP7K,EAAO2K,SAAQ,SAAAC,GACXE,EAAQF,IAAS,KAGrBnC,EAAMT,EAAKF,GAAGzJ,OAAO2J,EAAKC,EAAG,EAAG6C,MAG7BrC,GAGX,SAAU9G,GAAsB8C,GAAhC,2EAKuB,OAJbrG,EAAMqG,EAAOjD,QAEblB,EAHV,cAGyBlC,GAHzB,SAK6BoE,YAAKjD,EAAkB,CAC5CU,IAAK,UACLC,oBACAC,mBACAC,YAAawJ,GACbtJ,UAVR,OAaI,OARMmC,EALV,gBAaU7B,YAAKkB,IAbf,OAcI,OAdJ,SAcUY,YAAOD,GAdjB,wCAiBO,SAAU4G,KAAV,iEACH,OADG,SACG1G,YAAUd,GAAmBF,IADhC,wCAIA,I,GAmFDoJ,GAAe,CACjBnL,OAAQ,KACR8B,MAAO,KACP+G,SACAf,QAAS,KACTa,SAAS,GAGE3F,gBAAa,kBAAC,GAtMH,4BAuMD,SAACC,EAAD,OAAqBjD,EAArB,EAAU4B,QAAW5B,OAArB,sBACdiD,EADc,CAEjBjD,cAHoB,YAAC,GArMJ,2BA0MD,SAACiD,EAAD,OAAqB4F,EAArB,EAAUjH,QAAWiH,MAArB,sBACb5F,EADa,CAEhB4F,aAPoB,YAAC,GApMR,uBA6MD,SAAC5F,EAAD,WAAUrB,QAAYiH,EAAtB,EAAsBA,MAAOf,EAA7B,EAA6BA,QAA7B,sBACT7E,EADS,CAEZ4F,QACAf,eAZoB,YAAC,GAnMF,6BAiND,SAAC7E,EAAD,OAAqB0F,EAArB,EAAU/G,QAAW+G,QAArB,sBACf1F,EADe,CAElB0F,eAhBoB,YAAC,GAlMN,yBAoND,SAAC1F,EAAD,OAAqB0F,EAArB,EAAU/G,QAAW+G,QAArB,sBACX1F,EADW,CAEd0F,eApBoB,YAAC,GAsBxBkB,IAAyB,SAAA5G,GAAK,OAAIA,KAtBX,YAAC,GAuBxB6G,IAAyB,SAAA7G,GAAK,OAAIA,KAvBX,IAwBzBkI,IElMYC,GAtCS,WAAO,IAAD,EACiBnH,aAAY,gBAAGmG,EAAH,EAAGA,OAAQC,EAAX,EAAWA,KAAME,EAAjB,EAAiBA,KAAjB,MAA6B,CAChF1B,MAAOuB,EAAOvB,MACdF,QAASyB,EAAOzB,QAChB2B,KAAMC,EAAKD,KACX3E,SAAU0E,EAAK1E,aAJXkD,EADkB,EAClBA,MAAOF,EADW,EACXA,QAAS2B,EADE,EACFA,KAAM3E,EADJ,EACIA,SAOxBnE,EAAW4B,cAEjBgB,qBAAU,WACHuB,IACuB,UAAlBA,EAAS6E,MAAoBF,EAAO,IAAM,GAAyB,UAAlB3E,EAAS6E,MAAoBF,EAAO,IAAM,EAC3F9I,EAASkI,GAAkB,CAAEf,SAAS,KAEtCnH,EAASkI,GAAkB,CAAEf,SAAS,QAG/C,CAACnH,EAAU8I,EAAM3E,IAOpB,IAAMhH,EAAU0E,uBAAY,SAAC6E,EAAGG,GAC5B7G,EF2FuB,SAAC,GAAD,IAAG0G,EAAH,EAAGA,EAAGG,EAAN,EAAMA,EAAN,OAAc,SAAC7G,EAAUyI,GAAc,IAAD,EAIzDA,IAJyD,IAEzDG,OAAUvB,EAF+C,EAE/CA,MAAOf,EAFwC,EAExCA,QACTwC,EAHiD,EAGzDC,KAAQD,KAGhB,GAAGxC,GAAWe,EAAMX,GAAGG,GAAGnB,QAA1B,CAAoC,IACdlH,EAAaiK,IAAvBG,OAAUpK,OAElBwB,EAASuI,GAAkB,CACvB/J,SACAgJ,KAAM,CACFkB,KAAMpC,EACNqC,KAAM,CAACjC,IAAGG,aAPtB,CANiE,MAoBxCQ,EAAMX,GAAGG,GAA1BrB,EApByD,EAoBzDA,MAAOC,EApBkD,EAoBlDA,MACXoE,EAAS,CAAExC,QAAOX,IAAGG,IAAGiC,OAAMrD,SAClC,GAAID,EAAJ,CAtBiE,MAwB3C8B,GAAM9B,GAApBvH,EAxByD,EAwBzDA,KAAMuJ,EAxBmD,EAwBnDA,KACVsC,EAAc,GAGdA,EADQ,YAAT7L,EACeuJ,EAAKuC,QAAO,SAACC,EAAKC,GAC5B,IAAMxC,EAAKf,GAAe,UAAVjB,GAAqBwE,EAAIxC,IAAKwC,EAAIxC,IAC5CC,EAAKb,EAAIoD,EAAIvC,GACnB,OAAGD,EAAK,GAAKC,EAAK,GAAKD,EAAK,GAAKC,EAAK,EAAUsC,GAEhDH,EAAM,eAAQA,EAAR,CAAgBpC,KAAIC,SACtBuC,EAAItC,QAAWsC,EAAItC,QAAUsC,EAAItC,OAAOkC,MACpCxC,EAAMI,GAAIC,GAAIjC,OAAS4B,EAAMX,GAAGG,GAAGpB,QAAU4B,EAAMI,GAAIC,GAAIjC,OAC3DuE,EAAIjN,KAAK,CAAC0K,KAAIC,QAIfsC,KACR,IAEWxC,EAAK0C,SAAQ,SAAAD,GAGvB,IAFA,IAAIE,EAAU,EACVC,EAAa,KACL,GACND,EACF,IAAM1C,EAAKf,EAAIyD,GAAqB,UAAV1E,GAAqBwE,EAAIxC,IAAKwC,EAAIxC,IACtDC,EAAKb,EAAIsD,EAAUF,EAAIvC,GAE7B,GAAGD,EAAK,GAAKC,EAAK,GAAKD,EAAK,GAAKC,EAAK,EAAG,MACzC,GAAGL,EAAMI,GAAIC,GAAIjC,OAAS4B,EAAMI,GAAIC,GAAIjC,QAAUA,EAAO,MAEzD,GADA2E,EAAWrN,KAAK,CAAC0K,KAAIC,OAClBL,EAAMI,GAAIC,GAAIjC,OAAS4B,EAAMI,GAAIC,GAAIjC,QAAUA,EAAO,MAE7D,OAAO2E,KAIf,IAAMnB,EAAaC,GAAc,YAAI7B,GAAQ,CACzC,UACA,YAGJyC,EAAYP,SAAQ,SAAAc,GAChBpB,EAAWoB,EAAK5C,IAAhB,YAA2BwB,EAAWoB,EAAK5C,KAC3C,IAAMgC,EAAYR,EAAWoB,EAAK5C,IAAI4C,EAAK3C,IAC3CuB,EAAWoB,EAAK5C,IAAIxK,OAAOoN,EAAK3C,GAAI,EAApC,eACO+B,EADP,CAEI/D,SAAQ,QAIhBuD,EAAWvC,GAAX,YAAqBuC,EAAWvC,IAChCuC,EAAWvC,GAAGG,GAAd,eACOoC,EAAWvC,GAAGG,GADrB,CAEIP,SAAS,IAGbtG,EAAShB,GAAY,CAAEqI,MAAO4B,EAAY3C,QAAS,CAAEI,IAAGG,WE3K3CyD,CAAgB,CAAE5D,IAAGG,SAC/B,CAAC7G,IAEJ,OACI,kBAAC,GAAD,CACIqH,MAAOA,EACPF,QAASA,EACThK,QAASA,K,YCXXoD,I,YAiBOgK,IArCX9J,GAAoB,yBACpBC,GAAuB,4BAChBC,GAAmBC,YAAaH,IAAmB,SAAAL,GAAO,OAAIA,KAC9DS,GAAsBD,YAAaF,IAKnC5B,GAAmB8B,YAHN,0BAGsC,SAAAR,GAAO,OAAIA,KAC9DrB,GAAkB6B,YAHN,yBAGqC,SAAAR,GAAO,OAAIA,KAC5DpB,GAAc4B,YAHN,qBAGiC,SAAAR,GAAO,OAAIA,KAIpDoK,GAAkB5J,YAFN,yBAEqC,SAAAR,GAAO,OAAIA,KAC5DqK,GAAsB7J,YAFN,6B,GAIwCjB,EAAyB,qB,qBAAtF+K,G,MAAcC,G,MAAsBC,G,MAC/BC,GAAmBjL,EAAmB8K,ICvBxB,SAAAhM,GAAO,OAC9BwC,KAAMC,KAAK,wBAAyBzC,MDwBxC,SAAU6B,GAAsB8C,GAAhC,2EAKuB,OAJbrG,EAAMqG,EAAOjD,QAEblB,EAHV,cAGyBlC,GAHzB,SAK6BoE,YAAKjD,EAAkB,CAC5CU,IAAK,QACLC,oBACAC,mBACAC,eACAE,UAVR,OAaI,OARMmC,EALV,gBAaU7B,YAAKkB,IAbf,OAcI,OAdJ,SAcUY,YAAOD,GAdjB,wCAiBO,SAAUkJ,KAAV,iEACH,OADG,SACGhJ,YAAUd,GAAmBF,IADhC,wCAIP,IAMeiB,gBAAa,kBAAC,GA1CH,0BA2CD,SAACC,EAAD,OAAqBjD,EAArB,EAAU4B,QAAW5B,OAArB,sBACdiD,EADc,CAEjBjD,cAHoB,YAAC,GAzCJ,yBA8CD,SAACiD,EAAD,WAAUrB,QAAW0K,EAArB,EAAqBA,SAAU5F,EAA/B,EAA+BA,MAAOxG,EAAtC,EAAsCA,QAAtC,sBACb+C,EADa,CAEhBsJ,SAAU,CAAC,CAAED,WAAU5F,QAAOxG,iBAPV,YAAC,GAxCR,qBAiDD,SAAC+C,EAAD,WAAUrB,QAAW0K,EAArB,EAAqBA,SAAU5F,EAA/B,EAA+BA,MAAOxG,EAAtC,EAAsCA,QAAtC,sBACT+C,EADS,CAEZsJ,SAAS,GAAD,mBAAOtJ,EAAMsJ,UAAb,CAAuB,CAAED,WAAU5F,QAAOxG,kBAX9B,YAAC,GAaxBiM,IAAuB,SAAAlJ,GAAK,OAAIA,KAbT,YAAC,GAcxBmJ,IAAuB,SAAAnJ,GAAK,OAAIA,KAdT,YAAC,GAlCA,6BAiDD,SAAAA,GAAK,sBACtBA,EADsB,CAEzBuJ,KAAM,QAjBc,YAAC,GAnCJ,yBAsDD,SAACvJ,EAAD,OAAmBuJ,EAAnB,EAAU5K,QAAV,sBACbqB,EADa,CAEhBuJ,YArBoB,IANP,CACjBxM,OAAQ,KACRuM,SAAU,GACVC,KAAM,K,k2EEhDV,IAAMC,GAAkBzP,IAAOgC,KAAV,MAGf0N,GAAiB1P,IAAOC,IAAV,MAWd0P,GAAY3P,IAAOC,IAAV,MAmBT2P,GAAgB5P,IAAOC,IAAV,MAMb4P,GAAiB7P,IAAO8P,MAAV,MAedC,GAAkB/P,IAAOoC,OAAV,MAYf4N,GAAehQ,IAAOC,IAAV,MAwEZgQ,GAAU3P,IAAMC,MAAK,YAAqC,IAAlC2C,EAAiC,EAAjCA,QAASoM,EAAwB,EAAxBA,SAAa7O,EAAW,sCAC3D,OACI,kBAACuP,GAAD,iBACQvP,EADR,CAEIiJ,MAAOxG,EAAQwG,MACfwG,UAAWhN,EAAQoM,SACbpM,EAAQoM,WAAaA,EACrB,KAAO,MAAQ,cAEpBpM,EAAQA,YAwCN5C,OAAMC,MAnCR,SAAC,GAAsD,IAApDgP,EAAmD,EAAnDA,SAAU/M,EAAyC,EAAzCA,SAAU2N,EAA+B,EAA/BA,SAAUX,EAAqB,EAArBA,KAAM7G,EAAe,EAAfA,SAC1CyH,EAAMC,mBAKZ,OAJAjJ,qBAAU,WACNgJ,EAAIE,QAAQC,UAAYH,EAAIE,QAAQE,eACrC,CAACjB,IAGA,oCACI,kBAACE,GAAD,CAAiBjN,SAAUA,GACvB,kBAACkN,GAAD,KACI,kBAACC,GAAD,CAAWS,IAAKA,GACXb,EAAS7N,KAAI,SAAAwB,GAAO,OACjB,kBAAC+M,GAAD,CACIX,SAAU3G,EAAS2G,SACnBpM,QAASA,QAIrB,kBAAC0M,GAAD,KACI,kBAACC,GAAD,CACIM,SAAUA,EACV5F,MAAOiF,IAEX,kBAACO,GAAD,CACIvN,SAAUA,GADd,eC9ITiO,GA9BO,WAClB,IAAMjM,EAAW4B,cADO,EAGaa,aAAY,gBAAGyJ,EAAH,EAAGA,KAAMrD,EAAT,EAASA,KAAT,MAAqB,CAClEkC,SAAUmB,EAAKnB,SACfC,KAAMkB,EAAKlB,KACX7G,SAAU0E,EAAK1E,aAHX4G,EAHgB,EAGhBA,SAAUC,EAHM,EAGNA,KAAM7G,EAHA,EAGAA,SAMlBnG,EAAW6D,uBAAY,SAAAzE,GACzBA,EAAE0E,iBACF9B,EAAS6K,GAAiB,CAAEnM,QAASsM,KACrChL,EAASyK,QACV,CAACzK,EAAUgL,IAERW,EAAW9J,uBAAY,SAAAzE,GACzB4C,EAASwK,GAAgBpN,EAAE+O,OAAOpG,UACpC,CAAC/F,IAEH,OACI,kBAAC,GAAD,CACI+K,SAAUA,EACV/M,SAAUA,EACV2N,SAAUA,EACVX,KAAMA,EACN7G,SAAUA,K,qiCC5BtB,IAAMiI,GAAa5Q,IAAOC,IAAV,MAQV,SAAA6B,GAAK,OAAIA,EAAM4H,OAASxH,YAAf,SAGT,SAAAJ,GAAK,OAAIA,EAAM+O,MAAQ,KAAS3O,YAAvB,SAKT4O,GAAiB9Q,IAAOC,IAAV,MAUd8Q,GAAa/Q,IAAOC,IAAV,MAWV+Q,GAAgB,SAAAC,GAClB,IAAIC,EAAgB,GAGpB,OAFAA,GAAiBC,OAAOhQ,KAAKC,MAAM6P,EAAY,KAC/CC,GAAiBC,OAAOhQ,KAAKC,MAAM6P,EAAY,MAgCpCG,GA5BD,SAAC,GAAqB,IAAnBP,EAAkB,EAAlBA,KAAMnH,EAAY,EAAZA,MAEb2H,EAASlQ,KAAKC,MAAMyP,EAAO,KAC3BS,EAAcnQ,KAAKC,MAAOyP,EAAO,IAAQ,IAG/C,YAAWU,GAARV,GAA8B,OAATA,EACb,kBAACD,GAAD,MAIP,kBAACA,GAAD,CACIC,KAAMA,EACNnH,MAAOA,EAAQ,EAAI,GAEnB,kBAACoH,GAAD,KACKE,GAAcK,IAEnB,kBAACN,GAAD,UAGA,kBAACD,GAAD,KACCE,GAAcM,MC5CZE,GArBQ,SAAC,GAAe,IAAbC,EAAY,EAAZA,MAAY,EAEaxK,aAAY,gBAAGyK,EAAH,EAAGA,OAAQnE,EAAX,EAAWA,KAAX,MAAuB,CAC9EoE,UAAWD,EAAOC,UAClBC,UAAWF,EAAOE,UAClBC,MAAOtE,EAAKsE,MACZC,MAAOvE,EAAKuE,UAJRH,EAF0B,EAE1BA,UAAWC,EAFe,EAEfA,UAAWC,EAFI,EAEJA,MAAOC,EAFH,EAEGA,MAO/BjB,EAAOY,EAAQE,EAAYC,EAC3BlI,EAAQ+H,EAASI,GAAmB,UAAVC,EAAsBD,GAAmB,UAAVC,EAE/D,OACI,kBAAC,GAAD,CACEjB,KAAMA,EACNnH,MAAOA,K,gZCdjB,IAAMqI,GAAc/R,IAAOC,IAAV,MASX+R,GAAYhS,IAAOC,IAAV,MAwCAK,OAAMC,MAjCN,SAAC,GAAqB,IAAnB0R,EAAkB,EAAlBA,MAAOrR,EAAW,EAAXA,KACfsR,EAAY,CACdvI,MAAO,CACHG,OAAQ,OACRD,MAAO,MACPH,MAAO,QACPyI,QAAS,OACTC,eAAgB,SAChBC,WAAY,WAIpB,OACI,kBAACN,GAAD,KACKE,EAEO,kBAAC,KAAY3H,SAAb,CAAsBC,MAAO2H,GACzB,kBAAC,KAAD,OAIJ,kBAAC,KAAY5H,SAAb,CAAsBC,MAAO,CAAEZ,MAAM,eAAMuI,EAAUvI,MAAjB,CAAwBD,MAAO,YAC/D,kBAAC,KAAD,OAIZ,kBAACsI,GAAD,KACKpR,OCzBF0R,GAnBS,SAAC,GAAsB,IAApBC,EAAmB,EAAnBA,MAAOd,EAAY,EAAZA,MAAY,EACIxK,aAAY,gBAAGsG,EAAH,EAAGA,KAAH,MAAe,CACrEiF,UAAWjF,EAAKgF,MAChBE,UAAWlF,EAAKkE,MAChB5Q,YAAa0M,EAAK1M,gBAHd2R,EADkC,EAClCA,UAAWC,EADuB,EACvBA,UAAW5R,EADY,EACZA,YAMxB6R,EAAiB,IAAIC,IAAI9R,GACzBoR,EAASR,GAASiB,EAAeE,IAAIH,IAAgBF,GAASG,EAAeE,IAAIJ,GACjF5R,EAAQ6Q,GAASgB,GAAeF,GAASC,EAE/C,OACI,kBAAC,GAAD,CACIP,MAAOA,EACPrR,KAAMA,K,quCCZlB,IAAMiS,GAA2B7S,IAAOC,IAAV,MAMxB6S,GAAqB9S,IAAOC,IAAV,MAOlB8S,GAAiB/S,IAAOC,IAAV,MAUd+S,GAAgB,SAAC,GAAY,IAAX3H,EAAU,EAAVA,EAAGH,EAAO,EAAPA,EACvB,OAAOiG,OAAO8B,aAAa,GAAK5H,IAAM,EAAIH,IAGxCgI,GAAYlT,IAAOC,IAAV,MAYTkT,GAAYnT,IAAOC,IAAV,MAQTmT,GAAapT,IAAOC,IAAV,MAUVoT,GAAY/S,IAAMC,MAAK,YAAoC,IAAjCyL,EAAgC,EAAhCA,KAAMsH,EAA0B,EAA1BA,MAAOC,EAAmB,EAAnBA,aACzC7S,QAAQC,IAAI,aACZD,QAAQC,IAAIqL,GACZ,IAeIwH,EAAeC,EAfbC,EAAgBzK,GAAY+C,EAAK2H,UAAU3J,OAC3C4J,EAAY,CACdlK,MAAOsC,EAAK2H,UAAU1J,MACtBN,MAAO,CACHE,MAAO,MACPD,OAAO,2BAAD,OAAsD,UAAzBoC,EAAK2H,UAAU1J,MAAoB,QAAU,QAA1E,OAIR0J,EACF,kBAAC,KAAYrJ,SAAb,CAAsBC,MAAOqJ,GACzB,kBAACF,EAAD,OAMJG,EACA,yBAAKlK,MAAO,CAAEE,MAAO,SAoBzB,OAjBGmC,EAAK6H,UAAU7J,QACdwJ,EAAgBvK,GAAY+C,EAAK6H,UAAU7J,OAC3CyJ,EAAY,CACR/J,MAAOsC,EAAK6H,UAAU5J,MACtBN,MAAO,CACHE,MAAO,MACPD,OAAO,2BAAD,OAAsD,UAAzBoC,EAAK6H,UAAU5J,MAAoB,QAAU,QAA1E,OAGd4J,EACI,kBAAC,KAAYvJ,SAAb,CAAsBC,MAAOkJ,GACzB,kBAACD,EAAD,QAOR,kBAACT,GAAD,KACI,kBAACK,GAAD,KACKE,EAAQ,GAEb,kBAACJ,GAAD,CAAWvR,QAAS4R,GACfI,EACD,kBAACR,GAAD,KACKH,GAAchH,EAAKkB,OAExB,kBAAC,KAAY5C,SAAb,CAAsBC,MAAO,CAAEZ,MAAO,CAAED,MAAO,sBAC3C,kBAAC,KAAD,OAEJ,kBAACyJ,GAAD,KACKH,GAAchH,EAAKmB,OAEvB0G,OAuBFvT,OAAMC,MAhBC,SAAC,GAAiC,IAA/BuT,EAA8B,EAA9BA,UAAWP,EAAmB,EAAnBA,aAChC,OACI,kBAACV,GAAD,KACI,kBAACC,GAAD,KACKgB,EAAUpS,KAAI,SAACsK,EAAMsH,GAAP,OACX,kBAACD,GAAD,CACI1R,QAAS4R,EACTvH,KAAMA,EACNsH,MAAOA,YC/GhBS,GApBgB,WAEV3N,cAAjB,IAEQ0N,EAAc7M,aAAY,kBAAiB,CAC/C6M,UAD8B,EAAGpC,OACfoC,cADdA,UAIFP,EAAelN,uBAAY,cAE9B,IAEH,OACI,kBAAC,GAAD,CACIkN,aAAgBA,EAChBO,UAAWA,K,kWChBvB,IAAME,GAAgBhU,IAAOC,IAAV,MAON,SAAA6B,GAAK,OAAkB,IAAbA,EAAM+O,KAAc,OACrC,SAAA/O,GAAK,OAAIA,EAAM+O,MAAQ,GAAM3O,YAApB,SAYA5B,OAAMC,MAPJ,SAAC,GAAc,IAAZsQ,EAAW,EAAXA,KAEhB,OADAnQ,QAAQC,IAAIkQ,GAER,kBAACmD,GAAD,CAAenD,KAAMA,OCoBdoD,GAnCW,SAAC,GAAe,IAAbxC,EAAY,EAAZA,MAAY,EACJxK,aAAY,gBAAGyK,EAAH,EAAGA,OAAH,MAAiB,CAC1DC,UAAWD,EAAOC,UAClBC,UAAWF,EAAOE,cAFdD,EAD6B,EAC7BA,UAAWC,EADkB,EAClBA,UAMbsC,EAAc7D,iBAAO,KAE3BjJ,qBAAU,WAEF8M,EAAY5D,QADbmB,EACuBtQ,KAAKgT,IAAIxC,EAAWuC,EAAY5D,SAEhCnP,KAAKgT,IAAIvC,EAAWsC,EAAY5D,WAE3D,CAACmB,EAAOE,EAAWC,IAUtB,IAAIwC,EAAa3C,EAASE,EAAYuC,EAAY5D,QAAYsB,EAAYsC,EAAY5D,QAGtF,OAFA8D,EAAajT,KAAKkT,IAAID,EAAY,GAG9B,kBAAC,GAAD,CACIvD,KAAMuD,K,2aC3BlB,IAAME,GAActU,IAAOC,IAAV,MAQXsU,GAAevU,IAAOC,IAAV,MAwBHK,OAAMC,MAlBN,WACX,OACI,oCACI,kBAAC,GAAD,CAAgBgS,OAAK,IACrB,kBAAC+B,GAAD,KACI,kBAAC,GAAD,CAAmB/B,OAAK,IACxB,kBAAC,GAAD,CAAiBA,OAAK,IACtB,kBAACgC,GAAD,MACA,kBAAC,GAAD,MACA,kBAACA,GAAD,MACA,kBAAC,GAAD,CAAiB9C,OAAK,IACtB,kBAAC,GAAD,CAAmBA,OAAK,KAE5B,kBAAC,GAAD,CAAgBA,OAAK,QCxBlB+C,GAPS,WAEpB,OACI,kBAAC,GAAD,O,knBCAR,I,GAAMC,GAAkBzU,IAAOC,IAAV,MASfyU,GAAiBxS,YAAH,MAQdyS,GAAgB3U,IAAOC,IAAV,KACbyU,IAIAE,GAAiB5U,IAAOC,IAAV,KACdyU,IAkBSpU,OAAMC,MAdF,SAAAuB,GACf,OACI,kBAAC2S,GAAD,KACI,kBAACE,GAAD,KACI,kBAAC,GAAD,OAEJ,kBAAC,GAAoB7S,GACrB,kBAAC8S,GAAD,KACI,kBAAC,GAAD,W,YC1BN7P,I,YAgBO8P,IA1BX5P,GAAoB,yBACpBC,GAAuB,4BAChBC,GAAmBC,YAAaH,IAChCI,GAAsBD,YAAaF,IAInC5B,GAAmB8B,YADN,0BACsC,SAAAR,GAAO,OAAIA,KAC9DrB,GAAkB6B,YAHN,yBAGqC,SAAAR,GAAO,OAAIA,KAEzE,SAAUG,GAAsB8C,GAAhC,2EAKuB,OAJbrG,EAAMqG,EAAOjD,QAEblB,EAHV,cAGyBlC,GAHzB,SAK6BoE,YAAKjD,EAAkB,CAC5CU,IAAK,QACLC,oBACAC,mBACAG,UATR,OAYI,OAPMmC,EALV,gBAYU7B,YAAKkB,IAZf,OAaI,OAbJ,SAaUY,YAAOD,GAbjB,wCAgBO,SAAUgP,KAAV,iEACH,OADG,SACG9O,YAAUd,GAAmBF,IADhC,wCAIP,I,GAMeiB,gBAAa,kBAAC,GA9BH,0BA+BD,SAACC,EAAD,OAAqBjD,EAArB,EAAU4B,QAAW5B,OAArB,sBACdiD,EADc,CAEjBjD,cAHoB,YAAC,GA/BJ,yBAoCD,SAACiD,EAAD,WAAUrB,QAAoBnE,GAA9B,EAAqBgC,KAArB,+CACbwD,EADa,GAEbxF,MAPiB,IANP,CACjBuC,OAAQ,KACR8B,MAAO,KACPjE,YAAa,K,YCFPkE,I,YAkBO+P,IAlDX7P,GAAoB,2BACpBC,GAAuB,8BAChBC,GAAmBC,YAAaH,IAChCI,GAAsBD,YAAaF,IAMnC5B,GAAmB8B,YAHN,4BAGsC,SAAAR,GAAO,OAAIA,KAC9DrB,GAAkB6B,YALN,2BAKqC,SAAAR,GAAO,OAAIA,KAC5DpB,GAAc4B,YAJN,uBAIiC,SAAAR,GAAO,OAAIA,KACpDnB,GAAc2B,YAJN,uBAIiC,SAAAR,GAAO,OAAIA,KAEpDmQ,GAAmB,SAAA3R,GAAM,OAAI,SAAEoB,EAAUyI,GAAe,IACzDyE,EAAWzE,IAAXyE,OACJsD,EAAS,eAAQtD,GACrBuD,OAAOC,KAAK9R,GAAQ2K,SAAQ,SAAAvM,GACE,kBAAhB4B,EAAO5B,KACbwT,EAAS,eACFA,EADE,eAEJxT,EAFI,sBAGEwT,EAAUxT,IAHZ,CAID4B,EAAO5B,WAMvBgD,EAASf,GAAY,CAAEiO,OAAQsD,OAGnC,SAAUjQ,GAAsB8C,GAAhC,2EAKuB,OAJbrG,EAAMqG,EAAOjD,QAEblB,EAHV,cAGyBlC,GAHzB,SAK6BoE,YAAKjD,EAAkB,CAC5CU,IAAK,UACLC,oBACAC,mBACAC,eACAC,YAAasR,GACbrR,UAXR,OAcI,OATMmC,EALV,gBAcU7B,YAAKkB,IAdf,OAeI,OAfJ,SAeUY,YAAOD,GAfjB,wCAkBO,SAAUiP,KAAV,iEACH,OADG,SACG/O,YAAUd,GAAmBF,IADhC,wCAIP,IAUeiB,gBAAa,kBAAC,GA1DH,4BA2DD,SAACC,EAAD,OAAqBjD,EAArB,EAAU4B,QAAW5B,OAArB,sBACdiD,EADc,CAEjBjD,cAHoB,YAAC,GA3DJ,2BAgED,SAACiD,EAAD,WAAUrB,QAAoBnE,GAA9B,EAAqBgC,KAArB,+CACbwD,EADa,GAEbxF,MAPiB,YAAC,GAzDR,uBAkED,SAACwF,EAAD,WAAUrB,QAAoBnE,GAA9B,EAAqBgC,KAArB,+CACTwD,EADS,GAETxF,MAXiB,YAAC,GAxDR,uBAqED,SAACwF,EAAD,OAAqByL,EAArB,EAAU9M,QAAW8M,OAArB,sBACTA,MAdiB,IAVP,CACjB1O,OAAQ,KACR8B,MAAO,KACPqQ,UAAW,KACXC,QAAS,KACTxD,UAAW,KACXD,UAAW,KACXmC,UAAW,KCFAuB,GA7Ca,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACrB9Q,EAAW4B,cAoBjBgB,qBAAU,WACN,OAAO,WACH5C,EAAS+Q,MACT/Q,EAASgR,MACThR,EAASiR,MACTjR,EAASkR,MACTlR,EAASmR,SAEd,CAACnR,IA7BoC,MA+BxBwD,IA5BG,oBAAAvD,EAAAC,OAAA,kEAAAD,EAAA,MACTD,EAASiE,OADA,cAGfjE,EAAS+Q,MACT/Q,EAASgR,MACThR,EAASiR,MACTjR,EAASkR,MACTlR,EAASmR,MACTC,YAAW,WACPpR,EAASqR,GAAqBP,IAC9B9Q,EAASsR,GAAqBR,IAC9B9Q,EAASuR,GAAqBT,IAC9B9Q,EAASwR,GAAuBV,IAChC9Q,EAASyR,GAAuBX,MACjC,GAdY,mBAeR,GAfQ,uCA4BkB,CAAE9Q,EAAU8Q,IAA1CrP,EA/BiC,oBAiChC6B,EAAyB7B,EAAzB6B,QAASjD,EAAgBoB,EAAhBpB,KAAMC,EAAUmB,EAAVnB,MAEvB,OAAGgD,EAAgB,KAChBhD,EAAc,KACdD,EAEK,kBAAC,GAAD,MAGD,MCpCIqB,gBAnBE,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,QAAS+P,EAAY,EAAZA,MAOzB,GANA9O,qBAAU,WACF8O,EAAM9S,OAAOH,IACbkD,EAAQ5E,KAAK,OAElB,CAAC4E,EAAS+P,KAETA,EAAM9S,OAAOH,GAAI,OAAO,KAPS,IAQ7BA,EAAOiT,EAAM9S,OAAbH,GACR,OAAIA,EAGA,oCACI,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAqBqS,OAAQrS,KALtB,QCLJkT,GANI,WACf,OACI,kBAAC,GAAD,O,+GCFR,IAAMC,GAAyBpW,IAAOqW,GAAV,MAgBbC,GAXW,SAAC,GAAqC,IAAnCC,EAAkC,EAAlCA,MAAOC,EAA2B,EAA3BA,MAAOC,EAAoB,EAApBA,SAAU5F,EAAU,EAAVA,KACjD,OACI,kBAACuF,GAAD,KACI,4BAAKG,GACL,4BAAKC,GACL,4BAAKC,GACL,4BAAK5F,K,4nCCVjB,IAAM6F,GAAuB1W,IAAOC,IAAV,MASpB0W,GAAqB3W,IAAO4W,KAAV,MAQlBC,GAAuB7W,IAAO8W,GAAV,MAUpBC,GAAe/W,IAAOC,IAAV,MASZ+W,GAAsBhX,IAAOiX,MAAV,MAMnBC,GAAsBlX,IAAOmX,MAAV,MAyEVC,GAjES,WA2BpB,OACI,kBAACV,GAAD,KACI,kBAACC,GAAD,KACI,kBAACE,GAAD,iCAGA,kBAACE,GAAD,wBAGA,kBAACC,GAAD,KACI,kBAACE,GAAD,KACI,wBAAIpN,OAAO,QACP,wBAAID,MAAM,QAEV,4CAGA,4CAGA,qDA9CN,CACd,CACI0M,MAAO,+EACPC,MAAO,IACPC,SAAU,EACV5F,KAAM,wBAEV,CACI0F,MAAO,+EACPC,MAAO,IACPC,SAAU,EACV5F,KAAM,wBAEV,CACI0F,MAAO,+EACPC,MAAO,IACPC,SAAU,EACV5F,KAAM,wBAEV,CACI0F,MAAO,+EACPC,MAAO,IACPC,SAAU,GACV5F,KAAM,yBA4BanP,KAAI,SAAA2V,GAAQ,OACnB,kBAAC,GAAD,CAAmBd,MAAOc,EAASd,MAAOC,MAAOa,EAASb,MAAOC,SAAUY,EAASZ,SAAU5F,KAAMwG,EAASxG,WAGrH,kBAACkG,GAAD,2BCrGDO,GANkB,WAC7B,OACI,kBAAC,GAAD,OCSOtO,GAVE,WAEb,OACI,oCACI,kBAAC,GAAD,MACA,kBAAC,GAAD,Q,oNCDZ,IAAMuO,GAAevX,IAAOC,IAAV,MA+BHuX,GArBH,WACV,OACE,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,UAAWzO,GAAU0O,KAAK,IAAIC,OAAK,IAC1C,kBAAC,IAAD,CAAOF,UAAWG,GAAUF,KAAK,YAAYC,OAAK,IAClD,kBAAC,IAAD,CAAOF,UAAWtB,GAAYuB,KAAK,UAAUC,OAAK,IAClD,kBAAC,IAAD,CAAOF,UAAWI,GAAeH,KAAK,aAAaC,OAAK,IACxD,kBAAC,IAAD,CACEG,OAAQ,cAAGC,SAAH,OACN,kBAACR,GAAD,KACE,yCACA,+HClBMS,QACW,cAA7BC,OAAOF,SAASG,UAEe,UAA7BD,OAAOF,SAASG,UAEhBD,OAAOF,SAASG,SAAShC,MACvB,2D,kCCEWiC,IAAV,SAAUA,KAAV,iEACH,OADG,SACGC,YAAI,CAAEpT,KAAYqD,KAAYwM,KAAYpI,KAAcsC,KAAY+F,OADvE,wCAIQuD,OAdKC,2BAAgB,CAChC9X,QACA6M,QACAE,QACAH,UACAsD,QACAgB,Y,SCHE6G,GAAiBC,cACjBC,GAAQC,uBACVL,GACAM,+BAAoBC,2BAAgBC,KAAYN,MAGpDA,GAAeO,IAAIX,IAEnBY,IAASjB,OACL,kBAAC,IAAD,CAAUW,MAAOA,IACb,kBAAC,IAAD,KACI,kBAAC,GAAD,QAGPO,SAASC,eAAe,SFsGvB,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,iB","file":"static/js/main.608865ca.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\n\nconst gridSize = 3;\n\nconst GridRowBlock = styled.div`\n    display: flex;\n    width: 85%;\n\n    & + & {\n        margin-top: 50px;\n    }\n\n    &:first-child {\n        margin-top: 50px;\n    }\n\n    &:last-child {\n        margin-bottom: 50px;\n    }\n`;\n\nconst GridBoxBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 24%;\n    height: 300px;\n    background-color: rgb(0,0,0, 0.4);\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.6);\n    cursor: pointer;\n    \n    & + & {\n        margin-left: 13%;\n    }\n\n    &:active {\n        background-color: rgb(0,0,0, 0.6);\n        box-shadow: 5px 5px 5px rgb(0,0,0,0.8);\n    }\n`\n\nconst BoxTitleBlock = styled.div`\n    \n`;\n\nconst BoxContentBlock = styled.div`\n    \n`;\n\nconst GridBox = React.memo(({ room, ...rest }) => {\n    console.dir('room~');\n    \n    return (\n        <GridBoxBlock {...rest}>\n            <BoxTitleBlock>\n                {room.name}\n            </BoxTitleBlock>\n            <BoxContentBlock>\n                {room.participant}\n            </BoxContentBlock>\n        </GridBoxBlock>\n    )\n});\n\nconst GridLayoutBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    height: 90%;\n    overflow-y: scroll;\n    background-color: rgb(0,0,0, 0.2);\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.4);\n`;\n\nconst GridLayout = ({ room, onRoomClick }) => {\n\n    if(!room) return <GridLayoutBlock />;\n\n    const list = [ ...room ];\n    \n    const gridArr = [];\n    const rowSize = Math.floor(list.length / gridSize);\n    for(let i=0; i<=rowSize; ++i) {\n        gridArr.push(\n            <GridRowBlock\n                key={`GridRowBlock_${i}`}\n            >\n                {\n                    list.splice(0, gridSize).map(room => (\n                        <GridBox\n                            key={`GridBox${room.name}`}\n                            room={room}\n                            onClick={e => onRoomClick(e, room.key)}\n                        />\n                    ))\n                }\n            </GridRowBlock>\n        );\n    }\n\n    return (\n        <GridLayoutBlock>\n            {gridArr}\n        </GridLayoutBlock>\n    )\n};\n\nexport default React.memo(GridLayout);","import React from 'react';\nimport GridLayout from '../../components/common/GridLayout';\n\nconst GridLayoutContainer = props => {\n\n    return (\n        <GridLayout {...props} />\n    )\n};\n\nexport default GridLayoutContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst SubmitFormBlock = styled.form`\n    display: flex;\n`;\n\nconst buttonStyle = css`\n    outline: none;\n    background-color: rgb(0,0,0, 0.2);\n    padding: 0px;\n    border: none;\n    width: 200px;\n    height: 30px;\n    cursor: pointer;\n    box-shadow: 5px 5px 5px rgb(0,0,0, 0.6);;\n\n    &:hover {\n        background-color: rgb(0,0,0, 0.8);\n        color: white;\n        box-shadow: 5px 5px 5px rgb(0,0,0, 0.2);\n    }\n`\n\nconst ConfirmButtonBlock = styled.button`\n    ${buttonStyle}\n`;\n\nconst CancelButtonBlock = styled.button`\n    ${buttonStyle}\n    margin-left: 20px;\n`;\n\nconst SubmitForm = ({ onConfirmClick, onCancelClick }) => {\n    return (\n        <SubmitFormBlock onSubmit={onConfirmClick}>\n            <ConfirmButtonBlock type='submit'>\n                Create Room\n            </ConfirmButtonBlock>\n            <CancelButtonBlock\n                type='button'\n                onClick = {onCancelClick}\n            >\n                Cancel\n            </CancelButtonBlock>\n        </SubmitFormBlock>\n    )\n};\n\nexport default React.memo(SubmitForm);","import { eventChannel } from 'redux-saga';\nimport SocketIo from 'socket.io-client';\nimport { put, call, take, cancelled } from 'redux-saga/effects';\n\n// eslint-disable-next-line\nfunction* createEventChannel(io) {\n    return eventChannel(emit => {\n        io.on('connect', socket => {\n            emit({\n                type: 'socket',\n                socket: io.id\n            });\n        })\n\n        //  reconnect 전에 session연결을 위한 http call 추가 예정\n\n        io.on('message', message => {\n            emit(message)\n        });\n\n        return () => {\n            io.close();\n        }\n    })\n}\n\nexport function* connectNamespace(params) {\n    let channel;\n\n    const {\n        url,\n        initializeSocket,\n        initializeValue,\n        changeValue,\n        updateValue,\n        query,\n    } = params;\n\n    console.dir(url);\n    console.dir(query);\n    try {\n        const io = SocketIo(url, {\n            query,\n            reconnection: false,\n            secure: true,\n        });\n        \n        channel = yield call(createEventChannel, io);\n    \n        while(true) {\n            const message = yield take(channel);\n            switch(message.type) {\n                case 'socket':\n                    yield put(initializeSocket(message));\n                    break;\n                case 'initialize':\n                    yield put(initializeValue(message));\n                    break;\n                case 'change':\n                    yield put(changeValue(message));\n                    break;\n                case 'update':\n                    yield put(updateValue(message));\n                    break;\n                default:\n                    console.dir(message);\n            }\n        }\n    } catch(e) {\n        console.dir(e);\n    } finally {\n        if (yield cancelled()) {\n            channel.close();\n        }\n    }\n}","export const createRequestActionTypes = type => {\n    const SUCCESS = `${type}_SUCCESS`;\n    const FAILURE = `${type}_FAILURE`;\n    return [ type, SUCCESS, FAILURE ];\n};\n\nexport default function createRequestThunk (type, request) {\n    const SUCCESS = `${type}_SUCCESS`;\n    const FAILURE = `${type}_FAILURE`;\n    return params => async dispatch => {\n        try {\n            const response = await request(params);\n            dispatch({\n                type: SUCCESS,\n                payload: response.data,\n            });\n            return response.data;\n        } catch(e) {\n            dispatch({\n                type: FAILURE,\n                payload: e,\n                error: true,\n            });\n            throw e;\n        }\n    }\n};","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as roomCtrl from '../lib/api/room';\n\nconst CONNECT_WEBSOCKET = 'room/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'room/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'room/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'room/INITIALIZE_SOCKET';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\n\nconst [ CREATE_ROOM, CREATE_ROOM_SUCCESS, CREATE_ROOM_FAILURE ] = createRequestActionTypes('room/CREATE_ROOM');\nexport const createRoomThunk = createRequestThunk(CREATE_ROOM, roomCtrl.createRoom);\n\nfunction* connectWebsocketSaga () {\n    const socketTask = yield fork(connectNamespace, { \n        url: '/room',\n        initializeSocket,\n        initializeValue,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* roomSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    room: null,\n    error: null,\n}\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { room }}) => ({\n        ...state,\n        room,\n    }),\n    [CREATE_ROOM_SUCCESS]: state => state,\n    [CREATE_ROOM_FAILURE]: (state, { payload: error }) => ({\n        ...state,\n        error,\n    }),\n}, initialState);","import axios from 'axios';\n\n//  REST API 방식\n\nexport const createRoom = () =>\n    axios.post('/api/room');","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport SubmitForm from '../../components/common/SubmitForm';\nimport { disconnectWebsocket, createRoomThunk } from '../../modules/room';\n\nconst SubmitFormContainer = ({ history, onCancelClick, ...rest }) => {\n    const dispatch = useDispatch();\n\n    const onConfirmClick = useCallback(e => {\n        e.preventDefault();\n        (async() => {\n            dispatch(disconnectWebsocket());\n            const key = await dispatch(createRoomThunk());\n            onCancelClick();\n            history.push(`/game/${key}`);\n        })();\n    }, [dispatch, history, onCancelClick]);\n\n    return (\n        <SubmitForm\n            {...rest}    \n            onConfirmClick={onConfirmClick}\n            onCancelClick={onCancelClick}    \n        />\n    )\n};\n\nexport default withRouter(SubmitFormContainer);","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport GridLayoutContainer from '../../containers/common/GridLayoutContainer';\nimport SubmitFormContainer from '../../containers/common/SubmitFormContainer';\n\nconst RoomModalBackgroundBlock = styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgb(0,0,0, 0.5);\n    z-index: 10;\n    opacity: 0;\n    visibility: hidden;\n    transition: 1s;\n\n    ${props => props.open && css`\n        opacity: 1;\n        visibility: visible;\n    `}\n`;\nconst RoomModalBlock = styled.div`\n    position: fixed;\n    top: 20%;\n    left: 20%;\n    height: 60%;\n    width: 60%;\n    padding: 2%;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    justify-content: space-between;\n    background-color: rgb(245,245,245, 0.8);\n    box-shadow: 10px 10px 10px;\n    z-index: 100;\n`;\n\nconst RoomModal = ({ onBackgroundClick, onContentClick, onRoomClick, room, ...rest }) => {\n    console.dir('room mooooodal')\n    return (\n        <RoomModalBackgroundBlock\n            {...rest}\n            onClick={onBackgroundClick}\n        >\n            <RoomModalBlock\n                onClick={onContentClick}\n            >\n                <GridLayoutContainer\n                    room={room}\n                    onRoomClick={onRoomClick}\n                />\n                <SubmitFormContainer\n                    onCancelClick={onBackgroundClick}\n                />\n            </RoomModalBlock>\n        </RoomModalBackgroundBlock>\n    )\n};\n\nexport default React.memo(RoomModal);","import React, { useState, useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport RoomModal from '../../components/modal/RoomModal';\nimport { disconnectWebsocket as disconnectRoomWebsocket } from '../../modules/room';\n    \nconst RoomModalContainer = ({ history, openModal, setOpenModal, ...rest }) => {\n    const [ modal, setModal ] = useState(false);\n    const { room } = useSelector(({ room }) => ({\n        room: room.room,\n    }));\n    const dispatch = useDispatch();\n\n    const onBackgroundClick = useCallback(e => {\n        setModal(false);\n        setOpenModal(false);\n        dispatch(disconnectRoomWebsocket());\n    }, [dispatch, setOpenModal])\n\n    const onContentClick = useCallback(e => {\n        e.stopPropagation();\n    }, [])\n\n    const onRoomClick = useCallback((e, key) => {\n        setModal(false);\n        setOpenModal(false);\n        dispatch(disconnectRoomWebsocket());\n        history.push(`/game/${key}`);\n    }, [dispatch, history, setOpenModal]);\n\n    useEffect(() => {\n        setModal(openModal);\n    }, [openModal]);\n\n    console.dir('roommodal');\n    useEffect(() => {\n        return () => {\n            dispatch(disconnectRoomWebsocket());\n        }\n    }, [dispatch]);\n\n    return (\n        <>\n            <RoomModal\n                {...rest}\n                room={room}\n                open={modal}\n                onBackgroundClick={onBackgroundClick}\n                onContentClick={onContentClick}\n                onRoomClick={onRoomClick}\n            >\n            </RoomModal>\n        </>\n    )\n};\n\nexport default withRouter(RoomModalContainer);","import React from 'react';\nimport styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport RoomModalContainer from '../../containers/modal/RoomModalContainer';\n\nconst RoomBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100px;\n    height: 50px;\n    margin-left: 10px;\n    background-color: white;\n    cursor: pointer;\n`;\n\nconst LinkBlock = styled(Link)`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100px;\n    height: 30px;\n    margin-left: 10px;\n    background-color: white;\n    cursor: pointer;\n`;\n\nconst HeaderBlock = styled.div`\n    display: flex;\n    align-items: center;\n    width: 100%;\n    height: 50px;\n    background-color: rgb(237,235,233);\n`;\n\nconst Header = ({ onToggle, openModal, setOpenModal }) => {\n    return (\n        <>\n            <HeaderBlock>\n                <RoomBlock onClick={onToggle}>\n                    Modal\n                </RoomBlock>\n                <LinkBlock to='/' />\n            </HeaderBlock>\n            <RoomModalContainer\n                openModal={openModal}\n                setOpenModal={setOpenModal}\n            />\n        </>\n    )\n};\n\nexport default React.memo(Header);","import React, { useState, useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport Header from '../../components/common/Header';\nimport { connectWebsocket } from '../../modules/room';\n\nconst HeaderContainer = () => {\n    const [ openModal, setOpenModal ] = useState(false);\n    const dispatch = useDispatch();\n\n    const onToggle = useCallback(() => {\n        setOpenModal(true);\n        dispatch(connectWebsocket());\n    }, [dispatch]);\n\n    return (\n        <Header\n            onToggle={onToggle}\n            openModal={openModal}\n            setOpenModal={setOpenModal}\n        />\n    );\n};\n\nexport default HeaderContainer;","import { useReducer, useEffect } from 'react';\n\nfunction reducer(state, action) {\n    switch (action.type) {\n        case 'LOADING':\n            return {\n                loading: true,\n                data: null,\n                error: null,\n            };\n        case 'SUCCESS':\n            return {\n                loading: false,\n                data: action.data,\n                error: null,\n            };\n        case 'FAILURE':\n            return {\n                loading: false,\n                data: null,\n                error: action.error,\n            };\n        default:\n            throw new Error('Unhandled action type Error')\n    }\n}\n\nfunction useAsync(callback, deps = []) {\n    const [ state, dispatch ] = useReducer(reducer, {\n        loading: false,\n        data: null,\n        error: false,\n    })\n\n    const fetchData = async () => {\n        dispatch({ type: 'LOADING' });\n        try {\n            const data = await callback();\n            dispatch({ type: 'SUCCESS', data });\n        } catch(e) {\n            dispatch({ type: 'FAILURE', error: e });\n        }\n    };\n\n    useEffect(() => {\n        fetchData();\n    // eslint-disable-next-line\n    }, deps);\n\n    return [state, fetchData];\n}\n\nexport default useAsync;","import { createAction, handleActions } from 'redux-actions';\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as authAPI from '../lib/api/auth';\n\nconst CONNECT_WEBSOCKET = 'auth/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'auth/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_SOCKET = 'auth/INITIALIZE_SOCKET';\nconst INITIALIZE_VALUE = 'auth/INITIALIZE_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\n\nconst [ SET_SESSION, SET_SESSION_SUCCESS, SET_SESSION_FAILURE ] = createRequestActionTypes('auth/SET_SESSION');\nexport const setSessionThunk = createRequestThunk(SET_SESSION, authAPI.getSession);\n\nfunction* connectWebsocketSaga (action) {\n    const key = action.payload;\n        \n    const query = `key=${key}`;\n    \n    const socketTask = yield fork(connectNamespace, {\n        url: '/auth',\n        initializeSocket,\n        initializeValue,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* authSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\n//  session 정보와 socket정보가 혼재되어 있는 reducer\n//  tempAuth의 경우 key로 소켓마다 가지고 있는 정보\nconst initialState = {\n    socket: null,\n    tempAuth: null,\n    session: null,\n    error: null,\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest} }) => ({\n        ...state,\n        tempAuth: { ...rest },\n    }),\n    [SET_SESSION_SUCCESS]: (state, { payload: session }) => ({\n        ...state,\n        session,\n    }),\n    [SET_SESSION_FAILURE]: (state, { payload: error }) => ({\n        ...state,\n        session: null,\n        error,\n    }),\n}, initialState);","import axios from 'axios';\n\nexport const getSession = () =>\n    axios.get('/api/auth/getSession');","import React from 'react';\nimport styled from 'styled-components';\n\nconst MainLayoutBlock = styled.div`\n    width: 100%;\n    height: 800px;\n    background-color:blue;\n`;\n\nconst MainLayout = () => {\n    return (\n        <MainLayoutBlock>\n            a\n        </MainLayoutBlock>\n    )\n};\n\nexport default MainLayout;","import React from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport useAsync from '../../lib/hook/useAsync';\nimport { setSessionThunk } from '../../modules/auth';\nimport MainLayout from '../../components/main/MainLayout';\n\nconst MainLayoutContainer = () => {\n    const dispatch = useDispatch();\n\n    const connection = async () => {\n        await dispatch(setSessionThunk());\n        return true;\n    };\n\n    const [state] = useAsync(connection, [ dispatch ]);\n\n    const { loading, data, error } = state;\n\n    if(loading) return null;\n    if(error) return null;\n    if(data) {\n        return (\n            <MainLayout />\n        )\n    }\n    return null;\n};\n\nexport default MainLayoutContainer;","import React from 'react';\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport MainLayoutContainer from '../containers/main/MainLayoutContainer';\n\nconst MainPage = () => {\n\n    return (\n        <>\n            <HeaderContainer />\n            <MainLayoutContainer />\n        </>\n    )\n};\n\nexport default MainPage;","import { GiChessPawn, GiChessKing, GiChessQueen,\n    GiChessBishop, GiChessKnight, GiChessRook, GiPlainCircle } from 'react-icons/gi';\n\nexport const pieceMapper = {\n    'pawn': GiChessPawn,\n    'king': GiChessKing,\n    'queen': GiChessQueen,\n    'bishop': GiChessBishop,\n    'knight': GiChessKnight,\n    'rook': GiChessRook,\n    'covered': GiPlainCircle,\n}\n\nexport const playerMapper = {\n    'white': {\n        color: 'white',\n        style: {\n            filter: `drop-shadow(1px 1px 1px white)`,\n            width: '80%',\n            height: '80%',\n        }\n    },\n    'black': {\n        color: 'black',\n        style: {\n            filter: `drop-shadow(1px 1px 1px black)`,\n            width: '80%',\n            height: '80%',\n        }\n    },\n    'covered0': {\n        style: {\n            filter: `drop-shadow(1px 1px 1px black)`,\n            width: '30%',\n            height: '30%',\n            color: 'rgb(130, 151, 105)',\n            \n        }\n    },\n    'covered1': {\n        style: {\n            filter: `drop-shadow(1px 1px 1px black)`,\n            width: '30%',\n            height: '30%',\n            color: 'rgb(100, 111, 64)',\n        }\n    }\n}","import React, {useCallback} from 'react';\nimport styled, { css } from 'styled-components';\nimport { IconContext } from 'react-icons';\nimport { pieceMapper, playerMapper } from '../../lib/base/pieceConverter';\n\nconst pieceConverter = ({ piece, owner, covered, cellNum }) => {\n    let coveredCanvas = null;\n    \n    if(covered) {\n        const Component = pieceMapper['covered'];\n\n        coveredCanvas = (\n            <IconContext.Provider value={playerMapper[`covered${cellNum}`]}>\n                <Component />\n            </IconContext.Provider>\n        );\n    }\n\n    if(!piece || !owner) {\n        return coveredCanvas;\n    }\n\n    const Component = pieceMapper[piece];\n    const capturedObject = coveredCanvas ? {\n        opacity: 0.5,\n        filter: owner === 'black' ? `drop-shadow(1px 1px 1px white)` : `drop-shadow(1px 1px 1px black)`,\n    } : null;\n\n    const styleObject = {\n        ...playerMapper[owner],\n        style: {\n            ...playerMapper[owner].style,\n            ...capturedObject,\n        }\n    };\n\n    return (\n        <IconContext.Provider value={styleObject}>\n            <Component />\n        </IconContext.Provider>\n    )\n};\n\nconst CanvasBlock = styled.div`\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst CanvasRowBlock = styled.div`\n    display: flex;\n`;\n\nconst CanvasCellBlock = styled.div`\n    display: flex;\n    cursor: pointer;\n    justify-content: center;\n    align-items: center;\n    width: 90px;\n    height: 90px;\n\n    ${props => props.cellNum === 0 && css`\n        background-color: rgb(240, 217, 181);\n    `}\n\n    ${props => props.cellNum === 1 && css`\n        background-color: rgb(181, 136, 99);\n    `}\n\n    ${props => props.cellNum === 0 && props.clicked && css`\n        background-color: rgb(130, 151, 105);\n    `}\n\n    ${props => props.cellNum === 1 && props.clicked && css`\n        background-color: rgb(100, 111, 64);\n    `}\n\n    ${props => props.cellNum === 0 && props.tracked && css`\n        background-color: rgb(205, 210, 106);\n    `}\n\n    ${props => props.cellNum === 1 && props.tracked && css`\n        background-color: rgb(170, 162, 58);\n    `}\n\n    &:hover {\n        ${props => props.cellNum === 0 && props.covered && css`\n            background-color: rgb(174, 177, 135);\n        `}\n\n        ${props => props.cellNum === 1 && props.covered && css`\n            background-color: rgb(132, 121, 78);\n        `}  \n    }\n`\n\nconst CanvasRow = React.memo(({ row, y, onClickCell, pieceConverter }) => {\n    // console.dir('Canvas Row');\n    return (\n        <CanvasRowBlock>\n            {row.map((cell, x) => (\n                <CanvasCell\n                    key={`cell_${y}_${x}`}\n                    onClick={onClickCell.bind(null, {y, x})}\n                    pieceConverter={pieceConverter}\n                    cellNum={(x + y) % 2}\n                    cell={cell}\n                />\n            ))}\n        </CanvasRowBlock>\n    )\n}, (prevProps, nextProps) => {\n    return prevProps.row === nextProps.row;\n});\n\nconst CanvasCell = React.memo(({ cell, onClick, cellNum, pieceConverter }) => {\n    // console.dir('Canvas Cell')\n    return (\n        <CanvasCellBlock\n            onClick={onClick}\n            cellNum={cellNum}\n            {...cell}\n        >\n            {pieceConverter({\n                piece: cell.piece,\n                owner: cell.owner,\n                covered: cell.covered,\n                cellNum,\n            })}\n        </CanvasCellBlock>\n    )\n}, (prevProps, nextProps) => {\n    return prevProps.cell === nextProps.cell;\n});\n\nconst CanvasContentBlock = styled.div`\n    ${props => props.blocked && css`\n        pointer-events: none;\n    `}\n`;\n\nconst CanvasContent = ({ board, blocked, onClick }) => {\n    //  can't memoization\n    const onClickCell = useCallback(({y, x}) => {\n        onClick(y, x);\n    }, [onClick]);\n    \n    return  (\n        <CanvasContentBlock blocked={blocked}>\n            {board.map((row, y) => (\n                <CanvasRow\n                    key={`row_${y}`}\n                    row={row}\n                    y={y}\n                    onClickCell={onClickCell}\n                    pieceConverter={pieceConverter}\n                />\n            ))}\n        </ CanvasContentBlock>\n    )\n}\n\nconst Canvas = props => {\n    return (\n        <CanvasBlock>\n            <CanvasContent {...props} />\n        </CanvasBlock>\n    )\n};\n\nexport default React.memo(Canvas);","const rules = {\n    pawn: {\n        type: 'onetime',\n        move: [\n            {\n                dy: -1,\n                dx: 0,\n                except: function(props) {\n                    const { board, dy, dx } = props;\n                    if(board[dy][dx].piece) {\n                        return false;\n                    }\n                    return true;\n                }\n            },\n            {\n                dy: -2,\n                dx: 0,\n                except: function(props) {\n                    const { board, y, x, owner } = props;\n                    if((owner === 'black' && y !== 1) || (owner === 'white' && y !== 6)) return false;\n                    if((owner === 'black' && board[2][x].piece) || (owner === 'white' && board[5][x].piece)) return false;\n                    if((owner === 'black' && board[3][x].piece) || (owner === 'white' && board[4][x].piece)) return false;\n                    return true;\n                }\n            },\n            {\n                dy: -1,\n                dx: -1,\n                except: function(props) {\n                    const { board, dy, dx } = props;\n                    if(board[dy][dx].piece) {\n                        return true;\n                    }\n                    return false;\n                }\n            },\n            {\n                dy: -1,\n                dx: 1,\n                except: function(props) {\n                    const { board, dy, dx } = props;\n                    if(board[dy][dx].piece) {\n                        return true;\n                    }\n                    return false;\n                }\n            }\n        ],\n    },\n    knight: {\n        type: 'onetime',\n        move: [\n            {\n                dy: -2,\n                dx: -1,\n            },\n            {\n                dy: -2,\n                dx: 1,\n            },\n            {\n                dy: 2,\n                dx: -1,\n            },\n            {\n                dy: 2,\n                dx: 1,\n            },\n            {\n                dy: -1,\n                dx: -2,\n            },\n            {\n                dy: -1,\n                dx: 2,\n            },\n            {\n                dy: 1,\n                dx: -2,\n            },\n            {\n                dy: 1,\n                dx: 2,\n            },\n        ]\n    },\n    king: {\n        type: 'onetime',\n        move: [\n            {\n                dy: 1,\n                dx: 0\n            },\n            {\n                dy: -1,\n                dx: 0\n            },\n            {\n                dy: 0,\n                dx: 1\n            },\n            {\n                dy: 0,\n                dx: -1\n            },\n            {\n                dy: -1,\n                dx: 1\n            },\n            {\n                dy: -1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: 1\n            },\n        ]\n    },\n    bishop: {\n        type: 'multitime',\n        move: [\n            {\n                dy: 1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: 1\n            },\n            {\n                dy: -1,\n                dx: -1\n            },\n            {\n                dy: -1,\n                dx: 1\n            },\n        ]\n    },\n    rook: {\n        type: 'multitime',\n        move: [\n            {\n                dy: 1,\n                dx: 0\n            },\n            {\n                dy: -1,\n                dx: 0\n            },\n            {\n                dy: 0,\n                dx: -1,\n            },\n            {\n                dy: 0,\n                dx: 1\n            },\n        ]\n    },\n    queen: {\n        type: 'multitime',\n        move: [\n            {\n                dy: 1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: 1\n            },\n            {\n                dy: -1,\n                dx: -1\n            },\n            {\n                dy: -1,\n                dx: 1\n            },\n            {\n                dy: 1,\n                dx: 0\n            },\n            {\n                dy: -1,\n                dx: 0\n            },\n            {\n                dy: 0,\n                dx: -1,\n            },\n            {\n                dy: 0,\n                dx: 1\n            },\n        ]\n    }\n};\n\nexport default rules;","const board = [\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n];\n\nexport default board;","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport * as canvasCtrl from '../lib/api/canvas';\n\nimport rules from '../lib/base/rules';\nimport board from '../lib/base/board'\n\nconst CONNECT_WEBSOCKET = 'canvas/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'canvas/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_SOCKET = 'canvas/INITIALIZE_SOCKET';\nconst INITIALIZE_VALUE = 'canvas/INITIALIZE_VALUE';\nconst CHANGE_VALUE = 'canvas/CHANGE_VALUE';\nconst INITIALIZE_BLOCKED = 'canvas/INITIALIZE_BLOCKED';\nconst CHANGE_BLOCKED = 'canvas/CHANGE_BLOCKED';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\nexport const initializeBlocked = createAction(INITIALIZE_BLOCKED, payload => payload);\nexport const changeBlocked = createAction(CHANGE_BLOCKED, payload => payload);\n\nconst [ SET_MOVE_PIECE, SET_MOVE_PIECE_SUCCESS, SET_MOVE_PIECE_FAILURE ] = createRequestActionTypes('canvas/SET_MOVE_PIECE');\nexport const setMovePieceThunk = createRequestThunk(SET_MOVE_PIECE, canvasCtrl.movePiece);\n\nexport const changeValueThunk = ({ move }) => ( dispatch, getState ) => {\n    const { prev, next } = move;\n    const { canvas: { board },\n            auth: { tempAuth },\n            game: { turn }\n        } = getState();\n    \n    if(tempAuth) {\n        if((tempAuth.role === 'white' && turn % 2 === 0) || (tempAuth.role === 'black' && turn % 2 === 1)) {\n            dispatch(changeBlocked({ blocked: false }));\n        } else {\n            dispatch(changeBlocked({ blocked: true }));\n        };\n    }\n\n    const cell = board[prev.y][prev.x];\n    const clearBoard = genClearBoard([...board], [\n        'covered',\n        'clicked',\n        'tracked',\n    ]);\n    \n    clearBoard[next.y] = [ ...clearBoard[next.y] ];\n    clearBoard[next.y][next.x] = {\n        ...cell,\n        tracked: true,\n    };\n\n    clearBoard[prev.y]= [ ...clearBoard[prev.y] ];\n    clearBoard[prev.y][prev.x] = {\n        covered: false,\n        tracked: true,\n    };\n    \n    dispatch(changeValue({ board: clearBoard, clicked: null }));\n}\n\nconst genClearBoard = (board, params) => {\n    const arr = [];\n\n    const leng = board.length;\n    for(let i=0; i<leng; ++i) {\n        for(let j=0; j<leng; ++j) {\n            let pass = false;\n            params.forEach(param => {\n                pass |= board[i][j][param];\n            });\n            if(pass) {\n                arr.push({\n                    y: i,\n                    x: j,\n                })\n            }\n        }\n    }\n\n    arr.forEach(cell => {\n        board[cell.y] = [ ...board[cell.y]];\n        const popedCell = board[cell.y][cell.x];\n        const newCell = {\n            ...popedCell,\n        };\n        params.forEach(param => {\n            newCell[param] = false;\n        });\n\n        board[cell.y].splice(cell.x, 1, newCell);\n    });\n\n    return board;\n}\n\nfunction* connectWebsocketSaga (action) {\n    const key = action.payload;\n    \n    const query = `key=${key}`;\n\n    const socketTask = yield fork(connectNamespace, {\n        url: '/canvas',\n        initializeSocket,\n        initializeValue,\n        changeValue: changeValueThunk,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* canvasSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nexport const clickPieceThunk = ({ y, x }) => (dispatch, getState) => {\n    const {\n            canvas: { board, clicked },\n            game: { turn }\n        } = getState();\n\n    if(clicked && board[y][x].covered) {\n        const { canvas: { socket } } = getState();\n\n        dispatch(setMovePieceThunk({\n            socket,\n            move: {\n                prev: clicked,\n                next: {y, x}\n            }\n        }));\n        \n        return;\n    }\n    \n    const { piece, owner } = board[y][x];\n    let inform = { board, y, x, turn, owner };\n    if(!piece) return;\n\n    const { type, move }= rules[piece];\n    let coveredAxis = [];\n\n    if(type === 'onetime') {\n        coveredAxis = move.reduce((acc, cur) => {\n            const dy = y + (owner === 'black' ? -cur.dy: +cur.dy);\n            const dx = x + cur.dx;\n            if(dy < 0 || dx < 0 || dy > 7 || dx > 7) return acc;\n            \n            inform = { ...inform, dy, dx };\n            if(!cur.except || (cur.except && cur.except(inform))) {\n                if(!board[dy][dx].owner || board[y][x].owner !== board[dy][dx].owner) {\n                    acc.push({dy, dx});\n                }\n            }\n\n            return acc;\n        }, []);\n    } else {\n        coveredAxis = move.flatMap(cur => {\n            let counter = 0;\n            let coveredArr = [];\n            while(true) {\n                ++counter;\n                const dy = y + counter * (owner === 'black' ? -cur.dy: +cur.dy);\n                const dx = x + counter * cur.dx;\n                \n                if(dy < 0 || dx < 0 || dy > 7 || dx > 7) break;\n                if(board[dy][dx].owner && board[dy][dx].owner === owner) break;\n                coveredArr.push({dy, dx});\n                if(board[dy][dx].owner && board[dy][dx].owner !== owner) break;\n            }\n            return coveredArr;\n        });\n    }\n\n    const clearBoard = genClearBoard([...board], [\n        'covered',\n        'clicked',\n    ]);\n\n    coveredAxis.forEach(axis => {\n        clearBoard[axis.dy] = [ ...clearBoard[axis.dy] ];\n        const popedCell = clearBoard[axis.dy][axis.dx];\n        clearBoard[axis.dy].splice(axis.dx, 1, {\n            ...popedCell,\n            covered:true,\n        });\n    });\n\n    clearBoard[y] = [ ...clearBoard[y] ];\n    clearBoard[y][x] = {\n        ...clearBoard[y][x],\n        clicked: true,\n    }\n\n    dispatch(changeValue({ board: clearBoard, clicked: { y, x } }));\n};\n\nconst initialState = {\n    socket: null,\n    error: null,\n    board,\n    clicked: null,\n    blocked: false,\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { board } }) => ({\n        ...state,\n        board,\n    }),\n    [CHANGE_VALUE]: (state, { payload : { board, clicked } }) => ({\n        ...state,\n        board,\n        clicked,\n    }),\n    [INITIALIZE_BLOCKED]: (state, { payload: { blocked } }) => ({\n        ...state,\n        blocked,\n    }),\n    [CHANGE_BLOCKED]: (state, { payload: { blocked } }) => ({\n        ...state,\n        blocked,\n    }),\n    [SET_MOVE_PIECE_SUCCESS]: state => state,\n    [SET_MOVE_PIECE_FAILURE]: state => state,\n}, initialState);","import axios from 'axios';\n\nexport const movePiece = params =>\n    axios.post('/api/canvas/movePiece', params);","import React, { useCallback, useEffect } from 'react';\nimport Canvas from '../../components/content/Canvas';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { clickPieceThunk, initializeBlocked } from '../../modules/canvas';\n\nconst CanvasContainer = () => {\n    const { board, blocked, turn, tempAuth } = useSelector(({ canvas, auth, game }) => ({\n        board: canvas.board,\n        blocked: canvas.blocked,\n        turn: game.turn,\n        tempAuth: auth.tempAuth,\n    }));\n\n    const dispatch = useDispatch();\n    \n    useEffect(() => {\n        if(tempAuth) {\n            if((tempAuth.role === 'white' && turn % 2 === 0) || (tempAuth.role === 'black' && turn % 2 === 1)) {\n                dispatch(initializeBlocked({ blocked: false }));\n            } else {\n                dispatch(initializeBlocked({ blocked: true }));\n            }\n        }\n    }, [dispatch, turn, tempAuth]);\n    \n    //  function은 생성 당시의 Context를 가지고 있기 때문에 redux state값이 제대로 반영되지 않는다\n    //  생성되었던 event handler가 React dom에 붙어있기 때문에 dom이 rerender되지 않는 이상\n    //  오래된 state를 가지고 있을 수 밖에 없다. 따라서 ref를 통해 참조값을 가지고 있거나\n    //  혹은 redux state라면 이 코드와 같이 thunk를 사용하는 방법이 있다\n\n    const onClick = useCallback((y, x) => {\n        dispatch(clickPieceThunk({ y, x }));\n    }, [dispatch]);\n\n    return (\n        <Canvas\n            board={board}\n            blocked={blocked}\n            onClick={onClick}\n        />\n    )\n};\n\nexport default CanvasContainer;","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as chatAPI from '../lib/api/chat';\n\nconst CONNECT_WEBSOCKET = 'chat/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'chat/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_SOCKET = 'chat/INITIALIZE_SOCKET';\nconst INITIALIZE_VALUE = 'chat/INITIALIZE_VALUE';\nconst CHANGE_VALUE = 'chat/CHANGE_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\n\nconst CHANGE_TEXTFIELD = 'chat/CHANGE_TEXTFIELD';\nconst INITIALIZE_TEXTFIELD = 'chat/INITIALIZE_TEXTFIELD';\nexport const changeTextfield = createAction(CHANGE_TEXTFIELD, payload => payload);\nexport const initializeTextfield = createAction(INITIALIZE_TEXTFIELD);\n\nconst [ SEND_MESSAGE, SEND_MESSAGE_SUCCESS, SEND_MESSAGE_FAILURE ] = createRequestActionTypes('chat/SEND_MESSAGE');\nexport const sendMessageThunk = createRequestThunk(SEND_MESSAGE, chatAPI.sendMessage);\n\nfunction* connectWebsocketSaga (action) {\n    const key = action.payload;\n\n    const query = `key=${key}`;\n    \n    const socketTask = yield fork(connectNamespace, {\n        url: '/chat',\n        initializeSocket,\n        initializeValue,\n        changeValue,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* chatSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    messages: [],\n    text: '',\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { nickname, color, message }}) => ({\n        ...state,\n        messages: [{ nickname, color, message }],\n    }),\n    [CHANGE_VALUE]: (state, { payload: { nickname, color, message} }) => ({\n        ...state,\n        messages: [ ...state.messages, { nickname, color, message} ],\n    }),\n    [SEND_MESSAGE_SUCCESS]: state => state,\n    [SEND_MESSAGE_FAILURE]: state => state,\n    [INITIALIZE_TEXTFIELD]: state => ({\n        ...state,\n        text: '',\n    }),\n    [CHANGE_TEXTFIELD]: (state, { payload: text}) => ({\n        ...state,\n        text,\n    }),\n}\n, initialState);","import axios from 'axios';\n\nexport const sendMessage = message =>\n    axios.post('/api/chat/sendMessage', message);\n    \n// export const sendMessage = message =>\n//     axios.post('http://localhost:5000/api/chat/sendMessage', message);","import React, { useRef, useEffect } from 'react';\nimport styled from 'styled-components';\n\nconst ChatSubmitBlock = styled.form`\n`;\n\nconst ChatFrameBlock = styled.div`\n    /* margin: 10px 10px 10px 10px; */\n    border : 3px groove gray;\n    border-style: outset;\n    border-top-right-radius: 10px;\n    border-top-left-radius: 10px;\n    /* width: 450px; */\n    /* width: 100%; */\n    box-shadow: 5px 5px 5px;\n`;\n\nconst ChatBlock = styled.div`\n    height: 300px;\n    margin: 10px 10px 10px 10px;\n    border : none;\n    overflow-y: scroll;\n    background-image: url('https://previews.123rf.com/images/vilisov/vilisov1502/vilisov150200012/36207194-chess-board-abstract-background.jpg'); \n    background-size: cover;\n    ::-webkit-scrollbar {\n        width: 20px;\n    }\n    ::-webkit-scrollbar-track {\n        color: transparent;\n    }\n    ::-webkit-scrollbar-thumb {\n        background-color: lightgray;\n        border-radius: 10px;\n    }\n`;\n\nconst ChatFormBlock = styled.div`\n    width: 100%;\n    display: flex;\n    padding: 1px;\n`;\n\nconst ChatInputBlock = styled.input`\n    outline: none;\n    align-items : center;\n    color: black;\n    font-size: 15px;\n    margin : 10px 10px 10px 10px;\n    width: 80%;\n    height : 30px;\n    border: 3px solid lightgray;\n    transition: all 0.3s ease .1s;\n    &:hover, &:focus {\n        border: 3px solid gray;\n    } \n`;\n\nconst ChatButtonBlock = styled.button`\n    width: 20%;\n    font-size: 15px;\n    margin : 10px 10px 10px 10px;\n    background-color: transparent;\n    border: 3px solid lightgray;\n    transition: all 0.3s ease .1s;\n    &:hover, &:focus {\n        border: 3px solid gray;\n    } \n`;\n\nconst MessageBlock = styled.div`\n  padding : 5px;\n    min-height : 20px;\n    font-size : 15px;\n    margin : 5px;\n    opacity : 0.7;\n    transition: all 0.1s;\n    :nth-child(even) {\n        color : black ;\n        border : 1px solid darkgray;\n        background-color : lightgray;\n        &:active {\n            border : 3px solid darkblue;\n        }\n    }\n    :nth-child(odd) {\n        color : blue ;\n        border : 1px solid gray;\n        background-color : lightgray;\n        &:active {\n            border : 3px solid darkblue;\n        }\n    }\n`;\n\n// const ChatBubble = styled.div`\n//     color: black;  \n//     background-color: #000000;\n//     border-radius: 5px;\n//     box-shadow: 0 0 6px #B2B2B2;\n//     display: inline-block;\n//     padding: 10px 18px;\n//     position: relative;\n//     vertical-align: top;\n    /* &:before {\n        background-color: #F2F2F2;\n        content:\"\\00a0\";\n        display: block;\n        height: 16px;\n        position: absolute;\n        top: 11px;\n        transform: rotate(29deg) skew(-35deg);\n        -moz-transform: rotate(29deg) skew(-35deg);\n        -ms-transform: rotate(29deg) skew(-35deg);\n        -o-transform: rotate(29deg) skew(-35deg);\n        -webkit-transform: rotate(29deg) skew(-35deg);\n        width: 20px;\n    }\n    &.me {\n        float: left;\n        clear: both;\n        margin: 5px 45px 5px 20px;\n    }\n    &.me::before {\n        box-shadow: -2px 2px 2px 0 rgba(178, 178, 178, .4);\n        left: -9px;\n    }\n    &.you {\n        float: right;\n        clear: both;\n        margin: 5px 20px 5px 45px;\n    }\n    &.you::before {\n        box-shadow: 2px -2px 2px 0 rgba(178, 178, 178, .4);\n        right: -9px;\n\n    &.broadcast {\n        align-items: center;\n        width : 100%;\n    }  */\n// `;\n\nconst Message = React.memo(({ message, nickname, ...rest }) => {\n    return (\n        <MessageBlock\n            {...rest} \n            color={message.color}\n            className={message.nickname \n                ? message.nickname === nickname \n                ? 'me' : 'you' : 'broadcast' }\n        >\n            {message.message}\n        </MessageBlock>\n    )\n});\n\nconst Chat = ({ messages, onSubmit, onChange, text, tempAuth }) => {\n    const ref = useRef();\n    useEffect(() => {\n        ref.current.scrollTop = ref.current.scrollHeight;\n    }, [messages]);\n\n    return (\n        <>\n            <ChatSubmitBlock onSubmit={onSubmit}>\n                <ChatFrameBlock>\n                    <ChatBlock ref={ref}>\n                        {messages.map(message => (\n                            <Message\n                                nickname={tempAuth.nickname}\n                                message={message}\n                            />\n                        ))}\n                    </ChatBlock>\n                    <ChatFormBlock>\n                        <ChatInputBlock\n                            onChange={onChange}\n                            value={text}\n                        />\n                        <ChatButtonBlock\n                            onSubmit={onSubmit}\n                        >\n                            Send\n                        </ ChatButtonBlock>\n                    </ChatFormBlock>\n                </ChatFrameBlock>\n            </ChatSubmitBlock>\n        </>\n    )\n};\n\nexport default React.memo(Chat);","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changeTextfield, initializeTextfield } from '../../modules/chat';\nimport { sendMessageThunk } from '../../modules/chat';\nimport Chat from '../../components/content/Chat';\n\nconst ChatContainer = () => {\n    const dispatch = useDispatch();\n\n    const { messages, text, tempAuth } = useSelector(({ chat, auth }) => ({\n        messages: chat.messages,\n        text: chat.text,\n        tempAuth: auth.tempAuth,\n    }));\n\n    const onSubmit = useCallback(e => {\n        e.preventDefault();\n        dispatch(sendMessageThunk({ message: text }));\n        dispatch(initializeTextfield());\n    }, [dispatch, text]);\n\n    const onChange = useCallback(e => {\n        dispatch(changeTextfield(e.target.value));\n    },[dispatch]);\n\n    return (\n        <Chat\n            messages={messages}\n            onSubmit={onSubmit}\n            onChange={onChange}\n            text={text}\n            tempAuth={tempAuth}\n        />\n    )\n};\n\nexport default ChatContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst TimerBlock = styled.div`\n    width: 50%;\n    height: 60px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    background-color: white;\n    ${props => props.color && css`\n        background-color: rgb(208, 224, 189);\n    `}\n    ${props => props.time <= 10000 && css`\n        background-color: rgb(230, 153, 153);\n    `}\n`;\n\nconst TimeSliceBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 47%;\n    color: black;\n    font-size: 50px;\n`;\n\nconst ColonBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 100%;\n    width: 6%;\n    color: black;\n    opacity: 0.5;\n    font-size: 50px;\n`;\n\nconst timeConverter = timeSlice => {\n    let convertedTime = '';\n    convertedTime += String(Math.floor(timeSlice / 10));\n    convertedTime += String(Math.floor(timeSlice % 10));\n    return convertedTime;\n}\n\nconst Timer = ({ time, color }) => {\n    \n    const second = Math.floor(time / 1000);\n    const millisecond = Math.floor((time % 1000) / 10);\n\n    // eslint-disable-next-line\n    if(time == undefined || time === null) {\n        return <TimerBlock />\n    }\n\n    return (\n        <TimerBlock\n            time={time}\n            color={color ? 1 : 0}\n        >\n            <TimeSliceBlock>\n                {timeConverter(second)}\n            </TimeSliceBlock>\n            <ColonBlock>\n                :\n            </ColonBlock>\n            <TimeSliceBlock>\n            {timeConverter(millisecond)}\n            </TimeSliceBlock>\n        </TimerBlock>\n    )\n}\n\nexport default Timer;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Timer from '../../components/content/Timer';\n\nconst TimerContainer = ({ white }) => {\n\n    const { whiteTime, blackTime, start, order } = useSelector(({ record, game }) => ({\n        whiteTime: record.whiteTime,\n        blackTime: record.blackTime,\n        start: game.start,\n        order: game.order,\n    }));\n\n    const time = white ? whiteTime : blackTime;\n    const color = white ? (start && order === 'white') : (start && order === 'black');\n\n    return (\n        <Timer\n          time={time}\n          color={color}\n        />\n    )\n    \n};\n\nexport default TimerContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport { IconContext } from 'react-icons';\nimport { FaCircle, FaRegCircle } from 'react-icons/fa';\n\nconst StatusBlock = styled.div`\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 30px;\n    background-color: white;\n`;\n\nconst NameBlock = styled.div`\n    font-size: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`\n\nconst Status = ({ light, name }) => {\n    const iconStyle = {\n        style: {\n            height: '15px',\n            width: '10%',\n            color: 'green',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n        }\n    };\n\n    return (\n        <StatusBlock>\n            {light\n                ? (\n                    <IconContext.Provider value={iconStyle}>\n                        <FaCircle />\n                    </IconContext.Provider>\n                )\n                : (\n                    <IconContext.Provider value={{ style: { ...iconStyle.style, color: 'black' }}}>\n                        <FaRegCircle />\n                    </IconContext.Provider>\n                )\n            }\n            <NameBlock>\n                {name}\n            </NameBlock>\n        </StatusBlock>\n    )\n};\n\nexport default React.memo(Status);","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Status from '../../components/content/Status';\n\nconst StatusContainer = ({ black, white }) => {\n    const { blackNick, whiteNick, participant } = useSelector(({ game }) => ({\n        blackNick: game.black,\n        whiteNick: game.white,\n        participant: game.participant,\n    }));\n\n    const participantSet = new Set(participant);\n    const light = (white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick));\n    const name = (white && whiteNick) || (black && blackNick);\n\n    return (\n        <Status\n            light={light}\n            name={name}\n        />\n    )\n};\n\nexport default StatusContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport { IconContext } from 'react-icons';\nimport { IoIosArrowRoundForward } from 'react-icons/io';\nimport { pieceMapper } from '../../lib/base/pieceConverter';\n\nconst PieceMoveListHiddenBlock = styled.div`\n    height: 240px;\n    width: 100%;\n    overflow: hidden;\n`\n\nconst PieceMoveListBlock = styled.div`\n    height: 240px;\n    width: 100%;\n    overflow: auto;\n    padding-right: 20px;\n`;\n\nconst PieceMoveBlock = styled.div`\n    width: 100%;\n    height: 30px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n`;\n\nconst moveConverter = ({x, y}) => {\n    return String.fromCharCode(97 + x) + (8 - y);\n}\n\nconst MoveBlock = styled.div`\n    width: 80%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    &:hover {\n        background-color: rgb(209, 228, 246);\n    }\n`;\n\nconst TextBlock = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20%;\n    font-size: 18px;\n`\n\nconst IndexBlock = styled.div`\n    width: 20%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 18px;\n    background-color: rgb(247, 246, 245);\n`\n\nconst PieceMove = React.memo(({ move, index, onClickBlock }) => {\n    console.dir('PieceMove');\n    console.dir(move);\n    const PrevComponent = pieceMapper[move.prevPiece.piece];\n    const prevStyle = {\n        color: move.prevPiece.owner,\n        style: {\n            width: '10%',\n            filter: `drop-shadow(1px 1px 1px ${move.prevPiece.owner === 'white' ? 'black' : 'white'})`,\n        }\n    };\n\n    const prevPiece = (\n        <IconContext.Provider value={prevStyle}>\n            <PrevComponent />\n        </IconContext.Provider>\n    )\n\n    let NextComponent, nextStyle;\n\n    let nextPiece = (\n        <div style={{ width: '10%' }}/>\n    )\n\n    if(move.nextPiece.piece) {\n        NextComponent = pieceMapper[move.nextPiece.piece];\n        nextStyle = {\n            color: move.nextPiece.owner,\n            style: {\n                width: '10%',\n                filter: `drop-shadow(1px 1px 1px ${move.nextPiece.owner === 'white' ? 'black' : 'white'})`,\n            }\n        };\n        nextPiece = (\n            <IconContext.Provider value={nextStyle}>\n                <NextComponent />\n            </IconContext.Provider>\n        )\n    }\n\n    \n    return (\n        <PieceMoveBlock>\n            <IndexBlock>\n                {index + 1}\n            </IndexBlock>\n            <MoveBlock onClick={onClickBlock}>\n                {prevPiece}\n                <TextBlock>\n                    {moveConverter(move.prev)}\n                </TextBlock>\n                <IconContext.Provider value={{ style: { color: 'rgb(169,169,169)' }}}>\n                    <IoIosArrowRoundForward />\n                </IconContext.Provider>\n                <TextBlock>\n                    {moveConverter(move.next)}\n                </TextBlock>\n                {nextPiece}\n            </MoveBlock>\n        </PieceMoveBlock>\n    )\n});\n\n\nconst PieceMoveList = ({ pieceMove, onClickBlock }) => {    \n    return (\n        <PieceMoveListHiddenBlock>\n            <PieceMoveListBlock>\n                {pieceMove.map((move, index) => (\n                    <PieceMove \n                        onClick={onClickBlock}\n                        move={move}\n                        index={index}\n                    />\n                ))}\n            </PieceMoveListBlock>\n        </PieceMoveListHiddenBlock>\n    )\n};\n\nexport default React.memo(PieceMoveList);","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PieceMoveList from '../../components/content/PieceMoveList';\n\nconst PieceMoveListContainer = () => {\n    \n    const dispatch = useDispatch();\n\n    const { pieceMove } = useSelector(({ record }) => ({\n        pieceMove: record.pieceMove,\n    }));\n\n    const onClickBlock = useCallback(() => {\n\n    }, []);\n\n    return (\n        <PieceMoveList\n            onClickBlock = {onClickBlock}\n            pieceMove={pieceMove}\n        />\n    )\n};\n\nexport default PieceMoveListContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst TimeLineBlock = styled.div`\n    position: absolute;\n    height: 2px;\n    background-color: green;\n    transition-duration: 1s;\n    transition-timing-function: linear;\n\n    width: ${props => (props.time * 100) + '%'};\n    ${props => props.time <= 0.1 & css`\n        background-color: red;\n    `}\n`;\n\nconst TimeLine = ({ time }) => {\n    console.dir(time);\n    return (\n        <TimeLineBlock time={time}/>\n    )\n};\n\nexport default React.memo(TimeLine);","import React, { useState, useRef, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport TimeLine from '../../components/content/TimeLine';\n\nconst TimeLineContainer = ({ white }) => {\n    const { whiteTime, blackTime } = useSelector(({ record }) => ({\n        whiteTime: record.whiteTime,\n        blackTime: record.blackTime,\n    }));\n\n    // const [ time, setTime ] = useState();\n    const maximumTime = useRef(0.01);\n\n    useEffect(() => {\n        if(white) {\n            maximumTime.current = Math.max(whiteTime, maximumTime.current);\n        } else {\n            maximumTime.current = Math.max(blackTime, maximumTime.current);\n        }\n    }, [white, whiteTime, blackTime]);\n\n    // useEffect(() => {\n    //     if(white) {\n    //         setTime(whiteTime / maximumTime.current);\n    //     } else {\n    //         setTime(blackTime / maximumTime.current);\n    //     }\n    // }, [white, whiteTime, blackTime]);\n\n    let remainTime = white ? (whiteTime / maximumTime.current) : (blackTime / maximumTime.current);\n    remainTime = Math.min(remainTime, 1);\n\n    return (\n        <TimeLine\n            time={remainTime}\n        />\n    )\n};\n\nexport default TimeLineContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport TimerContainer from '../../containers/content/TimerContainer';\nimport StatusContainer from '../../containers/content/StatusContainer';\nimport PieceMoveListContainer from '../../containers/content/PieceMoveListContainer';\nimport TimeLineContainer from '../../containers/content/TimeLineContainer';\n\nconst RecordBlock = styled.div`\n    position: relative;\n    width: 100%;\n    height: 360px;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst MenuBarBlock = styled.div`\n    width: 100%;\n    height: 30px;\n    background-color: rgb(247, 246, 245);\n`;\n\nconst Record = () => {\n    return (\n        <>\n            <TimerContainer black />\n            <RecordBlock>\n                <TimeLineContainer black />\n                <StatusContainer black />\n                <MenuBarBlock />\n                <PieceMoveListContainer />\n                <MenuBarBlock />\n                <StatusContainer white />\n                <TimeLineContainer white />\n            </RecordBlock>\n            <TimerContainer white />\n        </>\n    )\n};\n\nexport default React.memo(Record);","import React from 'react';\nimport Record from '../../components/content/Record';\n\nconst RecordContainer = () => {\n\n    return (\n        <Record />\n    );\n};\n\nexport default RecordContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport CanvasContainer from '../../containers/content/CanvasContainer';\nimport ChatContainer from '../../containers/content/ChatContainer';\nimport RecordContainer from '../../containers/content/RecordContainer';\n\nconst GameLayoutBlock = styled.div`\n    height: 800px;\n    width: 100%;\n    background-color: rgb(237, 235, 233);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst sideBlockStyle = css`\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n`;\n\nconst LeftSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-right: 1%;\n`;\n\nconst RightSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-left: 1%;\n`\n\nconst GameLayout = props => {\n    return (\n        <GameLayoutBlock>          \n            <LeftSideBlock>\n                <ChatContainer />\n            </LeftSideBlock>\n            <CanvasContainer {...props} />\n            <RightSideBlock>\n                <RecordContainer />\n            </RightSideBlock>\n        </GameLayoutBlock>\n    )\n};\n\nexport default React.memo(GameLayout);","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\n\nconst CONNECT_WEBSOCKET = 'game/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'game/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'game/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'game/INITIALIZE_SOCKET';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\n\nfunction* connectWebsocketSaga (action) {\n    const key = action.payload;\n    \n    const query = `key=${key}`;\n\n    const socketTask = yield fork(connectNamespace, { \n        url: '/game',\n        initializeSocket,\n        initializeValue,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* gameSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    error: null,\n    participant: [],\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest }}) => ({\n        ...state,\n        ...rest,\n    }),\n}, initialState);","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\nimport { connectNamespace } from '../lib/websocket/websocket';\n\nconst CONNECT_WEBSOCKET = 'record/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'record/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'record/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'record/INITIALIZE_SOCKET';\nconst CHANGE_VALUE = 'record/CHANGE_VALUE';\nconst UPDATE_VALUE = 'record/UPDATE_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\nexport const updateValue = createAction(UPDATE_VALUE, payload => payload);\n\nexport const updateValueThunk = params => ( dispatch, getState ) => {\n    const { record } = getState();\n    let newRecord = { ...record };\n    Object.keys(params).forEach(key => {\n        if(typeof params[key] === 'object') {\n            newRecord = {\n                ...newRecord,\n                [key]: [\n                    ...newRecord[key],\n                    params[key],\n                ]\n            };\n        }\n    });\n\n    dispatch(updateValue({ record: newRecord }));\n};\n\nfunction* connectWebsocketSaga (action) {\n    const key = action.payload;\n    \n    const query = `key=${key}`;\n\n    const socketTask = yield fork(connectNamespace, { \n        url: '/record',\n        initializeSocket,\n        initializeValue,\n        changeValue,\n        updateValue: updateValueThunk,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* recordSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    error: null,\n    startTime: null,\n    endTime: null,\n    blackTime: null,\n    whiteTime: null,\n    pieceMove: [],\n}\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        ...rest,\n    }),\n    [CHANGE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        ...rest,\n    }),\n    [UPDATE_VALUE]: (state, { payload: { record } }) => ({\n        ...record,\n    })\n}, initialState);\n","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport GameLayout from '../../components/common/GameLayout';\nimport { setSessionThunk } from '../../modules/auth';\nimport { connectWebsocket as connectAuthWebsocket } from '../../modules/auth';\nimport { connectWebsocket as connectGameWebsocket } from '../../modules/game';\nimport { connectWebsocket as connectChatWebsocket } from '../../modules/chat';\nimport { connectWebsocket as connectCanvasWebsocket} from '../../modules/canvas';\nimport { connectWebsocket as connectRecordWebsocket } from '../../modules/record';\n\nimport { disconnectWebsocket as disconnectAuthWebsocket } from '../../modules/auth';\nimport { disconnectWebsocket as disconnectGameWebsocket } from '../../modules/game';\nimport { disconnectWebsocket as disconnectChatWebsocket } from '../../modules/chat';\nimport { disconnectWebsocket as disconnectCanvasWebsocket } from '../../modules/canvas';\nimport { disconnectWebsocket as disconnectRecordWebsocket } from '../../modules/record';\n\nimport useAsync from '../../lib/hook/useAsync';\n\nconst GameLayoutContainer = ({ gameId }) => {\n    const dispatch = useDispatch();\n\n    const connection = async () => {\n        await dispatch(setSessionThunk());\n      \n        dispatch(disconnectAuthWebsocket());\n        dispatch(disconnectGameWebsocket());\n        dispatch(disconnectChatWebsocket());\n        dispatch(disconnectCanvasWebsocket());\n        dispatch(disconnectRecordWebsocket());\n        setTimeout(() => {\n            dispatch(connectAuthWebsocket(gameId));\n            dispatch(connectGameWebsocket(gameId));\n            dispatch(connectChatWebsocket(gameId));\n            dispatch(connectCanvasWebsocket(gameId));\n            dispatch(connectRecordWebsocket(gameId));\n        }, 0);\n        return true;\n    };\n\n    useEffect(() => {\n        return () => {\n            dispatch(disconnectAuthWebsocket());\n            dispatch(disconnectGameWebsocket());\n            dispatch(disconnectChatWebsocket());\n            dispatch(disconnectCanvasWebsocket());\n            dispatch(disconnectRecordWebsocket());\n        }\n    }, [dispatch]);\n\n    const [state] = useAsync(connection, [ dispatch, gameId ]);\n\n    const { loading, data, error } = state;\n\n    if(loading) return null;\n    if(error) return null;\n    if(data) {\n        return (\n            <GameLayout />\n        )\n    }\n    return null;\n};\n\nexport default GameLayoutContainer;","import React, { useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport GameLayoutContainer from '../containers/common/GameLayoutContainer';\n\nconst GamePage = ({ history, match }) => {\n    useEffect(() => {\n        if(!match.params.id) {\n            history.push('/');\n        }\n    }, [history, match]);\n\n    if(!match.params.id) return null;\n    const { id } = match.params;\n    if(!id) return null;\n    \n    return (\n        <>\n            <HeaderContainer />\n            <GameLayoutContainer gameId={id}/>\n        </>\n    )\n};\n\nexport default withRouter(GamePage);","import React from 'react';\nimport RecordContainer from '../containers/content/RecordContainer'\n\nconst RecordPage = () => {\n    return (\n        <RecordContainer />\n    );\n};\n\nexport default RecordPage;","import React from 'react';\nimport styled from 'styled-components';\n\nconst CommunityTableRowBlock = styled.tr`\n    width: 100%;\n    height: 100px;\n`;\n\nconst CommunityTableRow = ( {title, count, comments, time}) => {\n    return (\n        <CommunityTableRowBlock>\n            <td>{title}</td>\n            <td>{count}</td>\n            <td>{comments}</td>\n            <td>{time}</td>\n        </CommunityTableRowBlock>\n    );\n};\n\nexport default CommunityTableRow;","import React from 'react';\nimport styled from 'styled-components';\nimport CommunityTableRow from './CommunityTableRow';\n\nconst CommunityLayoutBlock = styled.div`\n    width: 100%;\n    height: 1000px;\n    background-color:#EDEBE9;\n    display: flex;\n    justify-content: center;\n    /* flex-direction: column; */\n`;\n\nconst CommunityMainBlcok = styled.main`\n    width: 80%;\n    height: 1000px;\n    background-color:lightblue;\n    display: flex;\n    flex-direction: column;\n`;\n\nconst CommunityHeaderBlock = styled.h1`\n    width: 100%;\n    height: 150px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin: 0px 0px 0px 0px;\n`;\n\nconst PageDivBlock = styled.div`\n    width: 100%;\n    height: 50px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst CommunityTableBlock = styled.table`\n    width: 100%;\n    height: 700px;\n    background-color: white;\n`;\n\nconst CommunityTheadBlock = styled.thead`\n    width: 100%;\n    background-color: #F1F1F1;\n`;\n\n\n\n\nconst CommunityLayout = () => {\n    const tableRows = [\n        {\n            title: '가즈아 가즈아 가즈아 가즈아1',\n            count: 250,\n            comments: 7,\n            time: '1시간 전'\n        },\n        {\n            title: '가즈아 가즈아 가즈아 가즈아2',\n            count: 251,\n            comments: 8,\n            time: '2시간 전'\n        },\n        {\n            title: '가즈아 가즈아 가즈아 가즈아3',\n            count: 252,\n            comments: 9,\n            time: '3시간 전'\n        },\n        {\n            title: '가즈아 가즈아 가즈아 가즈아4',\n            count: 253,\n            comments: 10,\n            time: '4시간 전'\n        }\n    ];\n    return (\n        <CommunityLayoutBlock>\n            <CommunityMainBlcok>\n                <CommunityHeaderBlock>\n                    General Chess Discussion\n                </CommunityHeaderBlock>\n                <PageDivBlock>\n                    &lt; 1 2 3 4 ... &gt;\n                </PageDivBlock>\n                <CommunityTableBlock>  \n                    <CommunityTheadBlock>\n                        <tr height='60px'>\n                            <th width='70%'>\n                            </th>\n                            <th>\n                                조회\n                            </th>\n                            <th>\n                                답글\n                            </th>\n                            <th>\n                                최근 글\n                            </th>\n                        </tr>\n                    </CommunityTheadBlock>\n                    {tableRows.map(tableRow => (\n                        <CommunityTableRow title={tableRow.title} count={tableRow.count} comments={tableRow.comments} time={tableRow.time} />\n                    ))}\n                </CommunityTableBlock>\n                <PageDivBlock>\n                    &lt; 1 2 3 4 ... &gt;\n                </PageDivBlock>\n\n            </CommunityMainBlcok>\n        </CommunityLayoutBlock>\n    )\n};\n\nexport default CommunityLayout;","import React from 'react';\nimport CommunityLayout from '../../components/community/CommunityLayout';\n\nconst CommunityLayoutContainer = () => {\n    return (\n        <CommunityLayout />\n    );\n};\n\nexport default CommunityLayoutContainer;","import React from 'react';\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport CommunityLayoutContainer from '../containers/community/CommunityLayoutContainer';\n\nconst MainPage = () => {\n\n    return (\n        <>\n            <HeaderContainer />\n            <CommunityLayoutContainer />\n        </>\n    )\n};\n\nexport default MainPage;","import React from 'react';\nimport MainPage from './pages/MainPage';\nimport GamePage from './pages/GamePage';\nimport RecordPage from './pages/RecordPage';\nimport CommunityPage from './pages/CommunityPage';\nimport { Route, Switch } from 'react-router-dom';\nimport styled from 'styled-components';\n\nconst ErrorPageDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 200px;\n  font-size: 50px;\n`;\n\n\nconst App = () => {\n  return (\n    <>\n      <Switch>\n        <Route component={MainPage} path='/' exact />\n        <Route component={GamePage} path='/game/:id' exact />\n        <Route component={RecordPage} path='/record' exact />\n        <Route component={CommunityPage} path='/community' exact />\n        <Route \n          render={({ location }) => (\n            <ErrorPageDiv>\n              <h1>404 Error</h1>\n              <p>요청한 페이지를 찾을 수 없습니다.</p>\n            </ErrorPageDiv>\n          )}\n          />\n      </Switch>\n    </>\n  )\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { combineReducers } from 'redux';\nimport { all } from 'redux-saga/effects';\nimport room, { roomSaga } from './room';\nimport auth, { authSaga } from './auth';\nimport game, { gameSaga } from './game';\nimport canvas, { canvasSaga } from './canvas';\nimport chat, { chatSaga } from './chat';\nimport record, { recordSaga }  from './record';\n\n\nconst rootReducer = combineReducers({\n    room,\n    auth,\n    game,\n    canvas,\n    chat,\n    record,\n})\n\n\nexport function* rootSaga() {\n    yield all([ roomSaga(), authSaga(), gameSaga(), canvasSaga(), chatSaga(), recordSaga() ]);\n};\n\nexport default rootReducer;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport ReduxThunk from 'redux-thunk';\nimport rootReducer, { rootSaga } from './modules';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport createSagaMiddleware from 'redux-saga';\n\nconst sagaMiddleware = createSagaMiddleware();\nconst store = createStore(\n    rootReducer,\n    composeWithDevTools(applyMiddleware(ReduxThunk, sagaMiddleware))\n)\n\nsagaMiddleware.run(rootSaga);\n\nReactDOM.render(\n    <Provider store={store}>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </Provider>\n    ,document.getElementById('root')\n);\n\nserviceWorker.unregister();"],"sourceRoot":""}