{"version":3,"sources":["components/common/GridLayout.js","containers/common/GridLayoutContainer.js","components/common/SubmitForm.js","lib/websocket/websocket.js","lib/createRequestThunk.js","modules/room.js","lib/api/room.js","containers/common/SubmitFormContainer.js","components/modal/RoomModal.js","containers/modal/RoomModalContainer.js","components/common/Header.js","modules/auth.js","lib/api/auth.js","containers/common/HeaderContainer.js","lib/hook/useAsync.js","components/main/MainLayout.js","containers/main/MainLayoutContainer.js","pages/MainPage.js","lib/base/pieceConverter.js","components/content/Canvas.js","lib/base/board.js","lib/base/rules.js","lib/base/validation.js","modules/canvas.js","lib/api/canvas.js","containers/content/CanvasContainer.js","modules/chat.js","lib/api/chat.js","components/content/Chat.js","containers/content/ChatContainer.js","components/content/Timer.js","containers/content/TimerContainer.js","components/content/Status.js","containers/content/StatusContainer.js","components/content/PieceMoveList.js","containers/content/PieceMoveListContainer.js","components/content/TimeLine.js","modules/record.js","containers/content/TimeLineContainer.js","components/content/UndoRedo.js","containers/content/UndoRedoContainer.js","components/content/Util.js","containers/content/UtilContainer.js","components/content/Record.js","containers/content/RecordContainer.js","components/common/GameLayout.js","modules/game.js","containers/common/GameLayoutContainer.js","pages/GamePage.js","pages/RecordPage.js","components/community/CommunityTableRow.js","components/community/CommunityLayout.js","containers/community/CommunityLayoutContainer.js","pages/CommunityPage.js","components/auth/AuthForm.js","containers/auth/LoginContainer.js","pages/LoginPage.js","containers/auth/RegisterContainer.js","pages/RegisterPage.js","App.js","serviceWorker.js","modules/index.js","index.js"],"names":["GridRowBlock","styled","div","GridBoxBlock","BoxTitleBlock","BoxContentBlock","GridBox","React","memo","room","rest","console","dir","name","participant","GridLayoutBlock","onRoomClick","list","gridArr","rowSize","Math","floor","length","i","push","key","splice","map","onClick","e","GridLayoutContainer","props","SubmitFormBlock","form","buttonStyle","css","ConfirmButtonBlock","button","CancelButtonBlock","onConfirmClick","onCancelClick","onSubmit","type","createEventChannel","connectNamespace","io","eventChannel","emit","on","socket","id","message","close","params","url","initializeSocket","initializeValue","changeValue","updateValue","query","SocketIo","reconnection","secure","call","channel","take","put","cancelled","createRequestActionTypes","createRequestThunk","request","SUCCESS","FAILURE","dispatch","a","async","response","payload","data","error","connectWebsocketSaga","roomSaga","CONNECT_WEBSOCKET","DISCONNECT_WEBSOCKET","connectWebsocket","createAction","disconnectWebsocket","CREATE_ROOM","CREATE_ROOM_SUCCESS","CREATE_ROOM_FAILURE","createRoomThunk","axios","post","fork","socketTask","cancel","takeEvery","handleActions","state","withRouter","history","useDispatch","useCallback","preventDefault","RoomModalBackgroundBlock","open","RoomModalBlock","onBackgroundClick","onContentClick","openModal","setOpenModal","useState","modal","setModal","useSelector","disconnectRoomWebsocket","stopPropagation","useEffect","HeaderBlock","titleStyle","TitleBlock","Link","TitleFadeBlock","ControllBlock","GroupBlock","TabBlock","TabLinkBlock","Tab","to","children","AuthBlock","UserWelcomeBlock","username","onToggle","onLogout","session","auth","nickname","user","Provider","value","style","cursor","width","height","authSaga","SET_SESSION","SET_SESSION_SUCCESS","SET_SESSION_FAILURE","setSessionThunk","get","LOGIN","LOGIN_SUCCESS","LOGIN_FAILURE","REGISTER","REGISTER_SUCCESS","REGISTER_FAILURE","LOGOUT","LOGOUT_SUCCESS","loginThunk","password","registerThunk","logoutThunk","changeField","clearField","action","initialState","tempAuth","authError","login","register","passwordConfirm","produce","draft","HeaderContainer","reducer","loading","Error","useAsync","callback","deps","useReducer","fetchData","MainLayoutBlock","MainLayout","MainLayoutContainer","MainPage","pieceMapper","GiChessPawn","GiChessKing","GiChessQueen","GiChessBishop","GiChessKnight","GiChessRook","GiPlainCircle","playerMapper","color","filter","pieceConverter","piece","owner","covered","cellNum","coveredCanvas","Component","capturedObject","opacity","styleObject","CanvasBlock","CanvasRowBlock","CanvasCellBlock","clicked","tracked","CanvasRow","row","y","onClickCell","cell","x","CanvasCell","bind","prevProps","nextProps","CanvasContentBlock","blocked","CanvasContent","board","rules","pawn","move","dy","dx","except","knight","king","enemy","dirty","coveredAxisBundle","checkPlayersEveryMove","axis","bishop","rook","queen","player","castling","j","coveredAxis","checkCovered","inform","reduce","acc","cur","flatMap","counter","coveredArr","canvasSaga","clearValue","initializeBlocked","changeBlocked","SET_MOVE_PIECE","SET_MOVE_PIECE_SUCCESS","SET_MOVE_PIECE_FAILURE","setMovePieceThunk","changeValueThunk","getState","prev","next","canvas","turn","game","role","clearBoard","genClearBoard","pieceStore","arr","leng","pass","forEach","param","popedCell","newCell","CanvasContainer","clickPieceThunk","chatSaga","changeTextfield","initializeTextfield","SEND_MESSAGE","SEND_MESSAGE_SUCCESS","SEND_MESSAGE_FAILURE","sendMessageThunk","messages","text","ChatSubmitBlock","ChatFrameBlock","ChatHiddenBlock","ChatBlock","ChatFormBlock","ChatInputBlock","input","ChatButtonBlock","MessageBlock","BalloonBlock","Balloon","ballonBlock","Message","myName","onChange","ref","useRef","current","scrollTop","scrollHeight","ChatContainer","chat","target","TimerBlock","time","TimeSliceBlock","ColonBlock","timeConverter","timeSlice","convertedTime","String","Timer","second","millisecond","undefined","TimerContainer","white","record","whiteTime","blackTime","start","order","StatusBlock","NameBlock","light","iconStyle","display","justifyContent","alignItems","StatusContainer","black","blackNick","whiteNick","participantSet","Set","has","PieceMoveListHiddenBlock","PieceMoveListBlock","PieceMoveBlock","moveConverter","fromCharCode","MoveBlock","TextBlock","IndexBlock","PieceMove","index","onClickBlock","NextComponent","nextStyle","PrevComponent","prevPiece","prevStyle","nextPiece","pieceMove","PieceMoveListContainer","TimeLineBlock","recordSaga","updateValueThunk","newRecord","Object","keys","startTime","endTime","blackMaxTime","whiteMaxTime","whiteRatio","blackRatio","TimeLineContainer","min","UndoRedoBlock","ButtonBlock","backgroundColor","UndoRedoContainer","UtilBlock","UtilContainer","RecordBlock","RecordContainer","GameLayoutBlock","sideBlockStyle","LeftSideBlock","RightSideBlock","gameSaga","GameLayoutContainer","gameId","disconnectAuthWebsocket","disconnectGameWebsocket","disconnectChatWebsocket","disconnectCanvasWebsocket","disconnectRecordWebsocket","setTimeout","connectAuthWebsocket","connectGameWebsocket","connectChatWebsocket","connectCanvasWebsocket","connectRecordWebsocket","match","RecordPage","CommunityTableRowBlock","tr","CommunityTableRow","title","count","comments","CommunityLayoutBlock","CommunityMainBlcok","main","CommunityHeaderBlock","h1","PageDivBlock","CommunityTableBlock","table","CommunityTheadBlock","thead","CommunityLayout","tableRow","CommunityLayoutContainer","CommunityPage","AuthFrameBlock","AuthFormBlock","InputFrameBlock","InputFormBlock","inputStyle","EmailInputBlock","PasswordInputBlock","OptionFormBlock","SaveInputFormBlock","SaveInputBlock","SaveInputTextBlock","ForgetBlock","SubmitFrameBlock","SubmitBlock","CreateFormBlock","CreateBlock","CreateLinkBlock","autoComplete","placeholder","LoginPage","RegisterPage","ErrorPageDiv","App","component","path","exact","GamePage","render","location","Boolean","window","hostname","rootSaga","all","rootReducer","combineReducers","sagaMiddleware","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","ReduxThunk","run","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.cd96f0bf.chunk.js","sourcesContent":["import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst gridSize = 3;\r\n\r\nconst GridRowBlock = styled.div`\r\n    display: flex;\r\n    width: 85%;\r\n\r\n    & + & {\r\n        margin-top: 50px;\r\n    }\r\n\r\n    &:first-child {\r\n        margin-top: 50px;\r\n    }\r\n\r\n    &:last-child {\r\n        margin-bottom: 50px;\r\n    }\r\n`;\r\n\r\nconst GridBoxBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-evenly;\r\n    align-items: center;\r\n    width: 24%;\r\n    height: 300px;\r\n    background-color: rgb(0,0,0, 0.4);\r\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.6);\r\n    cursor: pointer;\r\n    \r\n    & + & {\r\n        margin-left: 13%;\r\n    }\r\n\r\n    &:active {\r\n        background-color: rgb(0,0,0, 0.6);\r\n        box-shadow: 5px 5px 5px rgb(0,0,0,0.8);\r\n    }\r\n`\r\n\r\nconst BoxTitleBlock = styled.div`\r\n    \r\n`;\r\n\r\nconst BoxContentBlock = styled.div`\r\n    \r\n`;\r\n\r\nconst GridBox = React.memo(({ room, ...rest }) => {\r\n    console.dir('room~');\r\n    \r\n    return (\r\n        <GridBoxBlock {...rest}>\r\n            <BoxTitleBlock>\r\n                {room.name}\r\n            </BoxTitleBlock>\r\n            <BoxContentBlock>\r\n                {room.participant}\r\n            </BoxContentBlock>\r\n        </GridBoxBlock>\r\n    )\r\n});\r\n\r\nconst GridLayoutBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 90%;\r\n    overflow-y: scroll;\r\n    background-color: rgb(0,0,0, 0.2);\r\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.4);\r\n`;\r\n\r\nconst GridLayout = ({ room, onRoomClick }) => {\r\n\r\n    if(!room) return <GridLayoutBlock />;\r\n\r\n    const list = [ ...room ];\r\n    \r\n    const gridArr = [];\r\n    const rowSize = Math.floor(list.length / gridSize);\r\n    for(let i=0; i<=rowSize; ++i) {\r\n        gridArr.push(\r\n            <GridRowBlock\r\n                key={`GridRowBlock_${i}`}\r\n            >\r\n                {\r\n                    list.splice(0, gridSize).map(room => (\r\n                        <GridBox\r\n                            key={`GridBox${room.name}`}\r\n                            room={room}\r\n                            onClick={e => onRoomClick(e, room.key)}\r\n                        />\r\n                    ))\r\n                }\r\n            </GridRowBlock>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <GridLayoutBlock>\r\n            {gridArr}\r\n        </GridLayoutBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(GridLayout);","import React from 'react';\r\nimport GridLayout from '../../components/common/GridLayout';\r\n\r\nconst GridLayoutContainer = props => {\r\n\r\n    return (\r\n        <GridLayout {...props} />\r\n    )\r\n};\r\n\r\nexport default GridLayoutContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst SubmitFormBlock = styled.form`\r\n    display: flex;\r\n`;\r\n\r\nconst buttonStyle = css`\r\n    outline: none;\r\n    background-color: rgb(0,0,0, 0.2);\r\n    padding: 0px;\r\n    border: none;\r\n    width: 200px;\r\n    height: 30px;\r\n    cursor: pointer;\r\n    box-shadow: 5px 5px 5px rgb(0,0,0, 0.6);\r\n\r\n    &:hover {\r\n        background-color: rgb(0,0,0, 0.8);\r\n        color: white;\r\n        box-shadow: 5px 5px 5px rgb(0,0,0, 0.2);\r\n    }\r\n`\r\n\r\nconst ConfirmButtonBlock = styled.button`\r\n    ${buttonStyle}\r\n`;\r\n\r\nconst CancelButtonBlock = styled.button`\r\n    ${buttonStyle}\r\n    margin-left: 20px;\r\n`;\r\n\r\nconst SubmitForm = ({ onConfirmClick, onCancelClick }) => {\r\n    return (\r\n        <SubmitFormBlock onSubmit={onConfirmClick}>\r\n            <ConfirmButtonBlock type='submit'>\r\n                Create Room\r\n            </ConfirmButtonBlock>\r\n            <CancelButtonBlock\r\n                type='button'\r\n                onClick = {onCancelClick}\r\n            >\r\n                Cancel\r\n            </CancelButtonBlock>\r\n        </SubmitFormBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(SubmitForm);","import { eventChannel } from 'redux-saga';\r\nimport SocketIo from 'socket.io-client';\r\nimport { put, call, take, cancelled } from 'redux-saga/effects';\r\n\r\n// eslint-disable-next-line\r\nfunction* createEventChannel(io) {\r\n    return eventChannel(emit => {\r\n        io.on('connect', socket => {\r\n            emit({\r\n                type: 'socket',\r\n                socket: io.id\r\n            });\r\n        })\r\n\r\n        //  reconnect 전에 session연결을 위한 http call 추가 예정\r\n\r\n        io.on('message', message => {\r\n            emit(message)\r\n        });\r\n\r\n        return () => {\r\n            io.close();\r\n        }\r\n    })\r\n}\r\n\r\nexport function* connectNamespace(params) {\r\n    let channel;\r\n\r\n    const {\r\n        url,\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue,\r\n        updateValue,\r\n        query,\r\n    } = params;\r\n\r\n    console.dir(url);\r\n    console.dir(query);\r\n    try {\r\n        const io = SocketIo(url, {\r\n            query,\r\n            reconnection: false,\r\n            secure: true,\r\n        });\r\n        \r\n        channel = yield call(createEventChannel, io);\r\n    \r\n        while(true) {\r\n            const message = yield take(channel);\r\n            switch(message.type) {\r\n                case 'socket':\r\n                    yield put(initializeSocket(message));\r\n                    break;\r\n                case 'initialize':\r\n                    yield put(initializeValue(message));\r\n                    break;\r\n                case 'change':\r\n                    yield put(changeValue(message));\r\n                    break;\r\n                case 'update':\r\n                    yield put(updateValue(message));\r\n                    break;\r\n                default:\r\n                    console.dir(message);\r\n            }\r\n        }\r\n    } catch(e) {\r\n        console.dir(e);\r\n    } finally {\r\n        if (yield cancelled()) {\r\n            channel.close();\r\n        }\r\n    }\r\n}","export const createRequestActionTypes = type => {\r\n    const SUCCESS = `${type}_SUCCESS`;\r\n    const FAILURE = `${type}_FAILURE`;\r\n    return [ type, SUCCESS, FAILURE ];\r\n};\r\n\r\nexport default function createRequestThunk (type, request) {\r\n    const SUCCESS = `${type}_SUCCESS`;\r\n    const FAILURE = `${type}_FAILURE`;\r\n    return params => async dispatch => {\r\n        try {\r\n            const response = await request(params);\r\n            dispatch({\r\n                type: SUCCESS,\r\n                payload: response.data,\r\n            });\r\n            return response.data;\r\n        } catch(e) {\r\n            dispatch({\r\n                type: FAILURE,\r\n                payload: e,\r\n                error: true,\r\n            });\r\n            throw e;\r\n        }\r\n    }\r\n};","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport * as roomCtrl from '../lib/api/room';\r\n\r\nconst CONNECT_WEBSOCKET = 'room/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'room/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_VALUE = 'room/INITIALIZE_VALUE';\r\nconst INITIALIZE_SOCKET = 'room/INITIALIZE_SOCKET';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\n\r\nconst [ CREATE_ROOM, CREATE_ROOM_SUCCESS, CREATE_ROOM_FAILURE ] = createRequestActionTypes('room/CREATE_ROOM');\r\nexport const createRoomThunk = createRequestThunk(CREATE_ROOM, roomCtrl.createRoom);\r\n\r\nfunction* connectWebsocketSaga () {\r\n    const socketTask = yield fork(connectNamespace, { \r\n        url: '/room',\r\n        initializeSocket,\r\n        initializeValue,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* roomSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    room: null,\r\n    error: null,\r\n}\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { room }}) => ({\r\n        ...state,\r\n        room,\r\n    }),\r\n    [CREATE_ROOM_SUCCESS]: state => state,\r\n    [CREATE_ROOM_FAILURE]: (state, { payload: error }) => ({\r\n        ...state,\r\n        error,\r\n    }),\r\n}, initialState);","import axios from 'axios';\r\n\r\n//  REST API 방식\r\n\r\nexport const createRoom = () =>\r\n    axios.post('/api/room');","import React, { useCallback } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport SubmitForm from '../../components/common/SubmitForm';\r\nimport { disconnectWebsocket, createRoomThunk } from '../../modules/room';\r\n\r\nconst SubmitFormContainer = ({ history, onCancelClick, ...rest }) => {\r\n    const dispatch = useDispatch();\r\n\r\n    const onConfirmClick = useCallback(e => {\r\n        e.preventDefault();\r\n        (async() => {\r\n            dispatch(disconnectWebsocket());\r\n            const key = await dispatch(createRoomThunk());\r\n            onCancelClick();\r\n            history.push(`/game/${key}`);\r\n        })();\r\n    }, [dispatch, history, onCancelClick]);\r\n\r\n    return (\r\n        <SubmitForm\r\n            {...rest}    \r\n            onConfirmClick={onConfirmClick}\r\n            onCancelClick={onCancelClick}    \r\n        />\r\n    )\r\n};\r\n\r\nexport default withRouter(SubmitFormContainer);","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport GridLayoutContainer from '../../containers/common/GridLayoutContainer';\r\nimport SubmitFormContainer from '../../containers/common/SubmitFormContainer';\r\n\r\nconst RoomModalBackgroundBlock = styled.div`\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgb(0,0,0, 0.5);\r\n    z-index: 100;\r\n    opacity: 0;\r\n    visibility: hidden;\r\n    transition: 1s;\r\n\r\n    ${props => props.open && css`\r\n        opacity: 1;\r\n        visibility: visible;\r\n    `}\r\n`;\r\n\r\nconst RoomModalBlock = styled.div`\r\n    position: fixed;\r\n    top: 20%;\r\n    left: 20%;\r\n    height: 60%;\r\n    width: 60%;\r\n    padding: 2%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-end;\r\n    justify-content: space-between;\r\n    background-color: rgb(245,245,245, 0.8);\r\n    box-shadow: 10px 10px 10px;\r\n    z-index: 1000;\r\n`;\r\n\r\nconst RoomModal = ({ onBackgroundClick, onContentClick, onRoomClick, room, ...rest }) => {\r\n    console.dir('room mooooodal')\r\n    return (\r\n        <RoomModalBackgroundBlock\r\n            {...rest}\r\n            onClick={onBackgroundClick}\r\n        >\r\n            <RoomModalBlock\r\n                onClick={onContentClick}\r\n            >\r\n                <GridLayoutContainer\r\n                    room={room}\r\n                    onRoomClick={onRoomClick}\r\n                />\r\n                <SubmitFormContainer\r\n                    onCancelClick={onBackgroundClick}\r\n                />\r\n            </RoomModalBlock>\r\n        </RoomModalBackgroundBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(RoomModal);","import React, { useState, useCallback, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport RoomModal from '../../components/modal/RoomModal';\r\nimport { disconnectWebsocket as disconnectRoomWebsocket } from '../../modules/room';\r\n    \r\nconst RoomModalContainer = ({ history, openModal, setOpenModal, ...rest }) => {\r\n    const [ modal, setModal ] = useState(false);\r\n    const { room } = useSelector(({ room }) => ({\r\n        room: room.room,\r\n    }));\r\n    const dispatch = useDispatch();\r\n\r\n    const onBackgroundClick = useCallback(e => {\r\n        setModal(false);\r\n        setOpenModal(false);\r\n        dispatch(disconnectRoomWebsocket());\r\n    }, [dispatch, setOpenModal])\r\n\r\n    const onContentClick = useCallback(e => {\r\n        e.stopPropagation();\r\n    }, [])\r\n\r\n    const onRoomClick = useCallback((e, key) => {\r\n        setModal(false);\r\n        setOpenModal(false);\r\n        dispatch(disconnectRoomWebsocket());\r\n        history.push(`/game/${key}`);\r\n    }, [dispatch, history, setOpenModal]);\r\n\r\n    useEffect(() => {\r\n        setModal(openModal);\r\n    }, [openModal]);\r\n\r\n    console.dir('roommodal');\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(disconnectRoomWebsocket());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <>\r\n            <RoomModal\r\n                {...rest}\r\n                room={room}\r\n                open={modal}\r\n                onBackgroundClick={onBackgroundClick}\r\n                onContentClick={onContentClick}\r\n                onRoomClick={onRoomClick}\r\n            >\r\n            </RoomModal>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default withRouter(RoomModalContainer);","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { Link } from 'react-router-dom';\r\nimport { GoSearch } from 'react-icons/go';\r\nimport { IconContext } from 'react-icons';\r\n\r\nimport RoomModalContainer from '../../containers/modal/RoomModalContainer';\r\n\r\nconst HeaderBlock = styled.div`\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 50px;\r\n`;\r\n\r\nconst titleStyle = css`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: flex-start;\r\n    height: 40px;\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    font-size: 30px;\r\n    text-decoration: none;\r\n    text-shadow: 2px 2px 2px rgb(0, 0, 0, 0.2);\r\n    font-style: italic;\r\n`;\r\n\r\nconst TitleBlock = styled(Link)`\r\n    ${titleStyle}\r\n    color: rgb(0, 0, 0, 0.6);\r\n`;\r\n\r\nconst TitleFadeBlock = styled(Link)`\r\n    ${titleStyle}\r\n    color: rgb(0, 0, 0, 0.4);\r\n`;\r\n\r\nconst ControllBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-left: 8%;\r\n`;\r\n\r\nconst GroupBlock = styled.div`\r\n    margin-left: 30px;\r\n    display: flex;\r\n`;\r\n\r\nconst TabBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 50px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    color: rgb(0, 0, 0, 0.4);\r\n    margin-left: 20px;\r\n`;\r\n\r\nconst TabLinkBlock = styled(Link)`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 50px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    color: rgb(0, 0, 0, 0.4);\r\n    margin-left: 20px;\r\n    text-decoration: none;\r\n`;\r\n\r\nconst Tab = props => {\r\n    if(props.to) {\r\n        return (\r\n            <TabLinkBlock to={props.to}>\r\n                {props.children}\r\n            </TabLinkBlock>\r\n        )\r\n    } else {\r\n        return (\r\n            <TabBlock {...props}>\r\n                {props.children}\r\n            </TabBlock>\r\n        )\r\n    }\r\n}\r\n\r\nconst AuthBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-right: 8%;\r\n    \r\n`;\r\n\r\nconst UserWelcomeBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 50px;\r\n    color: rgb(0, 0, 0, 0.4);\r\n`\r\n\r\nconst Header = ({ onToggle, openModal, setOpenModal, onLogout, session, auth }) => {\r\n    let username;\r\n    if(session) {\r\n        username = session.nickname;\r\n        if(auth) {\r\n            console.dir(auth);\r\n            username = auth.user.username;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <HeaderBlock>\r\n                <ControllBlock>\r\n                    <TitleBlock to='/'>\r\n                        chessup\r\n                    </TitleBlock>\r\n                    <TitleFadeBlock to='/'>\r\n                        .com\r\n                    </TitleFadeBlock>\r\n                    <GroupBlock>\r\n                        <Tab onClick={onToggle}>\r\n                            Play\r\n                        </Tab>\r\n                        <Tab to='/'>\r\n                            Record\r\n                        </Tab>\r\n                        <Tab to='/community'>\r\n                            Community\r\n                        </Tab>\r\n                    </GroupBlock>\r\n                </ControllBlock>\r\n                <AuthBlock>\r\n                    <IconContext.Provider value={{\r\n                        style:{\r\n                            cursor: 'pointer',\r\n                            width: '15px',\r\n                            height: '15px'\r\n                        }\r\n                    }} >\r\n                        <GoSearch />\r\n                    </IconContext.Provider>\r\n\r\n                    <UserWelcomeBlock>\r\n                        {username}\r\n                    </UserWelcomeBlock>\r\n                    {auth ? (\r\n                        <Tab onClick={onLogout}>\r\n                            Logout\r\n                        </Tab>\r\n                    ):(\r\n                        <Tab to='/login'>\r\n                            Login\r\n                        </Tab>\r\n                    )}\r\n                </AuthBlock>\r\n            </HeaderBlock>\r\n            <RoomModalContainer\r\n                openModal={openModal}\r\n                setOpenModal={setOpenModal}\r\n            />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default React.memo(Header);","import { createAction, handleActions } from 'redux-actions';\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\nimport produce from 'immer';\r\n\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport * as authAPI from '../lib/api/auth';\r\n\r\nconst CONNECT_WEBSOCKET = 'auth/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'auth/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_SOCKET = 'auth/INITIALIZE_SOCKET';\r\nconst INITIALIZE_VALUE = 'auth/INITIALIZE_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\n\r\nconst [ SET_SESSION, SET_SESSION_SUCCESS, SET_SESSION_FAILURE ] = createRequestActionTypes('auth/SET_SESSION');\r\nexport const setSessionThunk = createRequestThunk(SET_SESSION, authAPI.getSession);\r\n\r\nconst [ LOGIN, LOGIN_SUCCESS, LOGIN_FAILURE ] = createRequestActionTypes('auth/LOGIN');\r\nconst [ REGISTER, REGISTER_SUCCESS, REGISTER_FAILURE ] = createRequestActionTypes('auth/REGISTER');\r\nconst [ LOGOUT, LOGOUT_SUCCESS, LOGOUT_FAILURE ] = createRequestActionTypes('auth/LOGOUT');\r\nexport const loginThunk = createRequestThunk(LOGIN, authAPI.login);\r\nexport const registerThunk = createRequestThunk(REGISTER, authAPI.register);\r\nexport const logoutThunk = createRequestThunk(LOGOUT, authAPI.logout);\r\n\r\nconst CHANGE_FIELD = 'auth/CHANGE_FIELD';\r\nconst CLEAR_FIELD = 'auth/CLEAR_FIELD';\r\nexport const changeField = createAction(CHANGE_FIELD, payload => payload);\r\nexport const clearField = createAction(CLEAR_FIELD, payload => payload);\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const key = action.payload;\r\n        \r\n    const query = `key=${key}`;\r\n    \r\n    const socketTask = yield fork(connectNamespace, {\r\n        url: '/auth',\r\n        initializeSocket,\r\n        initializeValue,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* authSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\n//  session 정보와 socket정보가 혼재되어 있는 reducer\r\n//  tempAuth의 경우 key로 소켓마다 가지고 있는 정보\r\nconst initialState = {\r\n    socket: null,\r\n    tempAuth: null,\r\n    session: null,\r\n    error: null,\r\n    auth: null,\r\n    authError: null,\r\n    login: {\r\n        username: null,\r\n        password: null,\r\n    },\r\n    register: {\r\n        username: null,\r\n        password: null,\r\n        passwordConfirm: null,\r\n    }\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\r\n        ...state,\r\n        tempAuth: { ...rest },\r\n    }),\r\n    [SET_SESSION_SUCCESS]: (state, { payload: session }) => ({\r\n        ...state,\r\n        session,\r\n    }),\r\n    [SET_SESSION_FAILURE]: (state, { payload: error }) => ({\r\n        ...state,\r\n        session: null,\r\n        error,\r\n    }),\r\n    [CHANGE_FIELD]: (state, { payload: { form, key, value } }) =>\r\n        produce(state, draft => {\r\n            draft[form][key] = value;\r\n        }),\r\n    [CLEAR_FIELD]: (state, { payload: { form } }) => ({\r\n        ...state,\r\n        [form]: initialState[form],\r\n        authError: initialState.authError,\r\n    }),\r\n    [LOGIN_SUCCESS]: (state, { payload : auth }) => ({\r\n        ...state,\r\n        auth,\r\n        authError: null,\r\n    }),\r\n    [LOGIN_FAILURE]: (state, { payload: authError }) => ({\r\n        ...state,\r\n        auth: null,\r\n        authError,\r\n    }),\r\n    [REGISTER_SUCCESS]: (state, { payload: auth }) => ({\r\n        ...state,\r\n        auth,\r\n        authError: null,\r\n    }),\r\n    [REGISTER_FAILURE]: (state, { payload: authError }) => ({\r\n        ...state,\r\n        auth: null,\r\n        authError,\r\n    }),\r\n    [LOGOUT_SUCCESS]: state => ({\r\n        ...state,\r\n        auth: null,\r\n        authError: null,\r\n    })\r\n}, initialState);","import axios from 'axios';\r\n\r\nexport const getSession = () =>\r\n    axios.get('/api/auth/getSession');\r\n\r\nexport const login = ({ username, password }) => \r\n    axios.post('/api/auth/login', ({ username, password }));\r\n\r\nexport const logout = () =>\r\n    axios.get('/api/auth/logout');\r\n\r\nexport const register = ({ username, password }) =>\r\n    axios.post('/api/auth/register', ({ username, password }));","import React, { useState, useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Header from '../../components/common/Header';\r\nimport { connectWebsocket } from '../../modules/room';\r\nimport { logoutThunk } from '../../modules/auth';\r\n\r\nconst HeaderContainer = () => {\r\n    const { session, auth } = useSelector(({ auth }) => ({\r\n        session: auth.session,\r\n        auth: auth.auth,\r\n    }));\r\n    const dispatch = useDispatch();\r\n\r\n    const [ openModal, setOpenModal ] = useState(false);\r\n\r\n    const onToggle = useCallback(() => {\r\n        setOpenModal(true);\r\n        dispatch(connectWebsocket());\r\n    }, [dispatch]);\r\n\r\n    const onLogout = useCallback(() => {\r\n        dispatch(logoutThunk());\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Header\r\n            onToggle={onToggle}\r\n            openModal={openModal}\r\n            setOpenModal={setOpenModal}\r\n            onLogout={onLogout}\r\n            session={session}\r\n            auth={auth}\r\n        />\r\n    );\r\n};\r\n\r\nexport default HeaderContainer;","import { useReducer, useEffect } from 'react';\r\n\r\nfunction reducer(state, action) {\r\n    switch (action.type) {\r\n        case 'LOADING':\r\n            return {\r\n                loading: true,\r\n                data: null,\r\n                error: null,\r\n            };\r\n        case 'SUCCESS':\r\n            return {\r\n                loading: false,\r\n                data: action.data,\r\n                error: null,\r\n            };\r\n        case 'FAILURE':\r\n            return {\r\n                loading: false,\r\n                data: null,\r\n                error: action.error,\r\n            };\r\n        default:\r\n            throw new Error('Unhandled action type Error')\r\n    }\r\n}\r\n\r\nfunction useAsync(callback, deps = []) {\r\n    const [ state, dispatch ] = useReducer(reducer, {\r\n        loading: false,\r\n        data: null,\r\n        error: false,\r\n    })\r\n\r\n    const fetchData = async () => {\r\n        dispatch({ type: 'LOADING' });\r\n        try {\r\n            const data = await callback();\r\n            dispatch({ type: 'SUCCESS', data });\r\n        } catch(e) {\r\n            dispatch({ type: 'FAILURE', error: e });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    // eslint-disable-next-line\r\n    }, deps);\r\n\r\n    return [state, fetchData];\r\n}\r\n\r\nexport default useAsync;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst MainLayoutBlock = styled.div`\r\n    width: 100%;\r\n    height: 800px;\r\n`;\r\n\r\nconst MainLayout = () => {\r\n    return (\r\n        <MainLayoutBlock>\r\n            \r\n        </MainLayoutBlock>\r\n    )\r\n};\r\n\r\nexport default MainLayout;","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport useAsync from '../../lib/hook/useAsync';\r\nimport { setSessionThunk } from '../../modules/auth';\r\n\r\nimport MainLayout from '../../components/main/MainLayout';\r\n\r\nconst MainLayoutContainer = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const connection = async () => {\r\n        await dispatch(setSessionThunk());\r\n\r\n        return true;\r\n    };\r\n\r\n    const [state] = useAsync(connection, [ dispatch ]);\r\n\r\n    const { loading, data, error } = state;\r\n\r\n    if(loading) return null;\r\n    if(error) return null;\r\n    if(data) {\r\n        return (\r\n            <MainLayout />\r\n        )\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default MainLayoutContainer;","import React from 'react';\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport MainLayoutContainer from '../containers/main/MainLayoutContainer';\r\n\r\nconst MainPage = () => {\r\n\r\n    return (\r\n        <>\r\n            <HeaderContainer />\r\n            <MainLayoutContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default MainPage;","import { GiChessPawn, GiChessKing, GiChessQueen,\r\n    GiChessBishop, GiChessKnight, GiChessRook, GiPlainCircle } from 'react-icons/gi';\r\n\r\nexport const pieceMapper = {\r\n    'pawn': GiChessPawn,\r\n    'king': GiChessKing,\r\n    'queen': GiChessQueen,\r\n    'bishop': GiChessBishop,\r\n    'knight': GiChessKnight,\r\n    'rook': GiChessRook,\r\n    'covered': GiPlainCircle,\r\n}\r\n\r\nexport const playerMapper = {\r\n    'white': {\r\n        color: 'white',\r\n        style: {\r\n            filter: `drop-shadow(1px 1px 1px white)`,\r\n            width: '80%',\r\n            height: '80%',\r\n        }\r\n    },\r\n    'black': {\r\n        color: 'black',\r\n        style: {\r\n            filter: `drop-shadow(1px 1px 1px black)`,\r\n            width: '80%',\r\n            height: '80%',\r\n        }\r\n    },\r\n    'covered0': {\r\n        style: {\r\n            filter: `drop-shadow(1px 1px 1px black)`,\r\n            width: '30%',\r\n            height: '30%',\r\n            color: 'rgb(130, 151, 105)',\r\n            \r\n        }\r\n    },\r\n    'covered1': {\r\n        style: {\r\n            filter: `drop-shadow(1px 1px 1px black)`,\r\n            width: '30%',\r\n            height: '30%',\r\n            color: 'rgb(100, 111, 64)',\r\n        }\r\n    }\r\n}","import React, {useCallback} from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { IconContext } from 'react-icons';\r\nimport { pieceMapper, playerMapper } from '../../lib/base/pieceConverter';\r\n\r\nconst pieceConverter = ({ piece, owner, covered, cellNum }) => {\r\n    let coveredCanvas = null;\r\n    \r\n    if(covered) {\r\n        const Component = pieceMapper['covered'];\r\n\r\n        coveredCanvas = (\r\n            <IconContext.Provider value={playerMapper[`covered${cellNum}`]}>\r\n                <Component />\r\n            </IconContext.Provider>\r\n        );\r\n    }\r\n\r\n    if(!piece || !owner) {\r\n        return coveredCanvas;\r\n    }\r\n\r\n    const Component = pieceMapper[piece];\r\n    const capturedObject = coveredCanvas ? {\r\n        opacity: 0.5,\r\n        filter: owner === 'black' ? `drop-shadow(1px 1px 1px white)` : `drop-shadow(1px 1px 1px black)`,\r\n    } : null;\r\n\r\n    const styleObject = {\r\n        ...playerMapper[owner],\r\n        style: {\r\n            ...playerMapper[owner].style,\r\n            ...capturedObject,\r\n        }\r\n    };\r\n\r\n    return (\r\n        <IconContext.Provider value={styleObject}>\r\n            <Component />\r\n        </IconContext.Provider>\r\n    )\r\n};\r\n\r\nconst CanvasBlock = styled.div`\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst CanvasRowBlock = styled.div`\r\n    display: flex;\r\n`;\r\n\r\nconst CanvasCellBlock = styled.div`\r\n    display: flex;\r\n    cursor: pointer;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 90px;\r\n    height: 90px;\r\n\r\n    ${props => props.cellNum === 0 && css`\r\n        background-color: rgb(240, 217, 181);\r\n    `}\r\n\r\n    ${props => props.cellNum === 1 && css`\r\n        background-color: rgb(181, 136, 99);\r\n    `}\r\n\r\n    ${props => props.cellNum === 0 && props.clicked && css`\r\n        background-color: rgb(130, 151, 105);\r\n    `}\r\n\r\n    ${props => props.cellNum === 1 && props.clicked && css`\r\n        background-color: rgb(100, 111, 64);\r\n    `}\r\n\r\n    ${props => props.cellNum === 0 && props.tracked && css`\r\n        background-color: rgb(205, 210, 106);\r\n    `}\r\n\r\n    ${props => props.cellNum === 1 && props.tracked && css`\r\n        background-color: rgb(170, 162, 58);\r\n    `}\r\n\r\n    &:hover {\r\n        ${props => props.cellNum === 0 && props.covered && css`\r\n            background-color: rgb(174, 177, 135);\r\n        `}\r\n\r\n        ${props => props.cellNum === 1 && props.covered && css`\r\n            background-color: rgb(132, 121, 78);\r\n        `}  \r\n    }\r\n`\r\n\r\nconst CanvasRow = React.memo(({ row, y, onClickCell, pieceConverter }) => {\r\n    // console.dir('Canvas Row');\r\n    return (\r\n        <CanvasRowBlock>\r\n            {row.map((cell, x) => (\r\n                <CanvasCell\r\n                    key={`cell_${y}_${x}`}\r\n                    onClick={onClickCell.bind(null, {y, x})}\r\n                    pieceConverter={pieceConverter}\r\n                    cellNum={(x + y) % 2}\r\n                    cell={cell}\r\n                />\r\n            ))}\r\n        </CanvasRowBlock>\r\n    )\r\n}, (prevProps, nextProps) => {\r\n    return prevProps.row === nextProps.row;\r\n});\r\n\r\nconst CanvasCell = React.memo(({ cell, onClick, cellNum, pieceConverter }) => {\r\n    // console.dir('Canvas Cell')\r\n    return (\r\n        <CanvasCellBlock\r\n            onClick={onClick}\r\n            cellNum={cellNum}\r\n            {...cell}\r\n        >\r\n            {pieceConverter({\r\n                piece: cell.piece,\r\n                owner: cell.owner,\r\n                covered: cell.covered,\r\n                cellNum,\r\n            })}\r\n        </CanvasCellBlock>\r\n    )\r\n}, (prevProps, nextProps) => {\r\n    return prevProps.cell === nextProps.cell;\r\n});\r\n\r\nconst CanvasContentBlock = styled.div`\r\n    ${props => props.blocked && css`\r\n        pointer-events: none;\r\n    `}\r\n`;\r\n\r\nconst CanvasContent = ({ board, blocked, onClick }) => {\r\n    //  can't memoization\r\n    const onClickCell = useCallback(({y, x}) => {\r\n        onClick(y, x);\r\n    }, [onClick]);\r\n    \r\n    return  (\r\n        <CanvasContentBlock blocked={blocked}>\r\n            {board.map((row, y) => (\r\n                <CanvasRow\r\n                    key={`row_${y}`}\r\n                    row={row}\r\n                    y={y}\r\n                    onClickCell={onClickCell}\r\n                    pieceConverter={pieceConverter}\r\n                />\r\n            ))}\r\n        </ CanvasContentBlock>\r\n    )\r\n}\r\n\r\nconst Canvas = props => {\r\n    return (\r\n        <CanvasBlock>\r\n            <CanvasContent {...props} />\r\n        </CanvasBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Canvas);","const board = [\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n];\r\n\r\nexport default board;","import { checkPlayersEveryMove } from './validation';\r\n\r\nconst rules = {\r\n    pawn: {\r\n        type: 'onetime',\r\n        move: [\r\n            {\r\n                dy: -1,\r\n                dx: 0,\r\n                except: function(props) {\r\n                    const { board, dy, dx } = props;\r\n                    if(board[dy][dx].piece) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n            },\r\n            {\r\n                dy: -2,\r\n                dx: 0,\r\n                except: function(props) {\r\n                    const { board, y, x, owner } = props;\r\n                    if((owner === 'black' && y !== 1) || (owner === 'white' && y !== 6)) return false;\r\n                    if((owner === 'black' && board[2][x].piece) || (owner === 'white' && board[5][x].piece)) return false;\r\n                    if((owner === 'black' && board[3][x].piece) || (owner === 'white' && board[4][x].piece)) return false;\r\n                    return true;\r\n                }\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -1,\r\n                except: function(props) {\r\n                    const { board, dy, dx } = props;\r\n                    if(board[dy][dx].piece) {\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 1,\r\n                except: function(props) {\r\n                    const { board, dy, dx } = props;\r\n                    if(board[dy][dx].piece) {\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n            }\r\n        ],\r\n    },\r\n    knight: {\r\n        type: 'onetime',\r\n        move: [\r\n            {\r\n                dy: -2,\r\n                dx: -1,\r\n            },\r\n            {\r\n                dy: -2,\r\n                dx: 1,\r\n            },\r\n            {\r\n                dy: 2,\r\n                dx: -1,\r\n            },\r\n            {\r\n                dy: 2,\r\n                dx: 1,\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -2,\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 2,\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: -2,\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 2,\r\n            },\r\n        ]\r\n    },\r\n    king: {\r\n        type: 'onetime',\r\n        move: [\r\n            {\r\n                dy: 1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: 2,\r\n                except: function(props) {\r\n                    const { board, y, x, owner } = props;\r\n                    const enemy = (owner === 'white') ? 'black' : 'white';\r\n\r\n                   //  king dirty check\r\n                    if(!board[y][x].piece || board[y][x].dirty) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  rook dirty check\r\n                    if(!board[y][x+3].piece || board[y][x+3].dirty) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  check path is empty\r\n                    if(board[y][x+1].piece || board[y][x+2].piece) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  is king & path safe?, prevent castling loop by flag\r\n                    const coveredAxisBundle = checkPlayersEveryMove(enemy, board, true);\r\n                    const length = coveredAxisBundle.length;\r\n                    for(let i=0; i<length; ++i) {\r\n                        const axis = coveredAxisBundle[i];\r\n                        if(axis.dy === y && (axis.dx === x || axis.dx === x+1 || axis.dx === x+2)) {\r\n                            return false;\r\n                        }\r\n                    }\r\n\r\n\r\n                    return true;\r\n                },             \r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: -2,\r\n                except: function(props) {\r\n                    const { board, y, x, owner } = props;\r\n                    const enemy = (owner === 'white') ? 'black' : 'white';\r\n                    \r\n                    //  king dirty check\r\n                    if(!board[y][x].piece || board[y][x].dirty) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  rook dirty check\r\n                    if(!board[y][x-4].piece || board[y][x-4].dirty) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  check path is empty\r\n                    if(board[y][x-1].piece || board[y][x-2].piece || board[y][x-3].piece ) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  is king & path safe?, prevent castling loop by flag\r\n                    const coveredAxisBundle = checkPlayersEveryMove(enemy, board, true);\r\n                    const length = coveredAxisBundle.length;\r\n                    for(let i=0; i<length; ++i) {\r\n                        const axis = coveredAxisBundle[i];\r\n                        if(axis.dy === y && (axis.dx === x || axis.dx === x-1 || axis.dx === x-2)) {\r\n                            return false;\r\n                        }\r\n                    }\r\n\r\n                    return true;\r\n                },             \r\n            }\r\n        ]\r\n    },\r\n    bishop: {\r\n        type: 'multitime',\r\n        move: [\r\n            {\r\n                dy: 1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 1\r\n            },\r\n        ]\r\n    },\r\n    rook: {\r\n        type: 'multitime',\r\n        move: [\r\n            {\r\n                dy: 1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: -1,\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: 1\r\n            },\r\n        ]\r\n    },\r\n    queen: {\r\n        type: 'multitime',\r\n        move: [\r\n            {\r\n                dy: 1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: -1,\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: 1\r\n            },\r\n        ]\r\n    }\r\n};\r\n\r\nexport default rules;","import _ from 'lodash';\r\n\r\nimport rules from './rules';\r\nimport { genBoard } from './genBoard';\r\n\r\nexport const findKingLocation = (player, board) => {\r\n    for(let i=0; i<8; ++i) {\r\n        for(let j=0; j<8; ++j) {\r\n            if(board[i][j].owner === player && board[i][j].piece === 'king') {\r\n                return {\r\n                    y: i,\r\n                    x: j,\r\n                };\r\n            };\r\n        }\r\n    }\r\n}\r\n\r\nexport const checkPlayersEveryMove = (player, board, castling) => {\r\n    let coveredAxisBundle = [];\r\n    for(let i=0; i<8; ++i) {\r\n        for(let j=0; j<8; ++j) {\r\n            if(board[i][j].owner === player) {\r\n                const coveredAxis = checkCovered(board, i, j, castling);\r\n                coveredAxisBundle = [ ...coveredAxisBundle, ...coveredAxis ];\r\n            }\r\n        }\r\n    };\r\n\r\n    return coveredAxisBundle;\r\n};\r\n\r\nexport const checkSafeMove = (player, board) => {\r\n    const enemy = player === 'white' ? 'black' : 'white';\r\n    const clonedBoard = _.cloneDeep(board);\r\n\r\n    const playerKing = findKingLocation(player, clonedBoard);\r\n    const coveredAxisBundle = checkPlayersEveryMove(enemy, clonedBoard);\r\n\r\n    coveredAxisBundle.forEach(axis => {\r\n        clonedBoard[axis.dy][axis.dx] = {\r\n            ...clonedBoard[axis.dy][axis.dx],\r\n            movable: true,\r\n        }\r\n    });\r\n\r\n    //  is king in danger?\r\n    if(clonedBoard[playerKing.y][playerKing.x].movable) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n};\r\n\r\nexport const checkCheckmate = (player, board) => {\r\n\r\n    for(let i=0; i<8; ++i) {\r\n        for(let j=0; j<8; ++j) {\r\n            if(board[i][j].owner === player) {\r\n                const coveredAxis = checkCovered(board, i, j);\r\n                const length = coveredAxis.length;\r\n                for(let k=0; k<length; ++k) {\r\n                    const tempBoard = genBoard(board, { y: i, x: j }, { y: coveredAxis[k].dy, x: coveredAxis[k].dx })\r\n                    if(checkSafeMove(player, tempBoard)) {\r\n                        return false;\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    return true;\r\n}\r\n\r\nexport const checkCovered = (board, y, x, castling) => {\r\n    const { piece, owner } = board[y][x];\r\n    let inform = { board, y, x, owner };\r\n    if(!piece) return;\r\n\r\n    const { type, move }= rules[piece];\r\n    let coveredAxis = [];\r\n\r\n    if(type === 'onetime') {\r\n        coveredAxis = move.reduce((acc, cur) => {\r\n            const dy = y + (owner === 'black' ? -cur.dy: +cur.dy);\r\n            const dx = x + cur.dx;\r\n            if(dy < 0 || dx < 0 || dy > 7 || dx > 7) return acc;\r\n            \r\n            inform = { ...inform, dy, dx };\r\n            \r\n            if(!cur.except || (!(piece === 'king' && castling) && cur.except && cur.except(inform))) {\r\n                if(!board[dy][dx].owner || board[y][x].owner !== board[dy][dx].owner) {\r\n                    acc.push({dy, dx});\r\n                }\r\n            }\r\n\r\n            return acc;\r\n        }, []);\r\n    } else {\r\n        coveredAxis = move.flatMap(cur => {\r\n            let counter = 0;\r\n            let coveredArr = [];\r\n            while(true) {\r\n                ++counter;\r\n                const dy = y + counter * (owner === 'black' ? -cur.dy: +cur.dy);\r\n                const dx = x + counter * cur.dx;\r\n                \r\n                if(dy < 0 || dx < 0 || dy > 7 || dx > 7) break;\r\n                if(board[dy][dx].owner && board[dy][dx].owner === owner) break;\r\n                coveredArr.push({dy, dx});\r\n                if(board[dy][dx].owner && board[dy][dx].owner !== owner) break;\r\n            }\r\n            return coveredArr;\r\n        });\r\n    }\r\n\r\n    return coveredAxis;\r\n};","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport * as canvasCtrl from '../lib/api/canvas';\r\n\r\n// import rules from '../lib/base/rules';\r\nimport board from '../lib/base/board';\r\nimport { checkCovered } from '../lib/base/validation';\r\n\r\nconst CONNECT_WEBSOCKET = 'canvas/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'canvas/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_SOCKET = 'canvas/INITIALIZE_SOCKET';\r\nconst INITIALIZE_VALUE = 'canvas/INITIALIZE_VALUE';\r\nconst CHANGE_VALUE = 'canvas/CHANGE_VALUE';\r\nconst CLEAR_VALUE = 'canvas/CLEAR_VALUE';\r\nconst INITIALIZE_BLOCKED = 'canvas/INITIALIZE_BLOCKED';\r\nconst CHANGE_BLOCKED = 'canvas/CHANGE_BLOCKED';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\nexport const initializeBlocked = createAction(INITIALIZE_BLOCKED, payload => payload);\r\nexport const changeBlocked = createAction(CHANGE_BLOCKED, payload => payload);\r\n\r\nconst [ SET_MOVE_PIECE, SET_MOVE_PIECE_SUCCESS, SET_MOVE_PIECE_FAILURE ] = createRequestActionTypes('canvas/SET_MOVE_PIECE');\r\nexport const setMovePieceThunk = createRequestThunk(SET_MOVE_PIECE, canvasCtrl.movePiece);\r\n\r\nexport const changeValueThunk = ({ move }) => ( dispatch, getState ) => {\r\n    const { prev, next } = move;\r\n    const { canvas: { board },\r\n            auth: { tempAuth },\r\n            game: { turn }\r\n        } = getState();\r\n    \r\n    if(tempAuth) {\r\n        if((tempAuth.role === 'white' && turn % 2 === 0) || (tempAuth.role === 'black' && turn % 2 === 1)) {\r\n            dispatch(changeBlocked({ blocked: false }));\r\n        } else {\r\n            dispatch(changeBlocked({ blocked: true }));\r\n        };\r\n    }\r\n\r\n    const cell = board[prev.y][prev.x];\r\n    const clearBoard = genClearBoard([...board], [\r\n        'covered',\r\n        'clicked',\r\n        'tracked',\r\n    ]);\r\n    \r\n    clearBoard[next.y] = [ ...clearBoard[next.y] ];\r\n    clearBoard[next.y][next.x] = {\r\n        ...cell,\r\n        tracked: true,\r\n        dirty: true,\r\n    };\r\n\r\n    clearBoard[prev.y]= [ ...clearBoard[prev.y] ];\r\n    clearBoard[prev.y][prev.x] = {\r\n        covered: false,\r\n        tracked: true,\r\n    };\r\n\r\n    //  promotion\r\n    const { owner, piece } = clearBoard[next.y][next.x];\r\n    if((owner === 'white' && piece === 'pawn' && next.y === 0) || (owner === 'black' && piece === 'pawn' && next.y === 7)) {\r\n        clearBoard[next.y][next.x] = {\r\n            ...clearBoard[next.y][next.x],\r\n            piece: 'queen',\r\n        }\r\n    };\r\n\r\n    //  castling\r\n    if(clearBoard[next.y][next.x].piece === 'king') {\r\n        if(next.x - prev.x === 2) {\r\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\r\n            \r\n            const pieceStore = { ...clearBoard[prev.y][prev.x+3] };\r\n            clearBoard[prev.y][prev.x+3] = {\r\n                covered: false\r\n            };\r\n            clearBoard[prev.y][prev.x+1] = {\r\n                ...pieceStore,\r\n                dirty: true,\r\n            };\r\n        }\r\n\r\n        if(next.x - prev.x === -2) {\r\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\r\n\r\n            const pieceStore = { ...clearBoard[prev.y][prev.x-4] };\r\n            clearBoard[prev.y][prev.x-4] = {\r\n                covered: false\r\n            };\r\n            clearBoard[prev.y][prev.x-1] = {\r\n                ...pieceStore,\r\n                dirty: true,\r\n            };\r\n        }\r\n    }\r\n    \r\n    dispatch(changeValue({ board: clearBoard, clicked: null }));\r\n}\r\n\r\nconst genClearBoard = (board, params) => {\r\n    const arr = [];\r\n\r\n    const leng = board.length;\r\n    for(let i=0; i<leng; ++i) {\r\n        for(let j=0; j<leng; ++j) {\r\n            let pass = false;\r\n            params.forEach(param => {\r\n                pass |= board[i][j][param];\r\n            });\r\n            if(pass) {\r\n                arr.push({\r\n                    y: i,\r\n                    x: j,\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    arr.forEach(cell => {\r\n        board[cell.y] = [ ...board[cell.y]];\r\n        const popedCell = board[cell.y][cell.x];\r\n        const newCell = {\r\n            ...popedCell,\r\n        };\r\n        params.forEach(param => {\r\n            newCell[param] = false;\r\n        });\r\n\r\n        board[cell.y].splice(cell.x, 1, newCell);\r\n    });\r\n\r\n    return board;\r\n}\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const key = action.payload;\r\n    \r\n    const query = `key=${key}`;\r\n\r\n    const socketTask = yield fork(connectNamespace, {\r\n        url: '/canvas',\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue: changeValueThunk,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* canvasSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nexport const clickPieceThunk = ({ y, x }) => (dispatch, getState) => {\r\n    const {\r\n            canvas: { board, clicked },\r\n        } = getState();\r\n\r\n    if(clicked && board[y][x].covered) {\r\n        const { canvas: { socket } } = getState();\r\n\r\n        dispatch(setMovePieceThunk({\r\n            socket,\r\n            move: {\r\n                prev: clicked,\r\n                next: {y, x}\r\n            }\r\n        }));\r\n        \r\n        return;\r\n    }\r\n    \r\n    let coveredAxis = checkCovered(board, y, x);\r\n    const clearBoard = genClearBoard([...board], [\r\n        'covered',\r\n        'clicked',\r\n    ]);\r\n\r\n    coveredAxis.forEach(axis => {\r\n        clearBoard[axis.dy] = [ ...clearBoard[axis.dy] ];\r\n        const popedCell = clearBoard[axis.dy][axis.dx];\r\n        clearBoard[axis.dy].splice(axis.dx, 1, {\r\n            ...popedCell,\r\n            covered:true,\r\n        });\r\n    });\r\n\r\n    clearBoard[y] = [ ...clearBoard[y] ];\r\n    clearBoard[y][x] = {\r\n        ...clearBoard[y][x],\r\n        clicked: true,\r\n    }\r\n\r\n    dispatch(changeValue({ board: clearBoard, clicked: { y, x } }));\r\n};\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    error: null,\r\n    board,\r\n    clicked: null,\r\n    blocked: false,\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { board } }) => ({\r\n        ...state,\r\n        board,\r\n    }),\r\n    [CHANGE_VALUE]: (state, { payload : { board, clicked } }) => ({\r\n        ...state,\r\n        board,\r\n        clicked,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n    [INITIALIZE_BLOCKED]: (state, { payload: { blocked } }) => ({\r\n        ...state,\r\n        blocked,\r\n    }),\r\n    [CHANGE_BLOCKED]: (state, { payload: { blocked } }) => ({\r\n        ...state,\r\n        blocked,\r\n    }),\r\n    [SET_MOVE_PIECE_SUCCESS]: state => state,\r\n    [SET_MOVE_PIECE_FAILURE]: state => state,\r\n}, initialState);","import axios from 'axios';\r\n\r\nexport const movePiece = params =>\r\n    axios.post('/api/canvas/movePiece', params);","import React, { useCallback, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport Canvas from '../../components/content/Canvas';\r\nimport { clickPieceThunk, initializeBlocked } from '../../modules/canvas';\r\nimport { clearValue } from '../../modules/canvas';\r\n\r\nconst CanvasContainer = () => {\r\n    const { board, blocked, turn, tempAuth } = useSelector(({ canvas, auth, game }) => ({\r\n        board: canvas.board,\r\n        blocked: canvas.blocked,\r\n        turn: game.turn,\r\n        tempAuth: auth.tempAuth,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n    \r\n    useEffect(() => {\r\n        if(tempAuth) {\r\n            if((tempAuth.role === 'white' && turn % 2 === 0) || (tempAuth.role === 'black' && turn % 2 === 1)) {\r\n                dispatch(initializeBlocked({ blocked: false }));\r\n            } else {\r\n                dispatch(initializeBlocked({ blocked: true }));\r\n            }\r\n        }\r\n    }, [dispatch, turn, tempAuth]);\r\n    \r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearValue());\r\n        }\r\n    }, [dispatch])\r\n\r\n    //  function은 생성 당시의 Context를 가지고 있기 때문에 redux state값이 제대로 반영되지 않는다\r\n    //  생성되었던 event handler가 React dom에 붙어있기 때문에 dom이 rerender되지 않는 이상\r\n    //  오래된 state를 가지고 있을 수 밖에 없다. 따라서 ref를 통해 참조값을 가지고 있거나\r\n    //  혹은 redux state라면 이 코드와 같이 thunk를 사용하는 방법이 있다\r\n\r\n    const onClick = useCallback((y, x) => {\r\n        dispatch(clickPieceThunk({ y, x }));\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Canvas\r\n            board={board}\r\n            blocked={blocked}\r\n            onClick={onClick}\r\n        />\r\n    )\r\n};\r\n\r\nexport default CanvasContainer;","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport * as chatAPI from '../lib/api/chat';\r\n\r\nconst CONNECT_WEBSOCKET = 'chat/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'chat/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_SOCKET = 'chat/INITIALIZE_SOCKET';\r\nconst INITIALIZE_VALUE = 'chat/INITIALIZE_VALUE';\r\nconst CHANGE_VALUE = 'chat/CHANGE_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\r\n\r\nconst CHANGE_TEXTFIELD = 'chat/CHANGE_TEXTFIELD';\r\nconst INITIALIZE_TEXTFIELD = 'chat/INITIALIZE_TEXTFIELD';\r\nexport const changeTextfield = createAction(CHANGE_TEXTFIELD, payload => payload);\r\nexport const initializeTextfield = createAction(INITIALIZE_TEXTFIELD);\r\n\r\nconst [ SEND_MESSAGE, SEND_MESSAGE_SUCCESS, SEND_MESSAGE_FAILURE ] = createRequestActionTypes('chat/SEND_MESSAGE');\r\nexport const sendMessageThunk = createRequestThunk(SEND_MESSAGE, chatAPI.sendMessage);\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const key = action.payload;\r\n\r\n    const query = `key=${key}`;\r\n    \r\n    const socketTask = yield fork(connectNamespace, {\r\n        url: '/chat',\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* chatSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    messages: [],\r\n    text: '',\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { nickname, color, message }}) => ({\r\n        ...state,\r\n        messages: [{ nickname, color, message }],\r\n    }),\r\n    [CHANGE_VALUE]: (state, { payload: { nickname, color, message} }) => ({\r\n        ...state,\r\n        messages: [ ...state.messages, { nickname, color, message} ],\r\n    }),\r\n    [SEND_MESSAGE_SUCCESS]: state => state,\r\n    [SEND_MESSAGE_FAILURE]: state => state,\r\n    [INITIALIZE_TEXTFIELD]: state => ({\r\n        ...state,\r\n        text: '',\r\n    }),\r\n    [CHANGE_TEXTFIELD]: (state, { payload: text}) => ({\r\n        ...state,\r\n        text,\r\n    }),\r\n}\r\n, initialState);","import axios from 'axios';\r\n\r\nexport const sendMessage = message =>\r\n    axios.post('/api/chat/sendMessage', message);\r\n    \r\n// export const sendMessage = message =>\r\n//     axios.post('http://localhost:5000/api/chat/sendMessage', message);","import React, { useRef, useEffect } from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { IoIosSend } from 'react-icons/io';\r\nimport { IconContext } from 'react-icons';\r\n\r\nconst ChatSubmitBlock = styled.form`\r\n`;\r\n\r\nconst ChatFrameBlock = styled.div`\r\n    position: relative;\r\n    background-color: white;\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst ChatHiddenBlock = styled.div`\r\n    height: 360px;\r\n    width: 100%;\r\n    overflow: hidden;\r\n`;\r\n\r\nconst ChatBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    height: 360px;\r\n    width: 100%;\r\n    padding-right: 20px;\r\n    overflow-y: overlay;\r\n`;\r\n\r\nconst ChatFormBlock = styled.div`\r\n    position: absolute;\r\n    width: 100%;\r\n    display: flex;\r\n    background-color: white;\r\n    top: 365px;\r\n    /* box-shadow: rgba(0,0,0,0.05) 0px -2px 2px 0px, rgba(0,0,0,0.08) 0px -3px 1px -2px, rgba(0,0,0,0.04) 0px -1px 5px 0px; */\r\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\r\n`;\r\n\r\nconst ChatInputBlock = styled.input`\r\n    outline: none;\r\n    border: none;\r\n    align-items : center;\r\n    color: black;\r\n    background-color: transparent;\r\n    font-size: 12px;\r\n    width: 80%;\r\n    height : 30px;\r\n    padding-left: 10px;\r\n`;\r\n\r\nconst ChatButtonBlock = styled.button`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 20%;\r\n    font-size: 12px;\r\n    background-color: rgb(247,246,245);\r\n    border: none;\r\n    cursor: pointer;\r\n\r\n    &:hover, &:focus {\r\n        background-color: #D3D3D3;\r\n    } \r\n`;\r\n\r\nconst MessageBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    width: 90%;\r\n    height : 36px;\r\n    min-height : 36px;\r\n    font-size : 12px;\r\n    background-color: white;\r\n\r\n    ${props => props.owner === 'my' && css`\r\n        justify-content: flex-end;\r\n    `};\r\n\r\n    ${props => props.owner === 'other' && css`\r\n        justify-content: flex-start;\r\n    `};\r\n\r\n    ${props => props.owner === 'server' && css`\r\n        justify-content: center;\r\n    `};\r\n`;\r\n\r\nconst BalloonBlock = styled.div`\r\n    position: relative;\r\n    background: #ffff80;\r\n    padding: 5px;\r\n\r\n    &:after {\r\n        content: '';\r\n        position: absolute;\r\n        right: 0;\r\n        top: 50%;\r\n        width: 0;\r\n        height: 0;\r\n        border: 8px solid transparent;\r\n        border-left-color: #ffff80;\r\n        border-right: 0;\r\n        border-top: 0;\r\n        margin-top: -5px;\r\n        margin-right: -8px;\r\n    }\r\n\r\n    \r\n    ${props => props.owner === 'other' && css `\r\n        background: rgb(247,246,245);\r\n\r\n        &:after {\r\n            content: '';\r\n            position: absolute;\r\n            left: 0;\r\n            top: 50%;\r\n            width: 0;\r\n            height: 0;\r\n            border: 8px solid transparent;\r\n            border-top: 0;\r\n            margin-top: -5px;\r\n            border-right-color: rgb(247,246,245);\r\n            border-left: 0;\r\n            margin-left: -8px;\r\n        }\r\n    `}\r\n`;\r\n\r\nconst Balloon = ({ owner, children }) => {\r\n    let ballonBlock;\r\n    if(owner === 'my') {\r\n        ballonBlock = (\r\n            <BalloonBlock owner={owner}>\r\n                {children}\r\n            </BalloonBlock>\r\n        )\r\n    } else if(owner === 'other') {\r\n        ballonBlock = (\r\n            <BalloonBlock owner={owner}>\r\n                {children}\r\n            </BalloonBlock>\r\n        )\r\n    } else if(owner === 'server') {\r\n        ballonBlock = (\r\n            <>\r\n                {children}\r\n            </>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {ballonBlock}\r\n        </>\r\n    )\r\n}\r\n\r\nconst Message = React.memo(({ message, myName, ...rest }) => {\r\n    const owner = message.nickname ? (message.nickname === myName ? 'my' : 'other') : 'server';\r\n    const text = owner === 'other' ? message.nickname + ' : ' + message.message : message.message;\r\n\r\n    return (\r\n        <MessageBlock\r\n            {...rest} \r\n            color={message.color}\r\n            owner={owner}\r\n        >\r\n            <Balloon owner={owner}>\r\n                {text}\r\n            </Balloon>\r\n        </MessageBlock>\r\n    )\r\n});\r\n\r\nconst Chat = ({ messages, onSubmit, onChange, text, tempAuth }) => {\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current.scrollTop = ref.current.scrollHeight;\r\n    }, [messages]);\r\n\r\n    return (\r\n        <>\r\n            <ChatSubmitBlock onSubmit={onSubmit}>\r\n                <ChatFrameBlock>\r\n                    <ChatHiddenBlock>\r\n                        <ChatBlock ref={ref}>\r\n                            {messages.map(message => (\r\n                                <Message\r\n                                    myName={tempAuth.nickname}\r\n                                    message={message}\r\n                                />\r\n                            ))}\r\n                        </ChatBlock>\r\n                    </ChatHiddenBlock>\r\n                    <ChatFormBlock>\r\n                        <ChatInputBlock\r\n                            onChange={onChange}\r\n                            value={text}\r\n                        />\r\n                        <ChatButtonBlock\r\n                            onSubmit={onSubmit}\r\n                        >\r\n                            <IconContext.Provider value={{style: { width:'40%', height:'40%' }}}>\r\n                                <IoIosSend />\r\n                            </IconContext.Provider>\r\n                        </ ChatButtonBlock>\r\n                    </ChatFormBlock>\r\n                </ChatFrameBlock>\r\n            </ChatSubmitBlock>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default React.memo(Chat);","import React, { useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { changeTextfield, initializeTextfield } from '../../modules/chat';\r\nimport { sendMessageThunk } from '../../modules/chat';\r\nimport Chat from '../../components/content/Chat';\r\n\r\nconst ChatContainer = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const { socket, messages, text, tempAuth } = useSelector(({ chat, auth }) => ({\r\n        socket: chat.socket,\r\n        messages: chat.messages,\r\n        text: chat.text,\r\n        tempAuth: auth.tempAuth,\r\n    }));\r\n\r\n    const onSubmit = useCallback(e => {\r\n        e.preventDefault();\r\n        dispatch(sendMessageThunk({ socket, message: text }));\r\n        dispatch(initializeTextfield());\r\n    }, [dispatch, text, socket]);\r\n\r\n    const onChange = useCallback(e => {\r\n        dispatch(changeTextfield(e.target.value));\r\n    },[dispatch]);\r\n\r\n    return (\r\n        <Chat\r\n            messages={messages}\r\n            onSubmit={onSubmit}\r\n            onChange={onChange}\r\n            text={text}\r\n            tempAuth={tempAuth}\r\n        />\r\n    )\r\n};\r\n\r\nexport default ChatContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst TimerBlock = styled.div`\r\n    width: 50%;\r\n    height: 60px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    background-color: white;\r\n    ${props => props.color && css`\r\n        background-color: rgb(208, 224, 189);\r\n    `}\r\n    ${props => props.time <= 10000 && css`\r\n        background-color: rgb(230, 153, 153);\r\n    `}\r\n`;\r\n\r\nconst TimeSliceBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100%;\r\n    width: 47%;\r\n    color: black;\r\n    font-size: 50px;\r\n`;\r\n\r\nconst ColonBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: flex-end;\r\n    height: 100%;\r\n    width: 6%;\r\n    color: black;\r\n    opacity: 0.5;\r\n    font-size: 50px;\r\n`;\r\n\r\nconst timeConverter = timeSlice => {\r\n    let convertedTime = '';\r\n    convertedTime += String(Math.floor(timeSlice / 10));\r\n    convertedTime += String(Math.floor(timeSlice % 10));\r\n    return convertedTime;\r\n}\r\n\r\nconst Timer = ({ time, color }) => {\r\n    \r\n    const second = Math.floor(time / 1000);\r\n    const millisecond = Math.floor((time % 1000) / 10);\r\n\r\n    // eslint-disable-next-line\r\n    if(time == undefined || time === null) {\r\n        return <TimerBlock />\r\n    }\r\n\r\n    return (\r\n        <TimerBlock\r\n            time={time}\r\n            color={color ? 1 : 0}\r\n        >\r\n            <TimeSliceBlock>\r\n                {timeConverter(second)}\r\n            </TimeSliceBlock>\r\n            <ColonBlock>\r\n                :\r\n            </ColonBlock>\r\n            <TimeSliceBlock>\r\n            {timeConverter(millisecond)}\r\n            </TimeSliceBlock>\r\n        </TimerBlock>\r\n    )\r\n}\r\n\r\nexport default Timer;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Timer from '../../components/content/Timer';\r\n\r\nconst TimerContainer = ({ white }) => {\r\n\r\n    const { whiteTime, blackTime, start, order } = useSelector(({ record, game }) => ({\r\n        whiteTime: record.whiteTime,\r\n        blackTime: record.blackTime,\r\n        start: game.start,\r\n        order: game.order,\r\n    }));\r\n\r\n    const time = white ? whiteTime : blackTime;\r\n    const color = white ? (start && order === 'white') : (start && order === 'black');\r\n\r\n    return (\r\n        <Timer\r\n          time={time}\r\n          color={color}\r\n        />\r\n    )\r\n    \r\n};\r\n\r\nexport default TimerContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { IconContext } from 'react-icons';\r\nimport { FaCircle, FaRegCircle } from 'react-icons/fa';\r\n\r\nconst StatusBlock = styled.div`\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 30px;\r\n    background-color: white;\r\n\r\n    ${props => props.white && css`\r\n        margin-top: 30px;\r\n    `}\r\n`;\r\n\r\nconst NameBlock = styled.div`\r\n    font-size: 20px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`\r\n\r\nconst Status = ({ light, name, white }) => {\r\n    const iconStyle = {\r\n        style: {\r\n            height: '15px',\r\n            width: '10%',\r\n            color: 'green',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n        }\r\n    };\r\n\r\n    return (\r\n        <StatusBlock white={white ? 1 : 0}>\r\n            {light\r\n                ? (\r\n                    <IconContext.Provider value={iconStyle}>\r\n                        <FaCircle />\r\n                    </IconContext.Provider>\r\n                )\r\n                : (\r\n                    <IconContext.Provider value={{ style: { ...iconStyle.style, color: 'black' }}}>\r\n                        <FaRegCircle />\r\n                    </IconContext.Provider>\r\n                )\r\n            }\r\n            <NameBlock>\r\n                {name}\r\n            </NameBlock>\r\n        </StatusBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Status);","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Status from '../../components/content/Status';\r\n\r\nconst StatusContainer = ({ black, white }) => {\r\n    const { blackNick, whiteNick, participant } = useSelector(({ game }) => ({\r\n        blackNick: game.black,\r\n        whiteNick: game.white,\r\n        participant: game.participant,\r\n    }));\r\n\r\n    const participantSet = new Set(participant);\r\n    const light = (white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick));\r\n    const name = (white && whiteNick) || (black && blackNick);\r\n\r\n    return (\r\n        <Status\r\n            light={light}\r\n            name={name}\r\n            white={white}\r\n        />\r\n    )\r\n};\r\n\r\nexport default StatusContainer;","import React, { useRef, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { IconContext } from 'react-icons';\r\nimport { IoIosArrowRoundForward } from 'react-icons/io';\r\nimport { pieceMapper } from '../../lib/base/pieceConverter';\r\n\r\nconst PieceMoveListHiddenBlock = styled.div`\r\n    height: 270px;\r\n    width: 100%;\r\n    overflow: hidden;\r\n`\r\n\r\nconst PieceMoveListBlock = styled.div`\r\n    height: 270px;\r\n    width: 100%;\r\n    overflow-y: overlay;\r\n    padding-right: 20px;\r\n`;\r\n\r\nconst PieceMoveBlock = styled.div`\r\n    width: 100%;\r\n    height: 30px;\r\n    background-color: white;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n\r\n    &:first-child {\r\n        margin-top: 30px;\r\n    }\r\n`;\r\n\r\nconst moveConverter = ({x, y}) => {\r\n    return String.fromCharCode(97 + x) + (8 - y);\r\n}\r\n\r\nconst MoveBlock = styled.div`\r\n    width: 80%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    &:hover {\r\n        background-color: rgb(209, 228, 246);\r\n    }\r\n`;\r\n\r\nconst TextBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 20%;\r\n    font-size: 18px;\r\n`\r\n\r\nconst IndexBlock = styled.div`\r\n    width: 20%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-size: 18px;\r\n    background-color: rgb(247, 246, 245);\r\n`\r\n\r\nconst PieceMove = React.memo(({ move, index, onClickBlock }) => {\r\n    console.dir('PieceMove');\r\n    console.dir(move);\r\n    const PrevComponent = pieceMapper[move.prevPiece.piece];\r\n    const prevStyle = {\r\n        color: move.prevPiece.owner,\r\n        style: {\r\n            width: '10%',\r\n            filter: `drop-shadow(1px 1px 1px ${move.prevPiece.owner === 'white' ? 'black' : 'white'})`,\r\n        }\r\n    };\r\n\r\n    const prevPiece = (\r\n        <IconContext.Provider value={prevStyle}>\r\n            <PrevComponent />\r\n        </IconContext.Provider>\r\n    )\r\n\r\n    let NextComponent, nextStyle;\r\n\r\n    let nextPiece = (\r\n        <div style={{ width: '10%' }}/>\r\n    )\r\n\r\n    if(move.nextPiece.piece) {\r\n        NextComponent = pieceMapper[move.nextPiece.piece];\r\n        nextStyle = {\r\n            color: move.nextPiece.owner,\r\n            style: {\r\n                width: '10%',\r\n                filter: `drop-shadow(1px 1px 1px ${move.nextPiece.owner === 'white' ? 'black' : 'white'})`,\r\n            }\r\n        };\r\n        nextPiece = (\r\n            <IconContext.Provider value={nextStyle}>\r\n                <NextComponent />\r\n            </IconContext.Provider>\r\n        )\r\n    }\r\n\r\n    \r\n    return (\r\n        <PieceMoveBlock>\r\n            <IndexBlock>\r\n                {index + 1}\r\n            </IndexBlock>\r\n            <MoveBlock onClick={onClickBlock}>\r\n                {prevPiece}\r\n                <TextBlock>\r\n                    {moveConverter(move.prev)}\r\n                </TextBlock>\r\n                <IconContext.Provider value={{ style: { color: 'rgb(169,169,169)' }}}>\r\n                    <IoIosArrowRoundForward />\r\n                </IconContext.Provider>\r\n                <TextBlock>\r\n                    {moveConverter(move.next)}\r\n                </TextBlock>\r\n                {nextPiece}\r\n            </MoveBlock>\r\n        </PieceMoveBlock>\r\n    )\r\n});\r\n\r\n\r\nconst PieceMoveList = ({ pieceMove, onClickBlock }) => {\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current.scrollTop = ref.current.scrollHeight;\r\n    }, [pieceMove]);\r\n\r\n    return (\r\n        <PieceMoveListHiddenBlock>\r\n            <PieceMoveListBlock ref={ref}>\r\n                {pieceMove.map((move, index) => (\r\n                    <PieceMove \r\n                        onClick={onClickBlock}\r\n                        move={move}\r\n                        index={index}\r\n                    />\r\n                ))}\r\n            </PieceMoveListBlock>\r\n        </PieceMoveListHiddenBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(PieceMoveList);","import React, { useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport PieceMoveList from '../../components/content/PieceMoveList';\r\n\r\nconst PieceMoveListContainer = () => {\r\n    \r\n    // const dispatch = useDispatch();\r\n\r\n    const { pieceMove } = useSelector(({ record }) => ({\r\n        pieceMove: record.pieceMove,\r\n    }));\r\n\r\n    const onClickBlock = useCallback(() => {\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <PieceMoveList\r\n            onClickBlock = {onClickBlock}\r\n            pieceMove={pieceMove}\r\n        />\r\n    )\r\n};\r\n\r\nexport default PieceMoveListContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst TimeLineBlock = styled.div`\r\n    position: absolute;\r\n    height: 2px;\r\n    background-color: green;\r\n    transition-duration: 1s;\r\n    transition-timing-function: linear;\r\n\r\n    width: ${props => (props.time * 100) + '%'};\r\n    ${props => props.time <= 0.1 && css`\r\n        background-color: red;\r\n    `}\r\n`;\r\n\r\nconst TimeLine = ({ time }) => {\r\n    return (\r\n        <TimeLineBlock time={time}/>\r\n    )\r\n};\r\n\r\nexport default React.memo(TimeLine);","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\n\r\nconst CONNECT_WEBSOCKET = 'record/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'record/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_VALUE = 'record/INITIALIZE_VALUE';\r\nconst INITIALIZE_SOCKET = 'record/INITIALIZE_SOCKET';\r\nconst CHANGE_VALUE = 'record/CHANGE_VALUE';\r\nconst UPDATE_VALUE = 'record/UPDATE_VALUE';\r\nconst CLEAR_VALUE = 'record/CLEAR_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\r\nexport const updateValue = createAction(UPDATE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\n\r\nexport const updateValueThunk = params => ( dispatch, getState ) => {\r\n    const { record } = getState();\r\n    let newRecord = { ...record };\r\n    Object.keys(params).forEach(key => {\r\n        if(typeof params[key] === 'object') {\r\n            newRecord = {\r\n                ...newRecord,\r\n                [key]: [\r\n                    ...newRecord[key],\r\n                    params[key],\r\n                ]\r\n            };\r\n        }\r\n    });\r\n\r\n    dispatch(updateValue({ record: newRecord }));\r\n};\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const key = action.payload;\r\n    \r\n    const query = `key=${key}`;\r\n\r\n    const socketTask = yield fork(connectNamespace, { \r\n        url: '/record',\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue,\r\n        updateValue: updateValueThunk,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* recordSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    error: null,\r\n    startTime: null,\r\n    endTime: null,\r\n    blackTime: null,\r\n    whiteTime: null,\r\n    blackMaxTime: null,\r\n    whiteMaxTime: null,\r\n    whiteRatio: 0,\r\n    blackRatio: 0,\r\n    pieceMove: [],\r\n}\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\r\n        ...state,\r\n        ...rest,\r\n    }),\r\n    [CHANGE_VALUE]: (state, { payload: { type, ...rest } }) => ({\r\n        ...state,\r\n        ...rest,\r\n    }),\r\n    [UPDATE_VALUE]: (state, { payload: { record } }) => ({\r\n        ...record,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n}, initialState);\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport TimeLine from '../../components/content/TimeLine';\r\nimport { clearValue } from '../../modules/record';\r\n\r\nconst TimeLineContainer = ({ white, black }) => {\r\n    const { whiteRatio, blackRatio, whiteNick, blackNick, participant } = useSelector(({ record, game }) => ({\r\n        whiteRatio: record.whiteRatio,\r\n        blackRatio: record.blackRatio,\r\n        whiteNick: game.white,\r\n        blackNick: game.black,\r\n        participant: game.participant,\r\n    }));\r\n    \r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearValue());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const participantSet = new Set(participant);\r\n    let time = 0;\r\n\r\n    if((white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick))) {\r\n        time = white ? whiteRatio : blackRatio;\r\n    }\r\n \r\n    time = Math.min(time, 1);\r\n\r\n    return (\r\n        <TimeLine\r\n            time={time}\r\n        />\r\n    )\r\n};\r\n\r\nexport default TimeLineContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { FaFastBackward, FaStepBackward, FaFastForward, FaStepForward } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons';\r\n\r\nconst UndoRedoBlock = styled.div`\r\n    position: absolute;\r\n    top: 300px;\r\n    display: flex;\r\n    width: 100%;\r\n    height: 30px;\r\n    background-color: rgb(247, 246, 245);\r\n    z-index: 10;\r\n    box-shadow: rgba(0, 0, 0, 0.14) 0px -2px 2px 0px, rgba(0, 0, 0, 0.2) 0px -3px 1px -2px, rgba(0, 0, 0, 0.12) 0px -1px 5px 0px;\r\n`;\r\n\r\nconst ButtonBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 25%;\r\n    height: 100%;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background-color: #D3D3D3;\r\n    }\r\n`;\r\n\r\nconst buttonStyle = {\r\n    style: {\r\n        color: '#4d4d4d',\r\n        width: '50%',\r\n        height: '50%',\r\n        backgroundColor: 'transparent'\r\n    }\r\n}\r\n\r\nconst UndoRedo = () => {\r\n    return (\r\n        <UndoRedoBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaFastBackward />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaStepBackward />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaStepForward />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaFastForward />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n        </UndoRedoBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(UndoRedo);","import React from 'react';\r\nimport UndoRedo from '../../components/content/UndoRedo';\r\n\r\nconst UndoRedoContainer = () => {\r\n    \r\n    return (\r\n        <UndoRedo />\r\n    )\r\n};\r\n\r\nexport default UndoRedoContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { FaExchangeAlt, FaFlag, FaHandRock } from 'react-icons/fa';\r\nimport { TiArrowBack } from 'react-icons/ti';\r\nimport { IconContext } from 'react-icons';\r\n\r\nconst UtilBlock = styled.div`\r\n    position: absolute;\r\n    top: 30px;\r\n    display: flex;\r\n    width: 100%;\r\n    height: 30px;\r\n    z-index: 10;\r\n    background-color: rgb(247, 246, 245);\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst ButtonBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 25%;\r\n    height: 100%;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background-color: #D3D3D3;\r\n    }\r\n`;\r\n\r\nconst buttonStyle = {\r\n    style: {\r\n        color: '#4d4d4d',\r\n        width: '50%',\r\n        height: '50%',\r\n        backgroundColor: 'transparent'\r\n    }\r\n};\r\n\r\nconst Util = () => {\r\n    return (\r\n        <UtilBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={{ style: { ...buttonStyle.style, width: '60%', height:'60%' }} }>\r\n                    <FaExchangeAlt />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={{ style: { ...buttonStyle.style, width: '80%', height:'80%' }} }>\r\n                    <TiArrowBack />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaHandRock />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaFlag />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n        </UtilBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Util);","import React from 'react';\r\nimport Util from '../../components/content/Util';\r\n\r\nconst UtilContainer = () => {\r\n    return (\r\n        <Util />\r\n    )\r\n};\r\n\r\nexport default UtilContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport TimerContainer from '../../containers/content/TimerContainer';\r\nimport StatusContainer from '../../containers/content/StatusContainer';\r\nimport PieceMoveListContainer from '../../containers/content/PieceMoveListContainer';\r\nimport TimeLineContainer from '../../containers/content/TimeLineContainer';\r\nimport UndoRedoContainer from '../../containers/content/UndoRedoContainer';\r\nimport UtilContainer from '../../containers/content/UtilContainer';\r\n\r\nconst RecordBlock = styled.div`\r\n    position: relative;\r\n    width: 100%;\r\n    height: 360px;\r\n    background-color: white;\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst Record = () => {\r\n    return (\r\n        <>\r\n            <TimerContainer black />\r\n            <RecordBlock>\r\n                <TimeLineContainer black />\r\n                <StatusContainer black />\r\n                <UtilContainer />\r\n                <PieceMoveListContainer />\r\n                <UndoRedoContainer />\r\n                <StatusContainer white />\r\n                <TimeLineContainer white />\r\n            </RecordBlock>\r\n            <TimerContainer white />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default React.memo(Record);","import React from 'react';\r\nimport Record from '../../components/content/Record';\r\n\r\nconst RecordContainer = () => {\r\n\r\n    return (\r\n        <Record />\r\n    );\r\n};\r\n\r\nexport default RecordContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport CanvasContainer from '../../containers/content/CanvasContainer';\r\nimport ChatContainer from '../../containers/content/ChatContainer';\r\nimport RecordContainer from '../../containers/content/RecordContainer';\r\n\r\nconst GameLayoutBlock = styled.div`\r\n    height: 800px;\r\n    width: 100%;\r\n    background-color: rgb(237, 235, 233);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nconst sideBlockStyle = css`\r\n    height: 90%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    width: 20%;\r\n`;\r\n\r\nconst LeftSideBlock = styled.div`\r\n    ${sideBlockStyle}\r\n    margin-right: 1%;\r\n`;\r\n\r\nconst RightSideBlock = styled.div`\r\n    ${sideBlockStyle}\r\n    margin-left: 1%;\r\n`\r\n\r\nconst GameLayout = props => {\r\n    return (\r\n        <GameLayoutBlock>          \r\n            <LeftSideBlock>\r\n                <ChatContainer />\r\n            </LeftSideBlock>\r\n            <CanvasContainer {...props} />\r\n            <RightSideBlock>\r\n                <RecordContainer />\r\n            </RightSideBlock>\r\n        </GameLayoutBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(GameLayout);","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\n\r\nconst CONNECT_WEBSOCKET = 'game/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'game/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_VALUE = 'game/INITIALIZE_VALUE';\r\nconst INITIALIZE_SOCKET = 'game/INITIALIZE_SOCKET';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const key = action.payload;\r\n    \r\n    const query = `key=${key}`;\r\n\r\n    const socketTask = yield fork(connectNamespace, { \r\n        url: '/game',\r\n        initializeSocket,\r\n        initializeValue,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* gameSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    error: null,\r\n    participant: [],\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest }}) => ({\r\n        ...state,\r\n        ...rest,\r\n    }),\r\n}, initialState);","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport GameLayout from '../../components/common/GameLayout';\r\nimport { setSessionThunk } from '../../modules/auth';\r\nimport { connectWebsocket as connectAuthWebsocket } from '../../modules/auth';\r\nimport { connectWebsocket as connectGameWebsocket } from '../../modules/game';\r\nimport { connectWebsocket as connectChatWebsocket } from '../../modules/chat';\r\nimport { connectWebsocket as connectCanvasWebsocket} from '../../modules/canvas';\r\nimport { connectWebsocket as connectRecordWebsocket } from '../../modules/record';\r\n\r\nimport { disconnectWebsocket as disconnectAuthWebsocket } from '../../modules/auth';\r\nimport { disconnectWebsocket as disconnectGameWebsocket } from '../../modules/game';\r\nimport { disconnectWebsocket as disconnectChatWebsocket } from '../../modules/chat';\r\nimport { disconnectWebsocket as disconnectCanvasWebsocket } from '../../modules/canvas';\r\nimport { disconnectWebsocket as disconnectRecordWebsocket } from '../../modules/record';\r\n\r\nimport useAsync from '../../lib/hook/useAsync';\r\n\r\nconst GameLayoutContainer = ({ gameId }) => {\r\n    const dispatch = useDispatch();\r\n\r\n    const connection = async () => {\r\n        await dispatch(setSessionThunk());\r\n      \r\n        dispatch(disconnectAuthWebsocket());\r\n        dispatch(disconnectGameWebsocket());\r\n        dispatch(disconnectChatWebsocket());\r\n        dispatch(disconnectCanvasWebsocket());\r\n        dispatch(disconnectRecordWebsocket());\r\n        setTimeout(() => {\r\n            dispatch(connectAuthWebsocket(gameId));\r\n            dispatch(connectGameWebsocket(gameId));\r\n            dispatch(connectChatWebsocket(gameId));\r\n            dispatch(connectCanvasWebsocket(gameId));\r\n            dispatch(connectRecordWebsocket(gameId));\r\n        }, 0);\r\n        return true;\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(disconnectAuthWebsocket());\r\n            dispatch(disconnectGameWebsocket());\r\n            dispatch(disconnectChatWebsocket());\r\n            dispatch(disconnectCanvasWebsocket());\r\n            dispatch(disconnectRecordWebsocket());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const [state] = useAsync(connection, [ dispatch, gameId ]);\r\n\r\n    const { loading, data, error } = state;\r\n\r\n    if(loading) return null;\r\n    if(error) return null;\r\n    if(data) {\r\n        return (\r\n            <GameLayout />\r\n        )\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default GameLayoutContainer;","import React, { useEffect } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport GameLayoutContainer from '../containers/common/GameLayoutContainer';\r\n\r\nconst GamePage = ({ history, match }) => {\r\n    useEffect(() => {\r\n        if(!match.params.id) {\r\n            history.push('/');\r\n        }\r\n    }, [history, match]);\r\n\r\n    if(!match.params.id) return null;\r\n    const { id } = match.params;\r\n    if(!id) return null;\r\n    \r\n    return (\r\n        <>\r\n            <HeaderContainer />\r\n            <GameLayoutContainer gameId={id}/>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default withRouter(GamePage);","import React from 'react';\r\nimport RecordContainer from '../containers/content/RecordContainer'\r\n\r\nconst RecordPage = () => {\r\n    return (\r\n        <RecordContainer />\r\n    );\r\n};\r\n\r\nexport default RecordPage;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst CommunityTableRowBlock = styled.tr`\r\n    width: 100%;\r\n    height: 100px;\r\n    &:nth-child(odd) {\r\n        background: #F7F6F4;\r\n    }\r\n`;\r\n\r\nconst CommunityTableRow = ( {title, count, comments, time}) => {\r\n    return (\r\n        <CommunityTableRowBlock>\r\n            <td>{title}</td>\r\n            <td>{count}</td>\r\n            <td>{comments}</td>\r\n            <td>{time}</td>\r\n        </CommunityTableRowBlock>\r\n    );\r\n};\r\n\r\nexport default CommunityTableRow;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport CommunityTableRow from './CommunityTableRow';\r\n\r\nconst CommunityLayoutBlock = styled.div`\r\n    width: 100%;\r\n    height: 1000px;\r\n    background-color:#EDEBE9;\r\n    display: flex;\r\n    justify-content: center;\r\n    /* flex-direction: column; */\r\n`;\r\n\r\nconst CommunityMainBlcok = styled.main`\r\n    width: 80%;\r\n    height: 1000px;\r\n    background-color:lightblue;\r\n    display: flex;\r\n    flex-direction: column;\r\n`;\r\n\r\nconst CommunityHeaderBlock = styled.h1`\r\n    width: 100%;\r\n    height: 150px;\r\n    background-color: white;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin: 0px 0px 0px 0px;\r\n`;\r\n\r\nconst PageDivBlock = styled.div`\r\n    width: 100%;\r\n    height: 50px;\r\n    background-color: white;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nconst CommunityTableBlock = styled.table`\r\n    width: 100%;\r\n    height: 700px;\r\n    background-color: white;\r\n`;\r\n\r\nconst CommunityTheadBlock = styled.thead`\r\n    width: 100%;\r\n    background-color: #F1F1F1;\r\n`;\r\n\r\n\r\n\r\n\r\nconst CommunityLayout = () => {\r\n    const tableRows = [\r\n        {\r\n            title: '가즈아 가즈아 가즈아 가즈아1',\r\n            count: 250,\r\n            comments: 7,\r\n            time: '1시간 전'\r\n        },\r\n        {\r\n            title: '가즈아 가즈아 가즈아 가즈아2',\r\n            count: 251,\r\n            comments: 8,\r\n            time: '2시간 전'\r\n        },\r\n        {\r\n            title: '가즈아 가즈아 가즈아 가즈아3',\r\n            count: 252,\r\n            comments: 9,\r\n            time: '3시간 전'\r\n        },\r\n        {\r\n            title: '가즈아 가즈아 가즈아 가즈아4',\r\n            count: 253,\r\n            comments: 10,\r\n            time: '4시간 전'\r\n        }\r\n    ];\r\n    return (\r\n        <CommunityLayoutBlock>\r\n            <CommunityMainBlcok>\r\n                <CommunityHeaderBlock>\r\n                    General Chess Discussion\r\n                </CommunityHeaderBlock>\r\n                <PageDivBlock>\r\n                    &lt; 1 2 3 4 ... &gt;\r\n                </PageDivBlock>\r\n                <CommunityTableBlock>  \r\n                    <CommunityTheadBlock>\r\n                        <tr height='60px'>\r\n                            <th width='70%'>\r\n                            </th>\r\n                            <th>\r\n                                조회\r\n                            </th>\r\n                            <th>\r\n                                답글\r\n                            </th>\r\n                            <th>\r\n                                최근 글\r\n                            </th>\r\n                        </tr>\r\n                    </CommunityTheadBlock>\r\n                    {tableRows.map(tableRow => (\r\n                        <CommunityTableRow title={tableRow.title} count={tableRow.count} comments={tableRow.comments} time={tableRow.time} />\r\n                    ))}\r\n                </CommunityTableBlock>\r\n                <PageDivBlock>\r\n                    &lt; 1 2 3 4 ... &gt;\r\n                </PageDivBlock>\r\n\r\n            </CommunityMainBlcok>\r\n        </CommunityLayoutBlock>\r\n    )\r\n};\r\n\r\nexport default CommunityLayout;","import React from 'react';\r\nimport CommunityLayout from '../../components/community/CommunityLayout';\r\n\r\nconst CommunityLayoutContainer = () => {\r\n    return (\r\n        <CommunityLayout />\r\n    );\r\n};\r\n\r\nexport default CommunityLayoutContainer;","import React from 'react';\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport CommunityLayoutContainer from '../containers/community/CommunityLayoutContainer';\r\n\r\nconst CommunityPage = () => {\r\n\r\n    return (\r\n        <>\r\n            <HeaderContainer />\r\n            <CommunityLayoutContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default CommunityPage;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { IoMdMail } from 'react-icons/io';\r\nimport { FaLock } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst AuthFrameBlock = styled.form`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 800px;\r\n`;\r\n\r\nconst AuthFormBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    width: 30%;\r\n    height: 400px;\r\n    background-color: rgba(255, 255, 255);\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst TitleBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    font-size: 20px;\r\n    height: 100px;\r\n    text-shadow: 2px 2px 2px rgba(0,0,0,0.14);\r\n`;\r\n\r\nconst InputFrameBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 100%;\r\n    height: 150px;\r\n`;\r\n\r\nconst InputFormBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    padding-left: 1%;\r\n    width: 60%;\r\n\r\n    &+& {\r\n        margin-top: 10px;\r\n    }\r\n`\r\n\r\nconst inputStyle = css`\r\n    outline: none;\r\n    border: none;\r\n    height: 40px;\r\n    width: 80%;\r\n    padding-left: 5%;\r\n`;\r\n\r\nconst EmailInputBlock = styled.input`\r\n    ${inputStyle}\r\n`\r\n\r\nconst PasswordInputBlock = styled.input`\r\n    ${inputStyle}\r\n`;\r\n\r\nconst OptionFormBlock = styled.div`\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-top: 10px;\r\n    width: 60%;\r\n    height: 20px;\r\n`;\r\n\r\nconst SaveInputFormBlock = styled.div`\r\n    display: flex;\r\n    align-content: center;\r\n    width: 30%;\r\n    height: 100%;\r\n`;\r\n\r\nconst SaveInputBlock = styled.input`\r\n    height: 100%;\r\n    outline: none;\r\n    margin: 0px;\r\n`;\r\n\r\nconst SaveInputTextBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n    font-size: 10px;\r\n    color: rgb(0, 0, 0, 0.5);\r\n    cursor: pointer;\r\n    margin-left: 5px;\r\n`;\r\n\r\nconst ForgetBlock = styled.div`\r\n    font-size: 10px;\r\n    color: rgb(0, 0, 0, 0.5);\r\n    cursor: pointer;\r\n`;\r\n\r\nconst SubmitFrameBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 150px;\r\n`;\r\n\r\nconst SubmitBlock = styled.button`\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    border: none;\r\n    outline: none;\r\n    width: 30%;\r\n    cursor: pointer;\r\n    height: 40px;\r\n\r\n    &:hover, :active {\r\n        background-color: rgb(0, 0, 0, 0.05);\r\n    }\r\n`;\r\n\r\nconst CreateFormBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-top: 10px;\r\n    height: 40px;\r\n`;\r\n\r\nconst CreateBlock = styled.div`\r\n    color: rgb(0, 0, 0, 0.5);\r\n    font-size: 10px;\r\n`;\r\n\r\nconst CreateLinkBlock = styled(Link)`\r\n    outline: none;\r\n    border: none;\r\n    font-size: 10px;\r\n    color: black;\r\n    text-decoration: none;\r\n    cursor: pointer;\r\n    margin-left: 5px;\r\n`;\r\n\r\nconst AuthForm = ({ login, register, form, onSubmit, onChange }) => {\r\n    return (\r\n        <AuthFrameBlock\r\n            autoComplete='off'\r\n            onSubmit={onSubmit}\r\n        >\r\n            <AuthFormBlock>\r\n                <TitleBlock>\r\n                    { login ? 'Sign In' : ( register ? 'Sign Up' : null ) }\r\n                </TitleBlock>\r\n                <InputFrameBlock>\r\n                    <InputFormBlock>\r\n                        <IconContext.Provider value={{ style: { width: '20px', height: '20px' } }}>\r\n                            <IoMdMail />\r\n                        </IconContext.Provider>\r\n                        <EmailInputBlock\r\n                            name='username'\r\n                            placeholder='Email'\r\n                            onChange={onChange}\r\n                            value={form.username}\r\n                        />    \r\n                    </InputFormBlock>\r\n                    <InputFormBlock>\r\n                        <IconContext.Provider value={{ style: { width: '20px', height: '20px' } }}>\r\n                            <FaLock />\r\n                        </IconContext.Provider>\r\n                        <PasswordInputBlock\r\n                            type='password'\r\n                            name='password'\r\n                            placeholder='Password'\r\n                            onChange={onChange}\r\n                            value={form.password}\r\n                        />\r\n                    </InputFormBlock>\r\n                    {register ? (\r\n                        <InputFormBlock>\r\n                            <IconContext.Provider value={{ style: { width: '20px', height: '20px' } }}>\r\n                                <FaLock />\r\n                            </IconContext.Provider>\r\n                            <PasswordInputBlock\r\n                                type='password'\r\n                                name='passwordConfirm'\r\n                                placeholder='Password Confirm'\r\n                                onChange={onChange}\r\n                                value={form.passwordConfirm}\r\n                            />\r\n                        </InputFormBlock>\r\n                    ): null}\r\n                    {login ? (\r\n                        <OptionFormBlock>\r\n                            <SaveInputFormBlock>\r\n                                <SaveInputBlock\r\n                                    type='checkbox'\r\n                                />\r\n                                <SaveInputTextBlock>\r\n                                    Remember Me\r\n                                </SaveInputTextBlock>\r\n                            </SaveInputFormBlock>\r\n                            <ForgetBlock>\r\n                                Forget password?    \r\n                            </ForgetBlock>\r\n                        </OptionFormBlock>\r\n                    ): null}\r\n                </InputFrameBlock>\r\n                <SubmitFrameBlock>\r\n                    <SubmitBlock\r\n                        type='submit'\r\n                    >\r\n                        Submit\r\n                    </SubmitBlock>\r\n                    {login ? (\r\n                        <CreateFormBlock>\r\n                            <CreateBlock>\r\n                                Don't have an account?\r\n                            </CreateBlock>\r\n                            <CreateLinkBlock to='/register'>\r\n                                Create\r\n                            </CreateLinkBlock>\r\n                        </CreateFormBlock>\r\n                    ) : (\r\n                        <CreateFormBlock>\r\n                            <CreateBlock>\r\n                                Don't have an account?\r\n                            </CreateBlock>\r\n                            <CreateLinkBlock to='/register'>\r\n                                Create\r\n                            </CreateLinkBlock>\r\n                        </CreateFormBlock>\r\n                    )}\r\n                </SubmitFrameBlock>\r\n            </AuthFormBlock>\r\n        </AuthFrameBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(AuthForm);","import React, { useCallback, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { loginThunk, changeField, clearField } from '../../modules/auth';\r\nimport AuthForm from '../../components/auth/AuthForm';\r\n\r\nconst LoginContainer = ({ history }) => {\r\n    const { form, auth, authError } = useSelector(({ auth }) => ({\r\n        form: auth.login,\r\n        auth: auth.auth,\r\n        authError: auth.authError,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onChange = useCallback(e => {\r\n        const { name, value } = e.target;\r\n        dispatch(changeField({\r\n            form: 'login',\r\n            key: name,\r\n            value,\r\n        }));\r\n    }, [dispatch]);\r\n\r\n    const onSubmit = useCallback(e => {\r\n        e.preventDefault();\r\n\r\n        const { username, password } = form;\r\n        dispatch(loginThunk({ username, password }));\r\n    }, [dispatch, form]);\r\n\r\n    useEffect(() => {\r\n        if(auth) {\r\n            history.push('/');\r\n        }\r\n    }, [history, auth]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearField({ form: 'login' }));\r\n        }\r\n    }, [dispatch]);\r\n    \r\n    return (\r\n        <AuthForm\r\n            login\r\n            onSubmit={onSubmit}\r\n            onChange={onChange}\r\n            form={form}\r\n        />\r\n    )\r\n};\r\n\r\nexport default withRouter(LoginContainer);","import React from 'react';\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport LoginContainer from '../containers/auth/LoginContainer';\r\n\r\nconst LoginPage = () => {\r\n    return (\r\n        <>\r\n            <HeaderContainer />\r\n            <LoginContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default LoginPage;","import React, { useCallback, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport AuthForm from '../../components/auth/AuthForm';\r\nimport { registerThunk, changeField, clearField } from '../../modules/auth';\r\n\r\nconst RegisterContainer = ({ history }) => {\r\n    const { form, auth, authError } = useSelector(({ auth }) => ({\r\n        form: auth.register,\r\n        auth: auth.auth,\r\n        authError: auth.authError,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onChange = useCallback(e => {\r\n        const { name, value } = e.target;\r\n        dispatch(changeField({\r\n            form: 'register',\r\n            key: name,\r\n            value,\r\n        }));\r\n    }, [dispatch]);\r\n\r\n    const onSubmit = useCallback(e => {\r\n        e.preventDefault();\r\n        const { username, password } = form;\r\n\r\n        dispatch(registerThunk({ username, password }));\r\n    }, [dispatch, form]);\r\n\r\n    useEffect(() => {\r\n        if(auth) {\r\n            history.push('/');\r\n        }\r\n    }, [history, auth])\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearField({ form: 'register' }));\r\n        };\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <AuthForm \r\n            register\r\n            onSubmit={onSubmit}\r\n            onChange={onChange}\r\n            form={form}\r\n        />\r\n    )\r\n};\r\n\r\nexport default withRouter(RegisterContainer);","import React from 'react';\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport RegisterContainer from '../containers/auth/RegisterContainer';\r\n\r\nconst RegisterPage = () => {\r\n\r\n    return (\r\n        <>\r\n            <HeaderContainer />\r\n            <RegisterContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default RegisterPage;","import React from 'react';\r\nimport MainPage from './pages/MainPage';\r\nimport GamePage from './pages/GamePage';\r\nimport RecordPage from './pages/RecordPage';\r\nimport CommunityPage from './pages/CommunityPage';\r\nimport LoginPage from './pages/LoginPage';\r\nimport RegisterPage from './pages/RegisterPage';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\n\r\nconst ErrorPageDiv = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 200px;\r\n  font-size: 50px;\r\n`;\r\n\r\n\r\nconst App = () => {\r\n  return (\r\n    <>\r\n      <Switch>\r\n        <Route component={MainPage} path='/' exact />\r\n        <Route component={GamePage} path='/game/:id' exact />\r\n        <Route component={RecordPage} path='/record' exact />\r\n        <Route component={CommunityPage} path='/community' exact />\r\n        <Route component={LoginPage} path='/login' exact />\r\n        <Route component={RegisterPage} path='/register' exact />\r\n        <Route \r\n          render={({ location }) => (\r\n            <ErrorPageDiv>\r\n              <h1>404 Error</h1>\r\n              <p>요청한 페이지를 찾을 수 없습니다.</p>\r\n            </ErrorPageDiv>\r\n          )}\r\n          />\r\n      </Switch>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { combineReducers } from 'redux';\r\nimport { all } from 'redux-saga/effects';\r\nimport room, { roomSaga } from './room';\r\nimport auth, { authSaga } from './auth';\r\nimport game, { gameSaga } from './game';\r\nimport canvas, { canvasSaga } from './canvas';\r\nimport chat, { chatSaga } from './chat';\r\nimport record, { recordSaga }  from './record';\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    room,\r\n    auth,\r\n    game,\r\n    canvas,\r\n    chat,\r\n    record,\r\n})\r\n\r\n\r\nexport function* rootSaga() {\r\n    yield all([ roomSaga(), authSaga(), gameSaga(), canvasSaga(), chatSaga(), recordSaga() ]);\r\n};\r\n\r\nexport default rootReducer;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport ReduxThunk from 'redux-thunk';\nimport rootReducer, { rootSaga } from './modules';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport createSagaMiddleware from 'redux-saga';\n\nconst sagaMiddleware = createSagaMiddleware();\nconst store = createStore(\n    rootReducer,\n    composeWithDevTools(applyMiddleware(ReduxThunk, sagaMiddleware))\n)\n\nsagaMiddleware.run(rootSaga);\n\nReactDOM.render(\n    <Provider store={store}>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </Provider>\n    ,document.getElementById('root')\n);\n\nserviceWorker.unregister();"],"sourceRoot":""}