{"version":3,"sources":["components/common/Header.js","lib/websocket/websocket.js","lib/createRequestThunk.js","lib/storage/storage.js","modules/sessionAuth.js","lib/api/auth.js","containers/common/HeaderContainer.js","lib/hook/useAsync.js","components/main/MainLayout.js","containers/main/MainLayoutContainer.js","pages/MainPage.js","components/auth/AuthForm.js","containers/auth/LoginContainer.js","pages/LoginPage.js","containers/auth/RegisterContainer.js","pages/RegisterPage.js","lib/base/board.js","lib/base/rules.js","lib/base/validation.js","modules/canvas.js","lib/api/canvas.js","lib/base/pieceConverter.js","components/gameplay/Canvas.js","containers/gameplay/CanvasContainer.js","components/game/CanvasWrapper.js","containers/game/CanvasWapperContainer.js","components/game/GridBox.js","containers/game/GridBoxContainer.js","components/game/GridLayout.js","containers/game/GridLayoutContainer.js","components/game/Summary.js","containers/game/SummaryContainer.js","containers/HOC/CheckOutsideOfComponent.js","components/game/Selection.js","modules/create.js","containers/game/SelectionContainer.js","components/game/Slider.js","containers/game/SliderContainer.js","components/game/Icon.js","containers/game/IconContainer.js","components/game/Creation.js","modules/games.js","lib/api/games.js","containers/game/CreationContainer.js","components/game/GameLayout.js","containers/game/GameLayoutContainer.js","pages/GamePage.js","modules/chat.js","lib/api/chat.js","components/gameplay/Chat.js","containers/gameplay/ChatContainer.js","components/gameplay/Timer.js","containers/gameplay/TimerContainer.js","components/gameplay/Status.js","containers/gameplay/StatusContainer.js","components/gameplay/PieceMoveList.js","containers/gameplay/PieceMoveListContainer.js","components/gameplay/TimeLine.js","containers/gameplay/TimeLineContainer.js","components/gameplay/UndoRedo.js","containers/gameplay/UndoRedoContainer.js","components/gameplay/Util.js","modules/record.js","containers/gameplay/UtilContainer.js","components/gameplay/Record.js","containers/gameplay/RecordContainer.js","components/gameplay/GamePlayLayout.js","modules/socketAuth.js","modules/game.js","containers/gameplay/GamePlayLayoutContainer.js","pages/GamePlayPage.js","components/community/testItems.js","components/community/CommunityTableRow.js","components/community/CommunityHeader.js","components/community/CommunityFooter.js","components/community/CommunityContent.js","components/community/CommunityLayout.js","containers/community/CommunityLayoutContainer.js","pages/CommunityPage.js","App.js","modules/index.js","serviceWorker.js","components/common/FixSize.js","index.js"],"names":["HeaderBlock","styled","div","titleStyle","css","TitleBlock","Link","TitleFadeBlock","ControllBlock","GroupBlock","TabBlock","TabLinkBlock","props","hidden","Tab","to","children","AuthBlock","UserWelcomeBlock","React","memo","username","onRecord","onLogout","onLogin","tempAuth","auth","nickname","onClick","createEventChannel","connectNamespace","io","eventChannel","emit","on","socket","type","id","message","console","dir","close","params","url","initializeSocket","initializeValue","changeValue","updateValue","clearValue","query","SocketIo","reconnection","secure","call","channel","take","put","cancelled","createRequestActionTypes","createRequestThunk","request","SUCCESS","FAILURE","dispatch","a","async","response","payload","data","error","setLocalStorage","rest","Object","keys","forEach","key","localStorage","setItem","JSON","stringify","e","getLocalStorage","parse","getItem","removeLocalStorage","removeItem","clearLocalStorage","clear","connectWebsocketSaga","sessionAuthSaga","CONNECT_WEBSOCKET","DISCONNECT_WEBSOCKET","connectWebsocket","createAction","disconnectWebsocket","SET_SESSION","SET_SESSION_SUCCESS","SET_SESSION_FAILURE","setSessionThunk","axios","get","LOGIN","LOGIN_SUCCESS","LOGIN_FAILURE","REGISTER","REGISTER_SUCCESS","REGISTER_FAILURE","LOGOUT","LOGOUT_SUCCESS","LOGOUT_FAILURE","CHECK","CHECK_SUCCESS","CHECK_FAILURE","loginThunk","password","post","registerThunk","logoutThunk","checkThunk","changeField","clearField","clearSpecificField","fork","socketTask","cancel","takeEvery","initialState","authError","login","register","passwordConfirm","handleActions","state","form","value","produce","draft","withRouter","history","useSelector","sessionAuth","useDispatch","useCallback","getState","alert","push","useEffect","reducer","action","loading","Error","useAsync","callback","deps","useReducer","fetchData","MainLayoutBlock","MainLayout","MainLayoutContainer","MainPage","AuthFrameBlock","AuthFormBlock","InputFrameBlock","InputFormBlock","blink","inputStyle","EmailInputBlock","input","PasswordInputBlock","OptionFormBlock","SaveInputFormBlock","SaveInputBlock","SaveInputTextBlock","ForgetBlock","SubmitFrameBlock","SubmitBlock","button","CreateFormBlock","CreateBlock","CreateButtonBlock","ErrorBlock","onSubmit","onChange","onRegister","ref","useRef","tag","current","focus","autoComplete","autoCorrect","autoCapitalize","spellCheck","bind","count","Provider","style","width","height","cursor","name","placeholder","el","useState","setError","target","prevState","preventDefault","nextError","reduce","acc","filter","param","schema","Joi","object","string","max","email","minDomainAtoms","required","min","result","validate","abortEarly","details","detail","path","length","errorMention","LoginPage","any","valid","RegisterPage","board","covered","rules","pawn","move","dy","dx","except","piece","y","x","owner","knight","king","enemy","dirty","coveredAxisBundle","checkPlayersEveryMove","i","axis","bishop","rook","queen","player","castling","j","coveredAxis","checkCovered","inform","cur","flatMap","counter","coveredArr","canvasSaga","initializeBlocked","changeBlocked","SET_MOVE_PIECE","SET_MOVE_PIECE_SUCCESS","SET_MOVE_PIECE_FAILURE","setMovePieceThunk","updateReverseBoard","prevReverseBoard","nextOriginBoard","nextReverseBoard","reverseBoard","_","cloneDeep","reverse","row","makeReverseBoard","nextPiece","prevPiece","every","changeValueThunk","prev","next","canvas","role","socketAuth","turn","game","blocked","cell","clearBoard","genClearBoard","tracked","pieceStore","clicked","arr","leng","pass","popedCell","newCell","splice","reversed","pieceMapper","GiChessPawn","GiChessKing","GiChessQueen","GiChessBishop","GiChessKnight","GiChessRook","GiPlainCircle","playerMapper","color","pieceConverter","cellNum","coveredCanvas","Component","capturedObject","opacity","styleObject","CanvasBlock","CanvasRowBlock","CanvasCellBlock","cellSize","CanvasRow","onClickCell","map","CanvasCell","prevProps","nextProps","CanvasContentBlock","CanvasContent","CanvasContainer","record","cy","cx","reversal","clickPieceThunk","servedBoard","CanvasWrapperBlock","UnClickableBlock","CanvasWrapperContainer","gameId","Promise","resolve","then","GridBoxBlock","BoxTitleBlock","BoxContentBlock","onMouseEnter","onMouseLeave","participant","setCanvas","GridRowBlock","GridLayoutFrameBlock","GridLayoutHiddenBlock","GridLayoutBlock","games","onGameClick","list","gridArr","rowSize","Math","floor","position","top","left","zIndex","GridLayoutContainer","SummaryContainer","CheckOutsideOfComponent","componentState","setComponentState","checkClickOutside","contains","document","addEventListener","removeEventListener","SelectionFrameBlock","NameBlock","SelectionBlock","SelecitonToolTipFrameBlock","SelectionToolTipBlock","kind","reference","onClickSelection","onClickOption","optionName","mapList","mode","modeList","defaultTime","extraTime","config","step","SelecitonContainer","create","SliderFrameBlock","SliderBoxBlock","SliderBlock","ValueBlock","substring","SliderContainer","IconBlock","checked","styleObj","IconContainer","white","black","CreationBlock","SelectionBundleBlock","SliderBundleBlock","IconBundleBlock","ConfirmFrameBlock","ConfirmBlock","SelectionContainer","gamesSaga","CREATE_GAME","CREATE_GAME_SUCCESS","CREATE_GAME_FAILURE","createGameThunk","GameLayoutBlock","sideBlockStyle","LeftSideBlock","RightSideBlock","GameLayoutContainer","GamePage","chatSaga","changeTextfield","initializeTextfield","SEND_MESSAGE","SEND_MESSAGE_SUCCESS","SEND_MESSAGE_FAILURE","sendMessageThunk","messages","text","ChatSubmitBlock","ChatFrameBlock","ChatHiddenBlock","ChatBlock","ChatFormBlock","ChatInputBlock","ChatButtonBlock","MessageBlock","BalloonBlock","Balloon","ballonBlock","Message","myName","scrollTop","scrollHeight","index","ChatContainer","chat","TimerBlock","time","TimeSliceBlock","ColonBlock","timeConverter","timeSlice","convertedTime","String","Timer","minute","second","undefined","TimerContainer","whiteTime","blackTime","start","order","StatusBlock","beneath","light","iconStyle","display","justifyContent","alignItems","StatusContainer","blackNick","whiteNick","participantSet","Set","has","PieceMoveListHiddenBlock","PieceMoveListBlock","PieceMoveBlock","moveConverter","fromCharCode","MoveBlock","TextBlock","IndexBlock","PieceMove","onClickBlock","NextComponent","nextStyle","PrevComponent","prevStyle","pieceMove","PieceMoveListContainer","TimeLineBlock","TimeLineContainer","whiteRatio","blackRatio","setTime","nextTime","UndoRedoBlock","ButtonBlock","buttonStyle","backgroundColor","UndoRedoContainer","UtilBlock","onReverse","recordSaga","changeReverse","updateValueThunk","newRecord","startTime","endTime","blackMaxTime","whiteMaxTime","UtilContainer","RecordBlock","RecordContainer","GamePlayLayoutBlock","socketAuthSaga","gameSaga","GamePlayLayoutContainer","gameKey","disconnectGameWebsocket","disconnectAuthWebsocket","disconnectChatWebsocket","disconnectCanvasWebsocket","disconnectRecordWebsocket","clearAuthValue","clearGameValue","tabKey","uuid","connectGameWebsocket","connectAuthWebsocket","connectChatWebsocket","connectCanvasWebsocket","connectRecordWebsocket","match","title","comments","CommunityTableRowBlock","CellBlock","CellTextBlock","CommunityTableHeader","CommunityTableHeaderBlock","CommunityTableFooter","SearchInputBlock","CommunityTableFooterBlock","TestBlock","CommunityLayoutBlock","CommunityMainBlock","main","CommunityNameBlock","h1","CommunityTableBlock","CommunityLayout","initItem","items","exact","render","CommunityHeader","tableRow","CommunityFooter","component","CommunityLayoutContainer","CommunityPage","ErrorPageDiv","App","GamePlayPage","location","rootSaga","all","rootReducer","combineReducers","Boolean","window","hostname","FixSizeBlock","FixSize","sagaMiddleware","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","ReduxThunk","run","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.021ae5ce.chunk.js","sourcesContent":["import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { Link } from 'react-router-dom';\n\nconst HeaderBlock = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 50px;\n`;\n\nconst titleStyle = css`\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n    height: 40px;\n    background-color: transparent;\n    cursor: pointer;\n    font-size: 30px;\n    text-decoration: none;\n    text-shadow: 2px 2px 2px rgb(0, 0, 0, 0.2);\n    font-style: italic;\n`;\n\nconst TitleBlock = styled(Link)`\n    ${titleStyle}\n    color: rgb(0, 0, 0, 0.6);\n`;\n\nconst TitleFadeBlock = styled(Link)`\n    ${titleStyle}\n    color: rgb(0, 0, 0, 0.4);\n`;\n\nconst ControllBlock = styled.div`\n    display: flex;\n    align-items: center;\n    margin-left: 8%;\n`;\n\nconst GroupBlock = styled.div`\n    margin-left: 30px;\n    display: flex;\n`;\n\nconst TabBlock = styled.div`\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n`;\n\nconst TabLinkBlock = styled(Link)`\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n    text-decoration: none;\n    \n    ${props => props.hidden && css`\n        display: none;\n        visibility: hidden;\n    `};\n`;\n\nconst Tab = props => {\n    if(props.to) {\n        return (\n            <TabLinkBlock {...props}>\n                {props.children}\n            </TabLinkBlock>\n        )\n    } else {\n        return (\n            <TabBlock {...props}>\n                {props.children}\n            </TabBlock>\n        )\n    }\n}\n\nconst AuthBlock = styled.div`\n    display: flex;\n    align-items: center;\n    margin-right: 8%;\n`;\n\nconst UserWelcomeBlock = styled.div`\n    position: absolute;\n    top: 10%;\n    left: 0%;\n    width: 100%;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.4);\n`\n\nconst Header = ({\n    onRecord,\n    onLogout,\n    onLogin,\n    tempAuth,\n    auth\n}) => {\n    let username;\n    \n    if(tempAuth) {\n        username = tempAuth.nickname;\n    };\n\n    if(auth) {\n        username = auth.username;\n    };\n\n    return (\n        <>\n            <HeaderBlock>\n                <ControllBlock>\n                    <TitleBlock to='/'>\n                        chesssup\n                    </TitleBlock>\n                    <TitleFadeBlock to='/'>\n                        .com\n                    </TitleFadeBlock>\n                    <GroupBlock>\n                        <Tab to='/game'>\n                            Play\n                        </Tab>\n                        <Tab to='/community'>\n                            Community\n                        </Tab>\n                    </GroupBlock>\n                </ControllBlock>\n                <AuthBlock>\n                    <Tab onClick={onRecord}>\n                        Search\n                    </Tab>\n                    {auth ? (\n                        <>\n                            <Tab onClick={onRecord}>\n                                Setting\n                            </Tab>\n                            <Tab onClick={onRecord}>\n                                Record\n                            </Tab>\n                            <Tab onClick={onLogout}>\n                                Logout\n                                <UserWelcomeBlock>\n                                    {username}\n                                </UserWelcomeBlock>\n                            </Tab>\n                        </>\n                    ):(\n                        <Tab onClick={onLogin}>\n                            Login\n                            <UserWelcomeBlock>\n                                {username}\n                            </UserWelcomeBlock>\n                        </Tab>\n                    )}\n                </AuthBlock>\n            </HeaderBlock>\n           \n        </>\n    )\n};\n\n//  <GamesModalContainer\n//  openModal={openModal}\n//  setOpenModal={setOpenModal}\n//  />\n\nexport default React.memo(Header);","import { eventChannel } from 'redux-saga';\nimport SocketIo from 'socket.io-client';\nimport { put, call, take, cancelled } from 'redux-saga/effects';\n\n// eslint-disable-next-line\nfunction* createEventChannel(io) {\n    return eventChannel(emit => {\n        io.on('connect', socket => {\n            emit({\n                type: 'socket',\n                socket: io.id\n            });\n        })\n\n        //  reconnect 전에 session연결을 위한 http call 추가 예정\n\n        io.on('message', message => {\n            emit(message)\n            console.dir(message);\n        });\n\n        return () => {\n            io.close();\n        }\n    })\n}\n\nexport function* connectNamespace(params) {\n    let channel;\n\n    const {\n        url,\n        initializeSocket,\n        initializeValue,\n        changeValue,\n        updateValue,\n        clearValue,\n        query,\n    } = params;\n\n    try {\n        const io = SocketIo(url, {\n            query,\n            reconnection: false,\n            secure: true,\n        });\n        \n        channel = yield call(createEventChannel, io);\n    \n        while(true) {\n            const message = yield take(channel);\n            switch(message.type) {\n                case 'socket':\n                    if(initializeSocket) {\n                        yield put(initializeSocket(message));\n                    };\n                    break;\n                case 'initialize':\n                    yield put(initializeValue(message));\n                    break;\n                case 'change':\n                    yield put(changeValue(message));\n                    break;\n                case 'update':\n                    yield put(updateValue(message));\n                    break;\n                case 'clear':\n                    yield put(clearValue(message));\n                    break;\n                default:\n                    console.dir(message);\n            }\n        }\n    } catch(e) {\n        console.dir(e);\n    } finally {\n        if (yield cancelled()) {\n            channel.close();\n        }\n    }\n}","export const createRequestActionTypes = type => {\n    const SUCCESS = `${type}_SUCCESS`;\n    const FAILURE = `${type}_FAILURE`;\n    return [ type, SUCCESS, FAILURE ];\n};\n\nexport default function createRequestThunk (type, request) {\n    const SUCCESS = `${type}_SUCCESS`;\n    const FAILURE = `${type}_FAILURE`;\n    return params => async dispatch => {\n        try {\n            const response = await request(params);\n            dispatch({\n                type: SUCCESS,\n                payload: response.data,\n            });\n            return response.data;\n        } catch(e) {\n            console.dir(e);\n            dispatch({\n                type: FAILURE,\n                payload: e,\n                error: true,\n            });\n            throw e;\n        }\n    }\n};","export const setLocalStorage = ({ ...rest }) => {\n    try {\n        Object.keys(rest).forEach(key => {\n            localStorage.setItem(key, JSON.stringify(rest[key]));\n        })\n    } catch(e) {\n        console.dir('Set localStorage failed');\n        console.dir(e);\n    }\n}\n\nexport const getLocalStorage = key => {\n    try {\n        return JSON.parse(localStorage.getItem(key));\n    } catch(e) {\n        console.dir('Get localStorage failed');\n        console.dir(e);\n    }   \n}\n\nexport const removeLocalStorage = key => {\n    try {\n        localStorage.removeItem(key);\n    } catch(e) {\n        console.dir('Remove localStorage failed');\n        console.dir(e);\n    }\n}\n\nexport const clearLocalStorage = () => {\n    try {\n        localStorage.clear();\n    } catch(e) {\n        console.dir('Clear localStorage failed');\n        console.dir(e);\n    }   \n};","import { createAction, handleActions } from 'redux-actions';\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\nimport produce from 'immer';\n\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as authAPI from '../lib/api/auth';\nimport { setLocalStorage, removeLocalStorage } from '../lib/storage/storage';\n\nconst CONNECT_WEBSOCKET = 'sessionAuth/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'sessionAuth/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'sessionAuth/INITIALIZE_VALUE';\nconst CLEAR_VALUE = 'sessionAuth/CLEAR_VALUE';\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nconst [ SET_SESSION, SET_SESSION_SUCCESS, SET_SESSION_FAILURE ] = createRequestActionTypes('sessionAuth/SET_SESSION');\nexport const setSessionThunk = createRequestThunk(SET_SESSION, authAPI.getSession);\n\nconst [ LOGIN, LOGIN_SUCCESS, LOGIN_FAILURE ] = createRequestActionTypes('sessionAuth/LOGIN');\nconst [ REGISTER, REGISTER_SUCCESS, REGISTER_FAILURE ] = createRequestActionTypes('sessionAuth/REGISTER');\nconst [ LOGOUT, LOGOUT_SUCCESS, LOGOUT_FAILURE ] = createRequestActionTypes('sessionAuth/LOGOUT');\nconst [ CHECK, CHECK_SUCCESS, CHECK_FAILURE ] = createRequestActionTypes('sessionAuth/CHECK');\nexport const loginThunk = createRequestThunk(LOGIN, authAPI.login);\nexport const registerThunk = createRequestThunk(REGISTER, authAPI.register);\nexport const logoutThunk = createRequestThunk(LOGOUT, authAPI.logout);\nexport const checkThunk = createRequestThunk(CHECK, authAPI.check);\n\nconst CHANGE_FIELD = 'sessionAuth/CHANGE_FIELD';\nconst CLEAR_FIELD = 'sessionAuth/CLEAR_FIELD';\nconst CLEAR_SPECIFIC_FIELD = 'sessionAuth/CLEAR_SPECIFIC_FIELD';\nexport const changeField = createAction(CHANGE_FIELD, payload => payload);\nexport const clearField = createAction(CLEAR_FIELD, payload => payload);\nexport const clearSpecificField = createAction(CLEAR_SPECIFIC_FIELD, payload => payload);\n\n\nexport const loginProcessThunk = param => async ( dispatch, getState ) => {\n    try {\n        const auth = await dispatch(loginThunk(param));\n        if(auth) {\n            setLocalStorage({ auth });\n        }\n    } catch(e) {\n        console.dir('Login failed');\n    }\n}\n\nexport const registerProcessThunk = param => async ( dispatch, getState ) => {\n    try {\n        const auth = await dispatch(registerThunk(param));\n        if(auth) {\n            setLocalStorage({ auth });\n        }\n    } catch(e) {\n        console.dir('Register failed');\n    }\n    \n}\n\nexport const logoutProcessThunk = () => async( dispatch, getState ) => {\n    try {\n        await dispatch(logoutThunk());\n        removeLocalStorage('auth');\n    } catch(e) {\n        console.dir('Logout failed');\n    }\n}\n\nfunction* connectWebsocketSaga () {\n    \n    const socketTask = yield fork(connectNamespace, {\n        url: '/sessionAuth',\n        initializeValue,\n        clearValue,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* sessionAuthSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    tempAuth: null,\n    auth: null,\n    authError: null,\n    login: {\n        username: '',\n        password: '',\n    },\n    register: {\n        username: '',\n        password: '',\n        passwordConfirm: '',\n    }\n}\n\nexport default handleActions({\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        auth: { ...rest },\n    }),\n    [CLEAR_VALUE]: state => ({\n        ...initialState,\n        tempAuth: state.tempAuth,\n    }),\n    [SET_SESSION_SUCCESS]: (state, { payload: tempAuth }) => ({\n        ...state,\n        tempAuth,\n    }),\n    [SET_SESSION_FAILURE]: (state, { payload: error }) => ({\n        ...state,\n        tempAuth: null,\n        error,\n    }),\n    [CHANGE_FIELD]: (state, { payload: { form, key, value } }) =>\n        produce(state, draft => {\n            draft[form][key] = value;\n        }),\n    [CLEAR_FIELD]: (state, { payload: { form } }) => ({\n        ...state,\n        [form]: initialState[form],\n        authError: initialState.authError,\n    }),\n    [CLEAR_SPECIFIC_FIELD]: (state, { payload: { form, key } }) => ({\n        ...state,\n        [form]: {\n            ...state[form],\n            [key]: initialState[form][key],\n        },\n        authError: initialState.authError,\n    }),\n    [LOGIN_SUCCESS]: (state, { payload: auth }) => ({\n        ...state,\n        auth,\n        authError: null,\n    }),\n    [LOGIN_FAILURE]: (state, { payload: authError }) => ({\n        ...state,\n        auth: null,\n        authError,\n    }),\n    [REGISTER_SUCCESS]: (state, { payload: auth }) => ({\n        ...state,\n        auth,\n        authError: null,\n    }),\n    [REGISTER_FAILURE]: (state, { payload: authError }) => ({\n        ...state,\n        auth: null,\n        authError,\n    }),\n    [LOGOUT_SUCCESS]: state => ({\n        ...state,\n        auth: null,\n        authError: null,\n    }),\n    [LOGOUT_FAILURE]: ( state, { payload: authError }) => ({\n        ...state,\n        auth: null,\n        authError,\n    }),\n    [CHECK_SUCCESS]: ( state, { payload: auth }) => ({\n        ...state,\n        auth,\n        authError: null,\n    }),\n    [CHECK_FAILURE]: ( state, { payload: authError }) => ({\n        ...state,\n        auth: null,\n        authError,\n    })\n}, initialState);","import axios from 'axios';\n\nexport const getSession = () =>\n    axios.get('/api/auth/getSession');\n\nexport const login = ({ username, password }) => \n    axios.post('/api/auth/login', ({ username, password }));\n\nexport const logout = () =>\n    axios.post('/api/auth/logout');\n\nexport const register = ({ username, password }) =>\n    axios.post('/api/auth/register', ({ username, password }));\n\nexport const check = () =>\n    axios.get('/api/auth/check');","import React, { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Header from '../../components/common/Header';\nimport { logoutProcessThunk, clearField } from '../../modules/sessionAuth';\nimport { connectWebsocket, disconnectWebsocket } from '../../modules/sessionAuth';\nimport { withRouter } from 'react-router-dom';\n\nconst HeaderContainer = ({ history }) => {\n    const { tempAuth, auth } = useSelector(({ sessionAuth }) => ({\n        tempAuth: sessionAuth.tempAuth,\n        auth: sessionAuth.auth,\n    }));\n    const dispatch = useDispatch();\n\n    const onLogout = useCallback(() => {\n        dispatch(logoutProcessThunk());\n    }, [dispatch]);\n    \n    const onRecord = useCallback(() => {\n        alert('onRecord');\n    }, []);\n    \n    //  link 태그로 단순히 넘어갈 경우 dispatch전에 라우팅이 먼저 넘어가기 때문에\n    //  onClick으로 받아 dispatch를 마치고 routing이 넘어가도록 변경\n    const onLogin = useCallback(() => {\n        dispatch(clearField({ form: 'login' }));\n        history.push('/login');\n    }, [dispatch, history]);\n\n    //  async일 필요 없음, 따로 clearValue는 렌더링을 줄이기 위해 별도로 호출하지 않음\n    useEffect(() => {\n        dispatch(connectWebsocket());\n        return () => {\n            dispatch(disconnectWebsocket());\n        }\n    }, [dispatch]);\n\n    return (\n        <Header\n            onRecord={onRecord}\n            onLogout={onLogout}\n            onLogin={onLogin}\n            tempAuth={tempAuth}\n            auth={auth}\n        />\n    );\n};\n\nexport default withRouter(HeaderContainer);","import { useReducer, useEffect } from 'react';\n\nfunction reducer(state, action) {\n    switch (action.type) {\n        case 'LOADING':\n            return {\n                loading: true,\n                data: null,\n                error: null,\n            };\n        case 'SUCCESS':\n            return {\n                loading: false,\n                data: action.data,\n                error: null,\n            };\n        case 'FAILURE':\n            return {\n                loading: false,\n                data: null,\n                error: action.error,\n            };\n        default:\n            throw new Error('Unhandled action type Error')\n    }\n}\n\nfunction useAsync(callback, deps = []) {\n    const [ state, dispatch ] = useReducer(reducer, {\n        loading: false,\n        data: null,\n        error: false,\n    })\n\n    const fetchData = async () => {\n        dispatch({ type: 'LOADING' });\n        try {\n            const data = await callback();\n            dispatch({ type: 'SUCCESS', data });\n        } catch(e) {\n            dispatch({ type: 'FAILURE', error: e });\n        }\n    };\n\n    useEffect(() => {\n        fetchData();\n    // eslint-disable-next-line\n    }, deps);\n\n    return [state, fetchData];\n}\n\nexport default useAsync;","import React from 'react';\nimport styled from 'styled-components';\n\nconst MainLayoutBlock = styled.div`\n    width: 100%;\n    height: 800px;\n`;\n\nconst MainLayout = () => {\n    return (\n        <MainLayoutBlock>\n            \n        </MainLayoutBlock>\n    )\n};\n\nexport default MainLayout;","import React from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport useAsync from '../../lib/hook/useAsync';\nimport { setSessionThunk } from '../../modules/sessionAuth';\n\nimport MainLayout from '../../components/main/MainLayout';\n\nconst MainLayoutContainer = () => {\n    const dispatch = useDispatch();\n\n    const connection = async () => {\n        await dispatch(setSessionThunk());\n\n        return true;\n    };\n\n    const [state] = useAsync(connection, [ dispatch ]);\n\n    const { loading, data, error } = state;\n\n    if(loading) return null;\n    if(error) return null;\n    if(data) {\n        return (\n            <MainLayout />\n        )\n    }\n    return null;\n};\n\nexport default MainLayoutContainer;","import React from 'react';\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport MainLayoutContainer from '../containers/main/MainLayoutContainer';\n\nconst MainPage = () => {\n\n    return (\n        <>\n            <HeaderContainer />\n            <MainLayoutContainer />\n        </>\n    )\n};\n\nexport default MainPage;","import React, { useRef, useCallback } from 'react';\nimport styled, { css } from 'styled-components';\nimport { IoMdMail } from 'react-icons/io';\nimport { FaLock } from 'react-icons/fa';\nimport { IconContext } from 'react-icons';\n\nconst AuthFrameBlock = styled.form`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 800px;\n`;\n\nconst AuthFormBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 30%;\n    height: 400px;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst TitleBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    font-size: 20px;\n    height: 100px;\n    text-shadow: 2px 2px 2px rgba(0,0,0,0.14);\n`;\n\nconst InputFrameBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 150px;\n`;\n\nconst InputFormBlock = styled.div`\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding-left: 1%;\n    width: 60%;\n\n    &+& {\n        margin-top: 10px;\n    }\n\n    @keyframes blinking {\n        0%{\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        }\n        50% {\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.56), 0 3px 1px -2px rgba(0,0,0,0.8), 0 1px 5px 0 rgba(0,0,0,0.48);\n        }\n        100%{\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        }\n      }\n\n    ${props => props.blink && css`\n        animation: blinking 1s 2;\n    `}\n`\n\nconst inputStyle = css`\n    outline: none;\n    border: none;\n    height: 40px;\n    width: 80%;\n    padding-left: 5%;\n`;\n\nconst EmailInputBlock = styled.input`\n    ${inputStyle}\n`\n\nconst PasswordInputBlock = styled.input`\n    ${inputStyle}\n`;\n\nconst OptionFormBlock = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 10px;\n    width: 60%;\n    height: 20px;\n`;\n\nconst SaveInputFormBlock = styled.div`\n    display: flex;\n    align-content: center;\n    width: 30%;\n    height: 100%;\n`;\n\nconst SaveInputBlock = styled.input`\n    height: 100%;\n    outline: none;\n    margin: 0px;\n`;\n\nconst SaveInputTextBlock = styled.div`\n    display: flex;\n    align-items: center;\n    height: 100%;\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.5);\n    cursor: pointer;\n    margin-left: 5px;\n`;\n\nconst ForgetBlock = styled.div`\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.5);\n    cursor: pointer;\n`;\n\nconst SubmitFrameBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 150px;\n`;\n\nconst SubmitBlock = styled.button`\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    border: none;\n    outline: none;\n    width: 30%;\n    cursor: pointer;\n    height: 40px;\n    background-color: transparent;\n\n    &:hover, :active {\n        background-color: rgb(0, 0, 0, 0.05);\n    }\n`;\n\nconst CreateFormBlock = styled.div`\n    display: flex;\n    align-items: center;\n    margin-top: 10px;\n    height: 40px;\n`;\n\nconst CreateBlock = styled.div`\n    color: rgb(0, 0, 0, 0.5);\n    font-size: 10px;\n`;\n\nconst CreateButtonBlock = styled.button`\n    outline: none;\n    border: none;\n    font-size: 10px;\n    color: black;\n    text-decoration: none;\n    cursor: pointer;\n    margin-left: 5px;\n    background-color: transparent;\n`;\n\nconst ErrorBlock = styled.div`\n    position: absolute;\n    top: 0;\n    left: 48%;\n    width: 50%;\n    display: flex;\n    justify-content: flex-end;\n    font-size: 12px;\n    @keyframes fontOpacity {\n        0%{\n            color: rgb(0, 0, 0, 0);\n        }\n        100%{\n            color: rgb(0, 0, 0, 0.4);\n        }\n      }\n    animation: fontOpacity 1s 1;\n    color: rgb(0, 0, 0, 0.4);\n`\n\nconst AuthForm = ({ login, register, form, error, onSubmit, onChange, onRegister }) => {\n    const ref = useRef({});\n\n    const onClick = useCallback(tag => {\n        ref.current[tag].focus();\n    }, []);\n\n    return (\n        <AuthFrameBlock\n            autoComplete='off'\n            autoCorrect='off'\n            autoCapitalize='off'\n            spellCheck='false'\n            onSubmit={onSubmit}\n        >\n            <AuthFormBlock>\n                <TitleBlock>\n                    { login ? 'Sign In' : ( register ? 'Sign Up' : null ) }\n                </TitleBlock>\n                <InputFrameBlock>\n                    <InputFormBlock\n                        onClick={onClick.bind(null, 'username')}\n                        blink={error.username}\n                        key={`username_${error.count}`}\n                    >\n                        <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer'} }}>\n                            <IoMdMail />\n                        </IconContext.Provider>\n                        <EmailInputBlock\n                            type='text'\n                            name='username'\n                            placeholder='Email'\n                            onChange={onChange}\n                            value={form.username}\n                            ref={el => ref.current.username = el}\n                        />\n                        <ErrorBlock>\n                            {error.username}\n                        </ErrorBlock>\n                    </InputFormBlock>\n                    <InputFormBlock\n                        onClick={onClick.bind(null, 'password')}\n                        blink={error.password}\n                        key={`password_${error.count}`}\n                    >\n                        <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer' } }}>\n                            <FaLock />\n                        </IconContext.Provider>\n                        <PasswordInputBlock\n                            type='password'\n                            name='password'\n                            placeholder='Password'\n                            onChange={onChange}\n                            value={form.password}\n                            ref={el => ref.current.password = el}\n                        />\n                        <ErrorBlock>\n                            {error.password}\n                        </ErrorBlock>\n                    </InputFormBlock>\n                    {register ? (\n                        <InputFormBlock\n                            onClick={onClick.bind(null, 'passwordConfirm')}\n                            blink={error.passwordConfirm}\n                            key={`passwordConfirm_${error.count}`}\n                        >\n                            <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer' } }}>\n                                <FaLock />\n                            </IconContext.Provider>\n                            <PasswordInputBlock\n                                type='password'\n                                name='passwordConfirm'\n                                placeholder='Confirm Password'\n                                onChange={onChange}\n                                value={form.passwordConfirm}\n                                ref={el => ref.current.passwordConfirm = el}\n                            />\n                            <ErrorBlock>\n                                {error.passwordConfirm}\n                            </ErrorBlock>\n                        </InputFormBlock>\n                    ): null}\n                    {login ? (\n                        <OptionFormBlock>\n                            <SaveInputFormBlock>\n                                <SaveInputBlock\n                                    type='checkbox'\n                                />\n                                <SaveInputTextBlock>\n                                    Remember Me\n                                </SaveInputTextBlock>\n                            </SaveInputFormBlock>\n                            <ForgetBlock>\n                                Forget password?    \n                            </ForgetBlock>\n                        </OptionFormBlock>\n                    ): null}\n                </InputFrameBlock>\n                <SubmitFrameBlock>\n                    <SubmitBlock\n                        type='submit'\n                    >\n                        Submit\n                    </SubmitBlock>\n                    {login ? (\n                        <CreateFormBlock>\n                            <CreateBlock>\n                                Don't have an account?\n                            </CreateBlock>\n                            <CreateButtonBlock\n                                type='button'\n                                onClick={onRegister}\n                            >\n                                Create\n                            </CreateButtonBlock>\n                        </CreateFormBlock>\n                    ) : (\n                        <CreateFormBlock>\n                            <CreateBlock>\n                                Don't have an account?\n                            </CreateBlock>\n                            <CreateButtonBlock\n                                type='button'\n                            >\n                                Create\n                            </CreateButtonBlock>\n                        </CreateFormBlock>\n                    )}\n                </SubmitFrameBlock>\n            </AuthFormBlock>\n        </AuthFrameBlock>\n    )\n};\n\nexport default React.memo(AuthForm);","import React, { useCallback, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport Joi from 'joi';\nimport { loginProcessThunk, changeField, clearField, clearSpecificField } from '../../modules/sessionAuth';\nimport AuthForm from '../../components/auth/AuthForm';\n\nconst LoginContainer = ({ history }) => {\n    const { form, auth, authError } = useSelector(({ sessionAuth }) => ({\n        form: sessionAuth.login,\n        auth: sessionAuth.auth,\n        authError: sessionAuth.authError,\n    }));\n\n    const dispatch = useDispatch();\n\n    const [ error, setError ] = useState({\n        username: '',\n        password: ''\n    });\n\n    const onChange = useCallback(e => {\n        const { name, value } = e.target;\n        if(error[name] !== '') {\n            setError(prevState => ({\n                ...prevState,\n                [name]: '',\n            }));\n        }\n        dispatch(changeField({\n            form: 'login',\n            key: name,\n            value,\n        }));\n    }, [dispatch, error]);\n\n    const onSubmit = useCallback(e => {\n        e.preventDefault();\n        const { username, password } = form;\n\n        //  initialize\n        let nextError = Object.keys(form)\n            .reduce((acc, key) =>\n                ({\n                    ...acc,\n                    [key]: false,\n                }),{});\n\n        //  empty check\n        Object.keys(nextError)\n            .filter(key => form[key] === '')\n            .forEach(key => {\n                nextError = {\n                    ...nextError,\n                    [key]: 'Required field'\n                }\n            });\n\n        const schema = Joi.object().keys({\n            username: Joi.string().max(80).email({ minDomainAtoms: 2 }).required().error(() => ({ message: 'Wrong format' })),\n            password: Joi.string().min(4).max(16).required().error(() => ({ message: '4 ~ 16 digits' })),\n        });\n\n        const result = Joi.validate(form, schema, { abortEarly: false });\n\n        if(result.error) {\n            result.error.details.forEach(detail => {\n                if(!nextError[detail.path[0]]) {\n                    nextError = {\n                        ...nextError,\n                        [detail.path[0]]: detail.message,\n                    }\n                }\n            });\n        }\n\n        if(Object.keys(nextError).filter(key => nextError[key]).length > 0) {\n            setError(prevState => ({\n                ...nextError,\n                count: prevState.count + 1,\n            }));\n            Object.keys(nextError).forEach(key => {\n\n                if(nextError[key]) {\n                    dispatch(clearSpecificField({ form: 'login', key }))\n                }\n            });\n\n            return;\n        };\n\n        dispatch(loginProcessThunk({ username, password }));\n        dispatch(clearField({ form: 'login' }));\n    }, [dispatch, form]);\n\n    useEffect(() => {\n        if(authError) {\n            let nextError = {};\n            const errorMention = authError.response.data;\n            Object.keys(errorMention).forEach(key => {\n                nextError = {\n                    ...nextError,\n                    [key]: errorMention[key],\n                }\n                // dispatch(clearSpecificField({ form: 'login', key }))\n            });\n\n            setError(nextError);\n            \n            return;\n        };\n\n        if(auth) {\n            history.push('/');\n        }\n    }, [history, auth, authError]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearField({ form: 'login' }));\n        }\n    }, [dispatch]);\n\n    const onRegister = useCallback(() => {\n        dispatch(clearField({ form: 'register' }));\n        history.push('/register');\n    }, [dispatch, history]);\n    \n    return (\n        <AuthForm\n            login\n            onSubmit={onSubmit}\n            onChange={onChange}\n            form={form}\n            error={error}\n            onRegister={onRegister}\n        />\n    )\n};\n\nexport default withRouter(LoginContainer);","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport LoginContainer from '../containers/auth/LoginContainer';\n\nconst LoginPage = () => {\n    return (\n        <>\n            <Helmet>\n                <title>Sign In • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <LoginContainer />\n        </>\n    )\n};\n\nexport default LoginPage;","import React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport Joi from 'joi';\nimport AuthForm from '../../components/auth/AuthForm';\nimport { registerProcessThunk, changeField, clearField, clearSpecificField } from '../../modules/sessionAuth';\n\nconst RegisterContainer = ({ history }) => {\n    const { form, auth, authError } = useSelector(({ sessionAuth }) => ({\n        form: sessionAuth.register,\n        auth: sessionAuth.auth,\n        authError: sessionAuth.authError,\n    }));\n\n    const dispatch = useDispatch();\n\n    const [ error, setError ] = useState({\n        username: '',\n        password: '',\n        passwordConfirm: ''\n    })\n\n    const onChange = useCallback(e => {\n        const { name, value } = e.target;\n        if(error[name] !== '') {\n            setError(prevState => ({\n                ...prevState,\n                [name]: '',\n            }));\n        }\n        dispatch(changeField({\n            form: 'register',\n            key: name,\n            value,\n        }));\n    }, [dispatch, error]);\n\n    const onSubmit = useCallback(e => {\n        e.preventDefault();\n        const { username, password } = form;\n\n         //  initialize\n         let nextError = Object.keys(form)\n         .reduce((acc, key) =>\n             ({\n                 ...acc,\n                 [key]: false,\n             }),{});\n\n        //  empty check\n        Object.keys(nextError)\n            .filter(key => form[key] === '')\n            .forEach(key => {\n                nextError = {\n                    ...nextError,\n                    [key]: 'Required field'\n                }\n            });\n\n        const schema = Joi.object().keys({\n            username: Joi.string().max(80).email({ minDomainAtoms: 2 }).required().error(() => ({ message: 'Wrong format' })),\n            password: Joi.string().min(4).max(16).required().error(() => ({ message: '4 ~ 16 digits' })),\n            passwordConfirm: Joi.any().valid(Joi.ref('password')).required().error(() => ({ message: 'Password mismatch' })),\n        });\n\n        const result = Joi.validate(form, schema, { abortEarly: false });\n\n        if(result.error) {\n            result.error.details.forEach(detail => {\n                if(!nextError[detail.path[0]]) {\n                    nextError = {\n                        ...nextError,\n                        [detail.path[0]]: detail.message,\n                    }\n                }\n            });\n        }\n\n        if(Object.keys(nextError).filter(key => nextError[key]).length > 0) {\n            setError(prevState => ({\n                ...nextError,\n                count: prevState.count + 1,\n            }));\n            Object.keys(nextError).forEach(key => {\n                if(nextError[key]) {\n                    dispatch(clearSpecificField({ form: 'register', key }))\n                }\n            });\n\n            return;\n        };\n\n        dispatch(registerProcessThunk({ username, password }));\n        dispatch(clearField({ form: 'register' }));\n    }, [dispatch, form]);\n\n    useEffect(() => {\n        if(authError) {\n            let nextError = {};\n            const errorMention = authError.response.data;\n            Object.keys(errorMention).forEach(key => {\n                nextError = {\n                    ...nextError,\n                    [key]: errorMention[key],\n                }\n                // dispatch(clearSpecificField({ form: 'register', key }))\n            });\n\n            setError(nextError);\n            \n            return;\n        }\n\n        if(auth) {\n            history.push('/');\n        }\n    }, [history, auth, authError])\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearField({ form: 'register' }));\n        };\n    }, [dispatch]);\n\n    return (\n        <AuthForm \n            register\n            onSubmit={onSubmit}\n            onChange={onChange}\n            form={form}\n            error={error}\n        />\n    )\n};\n\nexport default withRouter(RegisterContainer);","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport RegisterContainer from '../containers/auth/RegisterContainer';\n\nconst RegisterPage = () => {\n\n    return (\n        <>\n            <Helmet>\n                <title>Sign Up • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <RegisterContainer />\n        </>\n    )\n};\n\nexport default RegisterPage;","const board = [\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n];\n\nexport default board;","import { checkPlayersEveryMove } from './validation';\n\nconst rules = {\n    pawn: {\n        type: 'onetime',\n        move: [\n            {\n                dy: -1,\n                dx: 0,\n                except: function(props) {\n                    const { board, dy, dx } = props;\n                    if(board[dy][dx].piece) {\n                        return false;\n                    }\n                    return true;\n                }\n            },\n            {\n                dy: -2,\n                dx: 0,\n                except: function(props) {\n                    const { board, y, x, owner } = props;\n                    if((owner === 'black' && y !== 1) || (owner === 'white' && y !== 6)) return false;\n                    if((owner === 'black' && board[2][x].piece) || (owner === 'white' && board[5][x].piece)) return false;\n                    if((owner === 'black' && board[3][x].piece) || (owner === 'white' && board[4][x].piece)) return false;\n                    return true;\n                }\n            },\n            {\n                dy: -1,\n                dx: -1,\n                except: function(props) {\n                    const { board, dy, dx } = props;\n                    if(board[dy][dx].piece) {\n                        return true;\n                    }\n                    return false;\n                }\n            },\n            {\n                dy: -1,\n                dx: 1,\n                except: function(props) {\n                    const { board, dy, dx } = props;\n                    if(board[dy][dx].piece) {\n                        return true;\n                    }\n                    return false;\n                }\n            }\n        ],\n    },\n    knight: {\n        type: 'onetime',\n        move: [\n            {\n                dy: -2,\n                dx: -1,\n            },\n            {\n                dy: -2,\n                dx: 1,\n            },\n            {\n                dy: 2,\n                dx: -1,\n            },\n            {\n                dy: 2,\n                dx: 1,\n            },\n            {\n                dy: -1,\n                dx: -2,\n            },\n            {\n                dy: -1,\n                dx: 2,\n            },\n            {\n                dy: 1,\n                dx: -2,\n            },\n            {\n                dy: 1,\n                dx: 2,\n            },\n        ]\n    },\n    king: {\n        type: 'onetime',\n        move: [\n            {\n                dy: 1,\n                dx: 0\n            },\n            {\n                dy: -1,\n                dx: 0\n            },\n            {\n                dy: 0,\n                dx: 1\n            },\n            {\n                dy: 0,\n                dx: -1\n            },\n            {\n                dy: -1,\n                dx: 1\n            },\n            {\n                dy: -1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: 1\n            },\n            {\n                dy: 0,\n                dx: 2,\n                except: function(props) {\n                    const { board, y, x, owner } = props;\n                    const enemy = (owner === 'white') ? 'black' : 'white';\n\n                   //  king dirty check\n                    if(!board[y][x].piece || board[y][x].dirty) {\n                        return false;\n                    }\n\n                    //  rook dirty check\n                    if(!board[y][x+3].piece || board[y][x+3].dirty) {\n                        return false;\n                    }\n\n                    //  check path is empty\n                    if(board[y][x+1].piece || board[y][x+2].piece) {\n                        return false;\n                    }\n\n                    //  is king & path safe?, prevent castling loop by flag\n                    const coveredAxisBundle = checkPlayersEveryMove(enemy, board, true);\n                    const length = coveredAxisBundle.length;\n                    for(let i=0; i<length; ++i) {\n                        const axis = coveredAxisBundle[i];\n                        if(axis.dy === y && (axis.dx === x || axis.dx === x+1 || axis.dx === x+2)) {\n                            return false;\n                        }\n                    }\n\n\n                    return true;\n                },             \n            },\n            {\n                dy: 0,\n                dx: -2,\n                except: function(props) {\n                    const { board, y, x, owner } = props;\n                    const enemy = (owner === 'white') ? 'black' : 'white';\n                    \n                    //  king dirty check\n                    if(!board[y][x].piece || board[y][x].dirty) {\n                        return false;\n                    }\n\n                    //  rook dirty check\n                    if(!board[y][x-4].piece || board[y][x-4].dirty) {\n                        return false;\n                    }\n\n                    //  check path is empty\n                    if(board[y][x-1].piece || board[y][x-2].piece || board[y][x-3].piece ) {\n                        return false;\n                    }\n\n                    //  is king & path safe?, prevent castling loop by flag\n                    const coveredAxisBundle = checkPlayersEveryMove(enemy, board, true);\n                    const length = coveredAxisBundle.length;\n                    for(let i=0; i<length; ++i) {\n                        const axis = coveredAxisBundle[i];\n                        if(axis.dy === y && (axis.dx === x || axis.dx === x-1 || axis.dx === x-2)) {\n                            return false;\n                        }\n                    }\n\n                    return true;\n                },             \n            }\n        ]\n    },\n    bishop: {\n        type: 'multitime',\n        move: [\n            {\n                dy: 1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: 1\n            },\n            {\n                dy: -1,\n                dx: -1\n            },\n            {\n                dy: -1,\n                dx: 1\n            },\n        ]\n    },\n    rook: {\n        type: 'multitime',\n        move: [\n            {\n                dy: 1,\n                dx: 0\n            },\n            {\n                dy: -1,\n                dx: 0\n            },\n            {\n                dy: 0,\n                dx: -1,\n            },\n            {\n                dy: 0,\n                dx: 1\n            },\n        ]\n    },\n    queen: {\n        type: 'multitime',\n        move: [\n            {\n                dy: 1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: 1\n            },\n            {\n                dy: -1,\n                dx: -1\n            },\n            {\n                dy: -1,\n                dx: 1\n            },\n            {\n                dy: 1,\n                dx: 0\n            },\n            {\n                dy: -1,\n                dx: 0\n            },\n            {\n                dy: 0,\n                dx: -1,\n            },\n            {\n                dy: 0,\n                dx: 1\n            },\n        ]\n    }\n};\n\nexport default rules;","import _ from 'lodash';\n\nimport rules from './rules';\nimport { genBoard } from './genBoard';\n\nexport const findKingLocation = (player, board) => {\n    for(let i=0; i<8; ++i) {\n        for(let j=0; j<8; ++j) {\n            if(board[i][j].owner === player && board[i][j].piece === 'king') {\n                return {\n                    y: i,\n                    x: j,\n                };\n            };\n        }\n    }\n}\n\nexport const checkPlayersEveryMove = (player, board, castling) => {\n    let coveredAxisBundle = [];\n    for(let i=0; i<8; ++i) {\n        for(let j=0; j<8; ++j) {\n            if(board[i][j].owner === player) {\n                const coveredAxis = checkCovered(board, i, j, castling);\n                coveredAxisBundle = [ ...coveredAxisBundle, ...coveredAxis ];\n            }\n        }\n    };\n\n    return coveredAxisBundle;\n};\n\nexport const checkSafeMove = (player, board) => {\n    const enemy = player === 'white' ? 'black' : 'white';\n    const clonedBoard = _.cloneDeep(board);\n\n    const playerKing = findKingLocation(player, clonedBoard);\n    const coveredAxisBundle = checkPlayersEveryMove(enemy, clonedBoard);\n\n    coveredAxisBundle.forEach(axis => {\n        clonedBoard[axis.dy][axis.dx] = {\n            ...clonedBoard[axis.dy][axis.dx],\n            movable: true,\n        }\n    });\n\n    //  is king in danger?\n    if(clonedBoard[playerKing.y][playerKing.x].movable) {\n        return false;\n    }\n\n    return true;\n};\n\nexport const checkCheckmate = (player, board) => {\n\n    for(let i=0; i<8; ++i) {\n        for(let j=0; j<8; ++j) {\n            if(board[i][j].owner === player) {\n                const coveredAxis = checkCovered(board, i, j);\n                const length = coveredAxis.length;\n                for(let k=0; k<length; ++k) {\n                    const tempBoard = genBoard(board, { y: i, x: j }, { y: coveredAxis[k].dy, x: coveredAxis[k].dx })\n                    if(checkSafeMove(player, tempBoard)) {\n                        return false;\n                    };\n                }\n            }\n        }\n    };\n\n    return true;\n}\n\nexport const checkCovered = (board, y, x, castling) => {\n    const { piece, owner } = board[y][x];\n    let inform = { board, y, x, owner };\n    if(!piece) return;\n\n    const { type, move }= rules[piece];\n    let coveredAxis = [];\n\n    if(type === 'onetime') {\n        coveredAxis = move.reduce((acc, cur) => {\n            const dy = y + (owner === 'black' ? -cur.dy: +cur.dy);\n            const dx = x + cur.dx;\n            if(dy < 0 || dx < 0 || dy > 7 || dx > 7) return acc;\n            \n            inform = { ...inform, dy, dx };\n            \n            if(!cur.except || (!(piece === 'king' && castling) && cur.except && cur.except(inform))) {\n                if(!board[dy][dx].owner || board[y][x].owner !== board[dy][dx].owner) {\n                    acc.push({dy, dx});\n                }\n            }\n\n            return acc;\n        }, []);\n    } else {\n        coveredAxis = move.flatMap(cur => {\n            let counter = 0;\n            let coveredArr = [];\n            while(true) {\n                ++counter;\n                const dy = y + counter * (owner === 'black' ? -cur.dy: +cur.dy);\n                const dx = x + counter * cur.dx;\n                \n                if(dy < 0 || dx < 0 || dy > 7 || dx > 7) break;\n                if(board[dy][dx].owner && board[dy][dx].owner === owner) break;\n                coveredArr.push({dy, dx});\n                if(board[dy][dx].owner && board[dy][dx].owner !== owner) break;\n            }\n            return coveredArr;\n        });\n    }\n\n    return coveredAxis;\n};","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\nimport _ from 'lodash';\n\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport * as canvasCtrl from '../lib/api/canvas';\n\n// import rules from '../lib/base/rules';\nimport board from '../lib/base/board';\nimport { checkCovered } from '../lib/base/validation';\n\nconst CONNECT_WEBSOCKET = 'canvas/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'canvas/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_SOCKET = 'canvas/INITIALIZE_SOCKET';\nconst INITIALIZE_VALUE = 'canvas/INITIALIZE_VALUE';\nconst CHANGE_VALUE = 'canvas/CHANGE_VALUE';\nconst CLEAR_VALUE = 'canvas/CLEAR_VALUE';\nconst INITIALIZE_BLOCKED = 'canvas/INITIALIZE_BLOCKED';\nconst CHANGE_BLOCKED = 'canvas/CHANGE_BLOCKED';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\nexport const initializeBlocked = createAction(INITIALIZE_BLOCKED, payload => payload);\nexport const changeBlocked = createAction(CHANGE_BLOCKED, payload => payload);\n\nconst [ SET_MOVE_PIECE, SET_MOVE_PIECE_SUCCESS, SET_MOVE_PIECE_FAILURE ] = createRequestActionTypes('canvas/SET_MOVE_PIECE');\nexport const setMovePieceThunk = createRequestThunk(SET_MOVE_PIECE, canvasCtrl.movePiece);\n\nconst makeReverseBoard = board => {\n    const reverseBoard = _.cloneDeep(board);\n    reverseBoard.reverse();\n    reverseBoard.forEach(row => {\n        row.reverse();\n    })\n    \n    return reverseBoard;\n}\n\nconst updateReverseBoard = (prevReverseBoard, nextOriginBoard) => {\n    const nextReverseBoard = makeReverseBoard(nextOriginBoard);\n    prevReverseBoard = [ ...prevReverseBoard ];\n\n    for(let i=0; i<8; ++i) {\n        for(let j=0; j<8; ++j) {\n            const nextPiece = nextReverseBoard[i][j];\n            const prevPiece = prevReverseBoard[i][j];\n            \n            // console.dir(nextPiece);\n            // console.dir(prevPiece);\n    \n            Object.keys(nextPiece).every(key => {\n                // console.dir(key);\n                if(!prevPiece[key] || prevPiece[key] !== nextPiece[key]) {\n                    // console.dir(prevPiece[key]);\n                    // console.dir(nextPiece[key]);\n                    prevReverseBoard[i] = [ ...prevReverseBoard[i] ];\n                    prevReverseBoard[i][j] = {\n                        ...nextPiece,\n                    };\n                    return false;\n                }\n                return true;\n            });\n        }\n    }\n\n    return prevReverseBoard;\n};\n\nexport const changeValueThunk = ({ move }) => ( dispatch, getState ) => {\n    const { prev, next } = move;\n    const { canvas: { board, reverseBoard },\n            socketAuth: { role },\n            game: { turn }\n        } = getState();\n    \n    if(((role === 'white' || role === 'spectator') && turn % 2 === 0) || (role === 'black' && turn % 2 === 1)) {\n        dispatch(changeBlocked({ blocked: false }));\n    } else {\n        dispatch(changeBlocked({ blocked: true }));\n    };\n\n    const cell = board[prev.y][prev.x];\n    const clearBoard = genClearBoard([...board], [\n        'covered',\n        'clicked',\n        'tracked',\n    ]);\n    \n    clearBoard[next.y] = [ ...clearBoard[next.y] ];\n    clearBoard[next.y][next.x] = {\n        ...cell,\n        tracked: true,\n        dirty: true,\n    };\n\n    clearBoard[prev.y]= [ ...clearBoard[prev.y] ];\n    clearBoard[prev.y][prev.x] = {\n        covered: false,\n        tracked: true,\n    };\n\n    //  promotion\n    const { owner, piece } = clearBoard[next.y][next.x];\n    if((owner === 'white' && piece === 'pawn' && next.y === 0) || (owner === 'black' && piece === 'pawn' && next.y === 7)) {\n        clearBoard[next.y][next.x] = {\n            ...clearBoard[next.y][next.x],\n            piece: 'queen',\n        }\n    };\n\n    //  castling\n    if(clearBoard[next.y][next.x].piece === 'king') {\n        if(next.x - prev.x === 2) {\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\n            \n            const pieceStore = { ...clearBoard[prev.y][prev.x+3] };\n            clearBoard[prev.y][prev.x+3] = {\n                covered: false\n            };\n            clearBoard[prev.y][prev.x+1] = {\n                ...pieceStore,\n                dirty: true,\n            };\n        }\n\n        if(next.x - prev.x === -2) {\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\n\n            const pieceStore = { ...clearBoard[prev.y][prev.x-4] };\n            clearBoard[prev.y][prev.x-4] = {\n                covered: false\n            };\n            clearBoard[prev.y][prev.x-1] = {\n                ...pieceStore,\n                dirty: true,\n            };\n        }\n    };\n\n    const nextReverseBoard = updateReverseBoard(reverseBoard, clearBoard);\n    \n    dispatch(changeValue({\n        board: clearBoard,\n        reverseBoard: nextReverseBoard,\n        clicked: null\n    }));\n}\n\nconst genClearBoard = (board, params) => {\n    const arr = [];\n\n    const leng = board.length;\n    for(let i=0; i<leng; ++i) {\n        for(let j=0; j<leng; ++j) {\n            let pass = false;\n            params.forEach(param => {\n                pass |= board[i][j][param];\n            });\n            if(pass) {\n                arr.push({\n                    y: i,\n                    x: j,\n                })\n            }\n        }\n    }\n\n    arr.forEach(cell => {\n        board[cell.y] = [ ...board[cell.y]];\n        const popedCell = board[cell.y][cell.x];\n        const newCell = {\n            ...popedCell,\n        };\n        params.forEach(param => {\n            newCell[param] = false;\n        });\n\n        board[cell.y].splice(cell.x, 1, newCell);\n    });\n\n    return board;\n}\n\nfunction* connectWebsocketSaga (action) {\n    // const key = action.payload;\n    // const query = `key=${key}`;\n\n    const query = action.payload;\n    \n    const socketTask = yield fork(connectNamespace, {\n        url: '/canvas',\n        initializeSocket,\n        initializeValue,\n        changeValue: changeValueThunk,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* canvasSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nexport const clickPieceThunk = ({ y: cy, x: cx }) => (dispatch, getState) => {\n    const {\n            canvas: { board, reverseBoard, clicked },\n            record: { reversed },\n            socketAuth: { role },\n    } = getState();\n    \n    let reversal = false;\n    if((role === 'white' && reversed) || (role === 'black' && !reversed)) {\n        reversal = true;\n    }\n    \n    let y = cy;\n    let x = cx;\n    if(reversal) {\n        y = 7 - cy;\n        x = 7 - cx;\n    };\n\n    if(clicked && board[y][x].covered) {\n        const { canvas: { socket } } = getState();\n\n        dispatch(setMovePieceThunk({\n            socket,\n            move: {\n                prev: clicked,\n                next: {y, x}\n            }\n        }));\n        \n        return;\n    }\n    \n    let coveredAxis = checkCovered(board, y, x);\n    const clearBoard = genClearBoard([...board], [\n        'covered',\n        'clicked',\n    ]);\n\n    coveredAxis.forEach(axis => {\n        clearBoard[axis.dy] = [ ...clearBoard[axis.dy] ];\n        const popedCell = clearBoard[axis.dy][axis.dx];\n        clearBoard[axis.dy].splice(axis.dx, 1, {\n            ...popedCell,\n            covered:true,\n        });\n    });\n\n    clearBoard[y] = [ ...clearBoard[y] ];\n    clearBoard[y][x] = {\n        ...clearBoard[y][x],\n        clicked: true,\n    }\n\n    const nextReverseBoard = updateReverseBoard(reverseBoard, clearBoard);\n\n    dispatch(changeValue({\n        board: clearBoard,\n        reverseBoard: nextReverseBoard,\n        clicked: { y, x }\n    }));\n};\n\n\nconst reverseBoard = _.cloneDeep(board);\nreverseBoard.reverse();\nreverseBoard.forEach(row => {\n    row.reverse();\n});\n\nconst initialState = {\n    socket: null,\n    error: null,\n    board,\n    reverseBoard,\n    clicked: null,\n    blocked: true,\n    reversed: false,\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { board } }) => ({\n        ...state,\n        board,\n        reverseBoard: updateReverseBoard(state.reverseBoard, board),\n    }),\n    [CHANGE_VALUE]: (state, { payload : { board, reverseBoard, clicked } }) => ({\n        ...state,\n        board,\n        reverseBoard,\n        clicked,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n    [INITIALIZE_BLOCKED]: (state, { payload: { blocked } }) => ({\n        ...state,\n        blocked,\n    }),\n    [CHANGE_BLOCKED]: (state, { payload: { blocked } }) => ({\n        ...state,\n        blocked,\n    }),\n    [SET_MOVE_PIECE_SUCCESS]: state => state,\n    [SET_MOVE_PIECE_FAILURE]: state => state,\n}, initialState);","import axios from 'axios';\n\nexport const movePiece = params =>\n    axios.post('/api/canvas/movePiece', params);","import { GiChessPawn, GiChessKing, GiChessQueen,\n    GiChessBishop, GiChessKnight, GiChessRook, GiPlainCircle } from 'react-icons/gi';\n\nexport const pieceMapper = {\n    'pawn': GiChessPawn,\n    'king': GiChessKing,\n    'queen': GiChessQueen,\n    'bishop': GiChessBishop,\n    'knight': GiChessKnight,\n    'rook': GiChessRook,\n    'covered': GiPlainCircle,\n}\n\nexport const playerMapper = {\n    'white': {\n        color: 'white',\n        style: {\n            filter: `drop-shadow(1px 1px 1px white)`,\n            width: '80%',\n            height: '80%',\n        }\n    },\n    'black': {\n        color: 'black',\n        style: {\n            filter: `drop-shadow(1px 1px 1px black)`,\n            width: '80%',\n            height: '80%',\n        }\n    },\n    'covered0': {\n        style: {\n            filter: `drop-shadow(1px 1px 1px black)`,\n            width: '30%',\n            height: '30%',\n            color: 'rgb(130, 151, 105)',\n            \n        }\n    },\n    'covered1': {\n        style: {\n            filter: `drop-shadow(1px 1px 1px black)`,\n            width: '30%',\n            height: '30%',\n            color: 'rgb(100, 111, 64)',\n        }\n    }\n}","import React, {useCallback} from 'react';\nimport styled, { css } from 'styled-components';\nimport { IconContext } from 'react-icons';\nimport { pieceMapper, playerMapper } from '../../lib/base/pieceConverter';\n\nconst pieceConverter = ({ piece, owner, covered, cellNum }) => {\n    let coveredCanvas = null;\n    \n    if(covered) {\n        const Component = pieceMapper['covered'];\n\n        coveredCanvas = (\n            <IconContext.Provider value={playerMapper[`covered${cellNum}`]}>\n                <Component />\n            </IconContext.Provider>\n        );\n    }\n\n    if(!piece || !owner) {\n        return coveredCanvas;\n    }\n\n    const Component = pieceMapper[piece];\n    const capturedObject = coveredCanvas ? {\n        opacity: 0.5,\n        filter: owner === 'black' ? `drop-shadow(1px 1px 1px white)` : `drop-shadow(1px 1px 1px black)`,\n    } : null;\n\n    const styleObject = {\n        ...playerMapper[owner],\n        style: {\n            ...playerMapper[owner].style,\n            ...capturedObject,\n        }\n    };\n\n    return (\n        <IconContext.Provider value={styleObject}>\n            <Component />\n        </IconContext.Provider>\n    )\n};\n\nconst CanvasBlock = styled.div`\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst CanvasRowBlock = styled.div`\n    display: flex;\n`;\n\nconst CanvasCellBlock = styled.div`\n    display: flex;\n    cursor: pointer;\n    justify-content: center;\n    align-items: center;\n    /* width: 90px;\n    height: 90px; */\n    \n    width: ${props => {\n        if(props.cellSize) {\n            return props.cellSize;\n        }\n        return '90px';\n    }};\n\n    height: ${props => {\n        if(props.cellSize) {\n            return props.cellSize;\n        }\n        return '90px';\n    }};\n\n    ${props => props.cellNum === 0 && css`\n        background-color: rgb(240, 217, 181);\n    `}\n\n    ${props => props.cellNum === 1 && css`\n        background-color: rgb(181, 136, 99);\n    `}\n\n    ${props => props.cellNum === 0 && props.clicked && css`\n        background-color: rgb(130, 151, 105);\n    `}\n\n    ${props => props.cellNum === 1 && props.clicked && css`\n        background-color: rgb(100, 111, 64);\n    `}\n\n    ${props => props.cellNum === 0 && props.tracked && css`\n        background-color: rgb(205, 210, 106);\n    `}\n\n    ${props => props.cellNum === 1 && props.tracked && css`\n        background-color: rgb(170, 162, 58);\n    `}\n\n    &:hover {\n        ${props => props.cellNum === 0 && props.covered && css`\n            background-color: rgb(174, 177, 135);\n        `}\n\n        ${props => props.cellNum === 1 && props.covered && css`\n            background-color: rgb(132, 121, 78);\n        `}  \n    }\n`\n\nconst CanvasRow = React.memo(({ row, y, cellSize, onClickCell, pieceConverter }) => {\n    // console.dir('Canvas Row');\n    return (\n        <CanvasRowBlock>\n            {row.map((cell, x) => (\n                <CanvasCell\n                    key={`cell_${y}_${x}`}\n                    onClick={onClickCell.bind(null, {y, x})}\n                    pieceConverter={pieceConverter}\n                    cellNum={(x + y) % 2}\n                    cellSize={cellSize}\n                    cell={cell}\n                    y={y}\n                    x={x}\n                />\n            ))}\n        </CanvasRowBlock>\n    )\n}, (prevProps, nextProps) => {\n    return prevProps.row === nextProps.row;\n});\n\nconst CanvasCell = React.memo(({ cell, cellSize, cellNum, onClick, pieceConverter, y, x }) => {\n    // console.dir(`Canvas Cell ${y}_${x}`);\n    return (\n        <CanvasCellBlock\n            onClick={onClick}\n            cellNum={cellNum}\n            cellSize={cellSize}\n            {...cell}\n        >\n            {pieceConverter({\n                piece: cell.piece,\n                owner: cell.owner,\n                covered: cell.covered,\n                cellNum,\n            })}\n        </CanvasCellBlock>\n    )\n}, (prevProps, nextProps) => {\n    return prevProps.cell === nextProps.cell;\n});\n\nconst CanvasContentBlock = styled.div`\n    ${props => props.blocked && css`\n        pointer-events: none;\n    `}\n`;\n\nconst CanvasContent = ({ board, blocked, cellSize, onClick }) => {\n    //  can't memoization\n    const onClickCell = useCallback(({y, x}) => {\n        onClick(y, x);\n    }, [onClick]);\n\n    // const rev = board.reverse().map((row, y) => (\n    //     <CanvasRow\n    //         key={`row_${y}`}\n    //         row={row.reverse()}\n    //         y={y}\n    //         cellSize={cellSize}\n    //         onClickCell={onClickCell}\n    //         pieceConverter={pieceConverter}\n    //     />\n    // ));\n    \n    return  (\n        <CanvasContentBlock blocked={blocked}>\n            {board.map((row, y) => (\n                <CanvasRow\n                    key={`row_${y}`}\n                    row={row}\n                    y={y}\n                    cellSize={cellSize}\n                    onClickCell={onClickCell}\n                    pieceConverter={pieceConverter}\n                />\n            ))}\n        </ CanvasContentBlock>\n    )\n}\n\nconst Canvas = props => {\n    return (\n        <CanvasBlock>\n            <CanvasContent {...props} />\n        </CanvasBlock>\n    )\n};\n\nexport default React.memo(Canvas);","import React, { useCallback, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Canvas from '../../components/gameplay/Canvas';\nimport { clickPieceThunk, initializeBlocked } from '../../modules/canvas';\nimport { clearValue } from '../../modules/canvas';\n\nconst CanvasContainer = ({ cellSize }) => {\n    const { board, reverseBoard, reversed, blocked, turn, role } = useSelector(({ canvas, socketAuth, game, record }) => ({\n        board: canvas.board,\n        reverseBoard: canvas.reverseBoard,\n        reversed: record.reversed,\n        blocked: canvas.blocked,\n        turn: game.turn,\n        role: socketAuth.role,\n    }));\n\n    const dispatch = useDispatch();\n    \n    useEffect(() => {\n        if((role === 'white' && turn % 2 === 0) || (role === 'black' && turn % 2 === 1)) {\n            dispatch(initializeBlocked({ blocked: false }));\n        } else {\n            dispatch(initializeBlocked({ blocked: true }));\n        }\n    }, [dispatch, turn, role]);\n    \n    useEffect(() => {\n        return () => {\n            dispatch(clearValue());\n        }\n    }, [dispatch])\n\n    //  function은 생성 당시의 Context를 가지고 있기 때문에 redux state값이 제대로 반영되지 않는다\n    //  생성되었던 event handler가 React dom에 붙어있기 때문에 dom이 rerender되지 않는 이상\n    //  오래된 state를 가지고 있을 수 밖에 없다. 따라서 ref를 통해 참조값을 가지고 있거나\n    //  혹은 redux state라면 이 코드와 같이 thunk를 사용하는 방법이 있다\n\n    const onClick = useCallback((y, x) => {\n        dispatch(clickPieceThunk({ y, x }));\n    }, [dispatch]);\n\n    let reversal = false;\n    if(((role === 'white' || role === 'spectator') && reversed) || (role === 'black' && !reversed)) {\n        reversal = true;\n    }\n\n    let servedBoard = board;\n    if(reversal) {\n        servedBoard = reverseBoard;\n    };\n\n    return (\n        <Canvas\n            board={servedBoard}\n            blocked={blocked}\n            onClick={onClick}\n            cellSize={cellSize}\n        />\n    )\n};\n\nexport default CanvasContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nimport CanvasContainer from '../../containers/gameplay/CanvasContainer';\n\nconst CanvasWrapperBlock = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    transition: 0.5s;\n    opacity: 0;\n\n    &:hover {\n        opacity: 1;\n    }\n`;\n\nconst UnClickableBlock = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* pointer-events: none; */\n`;\n\nconst CanvasWrapper = ({ cellSize }) => {\n    return (\n        <CanvasWrapperBlock>\n            <UnClickableBlock>\n                <CanvasContainer cellSize={cellSize} />\n            </UnClickableBlock>\n        </CanvasWrapperBlock>\n    )\n};\n\nexport default React.memo(CanvasWrapper);","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport useAsync from '../../lib/hook/useAsync';\nimport { connectWebsocket, disconnectWebsocket } from '../../modules/canvas';\nimport CanvasWrapper from '../../components/game/CanvasWrapper';\n\nconst CanvasWrapperContainer = ({ gameId, cellSize }) => {\n    const dispatch = useDispatch();\n\n    const connection = async () => {\n        dispatch(disconnectWebsocket());\n        await Promise.resolve().then(() => {\n            dispatch(connectWebsocket(gameId));\n        });\n        return true;\n    };\n\n    useEffect(() => {\n        return () => {\n            dispatch(disconnectWebsocket());\n        }\n    }, [dispatch]);\n\n    const [state] = useAsync(connection, [dispatch]);\n\n    const { loading, data, error } = state;\n\n    if(loading) return null;\n    if(error) return null;\n    if(data) {\n        return (\n            <CanvasWrapper cellSize={cellSize} />\n        )\n    }\n    return null;\n};\n\nexport default CanvasWrapperContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nimport CanvasWrapperContainer from '../../containers/game/CanvasWapperContainer';\n\nconst GridBoxBlock = styled.div`\n    z-index: 1;\n    display: flex;\n    position: relative;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 216px;\n    height: 216px;\n    background-color: rgb(255,255,255, 0.6);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    cursor: pointer;\n    transition: 0.5s;\n\n    &:hover {\n        background-color: rgb(255,255,255, 0.1);\n    }\n\n    &:first-child {\n        margin-left: 18px;\n    }\n\n    & + & {\n        margin-left: 18px;\n    }\n`\n\nconst BoxTitleBlock = styled.div`\n    \n`;\n\nconst BoxContentBlock = styled.div`\n    \n`;\n\nconst GridBox = ({ game, canvas, onClick, onMouseEnter, onMouseLeave, ...rest }) => {\n    console.dir('game~');\n\n    return (\n        <GridBoxBlock\n            onClick={() => onClick(game.key)}\n            onMouseEnter={onMouseEnter}\n            onMouseLeave={onMouseLeave}\n            {...rest}\n        >\n            <BoxTitleBlock>\n                {game.name}\n            </BoxTitleBlock>\n            <BoxContentBlock>\n                {game.participant}\n            </BoxContentBlock>\n            {canvas ?\n            (<CanvasWrapperContainer\n                gameId={game.key}\n                cellSize = '27px'\n            />)\n            : null}\n        </GridBoxBlock>\n    )\n};\n\nexport default React.memo(GridBox);","import React, { useCallback, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport GridBox from '../../components/game/GridBox';\n\nconst GridBoxContainer = ({ history, ...rest }) => {\n    const [ canvas, setCanvas ] = useState(false);\n\n    const onMouseEnter = useCallback(() => {\n        setCanvas(true);\n    }, []);\n\n    const onMouseLeave = useCallback(() => {\n        setCanvas(false);\n    }, []);\n\n    const onClick = useCallback((gameId) => {\n        history.push(`/game/${gameId}`);\n    }, [history]);\n\n    return (\n        <GridBox\n            {...rest}\n            canvas={canvas}\n            onClick={onClick}\n            onMouseEnter={onMouseEnter}\n            onMouseLeave={onMouseLeave}\n        />\n    )\n};\n\nexport default withRouter(GridBoxContainer);","import React from 'react';\nimport styled from 'styled-components';\nimport { FaApple } from 'react-icons/fa';\nimport { IconContext } from 'react-icons';\n\nimport GridBoxContainer from '../../containers/game/GridBoxContainer';\n\nconst gridSize = 3;\n\nconst GridRowBlock = styled.div`\n    display: flex;\n    width: 100%;\n\n    &:first-child {\n        margin-top: 18px;\n    }\n\n    &:last-child {\n        margin-bottom: 18px;\n    }\n\n    & + & {\n        margin-top: 18px;\n    }\n`;\n\nconst GridLayoutFrameBlock = styled.div`\n    position: relative;\n    background-color: rgba(255, 255, 255, 0.5);\n`;\n\nconst GridLayoutHiddenBlock = styled.div`\n    width: 720px;\n    height: 720px;\n    overflow: hidden;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst GridLayoutBlock = styled.div`\n    width: 720px;\n    height: 720px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    overflow-y: overlay;\n    padding-right: 20px;\n`;\n\nconst GridLayout = ({ games, onGameClick }) => {\n   \n    if(!games) return <GridLayoutBlock />;\n\n    const list = [ ...games ];\n    \n    const backgroundStyle = {\n        position: 'absolute',\n        top: '0',\n        left: '0',\n        width: '720px',\n        height: '720px',\n        opacity: '0.2',\n        zIndex: -1,\n    }\n    const gridArr = [];\n    const rowSize = Math.floor(list.length / gridSize);\n    for(let i=0; i<=rowSize; ++i) {\n        gridArr.push(\n            <GridRowBlock\n                key={`GridRowBlock_${i}`}\n            >\n                {\n                    list.splice(0, gridSize).map(game => (\n                        <GridBoxContainer\n                            key={`GridBox${game.name}`}\n                            game={game}\n                            onClick={e => onGameClick(e, game.key)}\n                        />\n                    ))\n                }\n            </GridRowBlock>\n        );\n    }\n\n    return (\n        <GridLayoutFrameBlock>\n            <GridLayoutHiddenBlock>\n                <GridLayoutBlock>\n                    {gridArr}\n                </GridLayoutBlock>\n            </GridLayoutHiddenBlock>\n            <IconContext.Provider value={{ style: backgroundStyle }}>\n                <FaApple />\n            </IconContext.Provider>\n        </ GridLayoutFrameBlock>\n    )\n};\n\nexport default React.memo(GridLayout);","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport GridLayout from '../../components/game/GridLayout';\n\nconst GridLayoutContainer = () => {\n    const { games } = useSelector(({ games }) => ({\n        games: games.games,\n    }));\n\n    return (\n        <GridLayout games={games} />\n    )\n};\n\nexport default GridLayoutContainer;","import React from 'react';\n\nconst Summary = () => {\n    return (\n        <>\n        </>\n    )\n};\n\nexport default React.memo(Summary);","import React from 'react';\nimport Summary from '../../components/game/Summary';\n\nconst SummaryContainer = () => {\n    return (\n        <Summary />\n    )\n};\n\nexport default SummaryContainer;","import { useState, useCallback, useRef, useEffect } from 'react';\n\nconst CheckOutsideOfComponent = (initialState) => {\n    const [componentState, setComponentState] = useState(initialState);\n    const ref = useRef(null);\n\n    const checkClickOutside = useCallback(e => {\n        if(ref.current && !ref.current.contains(e.target)) {\n            setComponentState(false);\n        }\n    }, []);\n\n    //  not Capturing, use Bubbling(Default)\n    useEffect(() => {\n        document.addEventListener('click', checkClickOutside);\n        return () => {\n            document.removeEventListener('click', checkClickOutside);\n        }\n    }, [checkClickOutside]);\n\n    return { ref, componentState, setComponentState };\n}\n\nexport default CheckOutsideOfComponent;","import React from 'react';\nimport styled from 'styled-components';\n\nconst SelectionFrameBlock = styled.div`\n    position: relative;\n`\n\nconst NameBlock = styled.div`\n    position: absolute;\n    top: -10px;\n    left: 70%;\n    width: 30%;\n    display: flex;\n    justify-content: flex-end;\n    font-weight: 500;\n    font-size: 12px;\n    color: rgba(0,0,0,0.3);\n`\n\nconst SelectionBlock = styled.div`\n    width: 130px;\n    height: 30px;\n    box-sizing: border-box;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding-left: 10px;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    font-size: 13px;\n    \n    cursor: pointer;\n    &:active {\n        background-color: rgba(0,0,0,0.1);\n    }\n`\n\nconst SelecitonToolTipFrameBlock = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    margin-top: 40px;\n    z-index: 10;\n    background-color: white;\n    display: flex;\n    flex-direction: column;\n    width: 130px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst SelectionToolTipBlock = styled.div`\n    width: 100%;\n    box-sizing: border-box;\n    height: 30px;\n    padding-left: 10px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    font-size: 13px;\n\n    &:hover {\n        background-color: rgba(0,0,0,0.1);\n    }\n`;\n\nconst Selection = ({\n    kind,\n    name,\n    list,\n    reference,\n    componentState,\n    onClickSelection,\n    onClickOption\n}) => {    \n    return (\n        <SelectionFrameBlock>\n            <NameBlock>\n                {kind}\n            </NameBlock>\n            <SelectionBlock\n                ref={reference}\n                onClick={onClickSelection}\n            >\n                {name}\n            </SelectionBlock>\n            {componentState && (\n                <SelecitonToolTipFrameBlock>\n                    {list.map(optionName => (\n                        <SelectionToolTipBlock\n                            key={optionName}\n                            onClick={() => onClickOption(optionName)}\n                        >\n                            {optionName}\n                        </SelectionToolTipBlock>\n                    ))}\n                </SelecitonToolTipFrameBlock>\n            )}\n        </SelectionFrameBlock>\n    );\n};\n\nexport default React.memo(Selection);","import { createAction, handleActions } from 'redux-actions';\n\nconst CHANGE_FIELD = 'create/CHANGE_FIELD';\nconst CLEAR_FIELD = 'create/CLEAR_FIELD';\nexport const changeField = createAction(CHANGE_FIELD, payload => payload);\nexport const clearField = createAction(CLEAR_FIELD, payload => payload);\n\nconst initialState = {\n    map: 'Classical',\n    mapList: ['Classical', 'Crazy House', 'Racing Kings'],\n    mode: 'Normal',\n    modeList: ['Normal', 'Rank'],\n    defaultTime: 15,\n    extraTime: 30,\n    config: {\n        defaultTime: {\n            min: 1,\n            max: 30,\n            step: 1,\n        },\n        extraTime: {\n            min: 0,\n            max: 60,\n            step: 5,\n        }\n    },\n    piece: 'white',\n};\n\nexport default handleActions({\n    [CHANGE_FIELD]: (state, { payload: { key, value } }) => ({\n        ...state,\n        [key]: value,\n    }),\n    [CLEAR_FIELD]: state => initialState,\n}, initialState);","import React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport CheckOutsideOfComponent from '../../containers/HOC/CheckOutsideOfComponent';\nimport Selection from '../../components/game/Selection';\nimport { changeField } from '../../modules/create';\n\nconst SelecitonContainer = ({ kind }) => {\n    const { name, list } = useSelector(({ create }) => ({\n        name: create[kind],\n        list: create[`${kind}List`],\n    }));\n\n    const dispatch = useDispatch();\n\n    const { ref: reference, componentState, setComponentState } = CheckOutsideOfComponent(false);\n\n    const onClickSelection = useCallback(() => {\n        setComponentState(prevState => !prevState);\n    }, [setComponentState]);\n\n    const onClickOption = useCallback(name => {\n        dispatch(changeField({\n            key: kind,\n            value: name,\n        }));\n    }, [dispatch, kind]);\n\n    return (\n        <Selection\n            kind={kind}\n            name={name}\n            list={list}\n            reference={reference}\n            componentState={componentState}\n            onClickSelection={onClickSelection}\n            onClickOption={onClickOption}\n        />\n    )\n};\n\nexport default SelecitonContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nconst SliderFrameBlock = styled.div`\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    & + & {\n        margin-top: 15px;\n    }\n`;\n\nconst SliderBoxBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 200px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst SliderBlock = styled.input`\n    -webkit-appearance: none;\n    width: 150px;\n    height: 30px;\n    cursor: pointer;\n    background: ${props => {\n        if(props.kind === 'defaultTime') {\n            // return `linear-gradient(to right, #16a085 0%, black 100%)`;\n            return `linear-gradient(to right, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.6) 100%)`;\n        } else {\n            // return `linear-gradient(to right, red 0%, black 100%)`;\n            return `linear-gradient(to right, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.6) 100%)`;\n        }\n    }};\n    background-size: 140px 5px;\n    background-position: center;\n    background-repeat: no-repeat;\n    overflow: hidden;\n    outline: none;\n    /* zoom: 100%; */\n    display: block;\n\n    &::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        width: 10px;\n        height: 10px;\n        box-shadow: 0 2px 2px 0 rgba(0,0,0,0.36), 0 3px 1px -2px rgba(0,0,0,0.6), 0 1px 5px 0 rgba(0,0,0,0.36);\n        position: relative;\n        background-color: rgba(255,255,255, 0.8);\n        z-index: 3;\n    };\n`;\n\nconst NameBlock = styled.div`\n    position: absolute;\n    top: -10px;\n    left: 70%;\n    width: 30%;\n    display: flex;\n    justify-content: flex-end;\n    font-weight: 500;\n    font-size: 12px;\n    color: rgba(0,0,0,0.3);\n`\n\nconst ValueBlock = styled.div`\n    display: flex;\n    position: relative;\n    justify-content: center;\n    align-items: center;\n    font-size: 15px;\n    width: 60px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst Slider = ({ onChange, kind, value, config }) => {\n    const name = kind.substring(0, kind.length - 4);\n\n    return (\n        <SliderFrameBlock>\n            <SliderBoxBlock>\n                <SliderBlock\n                    type='range'\n                    onChange={onChange}\n                    {...config}\n                    kind={kind}\n                    value={value}\n                />\n            </SliderBoxBlock>\n            <ValueBlock>\n                <NameBlock>\n                    {name}\n                </NameBlock>\n                {value}\n            </ValueBlock>\n        </SliderFrameBlock>\n    )\n};\n\nexport default React.memo(Slider);","import React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport Slider from '../../components/game/Slider';\nimport { changeField } from '../../modules/create';\n\nconst SliderContainer = ({ kind }) => {\n    const { value, config } = useSelector(({ create }) => ({\n        value: create[kind],\n        config: create.config[kind],\n    }));\n    const dispatch = useDispatch();\n\n    const onChange = useCallback(e => {\n        dispatch(changeField({\n            key: kind,\n            value: e.target.value,\n        }));\n    }, [dispatch, kind]);\n\n    return (\n        <Slider\n            onChange={onChange}\n            kind={kind}\n            value={value}\n            config={config}\n        />\n    )\n};\n\nexport default SliderContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport { FaChessKing } from 'react-icons/fa';\nimport { IconContext } from 'react-icons';\n\nconst IconBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n\n    background-color: ${props => props.checked && 'rgba(0,0,0,0.1)' };\n    &:hover {\n        background-color: rgba(0, 0, 0, 0.1);\n    }\n`;\n\nconst Icon = ({ checked, kind, onClick }) => {\n    const opposite = kind === 'white' ? 'black' : 'white';\n    const styleObj = {\n        style: {\n            color: kind,\n            filter: `drop-shadow(1px 1px 1px ${opposite})`,\n            width: '30px',\n            height: '30px',\n        }\n    };\n\n    return (\n        <IconBlock\n            checked={checked ? 1 : 0}\n            onClick={() => onClick(kind)}\n        >\n            <IconContext.Provider value={styleObj}>\n                <FaChessKing />\n            </IconContext.Provider>\n        </IconBlock>\n    )\n};\n\nexport default React.memo(Icon);","import React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport Icon from '../../components/game/Icon';\nimport { changeField } from '../../modules/create';\n\nconst IconContainer = ({ white, black }) => {\n    const { piece } = useSelector(({ create }) => ({\n        piece: create.piece,\n    }));\n\n    const dispatch = useDispatch();\n    \n    const onClick = useCallback(value => {\n        dispatch(changeField({\n            key: 'piece',\n            value,\n        }))\n    }, [dispatch]);\n\n    const kind = white ? 'white': (black ? 'black' : null);\n    const checked = piece === kind;\n    \n    return (\n        <Icon\n            kind={kind}\n            checked={checked}\n            onClick={onClick}\n        />\n    )\n};\n\nexport default IconContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nimport SelectionContainer from '../../containers/game/SelectionContainer';\nimport SliderContainer from '../../containers/game/SliderContainer';\nimport IconContainer from '../../containers/game/IconContainer';\n\nconst CreationBlock = styled.form`\n    padding: 30px;\n    box-sizing: border-box;\n    width: 100%;\n    height: 400px;\n    background-color: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst TitleBlock = styled.div`\n    font-size: 24px;\n    font-weight: 700;\n`;\n\nconst SelectionBundleBlock = styled.div`\n    margin-top: 40px;\n    display: flex;\n    justify-content: space-between;\n`;\n\nconst SliderBundleBlock = styled.div`\n    margin-top: 20px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n`;\n\nconst IconBundleBlock = styled.div`\n    position: relative;\n    height: 60px;\n    margin-top: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst SubmitBlock = styled.div`\n    margin-top: 30px;\n    position: relative;\n    display: flex;\n    justify-content: flex-end;\n    width: 100%;\n`;\n\nconst ConfirmFrameBlock = styled.div`\n    position: relative;\n    width: 65px;\n    height: 40px;\n`;\n\nconst ConfirmBlock = styled.button`\n    cursor: pointer;\n    position: absolute;\n    border: none;\n    outline: none;\n    margin: 0;\n    padding: 0;\n    font-size: 20px;\n    font-weight: 700;\n    top: 0px;\n    left: 0px;\n    display: flex;\n    justify-content: flex-end;\n    width: 65px;\n    height: 40px;\n    color: rgba(0, 0, 0, 0.3);\n    transition: 0.5s;\n    background-color: transparent;\n\n    @keyframes jump {\n        0%, 100% {\n            top: 0;\n        }\n        50% {\n            top: -3px;\n        }\n    }\n\n    &:hover {\n        animation: jump 0.5s 1;\n        color: rgba(0, 0, 0, 0.6);\n    }\n`;\n\nconst NameBlock = styled.div`\n    position: absolute;\n    top: -10px;\n    left: 70%;\n    width: 30%;\n    display: flex;\n    justify-content: flex-end;\n    font-weight: 500;\n    font-size: 12px;\n    color: rgba(0,0,0,0.3);\n`\n\nconst Creation = ({ onSubmit }) => {\n    return (\n        <CreationBlock onSubmit={onSubmit}>\n            <TitleBlock>\n                New Game\n            </TitleBlock>\n            <SelectionBundleBlock>\n                <SelectionContainer kind='map' />\n                <SelectionContainer kind='mode' />\n            </SelectionBundleBlock>\n            <SliderBundleBlock>\n                <SliderContainer kind='defaultTime'/>\n                <SliderContainer kind='extraTime'/>\n            </SliderBundleBlock>\n            <IconBundleBlock>\n                <NameBlock>\n                    Piece\n                </NameBlock>\n                <IconContainer white/>\n                <IconContainer black/>\n            </IconBundleBlock>\n            <SubmitBlock>\n                <ConfirmFrameBlock>\n                    <ConfirmBlock type='submit' >\n                        Create\n                    </ConfirmBlock>\n                </ConfirmFrameBlock>\n            </SubmitBlock>\n        </CreationBlock>\n    )\n};\n\nexport default React.memo(Creation);","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as gamesCtrl from '../lib/api/games';\n\nconst CONNECT_WEBSOCKET = 'games/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'games/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'games/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'games/INITIALIZE_SOCKET';\nconst CLEAR_VALUE = 'games/CLEAR_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nconst [ CREATE_GAME, CREATE_GAME_SUCCESS, CREATE_GAME_FAILURE ] = createRequestActionTypes('games/CREATE_GAME');\nexport const createGameThunk = createRequestThunk(CREATE_GAME, gamesCtrl.createGame);\n\nfunction* connectWebsocketSaga () {\n    const socketTask = yield fork(connectNamespace, { \n        url: '/games',\n        initializeSocket,\n        initializeValue,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* gamesSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    games: null,\n    error: null,\n}\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { games }}) => ({\n        ...state,\n        games,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n    [CREATE_GAME_SUCCESS]: state => state,\n    [CREATE_GAME_FAILURE]: (state, { payload: error }) => ({\n        ...state,\n        error,\n    }),\n}, initialState);","import axios from 'axios';\n\n//  REST API 방식\n\nexport const createGame = params =>\n    axios.post('/api/games', params);","import React, { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router';\n\nimport Creation from '../../components/game/Creation';\nimport { clearField } from '../../modules/create';\nimport { createGameThunk } from '../../modules/games';\n\nconst CreationContainer = ({ history }) => {\n    const { map, mode, defaultTime, extraTime, piece } = useSelector(({ create }) => ({\n        map: create.map,\n        mode: create.mode,\n        defaultTime: create.defaultTime,\n        extraTime: create.extraTime,\n        piece: create.piece,\n    }));\n\n    const dispatch = useDispatch();\n\n    const onSubmit = useCallback(e => {\n        e.preventDefault();\n        (async() => {\n            const key = await dispatch(createGameThunk({\n                map,\n                mode,\n                defaultTime,\n                extraTime,\n                piece\n            }));\n            console.dir(piece);\n            history.push(`/game/${key}`);\n        })();\n    }, [dispatch, history, map, mode, defaultTime, extraTime, piece]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearField());\n        }\n    }, [dispatch]);\n\n    return (\n        <Creation onSubmit={onSubmit}/>\n    )\n};\n\nexport default withRouter(CreationContainer);","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nimport GridLayoutContainer from '../../containers/game/GridLayoutContainer';\nimport SummaryContainer from '../../containers/game/SummaryContainer';\nimport CreationContainer from '../../containers/game/CreationContainer';\n\nconst GameLayoutBlock = styled.div`\n    height: 800px;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst sideBlockStyle = css`\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n`;\n\nconst LeftSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-right: 1%;\n`;\n\nconst RightSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-left: 1%;\n`;\n\nconst GameLayout = () => {\n    return (\n        <>\n            <GameLayoutBlock>\n                <LeftSideBlock>\n                    <SummaryContainer />\n                </LeftSideBlock>\n                <GridLayoutContainer />\n                <RightSideBlock>\n                    <CreationContainer />\n                </RightSideBlock>\n            </GameLayoutBlock>          \n        </>\n    )\n};\n\nexport default React.memo(GameLayout);","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport useAsync from '../../lib/hook/useAsync';\nimport { setSessionThunk } from '../../modules/sessionAuth';\nimport GameLayout from '../../components/game/GameLayout';\n\nimport { connectWebsocket, disconnectWebsocket, clearValue } from '../../modules/games';\n\nconst GameLayoutContainer = () => {\n    const dispatch = useDispatch();\n\n    const connection = async() => {\n        await dispatch(setSessionThunk());\n        \n        dispatch(disconnectWebsocket());\n        await Promise.resolve().then(() => {\n            dispatch(connectWebsocket());\n        });\n        return true;\n    };\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearValue());\n        }\n    }, [dispatch])\n\n    const [state] = useAsync(connection, [ dispatch ]);\n\n    const { loading, data, error } = state;\n\n    if(loading) return null;\n    if(error) return null;\n    if(data) {\n        return (\n            <GameLayout />\n        )\n    }\n    return null;\n};\n\nexport default GameLayoutContainer;","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nimport GameLayoutContainer from '../containers/game/GameLayoutContainer';\nimport HeaderContainer from '../containers/common/HeaderContainer';\n\nconst GamePage = () => {\n    return (\n        <>\n            <Helmet>\n                <title>Game • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <GameLayoutContainer />\n        </>\n    )\n};\n\nexport default GamePage;","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as chatAPI from '../lib/api/chat';\n\nconst CONNECT_WEBSOCKET = 'chat/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'chat/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_SOCKET = 'chat/INITIALIZE_SOCKET';\nconst INITIALIZE_VALUE = 'chat/INITIALIZE_VALUE';\nconst CHANGE_VALUE = 'chat/CHANGE_VALUE';\nconst CLEAR_VALUE = 'chat/CLEAR_VALUE'\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nconst CHANGE_TEXTFIELD = 'chat/CHANGE_TEXTFIELD';\nconst INITIALIZE_TEXTFIELD = 'chat/INITIALIZE_TEXTFIELD';\nexport const changeTextfield = createAction(CHANGE_TEXTFIELD, payload => payload);\nexport const initializeTextfield = createAction(INITIALIZE_TEXTFIELD);\n\nconst [ SEND_MESSAGE, SEND_MESSAGE_SUCCESS, SEND_MESSAGE_FAILURE ] = createRequestActionTypes('chat/SEND_MESSAGE');\nexport const sendMessageThunk = createRequestThunk(SEND_MESSAGE, chatAPI.sendMessage);\n\nfunction* connectWebsocketSaga (action) {\n    // const key = action.payload;\n    // const query = `key=${key}`;\n\n    const query = action.payload;\n    \n    const socketTask = yield fork(connectNamespace, {\n        url: '/chat',\n        initializeSocket,\n        initializeValue,\n        changeValue,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* chatSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    messages: [],\n    text: '',\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { nickname, color, message }}) => ({\n        ...state,\n        messages: [{ nickname, color, message }],\n    }),\n    [CHANGE_VALUE]: (state, { payload: { nickname, color, message} }) => ({\n        ...state,\n        messages: [ ...state.messages, { nickname, color, message} ],\n    }),\n    [SEND_MESSAGE_SUCCESS]: state => state,\n    [SEND_MESSAGE_FAILURE]: state => state,\n    [INITIALIZE_TEXTFIELD]: state => ({\n        ...state,\n        text: '',\n    }),\n    [CHANGE_TEXTFIELD]: (state, { payload: text}) => ({\n        ...state,\n        text,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n}, initialState);","import axios from 'axios';\n\nexport const sendMessage = message =>\n    axios.post('/api/chat/sendMessage', message);\n    \n// export const sendMessage = message =>\n//     axios.post('http://localhost:5000/api/chat/sendMessage', message);","import React, { useRef, useEffect } from 'react';\nimport styled, { css } from 'styled-components';\nimport { IoIosSend } from 'react-icons/io';\nimport { IconContext } from 'react-icons';\n\nconst ChatSubmitBlock = styled.form`\n    width: 100%;\n`;\n\nconst ChatFrameBlock = styled.div`\n    position: relative;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst ChatHiddenBlock = styled.div`\n    height: 360px;\n    width: 100%;\n    overflow: hidden;\n`;\n\nconst ChatBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 360px;\n    width: 100%;\n    padding-right: 20px;\n    overflow-y: overlay;\n`;\n\nconst ChatFormBlock = styled.div`\n    position: absolute;\n    width: 100%;\n    display: flex;\n    background-color: white;\n    top: 365px;\n    /* box-shadow: rgba(0,0,0,0.05) 0px -2px 2px 0px, rgba(0,0,0,0.08) 0px -3px 1px -2px, rgba(0,0,0,0.04) 0px -1px 5px 0px; */\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\n`;\n\nconst ChatInputBlock = styled.input`\n    outline: none;\n    border: none;\n    align-items : center;\n    color: black;\n    background-color: transparent;\n    font-size: 12px;\n    width: 80%;\n    height : 30px;\n    padding-left: 10px;\n`;\n\nconst ChatButtonBlock = styled.button`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 20%;\n    font-size: 12px;\n    background-color: rgb(247,246,245);\n    border: none;\n    cursor: pointer;\n\n    &:hover, &:focus {\n        background-color: #D3D3D3;\n    } \n`;\n\nconst MessageBlock = styled.div`\n    display: flex;\n    align-items: center;\n    width: 90%;\n    height : 36px;\n    min-height : 36px;\n    font-size : 12px;\n    background-color: white;\n\n    ${props => props.owner === 'my' && css`\n        justify-content: flex-end;\n    `};\n\n    ${props => props.owner === 'other' && css`\n        justify-content: flex-start;\n    `};\n\n    ${props => props.owner === 'server' && css`\n        justify-content: center;\n    `};\n`;\n\nconst BalloonBlock = styled.div`\n    position: relative;\n    background: #ffff80;\n    padding: 5px;\n\n    &:after {\n        content: '';\n        position: absolute;\n        right: 0;\n        top: 50%;\n        width: 0;\n        height: 0;\n        border: 8px solid transparent;\n        border-left-color: #ffff80;\n        border-right: 0;\n        border-top: 0;\n        margin-top: -5px;\n        margin-right: -8px;\n    }\n\n    \n    ${props => props.owner === 'other' && css `\n        background: rgb(247,246,245);\n\n        &:after {\n            content: '';\n            position: absolute;\n            left: 0;\n            top: 50%;\n            width: 0;\n            height: 0;\n            border: 8px solid transparent;\n            border-top: 0;\n            margin-top: -5px;\n            border-right-color: rgb(247,246,245);\n            border-left: 0;\n            margin-left: -8px;\n        }\n    `}\n`;\n\nconst Balloon = ({ owner, children }) => {\n    let ballonBlock;\n    if(owner === 'my') {\n        ballonBlock = (\n            <BalloonBlock owner={owner}>\n                {children}\n            </BalloonBlock>\n        )\n    } else if(owner === 'other') {\n        ballonBlock = (\n            <BalloonBlock owner={owner}>\n                {children}\n            </BalloonBlock>\n        )\n    } else if(owner === 'server') {\n        ballonBlock = (\n            <>\n                {children}\n            </>\n        )\n    }\n\n    return (\n        <>\n            {ballonBlock}\n        </>\n    )\n}\n\nconst Message = React.memo(({ message, myName, ...rest }) => {\n    const owner = message.nickname ? (message.nickname === myName ? 'my' : 'other') : 'server';\n    const text = owner === 'other' ? message.nickname + ' : ' + message.message : message.message;\n\n    return (\n        <MessageBlock\n            {...rest} \n            color={message.color}\n            owner={owner}\n        >\n            <Balloon owner={owner}>\n                {text}\n            </Balloon>\n        </MessageBlock>\n    )\n});\n\nconst Chat = ({ messages, onSubmit, onChange, text, nickname }) => {\n    const ref = useRef();\n    useEffect(() => {\n        ref.current.scrollTop = ref.current.scrollHeight;\n    }, [messages]);\n\n    return (\n        <>\n            <ChatSubmitBlock onSubmit={onSubmit}>\n                <ChatFrameBlock>\n                    <ChatHiddenBlock>\n                        <ChatBlock ref={ref}>\n                            {messages.map((message, index) => (\n                                <Message\n                                    key={index}\n                                    myName={nickname}\n                                    message={message}\n                                />\n                            ))}\n                        </ChatBlock>\n                    </ChatHiddenBlock>\n                    <ChatFormBlock>\n                        <ChatInputBlock\n                            onChange={onChange}\n                            value={text}\n                        />\n                        <ChatButtonBlock\n                            onSubmit={onSubmit}\n                        >\n                            <IconContext.Provider value={{style: { width:'40%', height:'40%' }}}>\n                                <IoIosSend />\n                            </IconContext.Provider>\n                        </ ChatButtonBlock>\n                    </ChatFormBlock>\n                </ChatFrameBlock>\n            </ChatSubmitBlock>\n        </>\n    )\n};\n\nexport default React.memo(Chat);","import React, { useEffect, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { changeTextfield, initializeTextfield } from '../../modules/chat';\nimport { sendMessageThunk, clearValue } from '../../modules/chat';\nimport Chat from '../../components/gameplay/Chat';\n\nconst ChatContainer = () => {\n    const dispatch = useDispatch();\n\n    const { socket, messages, text, nickname } = useSelector(({ chat, socketAuth }) => ({\n        socket: chat.socket,\n        messages: chat.messages,\n        text: chat.text,\n        nickname: socketAuth.nickname,\n    }));\n\n    const onSubmit = useCallback(e => {\n        e.preventDefault();\n        dispatch(sendMessageThunk({ socket, message: text }));\n        dispatch(initializeTextfield());\n    }, [dispatch, text, socket]);\n\n    const onChange = useCallback(e => {\n        dispatch(changeTextfield(e.target.value));\n    },[dispatch]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearValue());\n        }\n    }, [dispatch]);\n\n    return (\n        <Chat\n            messages={messages}\n            onSubmit={onSubmit}\n            onChange={onChange}\n            text={text}\n            nickname={nickname}\n        />\n    )\n};\n\nexport default ChatContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst TimerBlock = styled.div`\n    width: 50%;\n    height: 60px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    background-color: white;\n    ${props => props.color && css`\n        background-color: rgb(208, 224, 189);\n    `}\n    ${props => props.time <= 10000 && css`\n        background-color: rgb(230, 153, 153);\n    `}\n`;\n\nconst TimeSliceBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 47%;\n    color: black;\n    font-size: 50px;\n`;\n\nconst ColonBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 100%;\n    width: 6%;\n    color: black;\n    opacity: 0.5;\n    font-size: 50px;\n`;\n\nconst timeConverter = timeSlice => {\n    let convertedTime = '';\n    convertedTime += String(Math.floor(timeSlice / 10));\n    convertedTime += String(Math.floor(timeSlice % 10));\n    return convertedTime;\n}\n\nconst Timer = ({ time, color }) => {\n    \n    const minute = Math.floor(time / 60000);\n    const second = Math.floor((time % 60000) / 1000);\n\n    // eslint-disable-next-line\n    if(time == undefined || time === null) {\n        return <TimerBlock />\n    }\n\n    return (\n        <TimerBlock\n            time={time}\n            color={color ? 1 : 0}\n        >\n            <TimeSliceBlock>\n                {timeConverter(minute)}\n            </TimeSliceBlock>\n            <ColonBlock>\n                :\n            </ColonBlock>\n            <TimeSliceBlock>\n                {timeConverter(second)}\n            </TimeSliceBlock>\n        </TimerBlock>\n    )\n}\n\nexport default Timer;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Timer from '../../components/gameplay/Timer';\n\nconst TimerContainer = ({ white }) => {\n\n    const { whiteTime, blackTime, start, order } = useSelector(({ record, game }) => ({\n        whiteTime: record.whiteTime,\n        blackTime: record.blackTime,\n        start: game.start,\n        order: game.order,\n    }));\n\n    const time = white ? whiteTime : blackTime;\n    const color = white ? (start && order === 'white') : (start && order === 'black');\n\n    return (\n        <Timer\n          time={time}\n          color={color}\n        />\n    )\n    \n};\n\nexport default TimerContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { IconContext } from 'react-icons';\nimport { FaCircle, FaRegCircle } from 'react-icons/fa';\n\nconst StatusBlock = styled.div`\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 30px;\n    background-color: white;\n\n    ${props => props.beneath && css`\n        margin-top: 30px;\n    `}\n`;\n\nconst NameBlock = styled.div`\n    font-size: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`\n\nconst Status = ({ light, name, beneath }) => {\n    const iconStyle = {\n        style: {\n            height: '15px',\n            width: '10%',\n            color: 'green',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n        }\n    };\n\n    return (\n        <StatusBlock beneath={beneath ? 1 : 0}>\n            {light\n                ? (\n                    <IconContext.Provider value={iconStyle}>\n                        <FaCircle />\n                    </IconContext.Provider>\n                )\n                : (\n                    <IconContext.Provider value={{ style: { ...iconStyle.style, color: 'black' }}}>\n                        <FaRegCircle />\n                    </IconContext.Provider>\n                )\n            }\n            <NameBlock>\n                {name}\n            </NameBlock>\n        </StatusBlock>\n    )\n};\n\nexport default React.memo(Status);","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Status from '../../components/gameplay/Status';\n\nconst StatusContainer = ({ black, white, beneath }) => {\n    const { blackNick, whiteNick, participant } = useSelector(({ game }) => ({\n        blackNick: game.black,\n        whiteNick: game.white,\n        participant: game.participant,\n    }));\n\n    const participantSet = new Set(participant);\n    const light = (white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick));\n    const name = (white && whiteNick) || (black && blackNick);\n\n    return (\n        <Status\n            light={light}\n            name={name}\n            beneath={beneath}\n        />\n    )\n};\n\nexport default StatusContainer;","import React, { useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { IconContext } from 'react-icons';\nimport { IoIosArrowRoundForward } from 'react-icons/io';\nimport { pieceMapper } from '../../lib/base/pieceConverter';\n\nconst PieceMoveListHiddenBlock = styled.div`\n    height: 270px;\n    width: 100%;\n    overflow: hidden;\n`;\n\nconst PieceMoveListBlock = styled.div`\n    height: 270px;\n    width: 100%;\n    overflow-y: overlay;\n    padding-right: 20px;\n`;\n\nconst PieceMoveBlock = styled.div`\n    width: 100%;\n    height: 30px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n\n    &:first-child {\n        margin-top: 30px;\n    }\n`;\n\nconst moveConverter = ({x, y}) => {\n    return String.fromCharCode(97 + x) + (8 - y);\n}\n\nconst MoveBlock = styled.div`\n    width: 80%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    &:hover {\n        background-color: rgb(209, 228, 246);\n    }\n`;\n\nconst TextBlock = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20%;\n    font-size: 18px;\n`\n\nconst IndexBlock = styled.div`\n    width: 20%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 18px;\n    background-color: rgb(247, 246, 245);\n`\n\nconst PieceMove = React.memo(({ move, index, onClickBlock }) => {\n    console.dir('PieceMove');\n    console.dir(move);\n    const PrevComponent = pieceMapper[move.prevPiece.piece];\n    const prevStyle = {\n        color: move.prevPiece.owner,\n        style: {\n            width: '10%',\n            filter: `drop-shadow(1px 1px 1px ${move.prevPiece.owner === 'white' ? 'black' : 'white'})`,\n        }\n    };\n\n    const prevPiece = (\n        <IconContext.Provider value={prevStyle}>\n            <PrevComponent />\n        </IconContext.Provider>\n    )\n\n    let NextComponent, nextStyle;\n\n    let nextPiece = (\n        <div style={{ width: '10%' }}/>\n    )\n\n    if(move.nextPiece.piece) {\n        NextComponent = pieceMapper[move.nextPiece.piece];\n        nextStyle = {\n            color: move.nextPiece.owner,\n            style: {\n                width: '10%',\n                filter: `drop-shadow(1px 1px 1px ${move.nextPiece.owner === 'white' ? 'black' : 'white'})`,\n            }\n        };\n        nextPiece = (\n            <IconContext.Provider value={nextStyle}>\n                <NextComponent />\n            </IconContext.Provider>\n        )\n    }\n\n    \n    return (\n        <PieceMoveBlock>\n            <IndexBlock>\n                {index + 1}\n            </IndexBlock>\n            <MoveBlock onClick={onClickBlock}>\n                {prevPiece}\n                <TextBlock>\n                    {moveConverter(move.prev)}\n                </TextBlock>\n                <IconContext.Provider value={{ style: { color: 'rgb(169,169,169)' }}}>\n                    <IoIosArrowRoundForward />\n                </IconContext.Provider>\n                <TextBlock>\n                    {moveConverter(move.next)}\n                </TextBlock>\n                {nextPiece}\n            </MoveBlock>\n        </PieceMoveBlock>\n    )\n});\n\n\nconst PieceMoveList = ({ pieceMove, onClickBlock }) => {\n    const ref = useRef();\n    useEffect(() => {\n        ref.current.scrollTop = ref.current.scrollHeight;\n    }, [pieceMove]);\n\n    return (\n        <PieceMoveListHiddenBlock>\n            <PieceMoveListBlock ref={ref}>\n                {pieceMove.map((move, index) => (\n                    <PieceMove \n                        onClick={onClickBlock}\n                        move={move}\n                        index={index}\n                    />\n                ))}\n            </PieceMoveListBlock>\n        </PieceMoveListHiddenBlock>\n    )\n};\n\nexport default React.memo(PieceMoveList);","import React, { useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport PieceMoveList from '../../components/gameplay/PieceMoveList';\n\nconst PieceMoveListContainer = () => {\n    \n    // const dispatch = useDispatch();\n\n    const { pieceMove } = useSelector(({ record }) => ({\n        pieceMove: record.pieceMove,\n    }));\n\n    const onClickBlock = useCallback(() => {\n\n    }, []);\n\n    return (\n        <PieceMoveList\n            onClickBlock = {onClickBlock}\n            pieceMove={pieceMove}\n        />\n    )\n};\n\nexport default PieceMoveListContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst TimeLineBlock = styled.div`\n    position: absolute;\n    height: 2px;\n    background-color: green;\n    transition-duration: 1s;\n    transition-timing-function: linear;\n\n    width: ${props => (props.time * 100) + '%'};\n    ${props => props.time <= 0.1 && css`\n        background-color: red;\n    `}\n`;\n\nconst TimeLine = ({ time }) => {\n    return (\n        <TimeLineBlock time={time}/>\n    )\n};\n\nexport default React.memo(TimeLine);","import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport TimeLine from '../../components/gameplay/TimeLine';\n\nconst TimeLineContainer = ({ white, black }) => {\n    const { whiteRatio, blackRatio, whiteNick, blackNick, participant } = useSelector(({ record, game }) => ({\n        whiteRatio: record.whiteRatio,\n        blackRatio: record.blackRatio,\n        whiteNick: game.white,\n        blackNick: game.black,\n        participant: game.participant,\n    }));\n\n    const [time, setTime] = useState(0);\n\n    //  default 0으로 초기 렌더링을 진행한 후 redux 값이 들어왔을 때 리렌더링 하는 방식\n    useEffect(() => {\n        const participantSet = new Set(participant);\n        if((white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick))) {\n            let nextTime = white ? whiteRatio : blackRatio;\n            nextTime = Math.min(nextTime, 1);\n            setTime(nextTime);\n        } else {\n            setTime(0);\n        }\n    }, [white, black, whiteNick, blackNick, whiteRatio, blackRatio, participant]);\n\n    //  role값이 들어온 다음에는 다른 redux값이 들어온 경우도 있어 timeline bar가 완성된 상태로 렌더링 되버림\n    // let time = 0;\n    // if((white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick))) {\n    //     time = white ? whiteRatio : blackRatio;\n    // }\n    // time = Math.min(time, 1);\n\n    return (\n        <TimeLine\n            time={time}\n        />\n    )\n};\n\nexport default TimeLineContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport { FaFastBackward, FaStepBackward, FaFastForward, FaStepForward } from 'react-icons/fa';\nimport { IconContext } from 'react-icons';\n\nconst UndoRedoBlock = styled.div`\n    position: absolute;\n    top: 300px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    background-color: rgb(247, 246, 245);\n    z-index: 10;\n    box-shadow: rgba(0, 0, 0, 0.14) 0px -2px 2px 0px, rgba(0, 0, 0, 0.2) 0px -3px 1px -2px, rgba(0, 0, 0, 0.12) 0px -1px 5px 0px;\n`;\n\nconst ButtonBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n`;\n\nconst buttonStyle = {\n    style: {\n        color: '#4d4d4d',\n        width: '50%',\n        height: '50%',\n        backgroundColor: 'transparent'\n    }\n}\n\nconst UndoRedo = () => {\n    return (\n        <UndoRedoBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaFastBackward />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaStepBackward />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaStepForward />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaFastForward />\n                </IconContext.Provider>\n            </ButtonBlock>\n        </UndoRedoBlock>\n    )\n};\n\nexport default React.memo(UndoRedo);","import React from 'react';\nimport UndoRedo from '../../components/gameplay/UndoRedo';\n\nconst UndoRedoContainer = () => {\n    \n    return (\n        <UndoRedo />\n    )\n};\n\nexport default UndoRedoContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport { FaExchangeAlt, FaFlag, FaHandRock } from 'react-icons/fa';\nimport { TiArrowBack } from 'react-icons/ti';\nimport { IconContext } from 'react-icons';\n\nconst UtilBlock = styled.div`\n    position: absolute;\n    top: 30px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    z-index: 10;\n    background-color: rgb(247, 246, 245);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst ButtonBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n`;\n\nconst buttonStyle = {\n    style: {\n        color: '#4d4d4d',\n        width: '50%',\n        height: '50%',\n        backgroundColor: 'transparent'\n    }\n};\n\nconst Util = ({ onReverse }) => {\n    return (\n        <UtilBlock>\n            <ButtonBlock onClick={onReverse} >\n                <IconContext.Provider value={{ style: { ...buttonStyle.style, width: '60%', height:'60%' }} }>\n                    <FaExchangeAlt />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={{ style: { ...buttonStyle.style, width: '80%', height:'80%' }} }>\n                    <TiArrowBack />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaHandRock />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaFlag />\n                </IconContext.Provider>\n            </ButtonBlock>\n        </UtilBlock>\n    )\n};\n\nexport default React.memo(Util);","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\nimport { connectNamespace } from '../lib/websocket/websocket';\n\nconst CONNECT_WEBSOCKET = 'record/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'record/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'record/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'record/INITIALIZE_SOCKET';\nconst CHANGE_VALUE = 'record/CHANGE_VALUE';\nconst UPDATE_VALUE = 'record/UPDATE_VALUE';\nconst CLEAR_VALUE = 'record/CLEAR_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\nexport const updateValue = createAction(UPDATE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nconst CHANGE_REVERSE = 'record/CHANGE_REVERSE';\nexport const changeReverse = createAction(CHANGE_REVERSE, payload => payload);\n\nexport const updateValueThunk = params => ( dispatch, getState ) => {\n    const { record } = getState();\n    let newRecord = { ...record };\n    Object.keys(params).forEach(key => {\n        if(typeof params[key] === 'object') {\n            newRecord = {\n                ...newRecord,\n                [key]: [\n                    ...newRecord[key],\n                    params[key],\n                ]\n            };\n        }\n    });\n\n    dispatch(updateValue({ record: newRecord }));\n};\n\nfunction* connectWebsocketSaga (action) {\n    // const key = action.payload;\n    // const query = `key=${key}`;\n\n    const query = action.payload;\n\n    const socketTask = yield fork(connectNamespace, { \n        url: '/record',\n        initializeSocket,\n        initializeValue,\n        changeValue,\n        updateValue: updateValueThunk,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* recordSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    error: null,\n    startTime: null,\n    endTime: null,\n    blackTime: null,\n    whiteTime: null,\n    blackMaxTime: null,\n    whiteMaxTime: null,\n    whiteRatio: 0,\n    blackRatio: 0,\n    pieceMove: [],\n    reversed: false,\n}\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        ...rest,\n    }),\n    [CHANGE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        ...rest,\n    }),\n    [UPDATE_VALUE]: (state, { payload: { record } }) => ({\n        ...record,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n    [CHANGE_REVERSE]: (state, { payload: { reversed } }) => ({\n        ...state,\n        reversed,\n    })\n}, initialState);\n","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Util from '../../components/gameplay/Util';\nimport { changeReverse } from '../../modules/record';\n\nconst UtilContainer = () => {\n    const { reversed } = useSelector(({ record }) => ({\n        reversed: record.reversed,\n    }));\n\n    const dispatch = useDispatch();\n    \n    const onReverse = useCallback(() => {\n        dispatch(changeReverse({ reversed: !reversed }));\n    }, [dispatch, reversed]);\n\n    return (\n        <Util\n            onReverse={onReverse}\n        />\n    )\n};\n\nexport default UtilContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nimport TimerContainer from '../../containers/gameplay/TimerContainer';\nimport StatusContainer from '../../containers/gameplay/StatusContainer';\nimport PieceMoveListContainer from '../../containers/gameplay/PieceMoveListContainer';\nimport TimeLineContainer from '../../containers/gameplay/TimeLineContainer';\nimport UndoRedoContainer from '../../containers/gameplay/UndoRedoContainer';\nimport UtilContainer from '../../containers/gameplay/UtilContainer';\n\nconst RecordBlock = styled.div`\n    position: relative;\n    width: 100%;\n    height: 360px;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst Record = ({ reversal }) => {\n    return (\n        <>\n            {reversal ? (\n                <>\n                    <TimerContainer white />\n                </>\n            ) : (\n                <>\n                    <TimerContainer black />\n                </>\n            )}\n            <RecordBlock>\n                {reversal ? (\n                    <>\n                        <TimeLineContainer white />\n                        <StatusContainer white />\n                    </>\n                ) : (\n                    <>\n                        <TimeLineContainer black />\n                        <StatusContainer black />\n                    </>\n                )}\n                <UtilContainer />\n                <PieceMoveListContainer />\n                <UndoRedoContainer />\n                {reversal ? (\n                    <>\n                        <StatusContainer black beneath/>\n                        <TimeLineContainer black />\n                    </>\n                ) : (\n                    <>\n                        <StatusContainer white beneath/>\n                        <TimeLineContainer white />\n                    </>\n                )}\n                \n            </RecordBlock>\n            {reversal ? (\n                <>\n                    <TimerContainer black />\n                </>\n            ) : (\n                <>\n                    <TimerContainer white />\n                </>\n            )}\n        </>\n    )\n};\n\nexport default React.memo(Record);","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Record from '../../components/gameplay/Record';\nimport { clearValue } from '../../modules/record';\n\nconst RecordContainer = () => {\n    const { role, reversed } = useSelector(({ socketAuth, record }) => ({\n        role: socketAuth.role,\n        reversed: record.reversed,\n    }));\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearValue());\n        }\n    }, [dispatch]);\n\n    let reversal = false;\n    if(((role === 'white' || role === 'spectator') && reversed) || (role === 'black' && !reversed)) {\n        reversal = true;\n    }\n\n    if(role) {\n        return (\n            <Record\n                reversal={reversal}\n            />\n        );\n    }\n\n    return null;\n};\n\nexport default RecordContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport CanvasContainer from '../../containers/gameplay/CanvasContainer';\nimport ChatContainer from '../../containers/gameplay/ChatContainer';\nimport RecordContainer from '../../containers/gameplay/RecordContainer';\n\nconst GamePlayLayoutBlock = styled.div`\n    height: 800px;\n    width: 100%;\n    background-color: rgb(237, 235, 233);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst sideBlockStyle = css`\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n`;\n\nconst LeftSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-right: 1%;\n`;\n\nconst RightSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-left: 1%;\n`;\n\nconst GamePlayLayout = () => {\n    return (\n        <GamePlayLayoutBlock>\n            <LeftSideBlock>\n                <ChatContainer />\n            </LeftSideBlock>\n            <CanvasContainer />\n            <RightSideBlock>\n                <RecordContainer />\n            </RightSideBlock>\n        </GamePlayLayoutBlock>\n    )\n};\n\nexport default React.memo(GamePlayLayout);","import { createAction, handleActions } from 'redux-actions';\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nconst CONNECT_WEBSOCKET = 'socketAuth/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'socketAuth/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_SOCKET = 'socketAuth/INITIALIZE_SOCKET';\nconst INITIALIZE_VALUE = 'socketAuth/INITIALIZE_VALUE';\nconst CLEAR_VALUE = 'socketAuth/CLEAR_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nfunction* connectWebsocketSaga (action) {\n    // const key = action.payload;\n    // const query = `key=${key}`;\n\n    const query = action.payload;\n    \n    const socketTask = yield fork(connectNamespace, {\n        url: '/socketAuth',\n        initializeSocket,\n        initializeValue,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* socketAuthSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    nickname: null,\n    role: null,\n    error: null,\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        ...rest,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n}, initialState);","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\n\nconst CONNECT_WEBSOCKET = 'game/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'game/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'game/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'game/INITIALIZE_SOCKET';\nconst CLEAR_VALUE = 'game/CLEAR_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE)\n\nfunction* connectWebsocketSaga (action) {\n    // const key = action.payload; \n    // const query = `key=${key}`;\n\n    const query = action.payload;\n\n    const socketTask = yield fork(connectNamespace, { \n        url: '/game',\n        initializeSocket,\n        initializeValue,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* gameSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    error: null,\n    participant: [],\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest }}) => ({\n        ...state,\n        ...rest,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n}, initialState);","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport uuid from 'uuid/v1';\n\nimport useAsync from '../../lib/hook/useAsync';\nimport GamePlayLayout from '../../components/gameplay/GamePlayLayout';\nimport { setSessionThunk } from '../../modules/sessionAuth';\n\nimport { clearValue as clearAuthValue } from '../../modules/socketAuth';\nimport { clearValue as clearGameValue } from '../../modules/game';\n\nimport { connectWebsocket as connectAuthWebsocket } from '../../modules/socketAuth';\nimport { connectWebsocket as connectGameWebsocket } from '../../modules/game';\nimport { connectWebsocket as connectChatWebsocket } from '../../modules/chat';\nimport { connectWebsocket as connectCanvasWebsocket} from '../../modules/canvas';\nimport { connectWebsocket as connectRecordWebsocket } from '../../modules/record';\n\nimport { disconnectWebsocket as disconnectAuthWebsocket } from '../../modules/socketAuth';\nimport { disconnectWebsocket as disconnectGameWebsocket } from '../../modules/game';\nimport { disconnectWebsocket as disconnectChatWebsocket } from '../../modules/chat';\nimport { disconnectWebsocket as disconnectCanvasWebsocket } from '../../modules/canvas';\nimport { disconnectWebsocket as disconnectRecordWebsocket } from '../../modules/record';\n\nconst GamePlayLayoutContainer = ({ gameKey }) => {\n    const dispatch = useDispatch();\n\n    const connection = async () => {\n        await dispatch(setSessionThunk());\n        dispatch(disconnectGameWebsocket());\n        dispatch(disconnectAuthWebsocket());\n        dispatch(disconnectChatWebsocket());\n        dispatch(disconnectCanvasWebsocket());\n        dispatch(disconnectRecordWebsocket());\n        await Promise.resolve().then(() => {\n            const tabKey = uuid();\n            const param = {\n                gameKey,\n                tabKey,\n            }\n            dispatch(connectGameWebsocket(param));\n            dispatch(connectAuthWebsocket(param));\n            dispatch(connectChatWebsocket(param));\n            dispatch(connectCanvasWebsocket(param));\n            dispatch(connectRecordWebsocket(param));\n        })\n        return true;\n    };\n\n    useEffect(() => {\n        return () => {\n            dispatch(disconnectGameWebsocket());\n            dispatch(disconnectAuthWebsocket());\n            dispatch(disconnectChatWebsocket());\n            dispatch(disconnectCanvasWebsocket());\n            dispatch(disconnectRecordWebsocket());\n        }\n    }, [dispatch]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearAuthValue());\n            dispatch(clearGameValue());\n        }\n    }, [dispatch]);\n\n    const [state] = useAsync(connection, [ dispatch, gameKey ]);\n\n    const { loading, data, error } = state;\n\n    if(loading) return null;\n    if(error) return null;\n    if(data) {\n        return (\n            <GamePlayLayout />\n        )\n    }\n    return null;\n};\n\nexport default GamePlayLayoutContainer;","import React, { useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\n\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport GamePlayLayoutContainer from '../containers/gameplay/GamePlayLayoutContainer';\n\nconst GamePlayPage = ({ history, match }) => {\n    useEffect(() => {\n        if(!match.params.id) {\n            history.push('/');\n        }\n    }, [history, match]);\n\n    if(!match.params.id) return null;\n    const { id } = match.params;\n    if(!id) return null;\n    \n    return (\n        <>\n            <Helmet>\n                <title>GamePlay • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <GamePlayLayoutContainer gameKey={id}/>\n        </>\n    )\n};\n\nexport default withRouter(GamePlayPage);","export default [\n    {\n        title: '가즈아 가즈아 가즈아 가즈아1',\n        count: 250,\n        comments: 7,\n        time: '1시간 전'\n    },\n    {\n        title: '가즈아 가즈아 가즈아 가즈아2',\n        count: 251,\n        comments: 8,\n        time: '2시간 전'\n    },\n    {\n        title: '가즈아 가즈아 가즈아 가즈아3',\n        count: 252,\n        comments: 9,\n        time: '3시간 전'\n    },\n    {\n        title: '가즈아 가즈아 가즈아 가즈아4',\n        count: 253,\n        comments: 10,\n        time: '4시간 전'\n    },\n    {\n        title: '가즈아 가즈아 가즈아 가즈아1',\n        count: 250,\n        comments: 7,\n        time: '1시간 전'\n    },{\n        title: '가즈아 가즈아 가즈아 가즈아1',\n        count: 250,\n        comments: 7,\n        time: '1시간 전'\n    },{\n        title: '가즈아 가즈아 가즈아 가즈아1',\n        count: 250,\n        comments: 7,\n        time: '1시간 전'\n    },{\n        title: '가즈아 가즈아 가즈아 가즈아1',\n        count: 250,\n        comments: 7,\n        time: '1시간 전'\n    },{\n        title: '가즈아 가즈아 가즈아 가즈아1',\n        count: 250,\n        comments: 7,\n        time: '1시간 전'\n    },{\n        title: '가즈아 가즈아 가즈아 가즈아1',\n        count: 250,\n        comments: 7,\n        time: '1시간 전'\n    }\n]","import React from 'react';\nimport styled from 'styled-components';\nimport { withRouter } from 'react-router-dom';\n\nconst CommunityTableRowBlock = styled.div`\n    display:flex;\n    flex-direction: row;\n    justify-content:center;\n    width: 100%;\n    transition-duration:0.1s;\n    &:nth-child(odd) {\n        background: #F7F6F4;\n    }\n    &:hover {\n            background: #add8e6;\n            cursor:pointer;\n        }\n`;\n\nconst CellBlock = styled.div`\n    width: ${props => props.width ? props.width : \"20%\"};\n    height: 50px; \n    display:flex;\n    justify-content:center;\n    align-items:center;\n    font-size: 15px;\n`;\n\nconst CellTextBlock = styled.div`\n    text-align: center;\n    height : 1em;\n    width : 100%;\n`;\n\nconst CommunityTableRow = ({ history, title, count, comments, time }) => {\n    return (\n        <CommunityTableRowBlock onClick={() => {\n            history.push('/Contents')\n        }}>\n            <CellBlock width={\"70%\"}><CellTextBlock>{title}</CellTextBlock></CellBlock>\n            <CellBlock width={\"10%\"}><CellTextBlock>{count}</CellTextBlock></CellBlock>\n            <CellBlock width={\"10%\"}><CellTextBlock>{comments}</CellTextBlock></CellBlock>\n            <CellBlock width={\"10%\"}><CellTextBlock>{time}</CellTextBlock></CellBlock>\n        </CommunityTableRowBlock>\n    );\n};\n\nexport default withRouter(CommunityTableRow);","import React from 'react';\nimport styled from 'styled-components';\n\nconst CommunityTableHeader = styled.div`\n    display:flex;\n    flex-direction: row;\n    width: 100%;\n    height: 30px;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst CellBlock = styled.div`\n    width: ${props => props.width ? props.width : \"20%\"};\n    height: 50px; \n    text-align: center;\n    font-size: 15px;\n`;\n\nconst CommunityTableHeaderBlock = () => {\n    return (\n        <CommunityTableHeader>\n            <CellBlock width={'70%'}>Title</CellBlock>\n            <CellBlock width={\"10%\"}>View Counts</CellBlock>\n            <CellBlock width={\"10%\"}>Comments</CellBlock>\n            <CellBlock width={\"10%\"}>Post Time</CellBlock>\n        </CommunityTableHeader>\n    );\n};\n\nexport default CommunityTableHeaderBlock;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst CommunityTableFooter = styled.div`\n    display:flex;\n    flex-direction: row;\n    width: 100%;\n    height: 30px;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst CellBlock = styled.div`\n    width: ${props => props.width ? props.width : \"20%\"};\n    height: 50px; \n    text-align: center;\n    font-size: 15px;\n`;\n\nconst inputStyle = css`\n    outline: none;\n    border: none;\n    height: 25px;\n    width: 70%;\n    padding-left: 5%;\n    box-shadow :  0 3px 1px -2px rgba(0,0,0,0.2);\n    `;\n\nconst SearchInputBlock = styled.input`\n    ${inputStyle}\n`\n\nconst CommunityTableFooterBlock = () => {\n    return (\n        <CommunityTableFooter>\n            <CellBlock width={'70%'}><SearchInputBlock /></CellBlock>\n            <CellBlock width={\"30%\"}>ETCS</CellBlock>\n        </CommunityTableFooter>\n    );\n};\n\nexport default CommunityTableFooterBlock;","import React from 'react';\nimport styled from 'styled-components';\n\nconst TestBlock = () => {\n    return (\n        <>\n        this is Test block\n        </>\n    );\n}\nexport default TestBlock;","import React, { useState } from 'react';\nimport initItem from './testItems';\nimport { Route } from 'react-router-dom';\nimport styled from 'styled-components';\nimport CommunityTableRow from './CommunityTableRow';\nimport CommunityHeaderBlock from './CommunityHeader';\nimport CommunityFooterBlock from './CommunityFooter';\nimport TestBlock from './CommunityContent';\n\nconst CommunityLayoutBlock = styled.div`\n    width: 100%;\n    min-height: 700px;\n    background-color:#EDEBE9;\n    display: flex;\n    justify-content: center;\n`;\n\nconst CommunityMainBlock = styled.main`\n    width: 80%;\n    min-height: 720px;\n    background-color:lightblue;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst CommunityNameBlock = styled.h1`\n    width: 100%;\n    height: 100px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin: 0px 0px 0px 0px;\n`;\n\n// const PageDivBlock = styled.div`\n//     display:flex;\n//     width: 100%;\n//     height: 50px;\n//     background-color: white;\n//     display: flex;\n//     justify-content: center;\n//     align-items: center;\n// `;\n\nconst CommunityTableBlock = styled.div`\n    width: 90%;\n    height: auto;\n    align-self:center;\n    justify-content:center;\n    align-items:center;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst CommunityLayout = () => {\n    const [items, setItems] = useState(initItem);\n    return (\n        <>\n        <Route path=\"/Community\"\n        exact\n        render={() => \n        <CommunityLayoutBlock>\n            <CommunityMainBlock>\n                <CommunityNameBlock>\n                    General Chess Discussion\n                </CommunityNameBlock>\n                <CommunityTableBlock>\n                    <CommunityHeaderBlock />\n                    {items.map(tableRow => (\n                        <CommunityTableRow title={tableRow.title} count={tableRow.count} comments={tableRow.comments} time={tableRow.time} />\n                    ))}\n                    <CommunityFooterBlock />\n                </CommunityTableBlock>\n            </CommunityMainBlock>\n        </CommunityLayoutBlock>}\n        />\n        <Route path=\"/Community/Contents\" component={TestBlock}/>\n        </>\n    )\n};\n\nexport default CommunityLayout;","import React from 'react';\nimport CommunityLayout from '../../components/community/CommunityLayout';\n\nconst CommunityLayoutContainer = () => {\n    return (\n        <CommunityLayout />\n    );\n};\n\nexport default CommunityLayoutContainer;","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport CommunityLayoutContainer from '../containers/community/CommunityLayoutContainer';\n\nconst CommunityPage = () => {\n\n    return (\n        <>\n            <Helmet>\n                <title>Community • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <CommunityLayoutContainer />\n        </>\n    )\n};\n\nexport default CommunityPage;","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { Helmet } from 'react-helmet-async';\n\nimport MainPage from './pages/MainPage';\nimport LoginPage from './pages/LoginPage';\nimport RegisterPage from './pages/RegisterPage';\nimport GamePage from './pages/GamePage';\nimport GamePlayPage from './pages/GamePlayPage';\nimport CommunityPage from './pages/CommunityPage';\n\nconst ErrorPageDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 200px;\n  font-size: 50px;\n`;\n\n\nconst App = () => {\n  return (\n    <>\n      <Helmet>\n        <title>Chesssup.com</title>\n      </Helmet>\n      <Switch>\n        <Route component={MainPage} path='/' exact />\n        <Route component={LoginPage} path='/login' exact />\n        <Route component={RegisterPage} path='/register' exact />\n        <Route component={GamePage} path='/game' exact />\n        <Route component={GamePlayPage} path='/game/:id' exact />\n        <Route component={CommunityPage} path='/community' exact />\n        <Route \n          render={({ location }) => (\n            <ErrorPageDiv>\n              <h1>404 Error</h1>\n              <p>요청한 페이지를 찾을 수 없습니다.</p>\n            </ErrorPageDiv>\n          )}\n          />\n      </Switch>\n    </>\n  )\n}\n\nexport default App;\n","import { combineReducers } from 'redux';\nimport { all } from 'redux-saga/effects';\nimport game, { gameSaga } from './game';\nimport games, { gamesSaga } from './games';\nimport sessionAuth, { sessionAuthSaga } from './sessionAuth';\nimport socketAuth, { socketAuthSaga } from './socketAuth';\nimport canvas, { canvasSaga } from './canvas';\nimport chat, { chatSaga } from './chat';\nimport record, { recordSaga }  from './record';\nimport create from './create';\n\n\nconst rootReducer = combineReducers({\n    sessionAuth,\n    socketAuth,\n    game,\n    games,\n    canvas,\n    chat,\n    record,\n    create,\n})\n\n\nexport function* rootSaga() {\n    yield all([ sessionAuthSaga(), socketAuthSaga(), gameSaga(), gamesSaga(), canvasSaga(), chatSaga(), recordSaga() ]);\n};\n\nexport default rootReducer;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst FixSizeBlock = styled.div`\n    width: 1680px;\n`;\n\nconst FixSize = props => {\n    return (\n        <FixSizeBlock {...props} />\n    )\n};\n\nexport default FixSize;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport ReduxThunk from 'redux-thunk';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport createSagaMiddleware from 'redux-saga';\nimport { HelmetProvider } from 'react-helmet-async';\n\nimport './index.css';\nimport App from './App';\nimport rootReducer, { rootSaga } from './modules';\nimport * as serviceWorker from './serviceWorker';\nimport { getLocalStorage, clearLocalStorage } from './lib/storage/storage';\nimport { checkThunk } from './modules/sessionAuth';\nimport FixSize from './components/common/FixSize';\n\nconst sagaMiddleware = createSagaMiddleware();\nconst store = createStore(\n    rootReducer,\n    composeWithDevTools(applyMiddleware(ReduxThunk, sagaMiddleware))\n)\n\nsagaMiddleware.run(rootSaga);\n\n(async() => {\n    const auth = getLocalStorage('auth');\n    if(!auth) {\n        return;\n    }\n\n    try {\n        const checkedAuth = await store.dispatch(checkThunk());\n        if(checkedAuth.username !== auth.username) {\n            clearLocalStorage();\n            //  eslint-disable-next-line\n            throw 'Auth mismatch';\n        }\n    } catch(e) {\n        console.dir('Check auth failed');\n    }\n})();\n\nReactDOM.render(\n    <Provider store={store}>\n        <BrowserRouter>\n            <HelmetProvider>\n                <FixSize>\n                    <App />\n                </FixSize>\n            </HelmetProvider>\n        </BrowserRouter>\n    </Provider>\n    ,document.getElementById('root')\n);\n\nserviceWorker.unregister();"],"sourceRoot":""}