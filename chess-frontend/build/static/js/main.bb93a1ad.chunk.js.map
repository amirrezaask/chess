{"version":3,"sources":["static/image/ranking.svg","components/common/Header.js","lib/websocket/websocket.js","lib/createRequestThunk.js","lib/storage/storage.js","modules/sessionAuth.js","lib/api/auth.js","containers/common/HeaderContainer.js","lib/hook/useAsync.js","components/main/List.js","containers/main/ListContainer.js","components/main/Ranking.js","containers/main/RankingContainer.js","components/main/Iframe.js","lib/base/genBoard.js","modules/billBoard.js","lib/base/pieceConverter.js","components/gameplay/Canvas.js","containers/billBoard/BillBoardCanvasWrapperContainer.js","components/billBoard/BillBoard.js","containers/billBoard/BillBoardContainer.js","components/main/MainLayout.js","modules/ranking.js","containers/main/MainLayoutContainer.js","components/common/Footer.js","containers/common/FooterContainer.js","pages/MainPage.js","components/auth/AuthForm.js","containers/auth/LoginContainer.js","pages/LoginPage.js","containers/auth/RegisterContainer.js","pages/RegisterPage.js","lib/base/board.js","lib/base/rules.js","lib/base/validation.js","modules/record.js","lib/api/record.js","modules/canvas.js","lib/api/canvas.js","containers/gameplay/CanvasContainer.js","components/game/CanvasWrapper.js","containers/game/CanvasWrapperContainer.js","components/game/GridBox.js","containers/game/GridBoxContainer.js","components/game/GridLayout.js","containers/game/GridLayoutContainer.js","components/game/Summary.js","containers/game/SummaryContainer.js","containers/HOC/CheckOutsideOfComponent.js","components/game/Selection.js","modules/create.js","containers/game/SelectionContainer.js","components/game/Slider.js","containers/game/SliderContainer.js","components/game/Icon.js","containers/game/IconContainer.js","components/game/Creation.js","modules/games.js","lib/api/games.js","containers/game/CreationContainer.js","components/game/GameLayout.js","containers/game/GameLayoutContainer.js","pages/GamePage.js","modules/chat.js","lib/api/chat.js","components/gameplay/Chat.js","containers/gameplay/ChatContainer.js","components/gameplay/Timer.js","containers/gameplay/TimerContainer.js","components/gameplay/Status.js","containers/gameplay/StatusContainer.js","components/gameplay/PieceMoveList.js","containers/gameplay/PieceMoveListContainer.js","components/gameplay/TimeLine.js","containers/gameplay/TimeLineContainer.js","components/gameplay/UndoRedo.js","containers/gameplay/UndoRedoContainer.js","components/gameplay/ToolTip.js","containers/gameplay/ToolTipContainer.js","components/gameplay/Util.js","containers/gameplay/UtilContainer.js","components/gameplay/Record.js","containers/gameplay/RecordContainer.js","components/gameplay/GamePlayLayout.js","modules/socketAuth.js","modules/game.js","containers/gameplay/GamePlayLayoutContainer.js","pages/GamePlayPage.js","components/community/Pagination.js","modules/community.js","lib/api/community.js","containers/community/PaginationContainer.js","components/community/List.js","containers/community/ListContainer.js","components/community/Write.js","containers/community/WriteContainer.js","components/community/Post.js","containers/community/PostContainer.js","components/community/CommunityLayout.js","containers/community/CommunityLayoutContainer.js","pages/CommunityPage.js","pages/BillBoardPage.js","App.js","modules/index.js","serviceWorker.js","components/common/FixSize.js","index.js","static/image/spinner.svg"],"names":["module","exports","HeaderBlock","styled","div","titleStyle","css","TitleBlock","Link","TitleFadeBlock","ControllBlock","GroupBlock","TabBlock","TabLinkBlock","props","hidden","Tab","to","children","AuthBlock","UserWelcomeBlock","React","memo","username","onRecord","onLogout","onLogin","tempAuth","auth","nickname","onClick","createEventChannel","connectNamespace","io","eventChannel","emit","on","socket","type","id","console","dir","message","close","params","url","query","initializeSocket","initializeValue","changeValue","updateValue","clearValue","notifyRequest","SocketIo","secure","call","channel","take","put","cancelled","createRequestActionTypes","createRequestThunk","request","SUCCESS","FAILURE","dispatch","a","async","response","payload","data","error","setLocalStorage","rest","Object","keys","forEach","key","localStorage","setItem","JSON","stringify","e","getLocalStorage","parse","getItem","removeLocalStorage","removeItem","clearLocalStorage","clear","connectWebsocketSaga","sessionAuthSaga","CONNECT_WEBSOCKET","DISCONNECT_WEBSOCKET","connectWebsocket","createAction","disconnectWebsocket","SET_SESSION","SET_SESSION_SUCCESS","SET_SESSION_FAILURE","setSessionThunk","axios","get","LOGIN","LOGIN_SUCCESS","LOGIN_FAILURE","REGISTER","REGISTER_SUCCESS","REGISTER_FAILURE","LOGOUT","LOGOUT_SUCCESS","LOGOUT_FAILURE","CHECK","CHECK_SUCCESS","CHECK_FAILURE","loginThunk","password","post","registerThunk","logoutThunk","checkThunk","changeField","clearField","clearSpecificField","fork","socketTask","cancel","takeEvery","initialState","authError","login","register","passwordConfirm","handleActions","state","form","value","produce","draft","withRouter","history","useSelector","sessionAuth","useDispatch","useCallback","getState","alert","push","useEffect","reducer","action","loading","Error","useAsync","callback","deps","useReducer","fetchData","ListBlock","ListCellBlock","index","TextBlock","elo","mail","header","ListCell","cell","ratio","win","lose","BorderBlock","HeaderCell","HeaderCellBlock","list","listArr","map","borderArr","leng","reduce","acc","cur","i","ListContainer","RankingBlock","BackgroundBlock","img","rank","src","RankImage","RankingContainer","ranking","useState","setRank","prevState","stable","revisedState","filter","internalCell","findIndex","externalCell","init","newlyPushed","sort","b","length","setTimeout","copiedRanking","splice","open","iframe","genBoard","board","prev","next","tempBoard","_","cloneDeep","pieceStore","y","x","covered","dirty","owner","piece","genClearBoard","arr","j","pass","param","popedCell","newCell","billBoardSaga","changeValueThunk","move","billBoard","clearBoard","tracked","inform","pieceMapper","GiChessPawn","GiChessKing","GiChessQueen","GiChessBishop","GiChessKnight","GiChessRook","GiPlainCircle","playerMapper","color","style","width","height","pieceConverter","cellNum","coveredCanvas","Component","Provider","capturedObject","opacity","styleObject","CanvasBlock","replayMode","CanvasRowBlock","CanvasCellBlock","cellSize","clicked","CanvasRow","row","onClickCell","CanvasCell","bind","prevProps","nextProps","CanvasContentBlock","blocked","CanvasContent","ReplayBlock","onContextMenu","BillBoardCanvasWrapperContainer","roomKey","preventDefault","Promise","resolve","then","BillBoardFrameBlock","BillBoardBlock","InformFrameBlock","PlayerBlock","BillBoard","player","split","BillBoardContainer","MainLayoutBlock","sideBlockStyle","LeftSideBlock","RightSideBlock","rankingSaga","MainLayoutContainer","FooterBlock","Footer","FooterContainer","MainPage","AuthFrameBlock","AuthFormBlock","InputFrameBlock","InputFormBlock","blink","inputStyle","EmailInputBlock","input","PasswordInputBlock","OptionFormBlock","SaveInputFormBlock","SaveInputBlock","SaveInputTextBlock","ForgetBlock","SubmitFrameBlock","SubmitBlock","button","CreateFormBlock","CreateBlock","CreateButtonBlock","ErrorBlock","onSubmit","onChange","onRegister","ref","useRef","tag","current","focus","autoComplete","autoCorrect","autoCapitalize","spellCheck","count","cursor","name","placeholder","el","setError","target","nextError","schema","Joi","object","string","max","email","minDomainAtoms","required","min","result","validate","abortEarly","details","detail","path","errorMention","LoginPage","any","valid","RegisterPage","rules","pawn","dy","dx","except","knight","king","enemy","coveredAxisBundle","checkPlayersEveryMove","axis","bishop","rook","queen","deduplicate","axisArr","axisSet","Set","add","parseInt","castling","coveredAxis","checkCovered","checkSafeMove","clonedBoard","playerKing","findKingLocation","movable","flatMap","counter","coveredArr","recordSaga","changeReverse","clearToolTip","setRequestModal","setRequestMessage","setBanClick","setShowIndex","ASKING","ASKING_SUCCESS","ASKING_FAILURE","ANSWERING","ANSWERING_SUCCESS","ANSWERING_FAILURE","askingThunk","answeringThunk","notifyRequestThunk","genre","modal","updateValueThunk","record","newRecord","startTime","endTime","blackTime","whiteTime","blackMaxTime","whiteMaxTime","whiteRatio","blackRatio","pieceMove","reversed","banClick","showIndex","undo","draw","surrender","canvasSaga","initializeBlocked","changeBlocked","SET_MOVE_PIECE","SET_MOVE_PIECE_SUCCESS","SET_MOVE_PIECE_FAILURE","setMovePieceThunk","updateReverseBoard","prevReverseBoard","nextOriginBoard","nextReverseBoard","reverseBoard","reverse","makeReverseBoard","nextPiece","prevPiece","every","replayValueThunk","diff","canvas","role","socketAuth","turn","game","nextBoard","prevIndex","nextIndex","beforeIndex","beforePiece","afterIndex","afterPiece","prevY","prevX","nextY","nextX","genReplayBoard","CanvasContainer","glanceAt","setInit","cy","cx","reversal","clickPieceThunk","servedBoard","defaultBoard","CanvasWrapperBlock","UnClickableBlock","CanvasWrapperContainer","gameKey","GridBoxBlock","BoxTitleBlock","BoxContentBlock","onMouseEnter","onMouseLeave","participant","setCanvas","gameId","GridRowBlock","GridLayoutFrameBlock","GridLayoutHiddenBlock","GridLayoutBlock","games","onGameClick","gridArr","rowSize","Math","floor","position","top","left","zIndex","GridLayoutContainer","SummaryContainer","CheckOutsideOfComponent","componentState","setComponentState","checkClickOutside","contains","document","addEventListener","removeEventListener","SelectionFrameBlock","NameBlock","SelectionBlock","SelecitonToolTipFrameBlock","SelectionToolTipBlock","kind","reference","onClickSelection","onClickOption","optionName","mapList","mode","modeList","defaultTime","extraTime","config","step","SelecitonContainer","create","SliderFrameBlock","SliderBoxBlock","SliderBlock","ValueBlock","substring","SliderContainer","IconBlock","checked","styleObj","IconContainer","white","black","CreationBlock","SelectionBundleBlock","SliderBundleBlock","IconBundleBlock","ConfirmFrameBlock","ConfirmBlock","SelectionContainer","gamesSaga","CREATE_GAME","CREATE_GAME_SUCCESS","CREATE_GAME_FAILURE","createGameThunk","GameLayoutBlock","GameLayoutContainer","GamePage","chatSaga","changeTextfield","initializeTextfield","SEND_MESSAGE","SEND_MESSAGE_SUCCESS","SEND_MESSAGE_FAILURE","sendMessageThunk","messages","text","ChatSubmitBlock","ChatFrameBlock","ChatHiddenBlock","ChatBlock","ChatFormBlock","ChatInputBlock","ChatButtonBlock","MessageBlock","BalloonBlock","Balloon","ballonBlock","Message","myName","scrollTop","scrollHeight","ChatContainer","chat","TimerBlock","time","TimeSliceBlock","ColonBlock","timeConverter","timeSlice","convertedTime","String","Timer","minute","second","undefined","TimerContainer","start","order","StatusBlock","beneath","light","iconStyle","display","justifyContent","alignItems","StatusContainer","blackNick","whiteNick","participantSet","has","PieceMoveListHiddenBlock","PieceMoveListBlock","PieceMoveBlock","moveConverter","fromCharCode","MoveBlock","IndexBlock","PieceMove","NextComponent","nextStyle","PrevComponent","prevStyle","listRef","PieceMoveListContainer","TimeLineBlock","TimeLineContainer","setTime","nextTime","UndoRedoBlock","ButtonBlock","buttonStyle","backgroundColor","onStepUndo","onStepRedo","onFastUndo","onFastRedo","UndoRedoContainer","ToolTipBlock","SpinnerFrameBlock","SpinnerBlock","restrict","race","ToolTip","content","Spinner","ToolTipContainer","suggestion","setRace","setRestrict","UtilBlock","onReverse","UtilContainer","RecordBlock","RecordContainer","GamePlayLayoutBlock","socketAuthSaga","gameSaga","GamePlayLayoutContainer","disconnectGameWebsocket","disconnectAuthWebsocket","disconnectChatWebsocket","disconnectCanvasWebsocket","disconnectRecordWebsocket","clearAuthValue","clearGameValue","tabKey","uuid","connectGameWebsocket","connectAuthWebsocket","connectChatWebsocket","connectCanvasWebsocket","connectRecordWebsocket","match","PaginationBlock","page","size","onForwardClick","onBackwardClick","firstBlock","lastBlock","buttons","disabled","CREATE_POST","CREATE_POST_SUCCESS","CREATE_POST_FAILURE","LIST_POST","LIST_POST_SUCCESS","LIST_POST_FAILURE","READ_POST","READ_POST_SUCCESS","READ_POST_FAILURE","DELETE_POST","DELETE_POST_SUCCESS","DELETE_POST_FAILURE","UPDATE_POST","UPDATE_POST_SUCCESS","UPDATE_POST_FAILURE","clearAll","setMenu","setStatus","setForm","clearForm","clearFormAll","createPostThunk","listPostThunk","queryString","qs","readPostThunk","deletePostThunk","delete","updatePostThunk","patch","status","menu","posts","write","modify","title","PaginationContainer","community","pageNum","PostNoticeBlock","PostWrapper","PostCompressionBlock","NumberBlock","EllipsisBlock","CommentCounter","UserBlock","DateBlock","PaginationFrameBlock","PostCompression","createdAt","Date","date","getFullYear","getMonth","getDate","_id","num","user","criteria","find","QuillFrameBlock","QuillWrapperBlock","WriteBlock","TitleInputBlock","holding","quillElement","onChangeTitle","onCancel","WriteLayoutContainer","quillInstance","mounted","setHolding","Quill","theme","modules","toolbar","quill","delta","oldDelta","source","root","innerHTML","PostBlock","PostTitleFrameBlock","PostTitleBlock","PostAuthFrameBlock","PostAuthBlock","PostDateBlock","PostContentBlock","onUpdate","onDelete","dangerouslySetInnerHTML","__html","PostContainer","CommunityLayoutFrameBlock","CommunityLayoutBlock","SubTitleBlock","MovingUnderline","checkedIndex","ContentBlock","WriteEventBlock","BackEventBlock","BackBlock","onCreatePost","onGoBack","WriteContainer","CommunityLayoutContainer","revisedMenu","setMenuThunk","CommunityPage","ErrorPageDiv","App","component","exact","GamePlayPage","BillBoardPage","render","location","rootSaga","all","rootReducer","combineReducers","Boolean","window","hostname","FixSizeBlock","FixSize","sagaMiddleware","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","ReduxThunk","run","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bb93a1ad.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/ranking.78f675e7.svg\";","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { Link } from 'react-router-dom';\n\nconst HeaderBlock = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 50px;\n`;\n\nconst titleStyle = css`\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n    height: 40px;\n    background-color: transparent;\n    cursor: pointer;\n    font-size: 30px;\n    text-decoration: none;\n    text-shadow: 2px 2px 2px rgb(0, 0, 0, 0.2);\n    font-style: italic;\n`;\n\nconst TitleBlock = styled(Link)`\n    ${titleStyle}\n    color: rgb(0, 0, 0, 0.6);\n`;\n\nconst TitleFadeBlock = styled(Link)`\n    ${titleStyle}\n    color: rgb(0, 0, 0, 0.4);\n`;\n\nconst ControllBlock = styled.div`\n    display: flex;\n    align-items: center;\n    margin-left: 8%;\n`;\n\nconst GroupBlock = styled.div`\n    margin-left: 30px;\n    display: flex;\n`;\n\nconst TabBlock = styled.div`\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n`;\n\nconst TabLinkBlock = styled(Link)`\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n    text-decoration: none;\n    \n    ${props => props.hidden && css`\n        display: none;\n        visibility: hidden;\n    `};\n`;\n\nconst Tab = props => {\n    if(props.to) {\n        return (\n            <TabLinkBlock {...props}>\n                {props.children}\n            </TabLinkBlock>\n        )\n    } else {\n        return (\n            <TabBlock {...props}>\n                {props.children}\n            </TabBlock>\n        )\n    }\n}\n\nconst AuthBlock = styled.div`\n    display: flex;\n    align-items: center;\n    margin-right: 8%;\n`;\n\nconst UserWelcomeBlock = styled.div`\n    position: absolute;\n    top: 10%;\n    left: 0%;\n    width: 100%;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.4);\n`\n\nconst Header = ({\n    onRecord,\n    onLogout,\n    onLogin,\n    tempAuth,\n    auth\n}) => {\n    let username;\n    \n    if(tempAuth) {\n        username = tempAuth.nickname;\n    };\n\n    if(auth) {\n        username = auth.username;\n    };\n\n    return (\n        <>\n            <HeaderBlock>\n                <ControllBlock>\n                    <TitleBlock to='/'>\n                        chesssup\n                    </TitleBlock>\n                    <TitleFadeBlock to='/'>\n                        .com\n                    </TitleFadeBlock>\n                    <GroupBlock>\n                        <Tab to='/game'>\n                            Play\n                        </Tab>\n                        <Tab to='/community'>\n                            Community\n                        </Tab>\n                    </GroupBlock>\n                </ControllBlock>\n                <AuthBlock>\n                    <Tab onClick={onRecord}>\n                        Search\n                    </Tab>\n                    {auth ? (\n                        <>\n                            <Tab onClick={onRecord}>\n                                Setting\n                            </Tab>\n                            <Tab onClick={onRecord}>\n                                Record\n                            </Tab>\n                            <Tab onClick={onLogout}>\n                                Logout\n                                <UserWelcomeBlock>\n                                    {username}\n                                </UserWelcomeBlock>\n                            </Tab>\n                        </>\n                    ):(\n                        <Tab onClick={onLogin}>\n                            Login\n                            <UserWelcomeBlock>\n                                {username}\n                            </UserWelcomeBlock>\n                        </Tab>\n                    )}\n                </AuthBlock>\n            </HeaderBlock>\n           \n        </>\n    )\n};\n\n//  <GamesModalContainer\n//  openModal={openModal}\n//  setOpenModal={setOpenModal}\n//  />\n\nexport default React.memo(Header);","import { eventChannel } from 'redux-saga';\nimport SocketIo from 'socket.io-client';\nimport { put, call, take, cancelled } from 'redux-saga/effects';\n\n// eslint-disable-next-line\nfunction* createEventChannel(io) {\n    return eventChannel(emit => {\n        io.on('connect', socket => {\n            emit({\n                type: 'socket',\n                socket: io.id\n            });\n        });\n\n        //  reconnect 전에 session연결을 위한 http call 추가 예정\n        io.on('reconnect', () => {\n            console.dir(`socketio reconnect`);\n        })\n\n        io.on('message', message => {\n            emit(message);\n        });\n\n        return () => {\n            io.close();\n        }\n    })\n}\n\nexport function* connectNamespace(params) {\n    let channel;\n\n    const {\n        url,\n        query,\n        initializeSocket,\n        initializeValue,\n        changeValue,\n        updateValue,\n        clearValue,\n        notifyRequest,\n    } = params;\n\n    try {\n        const io = SocketIo(url, {\n            query,\n            // reconnection: false,\n            secure: true,\n        });\n        \n        channel = yield call(createEventChannel, io);\n    \n        while(true) {\n            const message = yield take(channel);\n            switch(message.type) {\n                case 'socket':\n                    if(initializeSocket) {\n                        yield put(initializeSocket(message));\n                    };\n                    break;\n                case 'initialize':\n                    yield put(initializeValue(message));\n                    break;\n                case 'change':\n                    yield put(changeValue(message));\n                    break;\n                case 'update':\n                    yield put(updateValue(message));\n                    break;\n                case 'clear':\n                    yield put(clearValue(message));\n                    break;\n                case 'notify':\n                    yield put(notifyRequest(message))\n                    break;\n                default:\n                    console.dir(message);\n            }\n        }\n    } catch(e) {\n        console.dir(e);\n    } finally {\n        if (yield cancelled()) {\n            channel.close();\n        }\n    }\n}","export const createRequestActionTypes = type => {\n    const SUCCESS = `${type}_SUCCESS`;\n    const FAILURE = `${type}_FAILURE`;\n    return [ type, SUCCESS, FAILURE ];\n};\n\nexport default function createRequestThunk (type, request) {\n    const SUCCESS = `${type}_SUCCESS`;\n    const FAILURE = `${type}_FAILURE`;\n    return params => async dispatch => {\n        try {\n            const response = await request(params);\n            dispatch({\n                type: SUCCESS,\n                payload: response.data,\n            });\n            return response.data;\n        } catch(e) {\n            console.dir(e);\n            dispatch({\n                type: FAILURE,\n                payload: e,\n                error: true,\n            });\n            throw e;\n        }\n    }\n};","export const setLocalStorage = ({ ...rest }) => {\n    try {\n        Object.keys(rest).forEach(key => {\n            localStorage.setItem(key, JSON.stringify(rest[key]));\n        })\n    } catch(e) {\n        console.dir('Set localStorage failed');\n        console.dir(e);\n    }\n}\n\nexport const getLocalStorage = key => {\n    try {\n        return JSON.parse(localStorage.getItem(key));\n    } catch(e) {\n        console.dir('Get localStorage failed');\n        console.dir(e);\n    }   \n}\n\nexport const removeLocalStorage = key => {\n    try {\n        localStorage.removeItem(key);\n    } catch(e) {\n        console.dir('Remove localStorage failed');\n        console.dir(e);\n    }\n}\n\nexport const clearLocalStorage = () => {\n    try {\n        localStorage.clear();\n    } catch(e) {\n        console.dir('Clear localStorage failed');\n        console.dir(e);\n    }   \n};","import { createAction, handleActions } from 'redux-actions';\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\nimport produce from 'immer';\n\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as authAPI from '../lib/api/auth';\nimport { setLocalStorage, removeLocalStorage } from '../lib/storage/storage';\n\nconst CONNECT_WEBSOCKET = 'sessionAuth/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'sessionAuth/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'sessionAuth/INITIALIZE_VALUE';\nconst CLEAR_VALUE = 'sessionAuth/CLEAR_VALUE';\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nconst [ SET_SESSION, SET_SESSION_SUCCESS, SET_SESSION_FAILURE ] = createRequestActionTypes('sessionAuth/SET_SESSION');\nexport const setSessionThunk = createRequestThunk(SET_SESSION, authAPI.getSession);\n\nconst [ LOGIN, LOGIN_SUCCESS, LOGIN_FAILURE ] = createRequestActionTypes('sessionAuth/LOGIN');\nconst [ REGISTER, REGISTER_SUCCESS, REGISTER_FAILURE ] = createRequestActionTypes('sessionAuth/REGISTER');\nconst [ LOGOUT, LOGOUT_SUCCESS, LOGOUT_FAILURE ] = createRequestActionTypes('sessionAuth/LOGOUT');\nconst [ CHECK, CHECK_SUCCESS, CHECK_FAILURE ] = createRequestActionTypes('sessionAuth/CHECK');\nexport const loginThunk = createRequestThunk(LOGIN, authAPI.login);\nexport const registerThunk = createRequestThunk(REGISTER, authAPI.register);\nexport const logoutThunk = createRequestThunk(LOGOUT, authAPI.logout);\nexport const checkThunk = createRequestThunk(CHECK, authAPI.check);\n\nconst CHANGE_FIELD = 'sessionAuth/CHANGE_FIELD';\nconst CLEAR_FIELD = 'sessionAuth/CLEAR_FIELD';\nconst CLEAR_SPECIFIC_FIELD = 'sessionAuth/CLEAR_SPECIFIC_FIELD';\nexport const changeField = createAction(CHANGE_FIELD, payload => payload);\nexport const clearField = createAction(CLEAR_FIELD, payload => payload);\nexport const clearSpecificField = createAction(CLEAR_SPECIFIC_FIELD, payload => payload);\n\n\nexport const loginProcessThunk = param => async ( dispatch, getState ) => {\n    try {\n        const auth = await dispatch(loginThunk(param));\n        if(auth) {\n            setLocalStorage({ auth });\n        }\n    } catch(e) {\n        console.dir('Login failed');\n    }\n}\n\nexport const registerProcessThunk = param => async ( dispatch, getState ) => {\n    try {\n        const auth = await dispatch(registerThunk(param));\n        if(auth) {\n            setLocalStorage({ auth });\n        }\n    } catch(e) {\n        console.dir('Register failed');\n    }\n    \n}\n\nexport const logoutProcessThunk = () => async( dispatch, getState ) => {\n    try {\n        await dispatch(logoutThunk());\n        removeLocalStorage('auth');\n    } catch(e) {\n        console.dir('Logout failed');\n    }\n}\n\nfunction* connectWebsocketSaga () {\n    \n    const socketTask = yield fork(connectNamespace, {\n        url: '/sessionAuth',\n        initializeValue,\n        clearValue,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* sessionAuthSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    tempAuth: null,\n    auth: null,\n    authError: null,\n    login: {\n        username: '',\n        password: '',\n    },\n    register: {\n        username: '',\n        password: '',\n        passwordConfirm: '',\n    }\n}\n\nexport default handleActions({\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        auth: { ...rest },\n    }),\n    [CLEAR_VALUE]: state => ({\n        ...initialState,\n        tempAuth: state.tempAuth,\n    }),\n    [SET_SESSION_SUCCESS]: (state, { payload: tempAuth }) => ({\n        ...state,\n        tempAuth,\n    }),\n    [SET_SESSION_FAILURE]: (state, { payload: error }) => ({\n        ...state,\n        tempAuth: null,\n        error,\n    }),\n    [CHANGE_FIELD]: (state, { payload: { form, key, value } }) =>\n        produce(state, draft => {\n            draft[form][key] = value;\n        }),\n    [CLEAR_FIELD]: (state, { payload: { form } }) => ({\n        ...state,\n        [form]: initialState[form],\n        authError: initialState.authError,\n    }),\n    [CLEAR_SPECIFIC_FIELD]: (state, { payload: { form, key } }) => ({\n        ...state,\n        [form]: {\n            ...state[form],\n            [key]: initialState[form][key],\n        },\n        authError: initialState.authError,\n    }),\n    [LOGIN_SUCCESS]: (state, { payload: auth }) => ({\n        ...state,\n        auth,\n        authError: null,\n    }),\n    [LOGIN_FAILURE]: (state, { payload: authError }) => ({\n        ...state,\n        auth: null,\n        authError,\n    }),\n    [REGISTER_SUCCESS]: (state, { payload: auth }) => ({\n        ...state,\n        auth,\n        authError: null,\n    }),\n    [REGISTER_FAILURE]: (state, { payload: authError }) => ({\n        ...state,\n        auth: null,\n        authError,\n    }),\n    [LOGOUT_SUCCESS]: state => ({\n        ...state,\n        auth: null,\n        authError: null,\n    }),\n    [LOGOUT_FAILURE]: ( state, { payload: authError }) => ({\n        ...state,\n        auth: null,\n        authError,\n    }),\n    [CHECK_SUCCESS]: ( state, { payload: auth }) => ({\n        ...state,\n        auth,\n        authError: null,\n    }),\n    [CHECK_FAILURE]: ( state, { payload: authError }) => ({\n        ...state,\n        auth: null,\n        authError,\n    })\n}, initialState);","import axios from 'axios';\n\nexport const getSession = () =>\n    axios.get('/api/auth/getSession');\n\nexport const login = ({ username, password }) => \n    axios.post('/api/auth/login', ({ username, password }));\n\nexport const logout = () =>\n    axios.post('/api/auth/logout');\n\nexport const register = ({ username, password }) =>\n    axios.post('/api/auth/register', ({ username, password }));\n\nexport const check = () =>\n    axios.get('/api/auth/check');","import React, { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Header from '../../components/common/Header';\nimport { logoutProcessThunk, clearField } from '../../modules/sessionAuth';\nimport { connectWebsocket, disconnectWebsocket } from '../../modules/sessionAuth';\nimport { withRouter } from 'react-router-dom';\n\nconst HeaderContainer = ({ history }) => {\n    const { tempAuth, auth } = useSelector(({ sessionAuth }) => ({\n        tempAuth: sessionAuth.tempAuth,\n        auth: sessionAuth.auth,\n    }));\n    const dispatch = useDispatch();\n\n    const onLogout = useCallback(() => {\n        dispatch(logoutProcessThunk());\n    }, [dispatch]);\n    \n    const onRecord = useCallback(() => {\n        alert('onRecord');\n    }, []);\n    \n    //  link 태그로 단순히 넘어갈 경우 dispatch전에 라우팅이 먼저 넘어가기 때문에\n    //  onClick으로 받아 dispatch를 마치고 routing이 넘어가도록 변경\n    const onLogin = useCallback(() => {\n        dispatch(clearField({ form: 'login' }));\n        history.push('/login');\n    }, [dispatch, history]);\n\n    //  async일 필요 없음, 따로 clearValue는 렌더링을 줄이기 위해 별도로 호출하지 않음\n    useEffect(() => {\n        dispatch(connectWebsocket());\n        return () => {\n            dispatch(disconnectWebsocket());\n        }\n    }, [dispatch]);\n\n    return (\n        <Header\n            onRecord={onRecord}\n            onLogout={onLogout}\n            onLogin={onLogin}\n            tempAuth={tempAuth}\n            auth={auth}\n        />\n    );\n};\n\nexport default withRouter(HeaderContainer);","import { useReducer, useEffect } from 'react';\n\nfunction reducer(state, action) {\n    switch (action.type) {\n        case 'LOADING':\n            return {\n                loading: true,\n                data: null,\n                error: null,\n            };\n        case 'SUCCESS':\n            return {\n                loading: false,\n                data: action.data,\n                error: null,\n            };\n        case 'FAILURE':\n            return {\n                loading: false,\n                data: null,\n                error: action.error,\n            };\n        default:\n            throw new Error('Unhandled action type Error')\n    }\n}\n\nfunction useAsync(callback, deps = []) {\n    const [ state, dispatch ] = useReducer(reducer, {\n        loading: false,\n        data: null,\n        error: false,\n    })\n\n    const fetchData = async () => {\n        dispatch({ type: 'LOADING' });\n        try {\n            const data = await callback();\n            dispatch({ type: 'SUCCESS', data });\n        } catch(e) {\n            dispatch({ type: 'FAILURE', error: e });\n        }\n    };\n\n    useEffect(() => {\n        fetchData();\n    // eslint-disable-next-line\n    }, deps);\n\n    return [state, fetchData];\n}\n\nexport default useAsync;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst ListBlock = styled.div`\n    position: relative;\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n    z-index: 10;\n`;\n\nconst ListCellBlock = styled.div`\n    position: absolute;\n    height: 40px;\n    width: 100%;\n    display: flex;\n    cursor: pointer;\n    transition: 1s top;\n    top: ${props => (props.index * 41 + 42) + 'px'};\n    left: 0;\n\n    &:hover {\n        background-color: rgba(255, 255, 255, 0.8);\n    }\n    \n`;\n\nconst TextBlock = styled.div`\n    width: 100px;\n    font-size: 13px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    ${props => props.elo && css`\n        width: 120px;\n    `}\n\n    ${props => props.mail && css`\n        width: 240px;\n        justify-content: flex-start;\n    `}\n\n    ${props => props.header && css`\n        justify-content: center;\n    `};\n\n`;\n// {cell.ratio * 100} %\nconst ListCell = React.memo(({ cell }) => {\n    return (\n        <ListCellBlock index={cell.index}>\n            <TextBlock>\n                {cell.index + 1}\n            </TextBlock>\n            <TextBlock mail>\n                {cell.username}\n            </TextBlock>\n            <TextBlock elo>\n                {cell.elo}\n            </TextBlock>\n            <TextBlock>\n                {cell.ratio}\n            </TextBlock>\n            <TextBlock>\n                {cell.win}\n            </TextBlock>\n            <TextBlock>\n                {cell.lose}\n            </TextBlock>\n        </ListCellBlock>\n    )\n});\n\nconst BorderBlock = styled.div`\n    position: absolute;\n    height: 1px;\n    width: 100%;\n    background-color: #ccc;\n    top: ${props => (props.index * 41 - 1 + 42) + 'px'};\n    left: 0;\n`;\n\nconst HeaderCell = React.memo(() => {\n    return (\n        <HeaderCellBlock>\n            <TextBlock>\n                Rank\n            </TextBlock>\n            <TextBlock mail={true} header={true}>\n                Email\n            </TextBlock>\n            <TextBlock elo={true}>\n                Elo\n            </TextBlock>\n            <TextBlock>\n                Ratio\n            </TextBlock>\n            <TextBlock>\n                Win\n            </TextBlock>\n            <TextBlock>\n                Lose\n            </TextBlock>\n        </HeaderCellBlock>\n    )\n});\n\nconst HeaderCellBlock = styled.div`\n    position: absolute;\n    display: flex;\n    height: 40px;\n    width: 100%;\n    border-bottom: 2px solid rgba(0, 0, 0, 0.7);\n    top: 0;\n    left: 0;\n`;\n\nconst List = ({ list }) => {\n    const listArr = list && list\n        .map(cell => (\n                <ListCell\n                    key={cell.username}\n                    cell={cell}\n                />\n            )\n        );\n\n    const borderArr = [];\n    if(list) {\n        const leng = list.reduce((acc, cur) => {\n            return acc + (cur.index < 15 ? 1 : 0);\n        }, 0);\n        \n        for(let i=1; i<leng; ++i) {\n            borderArr.push(\n                <BorderBlock\n                    key={`border_${i}`}\n                    index={i}\n                />\n            )\n        }\n    }\n\n    return (\n        <ListBlock>\n            <HeaderCell />\n            {listArr}\n            {borderArr}\n        </ListBlock>\n    )\n};\n\nexport default React.memo(List);","import React from 'react';\n\nimport List from '../../components/main/List';\n\nconst ListContainer = ({ list }) => {\n\n    return (\n        <List list={list}/>\n    )\n};\n\nexport default ListContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport RankImage from '../../static/image/ranking.svg';\nimport ListContainer from '../../containers/main/ListContainer';\n\nconst RankingBlock = styled.div`\n    position: relative;\n    width: 720px;\n    height: 720px;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: center;\n    padding: 30px;\n    background-color: rgba(255,255,255,0.5);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst BackgroundBlock = styled.img`\n    position: absolute;\n    top: 10%;\n    left: 10%;\n    width: 80%;\n    height: 80%;\n    opacity: 0.1;\n    z-index: -1;\n`;\n\nconst Ranking = ({ rank }) => {\n    return (\n        <RankingBlock>\n            <BackgroundBlock src={RankImage}/>\n            <ListContainer list={rank}/>\n        </RankingBlock>\n    )\n};\n\nexport default React.memo(Ranking);","import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport Ranking from '../../components/main/Ranking';\n\nconst tombIndex = 15;\nconst RankingContainer = () => {\n    const { ranking } = useSelector(({ ranking }) => ({\n        ranking: ranking.ranking,\n    }));\n\n    const [ rank, setRank ] = useState();\n\n    useEffect(() => {\n        if(ranking) {\n            setRank(prevState => {\n                //  initialize\n                if(!prevState) {\n                    return ranking\n                        .map((ranking, index) => ({\n                            ...ranking,\n                            index,\n                        }));\n                }\n\n                //  delete thumbIndex && update component state\n                const stable = [];\n                const revisedState = prevState\n                    .filter(cell => cell.index !== tombIndex)\n                    .map(internalCell => {\n                        const index = ranking.findIndex(externalCell => externalCell.username === internalCell.username);\n                        if(index >= 0) {\n                            stable.push(index);\n                            // eslint-disable-next-line\n                            if(JSON.stringify({ ...ranking[index], index }) == JSON.stringify(internalCell)) {\n                                return internalCell;\n                            }\n                            return {\n                                ...ranking[index],\n                                index,\n                            }\n                        } else {\n                            return {\n                                ...internalCell,\n                                index: tombIndex,\n                            }\n                        }\n                  });\n\n                //  update new ranker (tombIndex index => target index)\n                let init = 0;\n                const newlyPushed = [];\n                stable\n                    .sort((a, b) => a - b)\n                    .reduce((acc, cur) => {\n                        for(let i=init; i<cur; ++i) {\n                            acc.push(i);\n                        }\n                        init = cur + 1;\n                        return acc;\n                    }, [])\n                    .forEach(index => {\n                        revisedState.push({\n                            ...ranking[index],\n                            index: tombIndex,\n                        })\n                        newlyPushed.push({\n                            ...ranking[index],\n                            index,\n                        })\n                    });\n                \n                if(stable.length > 0) {\n                    setTimeout(() => {\n                        setRank(prevState => {\n                            const copiedRanking = [ ...prevState ];\n                            newlyPushed.forEach(externalCell => {\n                                const index = copiedRanking.findIndex(internalCell => internalCell.username === externalCell.username);\n                                if(index) {\n                                    copiedRanking.splice(index, 1, {\n                                        ...externalCell\n                                    });\n                                }\n                            });\n    \n                            return copiedRanking;\n                        })\n                    }, 0);\n                }\n                \n                return revisedState;\n            });\n        }\n    }, [ranking]);\n\n    useEffect(() => {\n        return () => {\n            setRank(null);\n        };\n    }, []);\n\n    return (\n        <Ranking rank={rank}/>\n    )\n};\n\nexport default RankingContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport Spinner from '../../static/image/spinner.svg';\n\nconst IframeCoverBlock = styled.div`\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    padding: 10px;\n    box-sizing: border-box;\n    background: rgba(255,255,255,0.5);\n    width: 236px;\n    height: 300px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    z-index: -10;\n`;\n\nconst IframeFrameBlock = styled.div`\n    width: 216px;\n    height: 280px;\n    position: relative;\n`;\n\nconst IframeImageFrameBlock = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    ${props => props.open && css`\n        display: none;\n    `};\n`;\n\nconst IframeImageBlock = styled.img`\n    width: 50px;\n    height: 50px;\n`;\n\nconst IframeBlock = styled.iframe`\n    width: 100%;\n    height: 100%;\n    border: none;\n    /* box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12); */\n    z-index: 10;\n    visibility: hidden;\n    opacity: 0;\n    transition: 2s;\n\n    ${props => props.open && css`\n        visibility: visible;\n        opacity: 1;\n    `}\n`;\n\nconst Iframe = ({ roomKey, open }) => {\n    // const src = `https://chesssup.com/billBoard/${roomKey}`;\n    const src = `./billBoard/${roomKey}`;\n\n    return (\n        <IframeCoverBlock>\n            <IframeImageFrameBlock open={open}>\n                <IframeImageBlock src={Spinner} />\n            </IframeImageFrameBlock>\n            <IframeFrameBlock>\n                <IframeBlock\n                    open={open}\n                    src={src}\n                />\n            </IframeFrameBlock>\n        </IframeCoverBlock>\n    )\n};\n\nexport default Iframe;","import _ from 'lodash';\n\nexport const genBoard = (board, prev, next) => {\n    const tempBoard = _.cloneDeep(board);\n    \n    const pieceStore = { ...tempBoard[prev.y][prev.x] };\n    tempBoard[prev.y][prev.x] = {\n        covered: false\n    };\n    tempBoard[next.y][next.x] = {\n        ...pieceStore,\n        dirty: true,\n    };\n\n    //  promotion (pawn => queen)\n    const { owner, piece } = tempBoard[next.y][next.x];\n    if((owner === 'white' && piece === 'pawn' && next.y === 0) || (owner === 'black' && piece === 'pawn' && next.y === 7)) {\n        tempBoard[next.y][next.x] = {\n            ...tempBoard[next.y][next.x],\n            piece: 'queen',\n        }\n    };\n\n    //  castling\n    if(tempBoard[next.y][next.x].piece === 'king') {\n        if(next.x - prev.x === 2) {\n            const pieceStore = { ...tempBoard[prev.y][prev.x+3] };\n            tempBoard[prev.y][prev.x+3] = {\n                covered: false\n            };\n            tempBoard[prev.y][prev.x+1] = {\n                ...pieceStore,\n                dirty: true,\n            };\n        }\n\n        if(next.x - prev.x === -2) {\n            const pieceStore = { ...tempBoard[prev.y][prev.x-4] };\n            tempBoard[prev.y][prev.x-4] = {\n                covered: false\n            };\n            tempBoard[prev.y][prev.x-1] = {\n                ...pieceStore,\n                dirty: true,\n            };\n        }\n    }\n    \n    return tempBoard;\n};\n\nexport const genClearBoard = (board, params) => {\n    const arr = [];\n\n    const leng = board.length;\n    for(let i=0; i<leng; ++i) {\n        for(let j=0; j<leng; ++j) {\n            let pass = false;\n            params.forEach(param => {\n                pass |= board[i][j][param];\n            });\n            if(pass) {\n                arr.push({\n                    y: i,\n                    x: j,\n                })\n            }\n        }\n    }\n\n    arr.forEach(cell => {\n        board[cell.y] = [ ...board[cell.y]];\n        const popedCell = board[cell.y][cell.x];\n        const newCell = {\n            ...popedCell,\n        };\n        params.forEach(param => {\n            newCell[param] = false;\n        });\n\n        board[cell.y].splice(cell.x, 1, newCell);\n    });\n\n    return board;\n}\n\nexport const genReplayBoard = (board, pieceMove, prevIndex, nextIndex) => {\n    //  board should be reflect prevIndex pieceMove\n    const nextBoard = genClearBoard([...board], [\n        'covered',\n        'clicked',\n        'tracked',\n    ]);\n    \n    if(prevIndex < nextIndex) {\n        for(let i=prevIndex+1; i<=nextIndex; ++i) {\n            const beforeIndex = pieceMove[i].prev;\n            const beforePiece = pieceMove[i].prevPiece;\n            const afterIndex = pieceMove[i].next;\n            const afterPiece = pieceMove[i].nextPiece;\n            nextBoard[beforeIndex.y] = [ ...nextBoard[beforeIndex.y] ];\n            nextBoard[beforeIndex.y][beforeIndex.x] = { covered: false };\n            nextBoard[afterIndex.y] = [ ...nextBoard[afterIndex.y] ];\n            nextBoard[afterIndex.y][afterIndex.x] = { ...beforePiece, dirty: true };\n\n            //  promotion\n            const { owner, piece } = nextBoard[afterIndex.y][afterIndex.x];\n            if((owner === 'white' && piece === 'pawn' && afterIndex.y === 0) || (owner === 'black' && piece === 'pawn' && afterIndex.y === 7)) {\n                nextBoard[afterIndex.y][afterIndex.x] = {\n                    ...nextBoard[afterIndex.y][afterIndex.x],\n                    piece: 'queen',\n                }\n            };\n\n            //  castling\n            if(nextBoard[afterIndex.y][afterIndex.x].piece === 'king') {\n                if(afterIndex.x - beforeIndex.x === 2) {\n                    nextBoard[beforeIndex.y] = [ ...nextBoard[beforeIndex.y] ];\n                    \n                    const pieceStore = { ...nextBoard[beforeIndex.y][beforeIndex.x+3] };\n                    nextBoard[beforeIndex.y][beforeIndex.x+3] = {\n                        covered: false\n                    };\n                    nextBoard[beforeIndex.y][beforeIndex.x+1] = {\n                        ...pieceStore,\n                        dirty: true,\n                    };\n                }\n\n                if(afterIndex.x - beforeIndex.x === -2) {\n                    nextBoard[beforeIndex.y] = [ ...nextBoard[beforeIndex.y] ];\n\n                    const pieceStore = { ...nextBoard[beforeIndex.y][beforeIndex.x-4] };\n                    nextBoard[beforeIndex.y][beforeIndex.x-4] = {\n                        covered: false\n                    };\n                    nextBoard[beforeIndex.y][beforeIndex.x-1] = {\n                        ...pieceStore,\n                        dirty: true,\n                    };\n                }\n            };\n\n        }\n    } else {\n        for(let i=prevIndex; i>nextIndex; --i) {\n            const beforeIndex = pieceMove[i].prev;\n            const beforePiece = pieceMove[i].prevPiece;\n            const afterIndex = pieceMove[i].next;\n            const afterPiece = pieceMove[i].nextPiece;\n            nextBoard[beforeIndex.y] = [ ...nextBoard[beforeIndex.y] ];\n            nextBoard[beforeIndex.y][beforeIndex.x] = { ...beforePiece };\n            nextBoard[afterIndex.y] = [ ...nextBoard[afterIndex.y] ];\n            nextBoard[afterIndex.y][afterIndex.x] = { ...afterPiece };\n\n            //  castling\n            if(nextBoard[beforeIndex.y][beforeIndex.x].piece === 'king') {\n                if(beforeIndex.x - afterIndex.x === -2) {\n                    nextBoard[beforeIndex.y] = [ ...nextBoard[beforeIndex.y] ];\n                    \n                    const pieceStore = { ...nextBoard[beforeIndex.y][beforeIndex.x+1] };\n                    nextBoard[beforeIndex.y][beforeIndex.x+3] = {\n                        ...pieceStore,\n                        dirty: false,\n                    };\n                    nextBoard[beforeIndex.y][beforeIndex.x+1] = {\n                        covered: false\n                    };\n                }\n\n                if(beforeIndex.x - afterIndex.x === 2) {\n                    nextBoard[beforeIndex.y] = [ ...nextBoard[beforeIndex.y] ];\n\n                    const pieceStore = { ...nextBoard[beforeIndex.y][beforeIndex.x-1] };\n                    nextBoard[beforeIndex.y][beforeIndex.x-4] = {\n                        ...pieceStore,\n                        dirty: false,\n                    };\n                    nextBoard[beforeIndex.y][beforeIndex.x-1] = {\n                        covered: false\n                    };\n                }\n            };\n        }\n    }\n    if(0 <= nextIndex && nextIndex < pieceMove.length) {\n        const {\n            prev: { y: prevY, x: prevX },\n            next: { y: nextY, x: nextX }\n        } = pieceMove[nextIndex];\n\n        nextBoard[prevY] = [ ...nextBoard[prevY] ];\n        nextBoard[prevY][prevX] = {\n            ...nextBoard[prevY][prevX],\n            tracked: true,\n        };\n\n        nextBoard[nextY] = [ ...nextBoard[nextY] ];\n        nextBoard[nextY][nextX] = {\n            ...nextBoard[nextY][nextX],\n            tracked: true,\n        };\n    }\n\n    console.dir(nextBoard);\n    return nextBoard;\n}","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { genClearBoard } from '../lib/base/genBoard';\nimport { connectNamespace } from '../lib/websocket/websocket';\n\nconst CONNECT_WEBSOCKET = 'billBoard/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'billBoard/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'billBoard/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'billBoard/INITIALIZE_SOCKET';\nconst CLEAR_VALUE = 'billBoard/CLEAR_VALUE';\nconst CHANGE_VALUE = 'billBoard/CHANGE_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\nexport const changeValue = createAction(CHANGE_VALUE);\n\nexport const changeValueThunk = ({ move }) => ( dispatch, getState ) => {\n    const { prev, next } = move;\n    const { billBoard: { board },\n        } = getState();\n\n    const cell = board[prev.y][prev.x];\n    const clearBoard = genClearBoard([...board], [\n        'tracked',\n    ]);\n    \n    clearBoard[next.y] = [ ...clearBoard[next.y] ];\n    clearBoard[next.y][next.x] = {\n        ...cell,\n        tracked: true,\n        dirty: true,\n    };\n\n    clearBoard[prev.y]= [ ...clearBoard[prev.y] ];\n    clearBoard[prev.y][prev.x] = {\n        tracked: true,\n    };\n\n    //  promotion\n    const { owner, piece } = clearBoard[next.y][next.x];\n    if((owner === 'white' && piece === 'pawn' && next.y === 0) || (owner === 'black' && piece === 'pawn' && next.y === 7)) {\n        clearBoard[next.y][next.x] = {\n            ...clearBoard[next.y][next.x],\n            piece: 'queen',\n        }\n    };\n\n    //  castling\n    if(clearBoard[next.y][next.x].piece === 'king') {\n        if(next.x - prev.x === 2) {\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\n            \n            const pieceStore = { ...clearBoard[prev.y][prev.x+3] };\n            clearBoard[prev.y][prev.x+3] = {};\n            clearBoard[prev.y][prev.x+1] = {\n                ...pieceStore,\n                dirty: true,\n            };\n        }\n\n        if(next.x - prev.x === -2) {\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\n\n            const pieceStore = { ...clearBoard[prev.y][prev.x-4] };\n            clearBoard[prev.y][prev.x-4] = {};\n            clearBoard[prev.y][prev.x-1] = {\n                ...pieceStore,\n                dirty: true,\n            };\n        }\n    };\n\n    dispatch(changeValue({\n        board: clearBoard,\n    }));\n}\n\nfunction* connectWebsocketSaga (action) {\n    const query = action.payload;\n\n    const socketTask = yield fork(connectNamespace, { \n        url: '/billBoard',\n        initializeSocket,\n        initializeValue,\n        changeValue: changeValueThunk,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* billBoardSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    board: null,\n    inform: null,\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest }}) => ({\n        ...state,\n        ...rest,\n    }),\n    [CHANGE_VALUE]: (state, { payload: { board } }) => ({\n        ...state,\n        board,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n}, initialState);","import { GiChessPawn, GiChessKing, GiChessQueen,\n    GiChessBishop, GiChessKnight, GiChessRook, GiPlainCircle } from 'react-icons/gi';\n\nexport const pieceMapper = {\n    'pawn': GiChessPawn,\n    'king': GiChessKing,\n    'queen': GiChessQueen,\n    'bishop': GiChessBishop,\n    'knight': GiChessKnight,\n    'rook': GiChessRook,\n    'covered': GiPlainCircle,\n}\n\nexport const playerMapper = {\n    'white': {\n        color: 'white',\n        style: {\n            filter: `drop-shadow(1px 1px 1px white)`,\n            width: '80%',\n            height: '80%',\n        }\n    },\n    'black': {\n        color: 'black',\n        style: {\n            filter: `drop-shadow(1px 1px 1px black)`,\n            width: '80%',\n            height: '80%',\n        }\n    },\n    'covered0': {\n        style: {\n            filter: `drop-shadow(1px 1px 1px black)`,\n            width: '30%',\n            height: '30%',\n            color: 'rgb(130, 151, 105)',\n            \n        }\n    },\n    'covered1': {\n        style: {\n            filter: `drop-shadow(1px 1px 1px black)`,\n            width: '30%',\n            height: '30%',\n            color: 'rgb(100, 111, 64)',\n        }\n    }\n}","import React, {useCallback} from 'react';\nimport styled, { css, createGlobalStyle } from 'styled-components';\nimport { IconContext } from 'react-icons';\nimport { pieceMapper, playerMapper } from '../../lib/base/pieceConverter';\n\nconst pieceConverter = ({ piece, owner, covered, cellNum }) => {\n    let coveredCanvas = null;\n    \n    if(covered) {\n        const Component = pieceMapper['covered'];\n\n        coveredCanvas = (\n            <IconContext.Provider value={playerMapper[`covered${cellNum}`]}>\n                <Component />\n            </IconContext.Provider>\n        );\n    }\n\n    if(!piece || !owner) {\n        return coveredCanvas;\n    }\n\n    const Component = pieceMapper[piece];\n    const capturedObject = coveredCanvas ? {\n        opacity: 0.5,\n        filter: owner === 'black' ? `drop-shadow(1px 1px 1px white)` : `drop-shadow(1px 1px 1px black)`,\n    } : null;\n\n    const styleObject = {\n        ...playerMapper[owner],\n        style: {\n            ...playerMapper[owner].style,\n            ...capturedObject,\n        }\n    };\n\n    return (\n        <IconContext.Provider value={styleObject}>\n            <Component />\n        </IconContext.Provider>\n    )\n};\n\nconst CanvasBlock = styled.div`\n    position: relative;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    transition: 0.5s;\n\n    ${props => props.replayMode && css`\n        opacity: 0.8;\n    `}\n`;\n\nconst CanvasRowBlock = styled.div`\n    display: flex;\n`;\n\nconst CanvasCellBlock = styled.div`\n    display: flex;\n    cursor: pointer;\n    justify-content: center;\n    align-items: center;\n    /* width: 90px;\n    height: 90px; */\n    \n    width: ${props => {\n        if(props.cellSize) {\n            return props.cellSize;\n        }\n        return '90px';\n    }};\n\n    height: ${props => {\n        if(props.cellSize) {\n            return props.cellSize;\n        }\n        return '90px';\n    }};\n\n    ${props => props.cellNum === 0 && css`\n        background-color: rgb(240, 217, 181);\n    `}\n\n    ${props => props.cellNum === 1 && css`\n        background-color: rgb(181, 136, 99);\n    `}\n\n    ${props => props.cellNum === 0 && props.clicked && css`\n        background-color: rgb(130, 151, 105);\n    `}\n\n    ${props => props.cellNum === 1 && props.clicked && css`\n        background-color: rgb(100, 111, 64);\n    `}\n\n    ${props => props.cellNum === 0 && props.tracked && css`\n        background-color: rgb(205, 210, 106);\n    `}\n\n    ${props => props.cellNum === 1 && props.tracked && css`\n        background-color: rgb(170, 162, 58);\n    `}\n\n    &:hover {\n        ${props => props.cellNum === 0 && props.covered && css`\n            background-color: rgb(174, 177, 135);\n        `}\n\n        ${props => props.cellNum === 1 && props.covered && css`\n            background-color: rgb(132, 121, 78);\n        `}  \n    }\n`\n\nconst CanvasRow = React.memo(({ row, y, cellSize, onClickCell, pieceConverter }) => {\n    // console.dir('Canvas Row');\n    return (\n        <CanvasRowBlock>\n            {row.map((cell, x) => (\n                <CanvasCell\n                    key={`cell_${y}_${x}`}\n                    onClick={onClickCell.bind(null, {y, x})}\n                    pieceConverter={pieceConverter}\n                    cellNum={(x + y) % 2}\n                    cellSize={cellSize}\n                    cell={cell}\n                    y={y}\n                    x={x}\n                />\n            ))}\n        </CanvasRowBlock>\n    )\n}, (prevProps, nextProps) => {\n    return prevProps.row === nextProps.row;\n});\n\nconst CanvasCell = React.memo(({ cell, cellSize, cellNum, onClick, pieceConverter, y, x }) => {\n    // console.dir(`Canvas Cell ${y}_${x}`);\n    return (\n        <CanvasCellBlock\n            onClick={onClick}\n            cellNum={cellNum}\n            cellSize={cellSize}\n            {...cell}\n        >\n            {pieceConverter({\n                piece: cell.piece,\n                owner: cell.owner,\n                covered: cell.covered,\n                cellNum,\n            })}\n        </CanvasCellBlock>\n    )\n}, (prevProps, nextProps) => {\n    return prevProps.cell === nextProps.cell;\n});\n\nconst CanvasContentBlock = styled.div`\n    ${props => props.blocked && css`\n        pointer-events: none;\n    `}\n`;\n\nconst CanvasContent = ({ board, blocked, cellSize, onClick }) => {\n    //  can't memoization\n    const onClickCell = useCallback(({y, x}) => {\n        onClick(y, x);\n    }, [onClick]);\n\n    // const rev = board.reverse().map((row, y) => (\n    //     <CanvasRow\n    //         key={`row_${y}`}\n    //         row={row.reverse()}\n    //         y={y}\n    //         cellSize={cellSize}\n    //         onClickCell={onClickCell}\n    //         pieceConverter={pieceConverter}\n    //     />\n    // ));\n    \n    return  (\n        <CanvasContentBlock blocked={blocked}>\n            {board.map((row, y) => (\n                <CanvasRow\n                    key={`row_${y}`}\n                    row={row}\n                    y={y}\n                    cellSize={cellSize}\n                    onClickCell={onClickCell}\n                    pieceConverter={pieceConverter}\n                />\n            ))}\n        </ CanvasContentBlock>\n    )\n}\n\nconst ReplayBlock = styled.div`\n    position: absolute;\n    top: 0;\n    left: calc(100% + 17px);\n    width: 60px;\n    height: 30px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    font-size: 12px;\n    visibility: hidden;\n    opacity: 0;\n    transition: 0.5s;\n    font-weight: bold;\n\n    ${props => props.replayMode && css`\n        visibility: visible;\n        opacity: 1;\n    `}\n`;\n\n// //  useless\n// const GlobalStyle = createGlobalStyle`\n//     body {\n//         background: rgba(255,255,255,0.5);\n//     }\n// `;\n\nconst Canvas = ({ onContextMenu, replayMode, billBoard, ...rest }) => {\n    return (\n        <>\n            {/* {billBoard && <GlobalStyle />} */}\n            <CanvasBlock\n                replayMode={replayMode}\n                onContextMenu={onContextMenu}\n            >\n                <CanvasContent {...rest} />\n                <ReplayBlock replayMode={replayMode}>Replay</ReplayBlock>\n            </CanvasBlock>\n        </>\n    )\n};\n\nexport default React.memo(Canvas);","import React, { useCallback, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { connectWebsocket , disconnectWebsocket } from '../../modules/billBoard';\nimport Canvas from '../../components/gameplay/Canvas';\nimport useAsync from '../../lib/hook/useAsync';\n\nconst BillBoardCanvasWrapperContainer = ({ roomKey, cellSize }) => {\n    const { board } = useSelector(({ billBoard }) => ({\n        board: billBoard.board,\n    }));\n\n    const dispatch = useDispatch();\n\n    // useEffect(() => {\n    //     return () => {\n    //         dispatch(clearValue());\n    //     }\n    // }, [dispatch])\n\n    const connection = async () => {\n        dispatch(disconnectWebsocket());\n        await Promise.resolve().then(() => {\n            dispatch(connectWebsocket({\n                roomKey,\n            }));\n        });\n        return true;\n    };\n\n    useEffect(() => {\n        return () => {\n            dispatch(disconnectWebsocket());\n        }\n    }, [dispatch]);\n\n    const onContextMenu = useCallback(e => {\n        e.preventDefault();\n    }, []);\n\n    const [state] = useAsync(connection, [dispatch]);\n\n    const { loading, data, error } = state;\n\n    if(loading) return null;\n    if(error) return null;\n    if(data) {\n        if(!board) {\n            //  activity indicator\n            return null;\n        }\n        return (\n            <Canvas\n                board={board}\n                billBoard={true}\n                blocked={true}\n                onContextMenu={onContextMenu}\n                cellSize={cellSize}\n            />\n        )\n    }\n    return null;\n};\n\nexport default BillBoardCanvasWrapperContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport BillBoardCanvasWrapperContainer from '../../containers/billBoard/BillBoardCanvasWrapperContainer';\n\nconst BillBoardFrameBlock = styled.div`\n    /* display: flex;\n    width: 216px;\n    height: 280px; */\n    /* flex-direction: column; */\n    justify-content: flex-start;\n    align-items: center;\n\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    padding: 10px;\n    box-sizing: border-box;\n    background: rgba(255,255,255,0.5);\n    width: 236px;\n    height: 300px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    z-index: -10;\n`;\n\nconst BillBoardBlock = styled.div`\n    width: 216px;\n    height: 216px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transform: scale(0.3);\n`;\n\nconst InformFrameBlock = styled.div`\n    margin-top: 4px;\n    height: 60px;\n    width: 216px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst PlayerBlock = styled.div`\n    height: 40px;\n    width: 100px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n\n    & + & {\n        margin-left: 12px;\n    }\n`;\n\nconst TextBlock = styled.div`\n  font-size: 10px;\n`;\n\nconst BillBoard = ({ roomKey, inform }) => {\n    return (\n        <BillBoardFrameBlock>\n            <BillBoardBlock>\n                <BillBoardCanvasWrapperContainer roomKey={roomKey} />\n            </BillBoardBlock>\n            <InformFrameBlock>\n                {inform && inform.map((player, index) => (\n                    <PlayerBlock key={roomKey + '_' + index + '_' + player.username}>\n                        <TextBlock>{player.username.split('@')[0]}</TextBlock>\n                        <TextBlock>{player.elo}</TextBlock>\n                    </PlayerBlock>\n                ))}\n            </InformFrameBlock>\n        </BillBoardFrameBlock>\n    )\n};\n\nexport default BillBoard;","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport BillBoard from '../../components/billBoard/BillBoard';\n\nconst BillBoardContainer = ({ roomKey }) => {\n    const { inform } = useSelector(({ billBoard }) => ({\n        inform: billBoard.inform,\n    }));\n\n    return (\n        <BillBoard\n            roomKey={roomKey}\n            inform={inform}\n        />\n    )\n};\n\nexport default BillBoardContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nimport RankingContainer from '../../containers/main/RankingContainer';\nimport IframeContainer from '../../containers/main/IframeContainer';\nimport BillBoardContainer from '../../containers/billBoard/BillBoardContainer';\n\nconst MainLayoutBlock = styled.div`\n    height: 800px;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst sideBlockStyle = css`\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    width: 20%;\n    align-items: center;\n`;\n\nconst LeftSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-right: 1%;\n`;\n\nconst RightSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-left: 1%;\n`;\n\nconst MainLayout = () => {\n    return (\n        <MainLayoutBlock>\n            <LeftSideBlock>\n                <BillBoardContainer roomKey={0} />\n                {/* <BillBoardContainer roomKey={1} /> */}\n                {/* <IframeContainer roomKey={0} />\n                <IframeContainer roomKey={1} /> */}\n            </LeftSideBlock>\n            <RankingContainer />\n            <RightSideBlock>\n                {/* <BillBoardContainer roomKey={2} />\n                <BillBoardContainer roomKey={3} /> */}\n                {/* <IframeContainer roomKey={2} />\n                <IframeContainer roomKey={3} /> */}\n            </RightSideBlock>\n        </MainLayoutBlock>\n    )\n};\n\nexport default React.memo(MainLayout);","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\n\nconst CONNECT_WEBSOCKET = 'ranking/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'ranking/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'ranking/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'ranking/INITIALIZE_SOCKET';\nconst CLEAR_VALUE = 'ranking/CLEAR_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET);\nexport const initializeValue = createAction(INITIALIZE_VALUE);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nfunction* connectWebsocketSaga () {\n    const socketTask = yield fork(connectNamespace, { \n        url: '/ranking',\n        initializeSocket,\n        initializeValue,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* rankingSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    ranking: null,\n    error: null,\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        ...rest,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n}, initialState);","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport useAsync from '../../lib/hook/useAsync';\nimport { setSessionThunk } from '../../modules/sessionAuth';\n\nimport MainLayout from '../../components/main/MainLayout';\nimport { connectWebsocket, disconnectWebsocket, clearValue } from '../../modules/ranking';\n\nconst MainLayoutContainer = () => {\n    const dispatch = useDispatch();\n\n    const connection = async () => {\n        await dispatch(setSessionThunk());\n        \n        dispatch(disconnectWebsocket());\n        await Promise.resolve().then(() => {\n            dispatch(connectWebsocket());\n        })\n        \n        return true;\n    };\n\n    useEffect(() => {\n        return () => {\n            dispatch(disconnectWebsocket());\n        };\n    }, [dispatch]);\n\n    useEffect(() => {\n        dispatch(clearValue());\n    }, [dispatch])\n\n    const [state] = useAsync(connection, [ dispatch ]);\n\n    const { loading, data, error } = state;\n\n    // if(loading) return null;\n    // if(error) return null;\n    // if(data) {\n    //     return (\n    //         <MainLayout />\n    //     )\n    // }\n    // return null;\n\n    return (\n        <MainLayout />\n    )\n};\n\nexport default MainLayoutContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nconst FooterBlock = styled.div`\n    /* position: absolute;\n    top: 850px; */\n    width: 100%;\n    height: 66px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n`;\n\nconst TextBlock = styled.div`\n    font-size: 12px;\n    color: rgba(0, 0, 0, 0.3);\n`;\n\nconst Footer = () => {\n    return (\n        <FooterBlock>\n            <TextBlock>\n                COPYRIGHT © SJCorp ALL RIGHTS RESERVED.\n            </TextBlock>\n            <TextBlock>\n                Powered by SJCorp. Designs © 2019 - 2020 SJCorp\n            </TextBlock>\n        </FooterBlock>\n    )\n};\n\nexport default Footer;","import React from 'react';\nimport Footer from '../../components/common/Footer';\n\nconst FooterContainer = () => {\n    return (\n        <Footer />\n    );\n};\n\nexport default FooterContainer;","import React from 'react';\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport MainLayoutContainer from '../containers/main/MainLayoutContainer';\nimport FooterContainer from '../containers/common/FooterContainer';\n\nconst MainPage = () => {\n\n    return (\n        <>\n            <HeaderContainer />\n            <MainLayoutContainer />\n            <FooterContainer />\n        </>\n    )\n};\n\nexport default MainPage;","import React, { useRef, useCallback } from 'react';\nimport styled, { css } from 'styled-components';\nimport { IoMdMail } from 'react-icons/io';\nimport { FaLock } from 'react-icons/fa';\nimport { IconContext } from 'react-icons';\n\nconst AuthFrameBlock = styled.form`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 800px;\n`;\n\nconst AuthFormBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 30%;\n    height: 400px;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst TitleBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    font-size: 20px;\n    height: 100px;\n    text-shadow: 2px 2px 2px rgba(0,0,0,0.14);\n`;\n\nconst InputFrameBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 150px;\n`;\n\nconst InputFormBlock = styled.div`\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding-left: 1%;\n    width: 60%;\n\n    &+& {\n        margin-top: 10px;\n    }\n\n    @keyframes blinking {\n        0%{\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        }\n        50% {\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.56), 0 3px 1px -2px rgba(0,0,0,0.8), 0 1px 5px 0 rgba(0,0,0,0.48);\n        }\n        100%{\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        }\n      }\n\n    ${props => props.blink && css`\n        animation: blinking 1s 2;\n    `}\n`\n\nconst inputStyle = css`\n    outline: none;\n    border: none;\n    height: 40px;\n    width: 80%;\n    padding-left: 5%;\n`;\n\nconst EmailInputBlock = styled.input`\n    ${inputStyle}\n`\n\nconst PasswordInputBlock = styled.input`\n    ${inputStyle}\n`;\n\nconst OptionFormBlock = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 10px;\n    width: 60%;\n    height: 20px;\n`;\n\nconst SaveInputFormBlock = styled.div`\n    display: flex;\n    align-content: center;\n    width: 30%;\n    height: 100%;\n`;\n\nconst SaveInputBlock = styled.input`\n    height: 100%;\n    outline: none;\n    margin: 0px;\n`;\n\nconst SaveInputTextBlock = styled.div`\n    display: flex;\n    align-items: center;\n    height: 100%;\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.5);\n    cursor: pointer;\n    margin-left: 5px;\n`;\n\nconst ForgetBlock = styled.div`\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.5);\n    cursor: pointer;\n`;\n\nconst SubmitFrameBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 150px;\n`;\n\nconst SubmitBlock = styled.button`\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    border: none;\n    outline: none;\n    width: 30%;\n    cursor: pointer;\n    height: 40px;\n    background-color: transparent;\n\n    &:hover, :active {\n        background-color: rgb(0, 0, 0, 0.05);\n    }\n`;\n\nconst CreateFormBlock = styled.div`\n    display: flex;\n    align-items: center;\n    margin-top: 10px;\n    height: 40px;\n`;\n\nconst CreateBlock = styled.div`\n    color: rgb(0, 0, 0, 0.5);\n    font-size: 10px;\n`;\n\nconst CreateButtonBlock = styled.button`\n    outline: none;\n    border: none;\n    font-size: 10px;\n    color: black;\n    text-decoration: none;\n    cursor: pointer;\n    margin-left: 5px;\n    background-color: transparent;\n`;\n\nconst ErrorBlock = styled.div`\n    position: absolute;\n    top: 0;\n    left: 48%;\n    width: 50%;\n    display: flex;\n    justify-content: flex-end;\n    font-size: 12px;\n    @keyframes fontOpacity {\n        0%{\n            color: rgb(0, 0, 0, 0);\n        }\n        100%{\n            color: rgb(0, 0, 0, 0.4);\n        }\n      }\n    animation: fontOpacity 1s 1;\n    color: rgb(0, 0, 0, 0.4);\n`\n\nconst AuthForm = ({ login, register, form, error, onSubmit, onChange, onRegister }) => {\n    const ref = useRef({});\n\n    const onClick = useCallback(tag => {\n        ref.current[tag].focus();\n    }, []);\n\n    return (\n        <AuthFrameBlock\n            autoComplete='off'\n            autoCorrect='off'\n            autoCapitalize='off'\n            spellCheck='false'\n            onSubmit={onSubmit}\n        >\n            <AuthFormBlock>\n                <TitleBlock>\n                    { login ? 'Sign In' : ( register ? 'Sign Up' : null ) }\n                </TitleBlock>\n                <InputFrameBlock>\n                    <InputFormBlock\n                        onClick={onClick.bind(null, 'username')}\n                        blink={error.username}\n                        key={`username_${error.count}`}\n                    >\n                        <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer'} }}>\n                            <IoMdMail />\n                        </IconContext.Provider>\n                        <EmailInputBlock\n                            type='text'\n                            name='username'\n                            placeholder='Email'\n                            onChange={onChange}\n                            value={form.username}\n                            ref={el => ref.current.username = el}\n                        />\n                        <ErrorBlock>\n                            {error.username}\n                        </ErrorBlock>\n                    </InputFormBlock>\n                    <InputFormBlock\n                        onClick={onClick.bind(null, 'password')}\n                        blink={error.password}\n                        key={`password_${error.count}`}\n                    >\n                        <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer' } }}>\n                            <FaLock />\n                        </IconContext.Provider>\n                        <PasswordInputBlock\n                            type='password'\n                            name='password'\n                            placeholder='Password'\n                            onChange={onChange}\n                            value={form.password}\n                            ref={el => ref.current.password = el}\n                        />\n                        <ErrorBlock>\n                            {error.password}\n                        </ErrorBlock>\n                    </InputFormBlock>\n                    {register ? (\n                        <InputFormBlock\n                            onClick={onClick.bind(null, 'passwordConfirm')}\n                            blink={error.passwordConfirm}\n                            key={`passwordConfirm_${error.count}`}\n                        >\n                            <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer' } }}>\n                                <FaLock />\n                            </IconContext.Provider>\n                            <PasswordInputBlock\n                                type='password'\n                                name='passwordConfirm'\n                                placeholder='Confirm Password'\n                                onChange={onChange}\n                                value={form.passwordConfirm}\n                                ref={el => ref.current.passwordConfirm = el}\n                            />\n                            <ErrorBlock>\n                                {error.passwordConfirm}\n                            </ErrorBlock>\n                        </InputFormBlock>\n                    ): null}\n                    {login ? (\n                        <OptionFormBlock>\n                            <SaveInputFormBlock>\n                                <SaveInputBlock\n                                    type='checkbox'\n                                />\n                                <SaveInputTextBlock>\n                                    Remember Me\n                                </SaveInputTextBlock>\n                            </SaveInputFormBlock>\n                            <ForgetBlock>\n                                Forget password?    \n                            </ForgetBlock>\n                        </OptionFormBlock>\n                    ): null}\n                </InputFrameBlock>\n                <SubmitFrameBlock>\n                    <SubmitBlock\n                        type='submit'\n                    >\n                        Submit\n                    </SubmitBlock>\n                    {login ? (\n                        <CreateFormBlock>\n                            <CreateBlock>\n                                Don't have an account?\n                            </CreateBlock>\n                            <CreateButtonBlock\n                                type='button'\n                                onClick={onRegister}\n                            >\n                                Create\n                            </CreateButtonBlock>\n                        </CreateFormBlock>\n                    ) : (\n                        <CreateFormBlock>\n                            <CreateBlock>\n                                Don't have an account?\n                            </CreateBlock>\n                            <CreateButtonBlock\n                                type='button'\n                            >\n                                Create\n                            </CreateButtonBlock>\n                        </CreateFormBlock>\n                    )}\n                </SubmitFrameBlock>\n            </AuthFormBlock>\n        </AuthFrameBlock>\n    )\n};\n\nexport default React.memo(AuthForm);","import React, { useCallback, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport Joi from 'joi';\nimport { loginProcessThunk, changeField, clearField, clearSpecificField } from '../../modules/sessionAuth';\nimport AuthForm from '../../components/auth/AuthForm';\n\nconst LoginContainer = ({ history }) => {\n    const { form, auth, authError } = useSelector(({ sessionAuth }) => ({\n        form: sessionAuth.login,\n        auth: sessionAuth.auth,\n        authError: sessionAuth.authError,\n    }));\n\n    const dispatch = useDispatch();\n\n    const [ error, setError ] = useState({\n        username: '',\n        password: ''\n    });\n\n    const onChange = useCallback(e => {\n        const { name, value } = e.target;\n        if(error[name] !== '') {\n            setError(prevState => ({\n                ...prevState,\n                [name]: '',\n            }));\n        }\n        dispatch(changeField({\n            form: 'login',\n            key: name,\n            value,\n        }));\n    }, [dispatch, error]);\n\n    const onSubmit = useCallback(e => {\n        e.preventDefault();\n        const { username, password } = form;\n\n        //  initialize\n        let nextError = Object.keys(form)\n            .reduce((acc, key) =>\n                ({\n                    ...acc,\n                    [key]: false,\n                }),{});\n\n        //  empty check\n        Object.keys(nextError)\n            .filter(key => form[key] === '')\n            .forEach(key => {\n                nextError = {\n                    ...nextError,\n                    [key]: 'Required field'\n                }\n            });\n\n        const schema = Joi.object().keys({\n            username: Joi.string().max(80).email({ minDomainAtoms: 2 }).required().error(() => ({ message: 'Wrong format' })),\n            password: Joi.string().min(4).max(16).required().error(() => ({ message: '4 ~ 16 digits' })),\n        });\n\n        const result = Joi.validate(form, schema, { abortEarly: false });\n\n        if(result.error) {\n            result.error.details.forEach(detail => {\n                if(!nextError[detail.path[0]]) {\n                    nextError = {\n                        ...nextError,\n                        [detail.path[0]]: detail.message,\n                    }\n                }\n            });\n        }\n\n        if(Object.keys(nextError).filter(key => nextError[key]).length > 0) {\n            setError(prevState => ({\n                ...nextError,\n                count: prevState.count + 1,\n            }));\n            Object.keys(nextError).forEach(key => {\n\n                if(nextError[key]) {\n                    dispatch(clearSpecificField({ form: 'login', key }))\n                }\n            });\n\n            return;\n        };\n\n        dispatch(loginProcessThunk({ username, password }));\n        dispatch(clearField({ form: 'login' }));\n    }, [dispatch, form]);\n\n    useEffect(() => {\n        if(authError) {\n            let nextError = {};\n            const errorMention = authError.response.data;\n            Object.keys(errorMention).forEach(key => {\n                nextError = {\n                    ...nextError,\n                    [key]: errorMention[key],\n                }\n                // dispatch(clearSpecificField({ form: 'login', key }))\n            });\n\n            setError(nextError);\n            \n            return;\n        };\n\n        if(auth) {\n            history.push('/');\n        }\n    }, [history, auth, authError]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearField({ form: 'login' }));\n        }\n    }, [dispatch]);\n\n    const onRegister = useCallback(() => {\n        dispatch(clearField({ form: 'register' }));\n        history.push('/register');\n    }, [dispatch, history]);\n    \n    return (\n        <AuthForm\n            login\n            onSubmit={onSubmit}\n            onChange={onChange}\n            form={form}\n            error={error}\n            onRegister={onRegister}\n        />\n    )\n};\n\nexport default withRouter(LoginContainer);","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport LoginContainer from '../containers/auth/LoginContainer';\nimport FooterContainer from '../containers/common/FooterContainer';\n\nconst LoginPage = () => {\n    return (\n        <>\n            <Helmet>\n                <title>Sign In • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <LoginContainer />\n            <FooterContainer />\n        </>\n    )\n};\n\nexport default LoginPage;","import React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport Joi from 'joi';\nimport AuthForm from '../../components/auth/AuthForm';\nimport { registerProcessThunk, changeField, clearField, clearSpecificField } from '../../modules/sessionAuth';\n\nconst RegisterContainer = ({ history }) => {\n    const { form, auth, authError } = useSelector(({ sessionAuth }) => ({\n        form: sessionAuth.register,\n        auth: sessionAuth.auth,\n        authError: sessionAuth.authError,\n    }));\n\n    const dispatch = useDispatch();\n\n    const [ error, setError ] = useState({\n        username: '',\n        password: '',\n        passwordConfirm: ''\n    })\n\n    const onChange = useCallback(e => {\n        const { name, value } = e.target;\n        if(error[name] !== '') {\n            setError(prevState => ({\n                ...prevState,\n                [name]: '',\n            }));\n        }\n        dispatch(changeField({\n            form: 'register',\n            key: name,\n            value,\n        }));\n    }, [dispatch, error]);\n\n    const onSubmit = useCallback(e => {\n        e.preventDefault();\n        const { username, password } = form;\n\n         //  initialize\n         let nextError = Object.keys(form)\n         .reduce((acc, key) =>\n             ({\n                 ...acc,\n                 [key]: false,\n             }),{});\n\n        //  empty check\n        Object.keys(nextError)\n            .filter(key => form[key] === '')\n            .forEach(key => {\n                nextError = {\n                    ...nextError,\n                    [key]: 'Required field'\n                }\n            });\n\n        const schema = Joi.object().keys({\n            username: Joi.string().max(80).email({ minDomainAtoms: 2 }).required().error(() => ({ message: 'Wrong format' })),\n            password: Joi.string().min(4).max(16).required().error(() => ({ message: '4 ~ 16 digits' })),\n            passwordConfirm: Joi.any().valid(Joi.ref('password')).required().error(() => ({ message: 'Password mismatch' })),\n        });\n\n        const result = Joi.validate(form, schema, { abortEarly: false });\n\n        if(result.error) {\n            result.error.details.forEach(detail => {\n                if(!nextError[detail.path[0]]) {\n                    nextError = {\n                        ...nextError,\n                        [detail.path[0]]: detail.message,\n                    }\n                }\n            });\n        }\n\n        if(Object.keys(nextError).filter(key => nextError[key]).length > 0) {\n            setError(prevState => ({\n                ...nextError,\n                count: prevState.count + 1,\n            }));\n            Object.keys(nextError).forEach(key => {\n                if(nextError[key]) {\n                    dispatch(clearSpecificField({ form: 'register', key }))\n                }\n            });\n\n            return;\n        };\n\n        dispatch(registerProcessThunk({ username, password }));\n        dispatch(clearField({ form: 'register' }));\n    }, [dispatch, form]);\n\n    useEffect(() => {\n        if(authError) {\n            let nextError = {};\n            const errorMention = authError.response.data;\n            Object.keys(errorMention).forEach(key => {\n                nextError = {\n                    ...nextError,\n                    [key]: errorMention[key],\n                }\n                // dispatch(clearSpecificField({ form: 'register', key }))\n            });\n\n            setError(nextError);\n            \n            return;\n        }\n\n        if(auth) {\n            history.push('/');\n        }\n    }, [history, auth, authError])\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearField({ form: 'register' }));\n        };\n    }, [dispatch]);\n\n    return (\n        <AuthForm \n            register\n            onSubmit={onSubmit}\n            onChange={onChange}\n            form={form}\n            error={error}\n        />\n    )\n};\n\nexport default withRouter(RegisterContainer);","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport RegisterContainer from '../containers/auth/RegisterContainer';\nimport FooterContainer from '../containers/common/FooterContainer';\n\nconst RegisterPage = () => {\n\n    return (\n        <>\n            <Helmet>\n                <title>Sign Up • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <RegisterContainer />\n            <FooterContainer />\n        </>\n    )\n};\n\nexport default RegisterPage;","const board = [\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\n];\n\nexport default board;","import { checkPlayersEveryMove } from './validation';\n\nconst rules = {\n    pawn: {\n        type: 'onetime',\n        move: [\n            {\n                dy: -1,\n                dx: 0,\n                except: function(props) {\n                    const { board, dy, dx } = props;\n                    if(board[dy][dx].piece) {\n                        return false;\n                    }\n                    return true;\n                }\n            },\n            {\n                dy: -2,\n                dx: 0,\n                except: function(props) {\n                    const { board, y, x, owner } = props;\n                    if((owner === 'black' && y !== 1) || (owner === 'white' && y !== 6)) return false;\n                    if((owner === 'black' && board[2][x].piece) || (owner === 'white' && board[5][x].piece)) return false;\n                    if((owner === 'black' && board[3][x].piece) || (owner === 'white' && board[4][x].piece)) return false;\n                    return true;\n                }\n            },\n            {\n                dy: -1,\n                dx: -1,\n                except: function(props) {\n                    const { board, dy, dx } = props;\n                    if(board[dy][dx].piece) {\n                        return true;\n                    }\n                    return false;\n                }\n            },\n            {\n                dy: -1,\n                dx: 1,\n                except: function(props) {\n                    const { board, dy, dx } = props;\n                    if(board[dy][dx].piece) {\n                        return true;\n                    }\n                    return false;\n                }\n            }\n        ],\n    },\n    knight: {\n        type: 'onetime',\n        move: [\n            {\n                dy: -2,\n                dx: -1,\n            },\n            {\n                dy: -2,\n                dx: 1,\n            },\n            {\n                dy: 2,\n                dx: -1,\n            },\n            {\n                dy: 2,\n                dx: 1,\n            },\n            {\n                dy: -1,\n                dx: -2,\n            },\n            {\n                dy: -1,\n                dx: 2,\n            },\n            {\n                dy: 1,\n                dx: -2,\n            },\n            {\n                dy: 1,\n                dx: 2,\n            },\n        ]\n    },\n    king: {\n        type: 'onetime',\n        move: [\n            {\n                dy: 1,\n                dx: 0\n            },\n            {\n                dy: -1,\n                dx: 0\n            },\n            {\n                dy: 0,\n                dx: 1\n            },\n            {\n                dy: 0,\n                dx: -1\n            },\n            {\n                dy: -1,\n                dx: 1\n            },\n            {\n                dy: -1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: 1\n            },\n            {\n                dy: 0,\n                dx: 2,\n                except: function(props) {\n                    const { board, y, x, owner } = props;\n                    const enemy = (owner === 'white') ? 'black' : 'white';\n\n                    //  king dirty check\n                    if(!board[y][x].piece || board[y][x].dirty) {\n                        return false;\n                    }\n\n                    //  rook dirty check\n                    if(!board[y][x+3].piece || board[y][x+3].dirty) {\n                        return false;\n                    }\n\n                    //  check path is empty\n                    if(board[y][x+1].piece || board[y][x+2].piece) {\n                        return false;\n                    }\n\n                    //  is king & path safe?, prevent castling loop by flag\n                    const coveredAxisBundle = checkPlayersEveryMove(enemy, board, true);\n                    const length = coveredAxisBundle.length;\n                    for(let i=0; i<length; ++i) {\n                        const axis = coveredAxisBundle[i];\n                        if(axis.dy === y && (axis.dx === x || axis.dx === x+1 || axis.dx === x+2)) {\n                            return false;\n                        }\n                    }\n\n\n                    return true;\n                },             \n            },\n            {\n                dy: 0,\n                dx: -2,\n                except: function(props) {\n                    const { board, y, x, owner } = props;\n                    const enemy = (owner === 'white') ? 'black' : 'white';\n                    \n                    //  king dirty check\n                    if(!board[y][x].piece || board[y][x].dirty) {\n                        return false;\n                    }\n\n                    //  rook dirty check\n                    if(!board[y][x-4].piece || board[y][x-4].dirty) {\n                        return false;\n                    }\n\n                    //  check path is empty\n                    if(board[y][x-1].piece || board[y][x-2].piece || board[y][x-3].piece ) {\n                        return false;\n                    }\n\n                    //  is king & path safe?, prevent castling loop by flag\n                    const coveredAxisBundle = checkPlayersEveryMove(enemy, board, true);\n                    const length = coveredAxisBundle.length;\n                    for(let i=0; i<length; ++i) {\n                        const axis = coveredAxisBundle[i];\n                        if(axis.dy === y && (axis.dx === x || axis.dx === x-1 || axis.dx === x-2)) {\n                            return false;\n                        }\n                    }\n\n                    return true;\n                },             \n            }\n        ]\n    },\n    bishop: {\n        type: 'multitime',\n        move: [\n            {\n                dy: 1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: 1\n            },\n            {\n                dy: -1,\n                dx: -1\n            },\n            {\n                dy: -1,\n                dx: 1\n            },\n        ]\n    },\n    rook: {\n        type: 'multitime',\n        move: [\n            {\n                dy: 1,\n                dx: 0\n            },\n            {\n                dy: -1,\n                dx: 0\n            },\n            {\n                dy: 0,\n                dx: -1,\n            },\n            {\n                dy: 0,\n                dx: 1\n            },\n        ]\n    },\n    queen: {\n        type: 'multitime',\n        move: [\n            {\n                dy: 1,\n                dx: -1\n            },\n            {\n                dy: 1,\n                dx: 1\n            },\n            {\n                dy: -1,\n                dx: -1\n            },\n            {\n                dy: -1,\n                dx: 1\n            },\n            {\n                dy: 1,\n                dx: 0\n            },\n            {\n                dy: -1,\n                dx: 0\n            },\n            {\n                dy: 0,\n                dx: -1,\n            },\n            {\n                dy: 0,\n                dx: 1\n            },\n        ]\n    }\n};\n\nexport default rules;","import _ from 'lodash';\n\nimport rules from './rules';\nimport { genBoard } from './genBoard';\n\nexport const findKingLocation = (player, board) => {\n    for(let i=0; i<8; ++i) {\n        for(let j=0; j<8; ++j) {\n            if(board[i][j].owner === player && board[i][j].piece === 'king') {\n                return {\n                    y: i,\n                    x: j,\n                };\n            };\n        }\n    }\n}\n\nexport const deduplicate = axisArr => {\n    if(axisArr.length === 0) return axisArr;\n\n    const axisSet = new Set();\n    axisArr.forEach(axis => axisSet.add(axis.dy * 10 + axis.dx));\n    return [ ...axisSet ].map(key => ({ dy: parseInt(key / 10), dx: key % 10 }));\n}\n\nexport const checkPlayersEveryMove = (player, board, castling) => {\n    let coveredAxisBundle = [];\n    for(let i=0; i<8; ++i) {\n        for(let j=0; j<8; ++j) {\n            if(board[i][j].owner === player) {\n                const coveredAxis = checkCovered(board, i, j, castling);\n                coveredAxisBundle = [ ...coveredAxisBundle, ...coveredAxis ];\n            }\n        }\n    };\n    \n    return deduplicate(coveredAxisBundle);\n};\n\nexport const checkSafeMove = (player, board) => {\n    const enemy = player === 'white' ? 'black' : 'white';\n    const clonedBoard = _.cloneDeep(board);\n\n    const playerKing = findKingLocation(player, clonedBoard);\n    const coveredAxisBundle = checkPlayersEveryMove(enemy, clonedBoard);\n\n    coveredAxisBundle.forEach(axis => {\n        clonedBoard[axis.dy][axis.dx] = {\n            ...clonedBoard[axis.dy][axis.dx],\n            movable: true,\n        }\n    });\n\n    //  is king in danger?\n    if(clonedBoard[playerKing.y][playerKing.x].movable) {\n        return false;\n    }\n\n    return true;\n};\n\nexport const checkMovable = (player, board) => {\n    for(let i=0; i<8; ++i) {\n        for(let j=0; j<8; ++j) {\n            if(board[i][j].owner === player) {\n                const coveredAxis = checkCovered(board, i, j);\n                const length = coveredAxis.length;\n                for(let k=0; k<length; ++k) {\n                    const tempBoard = genBoard(board, { y: i, x: j }, { y: coveredAxis[k].dy, x: coveredAxis[k].dx });\n                    if(checkSafeMove(player, tempBoard)) {\n                        return true;\n                    };\n                }\n            }\n        }\n    };\n\n    return false;\n}\n\nexport const checkCovered = (board, y, x, castling) => {\n    const { piece, owner } = board[y][x];\n    let inform = { board, y, x, owner };\n    if(!piece) return;\n\n    const { type, move }= rules[piece];\n    let coveredAxis = [];\n\n    if(type === 'onetime') {\n        coveredAxis = move.reduce((acc, cur) => {\n            const dy = y + (owner === 'black' ? -cur.dy: +cur.dy);\n            const dx = x + cur.dx;\n            if(dy < 0 || dx < 0 || dy > 7 || dx > 7) return acc;\n            \n            inform = { ...inform, dy, dx };\n            \n            if(!cur.except || (!(piece === 'king' && castling) && cur.except && cur.except(inform))) {\n                if(!board[dy][dx].owner || board[y][x].owner !== board[dy][dx].owner) {\n                    acc.push({dy, dx});\n                }\n            }\n\n            return acc;\n        }, []);\n    } else {\n        coveredAxis = move.flatMap(cur => {\n            let counter = 0;\n            let coveredArr = [];\n            while(true) {\n                ++counter;\n                const dy = y + counter * (owner === 'black' ? -cur.dy: +cur.dy);\n                const dx = x + counter * cur.dx;\n                \n                if(dy < 0 || dx < 0 || dy > 7 || dx > 7) break;\n                if(board[dy][dx].owner && board[dy][dx].owner === owner) break;\n                coveredArr.push({dy, dx});\n                if(board[dy][dx].owner && board[dy][dx].owner !== owner) break;\n            }\n            return coveredArr;\n        });\n    }\n    \n    return deduplicate(coveredAxis);\n};","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as recordAPI from '../lib/api/record';\n\nconst CONNECT_WEBSOCKET = 'record/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'record/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'record/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'record/INITIALIZE_SOCKET';\nconst CHANGE_VALUE = 'record/CHANGE_VALUE';\nconst UPDATE_VALUE = 'record/UPDATE_VALUE';\nconst CLEAR_VALUE = 'record/CLEAR_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\nexport const updateValue = createAction(UPDATE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nconst CHANGE_REVERSE = 'record/CHANGE_REVERSE';\nconst CLEAR_TOOLTIP = 'record/CLEAR_TOOLTIP';\nconst SET_REQUEST_MODAL = 'record/SET_REQUEST_MODAL';\nconst SET_REQUEST_MESSAGE = 'record/SET_REQUEST_MESSAGE';\nconst SET_BANCLICK = 'record/SET_BANCLICK';\nconst SET_SHOWINDEX = 'record/SET_SHOWINDEX';\nexport const changeReverse = createAction(CHANGE_REVERSE, payload => payload);\nexport const clearToolTip = createAction(CLEAR_TOOLTIP);\nexport const setRequestModal = createAction(SET_REQUEST_MODAL, payload => payload);\nexport const setRequestMessage = createAction(SET_REQUEST_MESSAGE, payload => payload);\nexport const setBanClick = createAction(SET_BANCLICK);\nexport const setShowIndex = createAction(SET_SHOWINDEX, payload => payload);\n\nconst [ ASKING, ASKING_SUCCESS, ASKING_FAILURE ] = createRequestActionTypes('record/ASKING');\nconst [ ANSWERING, ANSWERING_SUCCESS, ANSWERING_FAILURE ] = createRequestActionTypes('record/ANSWERING');\nexport const askingThunk = createRequestThunk(ASKING, recordAPI.asking);\nexport const answeringThunk = createRequestThunk(ANSWERING, recordAPI.answering);\n\nexport const notifyRequestThunk = ({ genre: type, modal, open, message }) => ( dispatch, getState ) => {\n    if(open) {\n        if(!message) {\n            //  modal open\n            dispatch(setRequestModal({\n                type,\n                modal,\n            }));\n        } else {\n            //  modal message\n            dispatch(setRequestMessage({\n                type,\n                message,\n            }));\n        }\n        \n    } else {\n        //  modal close\n        dispatch(clearToolTip());\n    }\n    \n};\n\nexport const updateValueThunk = params => ( dispatch, getState ) => {\n    const { record } = getState();\n    let newRecord = { ...record };\n    Object.keys(params).forEach(key => {\n        if(typeof params[key] === 'object') {\n            newRecord = {\n                ...newRecord,\n                [key]: [\n                    ...newRecord[key],\n                    params[key],\n                ]\n            };\n        }\n    });\n\n    dispatch(updateValue({ record: newRecord }));\n};\n\nfunction* connectWebsocketSaga (action) {\n    const query = action.payload;\n\n    const socketTask = yield fork(connectNamespace, { \n        url: '/record',\n        initializeSocket,\n        initializeValue,\n        changeValue,\n        updateValue: updateValueThunk,\n        notifyRequest: notifyRequestThunk,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* recordSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    error: null,\n    startTime: null,\n    endTime: null,\n    blackTime: null,\n    whiteTime: null,\n    blackMaxTime: null,\n    whiteMaxTime: null,\n    whiteRatio: 0,\n    blackRatio: 0,\n    pieceMove: [],\n    reversed: false,\n    blocked: false,\n    banClick: false,\n    showIndex: null,\n    replayMode: false,\n    undo: {\n        message: null,\n        modal: null,\n    },\n    draw: {\n        message: null,\n        modal: null,\n    },\n    surrender: {\n        message: null,\n        modal: null,\n    },\n}\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        ...rest,\n        showIndex: rest.pieceMove.length - 1,\n    }),\n    [CHANGE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        ...rest,\n    }),\n    [UPDATE_VALUE]: (state, { payload: { record } }) => ({\n        ...record,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n    [CHANGE_REVERSE]: (state, { payload: { reversed } }) => ({\n        ...state,\n        reversed,\n    }),\n    [SET_SHOWINDEX]: (state , { payload: { showIndex, replayMode }}) => ({\n        ...state,\n        showIndex,\n        replayMode,\n    }),\n    [ASKING]: state => state,\n    [ASKING_SUCCESS]: state => state,\n    [ASKING_FAILURE]: state => state,\n    [ANSWERING]: state => state,\n    [ANSWERING_SUCCESS]: state => state,\n    [ANSWERING_FAILURE]: state => state,\n    [CLEAR_TOOLTIP]: (state) => ({\n        ...state,\n        undo: initialState['undo'],\n        draw: initialState['draw'],\n        surrender: initialState['surrender'],\n        blocked: false,\n        banClick: false,\n    }),\n    [SET_BANCLICK]: (state) => ({\n        ...state,\n        banClick: true,\n    }),\n    [SET_REQUEST_MODAL]: (state, { payload: { type, modal } }) => ({\n        ...state,\n        [type]: {\n            ...state[type],\n            modal,\n        },\n        blocked: true,\n    }),\n    [SET_REQUEST_MESSAGE]: (state, { payload: { type, message } }) => ({\n        ...state,\n        [type]: {\n            ...state[type],\n            message,\n        },\n        blocked: true,\n    }),\n}, initialState);\n","import axios from 'axios';\n\nexport const asking = params =>\n    axios.post('/api/record/asking', params);\n\nexport const answering = params =>\n    axios.post('/api/record/answering', params);","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\nimport _ from 'lodash';\n\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport * as canvasCtrl from '../lib/api/canvas';\n\n// import rules from '../lib/base/rules';\nimport board from '../lib/base/board';\nimport { checkCovered, checkSafeMove } from '../lib/base/validation';\nimport { genBoard, genClearBoard, genReplayBoard } from '../lib/base/genBoard';\nimport { setShowIndex } from './record';\n\nconst CONNECT_WEBSOCKET = 'canvas/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'canvas/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_SOCKET = 'canvas/INITIALIZE_SOCKET';\nconst INITIALIZE_VALUE = 'canvas/INITIALIZE_VALUE';\nconst CHANGE_VALUE = 'canvas/CHANGE_VALUE';\nconst CLEAR_VALUE = 'canvas/CLEAR_VALUE';\nconst INITIALIZE_BLOCKED = 'canvas/INITIALIZE_BLOCKED';\nconst CHANGE_BLOCKED = 'canvas/CHANGE_BLOCKED';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\nexport const initializeBlocked = createAction(INITIALIZE_BLOCKED, payload => payload);\nexport const changeBlocked = createAction(CHANGE_BLOCKED, payload => payload);\n\n\nconst [ SET_MOVE_PIECE, SET_MOVE_PIECE_SUCCESS, SET_MOVE_PIECE_FAILURE ] = createRequestActionTypes('canvas/SET_MOVE_PIECE');\nexport const setMovePieceThunk = createRequestThunk(SET_MOVE_PIECE, canvasCtrl.movePiece);\n\nconst makeReverseBoard = board => {\n    const reverseBoard = _.cloneDeep(board);\n    reverseBoard.reverse();\n    reverseBoard.forEach(row => {\n        row.reverse();\n    })\n    \n    return reverseBoard;\n}\n\nconst updateReverseBoard = (prevReverseBoard, nextOriginBoard) => {\n    const nextReverseBoard = makeReverseBoard(nextOriginBoard);\n    prevReverseBoard = [ ...prevReverseBoard ];\n\n    for(let i=0; i<8; ++i) {\n        for(let j=0; j<8; ++j) {\n            const nextPiece = nextReverseBoard[i][j];\n            const prevPiece = prevReverseBoard[i][j];\n            \n            // console.dir(nextPiece);\n            // console.dir(prevPiece);\n    \n            Object.keys(nextPiece).every(key => {\n                // console.dir(key);\n                if(!prevPiece[key] || prevPiece[key] !== nextPiece[key]) {\n                    // console.dir(prevPiece[key]);\n                    // console.dir(nextPiece[key]);\n                    prevReverseBoard[i] = [ ...prevReverseBoard[i] ];\n                    prevReverseBoard[i][j] = {\n                        ...nextPiece,\n                    };\n                    return false;\n                }\n                return true;\n            });\n        }\n    }\n\n    return prevReverseBoard;\n};\n\nexport const clearClickedThunk = () => (dispatch, getState) => {\n    const { canvas: { board, reverseBoard } } = getState();\n    const clearBoard = genClearBoard([...board], [\n        'covered',\n        'clicked',\n    ]);\n\n    const nextReverseBoard = updateReverseBoard(reverseBoard, clearBoard);\n    \n    dispatch(changeValue({\n        board: clearBoard,\n        reverseBoard: nextReverseBoard,\n        clicked: null\n    }));\n}\n\nexport const replayValueThunk = ({ diff, index }) => ( dispatch, getState ) => {\n    const {\n        canvas: { board, reverseBoard },\n        record: { showIndex, pieceMove },\n        socketAuth: { role },\n        game: { turn }\n    } = getState();\n\n    if(!diff) {\n        diff = index - showIndex;\n    }\n\n    if(diff === 0) return;\n    if(showIndex+diff < -1 || showIndex+diff >= pieceMove.length) return;\n\n    const nextBoard = genReplayBoard(board, pieceMove, showIndex, showIndex+diff);\n    const nextReverseBoard = updateReverseBoard(reverseBoard, nextBoard);\n\n    if(showIndex+diff+1 === pieceMove.length) {\n        if(((role === 'white' || role === 'spectator') && turn % 2 === 0) || (role === 'black' && turn % 2 === 1)) {\n            dispatch(changeBlocked({ blocked: false }));\n        } else {\n            dispatch(changeBlocked({ blocked: true }));\n        };\n        dispatch(setShowIndex({\n            showIndex: showIndex+diff,\n            replayMode: false,\n        }));\n    } else {\n        dispatch(changeBlocked({ blocked: true }));\n        dispatch(setShowIndex({\n            showIndex: showIndex+diff,\n            replayMode: true,\n        }));\n    }\n    dispatch(changeValue({\n        board: nextBoard,\n        reverseBoard: nextReverseBoard,\n        clicked: null\n    }));\n    \n};\n\nexport const changeValueThunk = ({ move }) => ( dispatch, getState ) => {\n    const { prev, next } = move;\n    const { canvas: { board, reverseBoard },\n            record: { showIndex, replayMode },\n            // socketAuth: { role },\n            // game: { turn }\n        } = getState();\n\n    if(replayMode) return;\n    \n    // if(((role === 'white' || role === 'spectator') && turn % 2 === 0) || (role === 'black' && turn % 2 === 1)) {\n    //     dispatch(changeBlocked({ blocked: false }));\n    // } else {\n    //     dispatch(changeBlocked({ blocked: true }));\n    // };\n\n    const cell = board[prev.y][prev.x];\n    const clearBoard = genClearBoard([...board], [\n        'covered',\n        'clicked',\n        'tracked',\n    ]);\n    \n    clearBoard[next.y] = [ ...clearBoard[next.y] ];\n    clearBoard[next.y][next.x] = {\n        ...cell,\n        tracked: true,\n        dirty: true,\n    };\n\n    clearBoard[prev.y]= [ ...clearBoard[prev.y] ];\n    clearBoard[prev.y][prev.x] = {\n        covered: false,\n        tracked: true,\n    };\n\n    //  promotion\n    const { owner, piece } = clearBoard[next.y][next.x];\n    if((owner === 'white' && piece === 'pawn' && next.y === 0) || (owner === 'black' && piece === 'pawn' && next.y === 7)) {\n        clearBoard[next.y][next.x] = {\n            ...clearBoard[next.y][next.x],\n            piece: 'queen',\n        }\n    };\n\n    //  castling\n    if(clearBoard[next.y][next.x].piece === 'king') {\n        if(next.x - prev.x === 2) {\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\n            \n            const pieceStore = { ...clearBoard[prev.y][prev.x+3] };\n            clearBoard[prev.y][prev.x+3] = {\n                covered: false\n            };\n            clearBoard[prev.y][prev.x+1] = {\n                ...pieceStore,\n                dirty: true,\n            };\n        }\n\n        if(next.x - prev.x === -2) {\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\n\n            const pieceStore = { ...clearBoard[prev.y][prev.x-4] };\n            clearBoard[prev.y][prev.x-4] = {\n                covered: false\n            };\n            clearBoard[prev.y][prev.x-1] = {\n                ...pieceStore,\n                dirty: true,\n            };\n        }\n    };\n\n    const nextReverseBoard = updateReverseBoard(reverseBoard, clearBoard);\n    \n    dispatch(changeValue({\n        board: clearBoard,\n        reverseBoard: nextReverseBoard,\n        clicked: null\n    }));\n    dispatch(setShowIndex({ showIndex: showIndex+1 }));\n}\n\nfunction* connectWebsocketSaga (action) {\n    const query = action.payload;\n    \n    const socketTask = yield fork(connectNamespace, {\n        url: '/canvas',\n        initializeSocket,\n        initializeValue,\n        changeValue: changeValueThunk,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* canvasSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nexport const clickPieceThunk = ({ y: cy, x: cx }) => (dispatch, getState) => {\n    const {\n        canvas: { board, reverseBoard, clicked },\n        record: { reversed },\n        socketAuth: { role },\n    } = getState();\n    \n    let reversal = false;\n    if((role === 'white' && reversed) || (role === 'black' && !reversed)) {\n        reversal = true;\n    }\n    \n    let y = cy;\n    let x = cx;\n    if(reversal) {\n        y = 7 - cy;\n        x = 7 - cx;\n    };\n\n    //  Prevents the player from seeing enemy's piece movements\n    if(!clicked && board[y][x].owner !== role) return;\n    if(clicked && !board[y][x].covered && board[y][x].owner !== role) return;\n\n    if(clicked && board[y][x].covered) {\n        const { canvas: { socket } } = getState();\n\n        dispatch(setMovePieceThunk({\n            socket,\n            move: {\n                prev: clicked,\n                next: {y, x}\n            }\n        }));\n        \n        return;\n    }\n    \n    let coveredAxis = checkCovered(board, y, x);\n    const clearBoard = genClearBoard([...board], [\n        'covered',\n        'clicked',\n    ]);\n    \n    coveredAxis.forEach(axis => {\n        const tempBoard = genBoard(clearBoard, { y, x }, { y: axis.dy, x: axis.dx });\n        if(!checkSafeMove(board[y][x].owner, tempBoard)) {\n            return;\n        };\n\n        clearBoard[axis.dy] = [ ...clearBoard[axis.dy] ];\n        const popedCell = clearBoard[axis.dy][axis.dx];\n        clearBoard[axis.dy].splice(axis.dx, 1, {\n            ...popedCell,\n            covered: true,\n        });\n    });\n\n    clearBoard[y] = [ ...clearBoard[y] ];\n    clearBoard[y][x] = {\n        ...clearBoard[y][x],\n        clicked: true,\n    }\n\n    const nextReverseBoard = updateReverseBoard(reverseBoard, clearBoard);\n\n    dispatch(changeValue({\n        board: clearBoard,\n        reverseBoard: nextReverseBoard,\n        clicked: { y, x }\n    }));\n};\n\n\nconst reverseBoard = _.cloneDeep(board);\nreverseBoard.reverse();\nreverseBoard.forEach(row => {\n    row.reverse();\n});\n\nconst initialState = {\n    socket: null,\n    error: null,\n    board,\n    reverseBoard,\n    clicked: null,\n    blocked: true,\n    reversed: false,\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { board } }) => ({\n        ...state,\n        board,\n        reverseBoard: updateReverseBoard(state.reverseBoard, board),\n    }),\n    [CHANGE_VALUE]: (state, { payload : { board, reverseBoard, clicked } }) => ({\n        ...state,\n        board,\n        reverseBoard,\n        clicked,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n    [INITIALIZE_BLOCKED]: (state, { payload: { blocked } }) => ({\n        ...state,\n        blocked,\n    }),\n    [CHANGE_BLOCKED]: (state, { payload: { blocked } }) => ({\n        ...state,\n        blocked,\n    }),\n    [SET_MOVE_PIECE_SUCCESS]: state => state,\n    [SET_MOVE_PIECE_FAILURE]: state => state,\n}, initialState);","import axios from 'axios';\n\nexport const movePiece = params =>\n    axios.post('/api/canvas/movePiece', params);","import React, { useCallback, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Canvas from '../../components/gameplay/Canvas';\nimport { clickPieceThunk, initializeBlocked , clearClickedThunk } from '../../modules/canvas';\nimport { clearValue } from '../../modules/canvas';\nimport defaultBoard from '../../lib/base/board';\n\nconst CanvasContainer = ({ cellSize, glanceAt }) => {\n    const { board, reverseBoard, blocked, reversed, replayMode, turn, role } = useSelector(({ canvas, socketAuth, game, record }) => ({\n        board: canvas.board,\n        reverseBoard: canvas.reverseBoard,\n        blocked: canvas.blocked,\n        reversed: record.reversed,\n        replayMode: record.replayMode,\n        turn: game.turn,\n        role: socketAuth.role,\n    }));\n\n    const dispatch = useDispatch();\n\n    const [init, setInit] = useState(false);\n\n    useEffect(() => {\n        if((role && !init) || (glanceAt && !init)) {\n            setInit(true);\n        }\n    }, [init, role, glanceAt]);\n    \n    useEffect(() => {\n        if(!replayMode) {\n            // if((role === 'white' && turn % 2 === 0) || (role === 'black' && turn % 2 === 1)) {\n            if(((role === 'white' || role === 'spectator') && turn % 2 === 0) || (role === 'black' && turn % 2 === 1)) {\n                dispatch(initializeBlocked({ blocked: false }));\n            } else {\n                dispatch(initializeBlocked({ blocked: true }));\n            }\n        }\n    }, [dispatch, turn, role, replayMode]);\n    \n    useEffect(() => {\n        return () => {\n            dispatch(clearValue());\n        }\n    }, [dispatch])\n\n    //  function은 생성 당시의 Context를 가지고 있기 때문에 redux state값이 제대로 반영되지 않는다\n    //  생성되었던 event handler가 React dom에 붙어있기 때문에 dom이 rerender되지 않는 이상\n    //  오래된 state를 가지고 있을 수 밖에 없다. 따라서 ref를 통해 참조값을 가지고 있거나\n    //  혹은 redux state라면 이 코드와 같이 thunk를 사용하는 방법이 있다\n\n    const onClick = useCallback((y, x) => {\n        dispatch(clickPieceThunk({ y, x }));\n    }, [dispatch]);\n\n    const onContextMenu = useCallback(e => {\n        e.preventDefault();\n        dispatch(clearClickedThunk());\n    }, [dispatch])\n\n    let reversal = false;\n    if(((role === 'white' || role === 'spectator') && reversed) || (role === 'black' && !reversed)) {\n        reversal = true;\n    }\n\n    let servedBoard = board;\n    if(reversal) {\n        servedBoard = reverseBoard;\n    };\n\n    if(!init) {\n        servedBoard = [ ...defaultBoard ];\n    }\n\n    return (\n        <Canvas\n            board={servedBoard}\n            blocked={blocked}\n            onClick={onClick}\n            onContextMenu={onContextMenu}\n            cellSize={cellSize}\n            replayMode={replayMode}\n        />\n    )    \n};\n\nexport default CanvasContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nimport CanvasContainer from '../../containers/gameplay/CanvasContainer';\n\nconst CanvasWrapperBlock = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    transition: 0.5s;\n    opacity: 0;\n\n    &:hover {\n        opacity: 1;\n    }\n`;\n\nconst UnClickableBlock = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* pointer-events: none; */\n`;\n\nconst CanvasWrapper = ({ cellSize, glanceAt }) => {\n    return (\n        <CanvasWrapperBlock>\n            <UnClickableBlock>\n                <CanvasContainer\n                    cellSize={cellSize}\n                    glanceAt={true}\n                />\n            </UnClickableBlock>\n        </CanvasWrapperBlock>\n    )\n};\n\nexport default React.memo(CanvasWrapper);","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport useAsync from '../../lib/hook/useAsync';\nimport { connectWebsocket, disconnectWebsocket } from '../../modules/canvas';\nimport CanvasWrapper from '../../components/game/CanvasWrapper';\n\nconst CanvasWrapperContainer = ({ gameKey, cellSize }) => {\n    const dispatch = useDispatch();\n\n    const connection = async () => {\n        dispatch(disconnectWebsocket());\n        await Promise.resolve().then(() => {\n            dispatch(connectWebsocket({\n                gameKey,\n            }));\n        });\n        return true;\n    };\n\n    useEffect(() => {\n        return () => {\n            dispatch(disconnectWebsocket());\n        }\n    }, [dispatch]);\n\n    const [state] = useAsync(connection, [dispatch]);\n\n    const { loading, data, error } = state;\n\n    // if(loading) return null;\n    // if(error) return null;\n    // if(data) {\n    //     return (\n    //         <CanvasWrapper cellSize={cellSize} />\n    //     )\n    // }\n    // return null;\n\n    //  glanceAt라는 flag를 통해 role이 없이도 canvas를 조회할 수 있음\n    return (\n        <CanvasWrapper\n            cellSize={cellSize}\n            glanceAt={true}\n        />\n    )\n    \n};\n\nexport default CanvasWrapperContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nimport CanvasWrapperContainer from '../../containers/game/CanvasWrapperContainer';\n\nconst GridBoxBlock = styled.div`\n    z-index: 1;\n    display: flex;\n    position: relative;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 216px;\n    height: 216px;\n    background-color: rgb(255,255,255, 0.6);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    cursor: pointer;\n    transition: 0.5s;\n\n    &:hover {\n        background-color: rgb(255,255,255, 0.1);\n    }\n\n    &:first-child {\n        margin-left: 18px;\n    }\n\n    & + & {\n        margin-left: 18px;\n    }\n`\n\nconst BoxTitleBlock = styled.div`\n    \n`;\n\nconst BoxContentBlock = styled.div`\n    \n`;\n\nconst GridBox = ({ game, canvas, onClick, onMouseEnter, onMouseLeave, ...rest }) => {\n    console.dir('game~');\n\n    return (\n        <GridBoxBlock\n            onClick={() => onClick(game.key)}\n            onMouseEnter={onMouseEnter}\n            onMouseLeave={onMouseLeave}\n            {...rest}\n        >\n            <BoxTitleBlock>\n                {game.name}\n            </BoxTitleBlock>\n            <BoxContentBlock>\n                {game.participant}\n            </BoxContentBlock>\n            {canvas ?\n            (<CanvasWrapperContainer\n                gameKey={game.key}\n                cellSize = '27px'\n            />)\n            : null}\n        </GridBoxBlock>\n    )\n};\n\nexport default React.memo(GridBox);","import React, { useCallback, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport GridBox from '../../components/game/GridBox';\n\nconst GridBoxContainer = ({ history, ...rest }) => {\n    const [ canvas, setCanvas ] = useState(false);\n\n    const onMouseEnter = useCallback(() => {\n        setCanvas(true);\n    }, []);\n\n    const onMouseLeave = useCallback(() => {\n        setCanvas(false);\n    }, []);\n\n    const onClick = useCallback((gameId) => {\n        history.push(`/game/${gameId}`);\n    }, [history]);\n\n    return (\n        <GridBox\n            {...rest}\n            canvas={canvas}\n            onClick={onClick}\n            onMouseEnter={onMouseEnter}\n            onMouseLeave={onMouseLeave}\n        />\n    )\n};\n\nexport default withRouter(GridBoxContainer);","import React from 'react';\nimport styled from 'styled-components';\nimport { FaApple } from 'react-icons/fa';\nimport { IconContext } from 'react-icons';\n\nimport GridBoxContainer from '../../containers/game/GridBoxContainer';\n\nconst gridSize = 3;\n\nconst GridRowBlock = styled.div`\n    display: flex;\n    width: 100%;\n\n    &:first-child {\n        margin-top: 18px;\n    }\n\n    &:last-child {\n        margin-bottom: 18px;\n    }\n\n    & + & {\n        margin-top: 18px;\n    }\n`;\n\nconst GridLayoutFrameBlock = styled.div`\n    position: relative;\n    background-color: rgba(255, 255, 255, 0.5);\n`;\n\nconst GridLayoutHiddenBlock = styled.div`\n    width: 720px;\n    height: 720px;\n    overflow: hidden;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst GridLayoutBlock = styled.div`\n    width: 720px;\n    height: 720px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    overflow-y: overlay;\n    padding-right: 20px;\n`;\n\nconst GridLayout = ({ games, onGameClick }) => {\n   \n    let list = [];\n    \n    if(games) {\n        list = [ ...games ];\n    }\n    \n    const backgroundStyle = {\n        position: 'absolute',\n        top: '0',\n        left: '0',\n        width: '720px',\n        height: '720px',\n        opacity: '0.2',\n        zIndex: -1,\n    }\n    const gridArr = [];\n    const rowSize = Math.floor(list.length / gridSize);\n    for(let i=0; i<=rowSize; ++i) {\n        gridArr.push(\n            <GridRowBlock\n                key={`GridRowBlock_${i}`}\n            >\n                {\n                    list.splice(0, gridSize).map(game => (\n                        <GridBoxContainer\n                            key={`GridBox${game.name}`}\n                            game={game}\n                            onClick={e => onGameClick(e, game.key)}\n                        />\n                    ))\n                }\n            </GridRowBlock>\n        );\n    }\n\n    return (\n        <GridLayoutFrameBlock>\n            <GridLayoutHiddenBlock>\n                <GridLayoutBlock>\n                    {gridArr}\n                </GridLayoutBlock>\n            </GridLayoutHiddenBlock>\n            <IconContext.Provider value={{ style: backgroundStyle }}>\n                <FaApple />\n            </IconContext.Provider>\n        </ GridLayoutFrameBlock>\n    )\n};\n\nexport default React.memo(GridLayout);","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport GridLayout from '../../components/game/GridLayout';\n\nconst GridLayoutContainer = () => {\n    const { games } = useSelector(({ games }) => ({\n        games: games.games,\n    }));\n\n    return (\n        <GridLayout games={games} />\n    )\n};\n\nexport default GridLayoutContainer;","import React from 'react';\n\nconst Summary = () => {\n    return (\n        <>\n        </>\n    )\n};\n\nexport default React.memo(Summary);","import React from 'react';\nimport Summary from '../../components/game/Summary';\n\nconst SummaryContainer = () => {\n    return (\n        <Summary />\n    )\n};\n\nexport default SummaryContainer;","import { useState, useCallback, useRef, useEffect } from 'react';\n\nconst CheckOutsideOfComponent = (initialState) => {\n    const [componentState, setComponentState] = useState(initialState);\n    const ref = useRef(null);\n\n    const checkClickOutside = useCallback(e => {\n        if(ref.current && !ref.current.contains(e.target)) {\n            setComponentState(false);\n        }\n    }, []);\n\n    //  not Capturing, use Bubbling(Default)\n    useEffect(() => {\n        document.addEventListener('click', checkClickOutside);\n        return () => {\n            document.removeEventListener('click', checkClickOutside);\n        }\n    }, [checkClickOutside]);\n\n    return { ref, componentState, setComponentState };\n}\n\nexport default CheckOutsideOfComponent;","import React from 'react';\nimport styled from 'styled-components';\n\nconst SelectionFrameBlock = styled.div`\n    position: relative;\n`\n\nconst NameBlock = styled.div`\n    position: absolute;\n    top: -10px;\n    left: 70%;\n    width: 30%;\n    display: flex;\n    justify-content: flex-end;\n    font-weight: 500;\n    font-size: 12px;\n    color: rgba(0,0,0,0.3);\n`\n\nconst SelectionBlock = styled.div`\n    width: 130px;\n    height: 30px;\n    box-sizing: border-box;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding-left: 10px;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    font-size: 13px;\n    \n    cursor: pointer;\n    &:active {\n        background-color: rgba(0,0,0,0.1);\n    }\n`\n\nconst SelecitonToolTipFrameBlock = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    margin-top: 40px;\n    z-index: 10;\n    background-color: white;\n    display: flex;\n    flex-direction: column;\n    width: 130px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst SelectionToolTipBlock = styled.div`\n    width: 100%;\n    box-sizing: border-box;\n    height: 30px;\n    padding-left: 10px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    font-size: 13px;\n\n    &:hover {\n        background-color: rgba(0,0,0,0.1);\n    }\n`;\n\nconst Selection = ({\n    kind,\n    name,\n    list,\n    reference,\n    componentState,\n    onClickSelection,\n    onClickOption\n}) => {    \n    return (\n        <SelectionFrameBlock>\n            <NameBlock>\n                {kind}\n            </NameBlock>\n            <SelectionBlock\n                ref={reference}\n                onClick={onClickSelection}\n            >\n                {name}\n            </SelectionBlock>\n            {componentState && (\n                <SelecitonToolTipFrameBlock>\n                    {list.map(optionName => (\n                        <SelectionToolTipBlock\n                            key={optionName}\n                            onClick={() => onClickOption(optionName)}\n                        >\n                            {optionName}\n                        </SelectionToolTipBlock>\n                    ))}\n                </SelecitonToolTipFrameBlock>\n            )}\n        </SelectionFrameBlock>\n    );\n};\n\nexport default React.memo(Selection);","import { createAction, handleActions } from 'redux-actions';\n\nconst CHANGE_FIELD = 'create/CHANGE_FIELD';\nconst CLEAR_FIELD = 'create/CLEAR_FIELD';\nexport const changeField = createAction(CHANGE_FIELD, payload => payload);\nexport const clearField = createAction(CLEAR_FIELD, payload => payload);\n\nconst initialState = {\n    map: 'Classical',\n    mapList: ['Classical', 'Crazy House', 'Racing Kings'],\n    mode: 'Normal',\n    modeList: ['Normal', 'Rank'],\n    defaultTime: 15,\n    extraTime: 30,\n    config: {\n        defaultTime: {\n            min: 1,\n            max: 30,\n            step: 1,\n        },\n        extraTime: {\n            min: 0,\n            max: 60,\n            step: 5,\n        }\n    },\n    piece: 'white',\n};\n\nexport default handleActions({\n    [CHANGE_FIELD]: (state, { payload: { key, value } }) => ({\n        ...state,\n        [key]: value,\n    }),\n    [CLEAR_FIELD]: state => initialState,\n}, initialState);","import React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport CheckOutsideOfComponent from '../../containers/HOC/CheckOutsideOfComponent';\nimport Selection from '../../components/game/Selection';\nimport { changeField } from '../../modules/create';\n\nconst SelecitonContainer = ({ kind }) => {\n    const { name, list } = useSelector(({ create }) => ({\n        name: create[kind],\n        list: create[`${kind}List`],\n    }));\n\n    const dispatch = useDispatch();\n\n    const { ref: reference, componentState, setComponentState } = CheckOutsideOfComponent(false);\n\n    const onClickSelection = useCallback(() => {\n        setComponentState(prevState => !prevState);\n    }, [setComponentState]);\n\n    const onClickOption = useCallback(name => {\n        dispatch(changeField({\n            key: kind,\n            value: name,\n        }));\n    }, [dispatch, kind]);\n\n    return (\n        <Selection\n            kind={kind}\n            name={name}\n            list={list}\n            reference={reference}\n            componentState={componentState}\n            onClickSelection={onClickSelection}\n            onClickOption={onClickOption}\n        />\n    )\n};\n\nexport default SelecitonContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nconst SliderFrameBlock = styled.div`\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    & + & {\n        margin-top: 15px;\n    }\n`;\n\nconst SliderBoxBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 200px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst SliderBlock = styled.input`\n    -webkit-appearance: none;\n    width: 150px;\n    height: 30px;\n    cursor: pointer;\n    background: ${props => {\n        if(props.kind === 'defaultTime') {\n            // return `linear-gradient(to right, #16a085 0%, black 100%)`;\n            return `linear-gradient(to right, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.6) 100%)`;\n        } else {\n            // return `linear-gradient(to right, red 0%, black 100%)`;\n            return `linear-gradient(to right, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.6) 100%)`;\n        }\n    }};\n    background-size: 140px 5px;\n    background-position: center;\n    background-repeat: no-repeat;\n    overflow: hidden;\n    outline: none;\n    /* zoom: 100%; */\n    display: block;\n\n    &::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        width: 10px;\n        height: 10px;\n        box-shadow: 0 2px 2px 0 rgba(0,0,0,0.36), 0 3px 1px -2px rgba(0,0,0,0.6), 0 1px 5px 0 rgba(0,0,0,0.36);\n        position: relative;\n        background-color: rgba(255,255,255, 0.8);\n        z-index: 3;\n    };\n`;\n\nconst NameBlock = styled.div`\n    position: absolute;\n    top: -10px;\n    left: 70%;\n    width: 30%;\n    display: flex;\n    justify-content: flex-end;\n    font-weight: 500;\n    font-size: 12px;\n    color: rgba(0,0,0,0.3);\n`\n\nconst ValueBlock = styled.div`\n    display: flex;\n    position: relative;\n    justify-content: center;\n    align-items: center;\n    font-size: 15px;\n    width: 60px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst Slider = ({ onChange, kind, value, config }) => {\n    const name = kind.substring(0, kind.length - 4);\n\n    return (\n        <SliderFrameBlock>\n            <SliderBoxBlock>\n                <SliderBlock\n                    type='range'\n                    onChange={onChange}\n                    {...config}\n                    kind={kind}\n                    value={value}\n                />\n            </SliderBoxBlock>\n            <ValueBlock>\n                <NameBlock>\n                    {name}\n                </NameBlock>\n                {value}\n            </ValueBlock>\n        </SliderFrameBlock>\n    )\n};\n\nexport default React.memo(Slider);","import React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport Slider from '../../components/game/Slider';\nimport { changeField } from '../../modules/create';\n\nconst SliderContainer = ({ kind }) => {\n    const { value, config } = useSelector(({ create }) => ({\n        value: create[kind],\n        config: create.config[kind],\n    }));\n    const dispatch = useDispatch();\n\n    const onChange = useCallback(e => {\n        dispatch(changeField({\n            key: kind,\n            value: e.target.value,\n        }));\n    }, [dispatch, kind]);\n\n    return (\n        <Slider\n            onChange={onChange}\n            kind={kind}\n            value={value}\n            config={config}\n        />\n    )\n};\n\nexport default SliderContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport { FaChessKing } from 'react-icons/fa';\nimport { IconContext } from 'react-icons';\n\nconst IconBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n\n    background-color: ${props => props.checked && 'rgba(0,0,0,0.1)' };\n    &:hover {\n        background-color: rgba(0, 0, 0, 0.1);\n    }\n`;\n\nconst Icon = ({ checked, kind, onClick }) => {\n    const opposite = kind === 'white' ? 'black' : 'white';\n    const styleObj = {\n        style: {\n            color: kind,\n            filter: `drop-shadow(1px 1px 1px ${opposite})`,\n            width: '30px',\n            height: '30px',\n        }\n    };\n\n    return (\n        <IconBlock\n            checked={checked ? 1 : 0}\n            onClick={() => onClick(kind)}\n        >\n            <IconContext.Provider value={styleObj}>\n                <FaChessKing />\n            </IconContext.Provider>\n        </IconBlock>\n    )\n};\n\nexport default React.memo(Icon);","import React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport Icon from '../../components/game/Icon';\nimport { changeField } from '../../modules/create';\n\nconst IconContainer = ({ white, black }) => {\n    const { piece } = useSelector(({ create }) => ({\n        piece: create.piece,\n    }));\n\n    const dispatch = useDispatch();\n    \n    const onClick = useCallback(value => {\n        dispatch(changeField({\n            key: 'piece',\n            value,\n        }))\n    }, [dispatch]);\n\n    const kind = white ? 'white': (black ? 'black' : null);\n    const checked = piece === kind;\n    \n    return (\n        <Icon\n            kind={kind}\n            checked={checked}\n            onClick={onClick}\n        />\n    )\n};\n\nexport default IconContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nimport SelectionContainer from '../../containers/game/SelectionContainer';\nimport SliderContainer from '../../containers/game/SliderContainer';\nimport IconContainer from '../../containers/game/IconContainer';\n\nconst CreationBlock = styled.form`\n    padding: 30px;\n    box-sizing: border-box;\n    width: 100%;\n    height: 400px;\n    background-color: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst TitleBlock = styled.div`\n    font-size: 24px;\n    font-weight: 700;\n`;\n\nconst SelectionBundleBlock = styled.div`\n    margin-top: 40px;\n    display: flex;\n    justify-content: space-between;\n`;\n\nconst SliderBundleBlock = styled.div`\n    margin-top: 20px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n`;\n\nconst IconBundleBlock = styled.div`\n    position: relative;\n    height: 60px;\n    margin-top: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst SubmitBlock = styled.div`\n    margin-top: 30px;\n    position: relative;\n    display: flex;\n    justify-content: flex-end;\n    width: 100%;\n`;\n\nconst ConfirmFrameBlock = styled.div`\n    position: relative;\n    width: 65px;\n    height: 40px;\n`;\n\nconst ConfirmBlock = styled.button`\n    cursor: pointer;\n    position: absolute;\n    border: none;\n    outline: none;\n    margin: 0;\n    padding: 0;\n    font-size: 20px;\n    font-weight: 700;\n    top: 0px;\n    left: 0px;\n    display: flex;\n    justify-content: flex-end;\n    width: 65px;\n    height: 40px;\n    color: rgba(0, 0, 0, 0.3);\n    transition: 0.5s;\n    background-color: transparent;\n\n    @keyframes jump {\n        0%, 100% {\n            top: 0;\n        }\n        50% {\n            top: -3px;\n        }\n    }\n\n    &:hover {\n        animation: jump 0.5s 1;\n        color: rgba(0, 0, 0, 0.6);\n    }\n`;\n\nconst NameBlock = styled.div`\n    position: absolute;\n    top: -10px;\n    left: 70%;\n    width: 30%;\n    display: flex;\n    justify-content: flex-end;\n    font-weight: 500;\n    font-size: 12px;\n    color: rgba(0,0,0,0.3);\n`\n\nconst Creation = ({ onSubmit }) => {\n    return (\n        <CreationBlock onSubmit={onSubmit}>\n            <TitleBlock>\n                New Game\n            </TitleBlock>\n            <SelectionBundleBlock>\n                <SelectionContainer kind='map' />\n                <SelectionContainer kind='mode' />\n            </SelectionBundleBlock>\n            <SliderBundleBlock>\n                <SliderContainer kind='defaultTime'/>\n                <SliderContainer kind='extraTime'/>\n            </SliderBundleBlock>\n            <IconBundleBlock>\n                <NameBlock>\n                    Piece\n                </NameBlock>\n                <IconContainer white/>\n                <IconContainer black/>\n            </IconBundleBlock>\n            <SubmitBlock>\n                <ConfirmFrameBlock>\n                    <ConfirmBlock type='submit' >\n                        Create\n                    </ConfirmBlock>\n                </ConfirmFrameBlock>\n            </SubmitBlock>\n        </CreationBlock>\n    )\n};\n\nexport default React.memo(Creation);","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as gamesCtrl from '../lib/api/games';\n\nconst CONNECT_WEBSOCKET = 'games/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'games/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'games/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'games/INITIALIZE_SOCKET';\nconst CLEAR_VALUE = 'games/CLEAR_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nconst [ CREATE_GAME, CREATE_GAME_SUCCESS, CREATE_GAME_FAILURE ] = createRequestActionTypes('games/CREATE_GAME');\nexport const createGameThunk = createRequestThunk(CREATE_GAME, gamesCtrl.createGame);\n\nfunction* connectWebsocketSaga () {\n    const socketTask = yield fork(connectNamespace, { \n        url: '/games',\n        initializeSocket,\n        initializeValue,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* gamesSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    games: null,\n    error: null,\n}\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { games }}) => ({\n        ...state,\n        games,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n    [CREATE_GAME_SUCCESS]: state => state,\n    [CREATE_GAME_FAILURE]: (state, { payload: error }) => ({\n        ...state,\n        error,\n    }),\n}, initialState);","import axios from 'axios';\n\n//  REST API 방식\n\nexport const createGame = params =>\n    axios.post('/api/games', params);","import React, { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router';\n\nimport Creation from '../../components/game/Creation';\nimport { clearField } from '../../modules/create';\nimport { createGameThunk } from '../../modules/games';\n\nconst CreationContainer = ({ history }) => {\n    const { map, mode, defaultTime, extraTime, piece } = useSelector(({ create }) => ({\n        map: create.map,\n        mode: create.mode,\n        defaultTime: create.defaultTime,\n        extraTime: create.extraTime,\n        piece: create.piece,\n    }));\n\n    const dispatch = useDispatch();\n\n    const onSubmit = useCallback(e => {\n        e.preventDefault();\n        (async() => {\n            const key = await dispatch(createGameThunk({\n                map,\n                mode,\n                defaultTime,\n                extraTime,\n                piece\n            }));\n            console.dir(piece);\n            history.push(`/game/${key}`);\n        })();\n    }, [dispatch, history, map, mode, defaultTime, extraTime, piece]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearField());\n        }\n    }, [dispatch]);\n\n    return (\n        <Creation onSubmit={onSubmit}/>\n    )\n};\n\nexport default withRouter(CreationContainer);","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nimport GridLayoutContainer from '../../containers/game/GridLayoutContainer';\nimport SummaryContainer from '../../containers/game/SummaryContainer';\nimport CreationContainer from '../../containers/game/CreationContainer';\n\nconst GameLayoutBlock = styled.div`\n    height: 800px;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst sideBlockStyle = css`\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n`;\n\nconst LeftSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-right: 1%;\n`;\n\nconst RightSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-left: 1%;\n`;\n\nconst GameLayout = () => {\n    return (\n        <>\n            <GameLayoutBlock>\n                <LeftSideBlock>\n                    <SummaryContainer />\n                </LeftSideBlock>\n                <GridLayoutContainer />\n                <RightSideBlock>\n                    <CreationContainer />\n                </RightSideBlock>\n            </GameLayoutBlock>          \n        </>\n    )\n};\n\nexport default React.memo(GameLayout);","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport useAsync from '../../lib/hook/useAsync';\nimport { setSessionThunk } from '../../modules/sessionAuth';\nimport GameLayout from '../../components/game/GameLayout';\n\nimport { connectWebsocket, disconnectWebsocket, clearValue } from '../../modules/games';\n\nconst GameLayoutContainer = () => {\n    const dispatch = useDispatch();\n\n    const connection = async() => {\n        await dispatch(setSessionThunk());\n        \n        dispatch(disconnectWebsocket());\n        await Promise.resolve().then(() => {\n            dispatch(connectWebsocket());\n        });\n        return true;\n    };\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearValue());\n        }\n    }, [dispatch])\n\n    const [state] = useAsync(connection, [ dispatch ]);\n\n    const { loading, data, error } = state;\n\n    // if(loading) return null;\n    // if(error) return null;\n    // if(data) {\n    //     return (\n    //         <GameLayout />\n    //     )\n    // }\n    // return null;\n    \n    return (\n        <GameLayout />\n    )\n};\n\nexport default GameLayoutContainer;","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nimport GameLayoutContainer from '../containers/game/GameLayoutContainer';\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport FooterContainer from '../containers/common/FooterContainer';\n\nconst GamePage = () => {\n    return (\n        <>\n            <Helmet>\n                <title>Game • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <GameLayoutContainer />\n            <FooterContainer />\n        </>\n    )\n};\n\nexport default GamePage;","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\nimport * as chatAPI from '../lib/api/chat';\n\nconst CONNECT_WEBSOCKET = 'chat/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'chat/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_SOCKET = 'chat/INITIALIZE_SOCKET';\nconst INITIALIZE_VALUE = 'chat/INITIALIZE_VALUE';\nconst CHANGE_VALUE = 'chat/CHANGE_VALUE';\nconst CLEAR_VALUE = 'chat/CLEAR_VALUE'\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nconst CHANGE_TEXTFIELD = 'chat/CHANGE_TEXTFIELD';\nconst INITIALIZE_TEXTFIELD = 'chat/INITIALIZE_TEXTFIELD';\nexport const changeTextfield = createAction(CHANGE_TEXTFIELD, payload => payload);\nexport const initializeTextfield = createAction(INITIALIZE_TEXTFIELD);\n\nconst [ SEND_MESSAGE, SEND_MESSAGE_SUCCESS, SEND_MESSAGE_FAILURE ] = createRequestActionTypes('chat/SEND_MESSAGE');\nexport const sendMessageThunk = createRequestThunk(SEND_MESSAGE, chatAPI.sendMessage);\n\nfunction* connectWebsocketSaga (action) {\n    const query = action.payload;\n    \n    const socketTask = yield fork(connectNamespace, {\n        url: '/chat',\n        initializeSocket,\n        initializeValue,\n        changeValue,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* chatSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    messages: [],\n    text: '',\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { nickname, color, message }}) => ({\n        ...state,\n        messages: [{ nickname, color, message }],\n    }),\n    [CHANGE_VALUE]: (state, { payload: { nickname, color, message} }) => ({\n        ...state,\n        messages: [ ...state.messages, { nickname, color, message} ],\n    }),\n    [SEND_MESSAGE_SUCCESS]: state => state,\n    [SEND_MESSAGE_FAILURE]: state => state,\n    [INITIALIZE_TEXTFIELD]: state => ({\n        ...state,\n        text: '',\n    }),\n    [CHANGE_TEXTFIELD]: (state, { payload: text}) => ({\n        ...state,\n        text,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n}, initialState);","import axios from 'axios';\n\nexport const sendMessage = message =>\n    axios.post('/api/chat/sendMessage', message);\n    \n// export const sendMessage = message =>\n//     axios.post('http://localhost:5000/api/chat/sendMessage', message);","import React, { useRef, useEffect } from 'react';\nimport styled, { css } from 'styled-components';\nimport { IoIosSend } from 'react-icons/io';\nimport { IconContext } from 'react-icons';\n\nconst ChatSubmitBlock = styled.form`\n    width: 100%;\n`;\n\nconst ChatFrameBlock = styled.div`\n    position: relative;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst ChatHiddenBlock = styled.div`\n    height: 360px;\n    width: 100%;\n    overflow: hidden;\n`;\n\nconst ChatBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 360px;\n    width: 100%;\n    padding-right: 20px;\n    overflow-y: overlay;\n`;\n\nconst ChatFormBlock = styled.div`\n    position: absolute;\n    width: 100%;\n    display: flex;\n    background-color: white;\n    top: 365px;\n    /* box-shadow: rgba(0,0,0,0.05) 0px -2px 2px 0px, rgba(0,0,0,0.08) 0px -3px 1px -2px, rgba(0,0,0,0.04) 0px -1px 5px 0px; */\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\n`;\n\nconst ChatInputBlock = styled.input`\n    outline: none;\n    border: none;\n    align-items : center;\n    color: black;\n    background-color: transparent;\n    font-size: 12px;\n    width: 80%;\n    height : 30px;\n    padding-left: 10px;\n`;\n\nconst ChatButtonBlock = styled.button`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 20%;\n    font-size: 12px;\n    background-color: rgb(247,246,245);\n    border: none;\n    cursor: pointer;\n\n    &:hover, &:focus {\n        background-color: #D3D3D3;\n    } \n`;\n\nconst MessageBlock = styled.div`\n    display: flex;\n    align-items: center;\n    width: 90%;\n    height : 36px;\n    min-height : 36px;\n    font-size : 12px;\n    background-color: white;\n\n    ${props => props.owner === 'my' && css`\n        justify-content: flex-end;\n    `};\n\n    ${props => props.owner === 'other' && css`\n        justify-content: flex-start;\n    `};\n\n    ${props => props.owner === 'server' && css`\n        justify-content: center;\n    `};\n`;\n\nconst BalloonBlock = styled.div`\n    position: relative;\n    background: #ffff80;\n    padding: 5px;\n\n    &:after {\n        content: '';\n        position: absolute;\n        right: 0;\n        top: 50%;\n        width: 0;\n        height: 0;\n        border: 8px solid transparent;\n        border-left-color: #ffff80;\n        border-right: 0;\n        border-top: 0;\n        margin-top: -5px;\n        margin-right: -8px;\n    }\n\n    \n    ${props => props.owner === 'other' && css `\n        background: rgb(247,246,245);\n\n        &:after {\n            content: '';\n            position: absolute;\n            left: 0;\n            top: 50%;\n            width: 0;\n            height: 0;\n            border: 8px solid transparent;\n            border-top: 0;\n            margin-top: -5px;\n            border-right-color: rgb(247,246,245);\n            border-left: 0;\n            margin-left: -8px;\n        }\n    `}\n`;\n\nconst Balloon = ({ owner, children }) => {\n    let ballonBlock;\n    if(owner === 'my') {\n        ballonBlock = (\n            <BalloonBlock owner={owner}>\n                {children}\n            </BalloonBlock>\n        )\n    } else if(owner === 'other') {\n        ballonBlock = (\n            <BalloonBlock owner={owner}>\n                {children}\n            </BalloonBlock>\n        )\n    } else if(owner === 'server') {\n        ballonBlock = (\n            <>\n                {children}\n            </>\n        )\n    }\n\n    return (\n        <>\n            {ballonBlock}\n        </>\n    )\n}\n\nconst Message = React.memo(({ message, myName, ...rest }) => {\n    const owner = message.nickname ? (message.nickname === myName ? 'my' : 'other') : 'server';\n    const text = owner === 'other' ? message.nickname + ' : ' + message.message : message.message;\n\n    return (\n        <MessageBlock\n            {...rest} \n            color={message.color}\n            owner={owner}\n        >\n            <Balloon owner={owner}>\n                {text}\n            </Balloon>\n        </MessageBlock>\n    )\n});\n\nconst Chat = ({ messages, onSubmit, onChange, text, nickname }) => {\n    const ref = useRef();\n    useEffect(() => {\n        ref.current.scrollTop = ref.current.scrollHeight;\n    }, [messages]);\n\n    return (\n        <>\n            <ChatSubmitBlock onSubmit={onSubmit}>\n                <ChatFrameBlock>\n                    <ChatHiddenBlock>\n                        <ChatBlock ref={ref}>\n                            {messages.map((message, index) => (\n                                <Message\n                                    key={index}\n                                    myName={nickname}\n                                    message={message}\n                                />\n                            ))}\n                        </ChatBlock>\n                    </ChatHiddenBlock>\n                    <ChatFormBlock>\n                        <ChatInputBlock\n                            onChange={onChange}\n                            value={text}\n                        />\n                        <ChatButtonBlock\n                            onSubmit={onSubmit}\n                        >\n                            <IconContext.Provider value={{style: { width:'40%', height:'40%' }}}>\n                                <IoIosSend />\n                            </IconContext.Provider>\n                        </ ChatButtonBlock>\n                    </ChatFormBlock>\n                </ChatFrameBlock>\n            </ChatSubmitBlock>\n        </>\n    )\n};\n\nexport default React.memo(Chat);","import React, { useEffect, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { changeTextfield, initializeTextfield } from '../../modules/chat';\nimport { sendMessageThunk, clearValue } from '../../modules/chat';\nimport Chat from '../../components/gameplay/Chat';\n\nconst ChatContainer = () => {\n    const dispatch = useDispatch();\n\n    const { socket, messages, text, nickname } = useSelector(({ chat, socketAuth }) => ({\n        socket: chat.socket,\n        messages: chat.messages,\n        text: chat.text,\n        nickname: socketAuth.nickname,\n    }));\n\n    const onSubmit = useCallback(e => {\n        e.preventDefault();\n        dispatch(sendMessageThunk({ socket, message: text }));\n        dispatch(initializeTextfield());\n    }, [dispatch, text, socket]);\n\n    const onChange = useCallback(e => {\n        dispatch(changeTextfield(e.target.value));\n    },[dispatch]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearValue());\n        }\n    }, [dispatch]);\n\n    return (\n        <Chat\n            messages={messages}\n            onSubmit={onSubmit}\n            onChange={onChange}\n            text={text}\n            nickname={nickname}\n        />\n    )\n};\n\nexport default ChatContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst TimerBlock = styled.div`\n    width: 50%;\n    height: 60px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    background-color: white;\n    ${props => props.color && css`\n        background-color: rgb(208, 224, 189);\n    `}\n    ${props => props.time <= 10000 && css`\n        background-color: rgb(230, 153, 153);\n    `}\n`;\n\nconst TimeSliceBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 47%;\n    color: black;\n    font-size: 50px;\n`;\n\nconst ColonBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 100%;\n    width: 6%;\n    color: black;\n    opacity: 0.5;\n    font-size: 50px;\n`;\n\nconst timeConverter = timeSlice => {\n    let convertedTime = '';\n    convertedTime += String(Math.floor(timeSlice / 10));\n    convertedTime += String(Math.floor(timeSlice % 10));\n    return convertedTime;\n}\n\nconst Timer = ({ time, color }) => {\n    \n    const minute = Math.floor(time / 60000);\n    const second = Math.floor((time % 60000) / 1000);\n\n    // eslint-disable-next-line\n    if(time == undefined || time === null) {\n        return <TimerBlock />\n    }\n\n    return (\n        <TimerBlock\n            time={time}\n            color={color ? 1 : 0}\n        >\n            <TimeSliceBlock>\n                {timeConverter(minute)}\n            </TimeSliceBlock>\n            <ColonBlock>\n                :\n            </ColonBlock>\n            <TimeSliceBlock>\n                {timeConverter(second)}\n            </TimeSliceBlock>\n        </TimerBlock>\n    )\n}\n\nexport default Timer;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Timer from '../../components/gameplay/Timer';\n\nconst TimerContainer = ({ white, init }) => {\n\n    const { whiteTime, blackTime, start, order } = useSelector(({ record, game }) => ({\n        whiteTime: record.whiteTime,\n        blackTime: record.blackTime,\n        start: game.start,\n        order: game.order,\n    }));\n\n    const time = white ? whiteTime : blackTime;\n    const color = white ? (start && order === 'white') : (start && order === 'black');\n\n    if(init) {\n        return (\n            <Timer\n                time={time}\n                color={color}\n            />\n        )\n    } else {\n        return (\n            <Timer />\n        )\n    }\n    \n};\n\nexport default TimerContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { IconContext } from 'react-icons';\nimport { FaCircle, FaRegCircle } from 'react-icons/fa';\n\nconst StatusBlock = styled.div`\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 30px;\n    background-color: white;\n\n    ${props => props.beneath && css`\n        margin-top: 30px;\n    `}\n`;\n\nconst NameBlock = styled.div`\n    font-size: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`\n\nconst Status = ({ light, name, beneath }) => {\n    const iconStyle = {\n        style: {\n            height: '15px',\n            width: '10%',\n            color: 'green',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n        }\n    };\n\n    return (\n        <StatusBlock beneath={beneath ? 1 : 0}>            \n            {light\n                ? (\n                    <IconContext.Provider value={iconStyle}>\n                        <FaCircle />\n                    </IconContext.Provider>\n                )\n                : (\n                    <IconContext.Provider value={{ style: { ...iconStyle.style, color: 'black' }}}>\n                        <FaRegCircle />\n                    </IconContext.Provider>\n                )\n            }\n            <NameBlock>\n                {name}\n            </NameBlock>\n        </StatusBlock>\n    )\n};\n\n\nexport default React.memo(Status);","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Status from '../../components/gameplay/Status';\n\nconst StatusContainer = ({ black, white, beneath, init }) => {\n    const { blackNick, whiteNick, participant } = useSelector(({ game }) => ({\n        blackNick: game.black,\n        whiteNick: game.white,\n        participant: game.participant,\n    }));\n\n    const participantSet = new Set(participant);\n    const light = (white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick));\n    const name = (white && whiteNick) || (black && blackNick);\n\n    if(init) {\n        return (\n            <Status\n                light={light}\n                name={name}\n                beneath={beneath}\n            />\n        )\n    } else {\n        return (\n            <Status\n                beneath={beneath}\n            />\n        )\n    }\n};\n\nexport default StatusContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { IconContext } from 'react-icons';\nimport { IoIosArrowRoundForward } from 'react-icons/io';\nimport { pieceMapper } from '../../lib/base/pieceConverter';\n\nconst PieceMoveListHiddenBlock = styled.div`\n    height: 270px;\n    width: 100%;\n    overflow: hidden;\n`;\n\nconst PieceMoveListBlock = styled.div`\n    height: 270px;\n    width: 100%;\n    overflow-y: overlay;\n    padding-right: 20px;\n`;\n\nconst PieceMoveBlock = styled.div`\n    width: 100%;\n    height: 30px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n\n    &:first-child {\n        margin-top: 30px;\n    }\n`;\n\nconst moveConverter = ({x, y}) => {\n    return String.fromCharCode(97 + x) + (8 - y);\n}\n\nconst MoveBlock = styled.div`\n    width: 80%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    ${props => props.checked && css`\n        background-color: rgba(209, 228, 246, 1);\n    `}\n\n    ${props => !props.checked && css`\n        &:hover {\n            background-color: rgba(209, 228, 246, 0.5);\n        }\n    `}\n`;\n\nconst TextBlock = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20%;\n    font-size: 18px;\n`\n\nconst IndexBlock = styled.div`\n    width: 20%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 18px;\n    background-color: rgb(247, 246, 245);\n`\n\nconst PieceMove = React.memo(({ move, index, onClick, checked }) => {\n    console.dir('PieceMove');\n    console.dir(move);\n    const PrevComponent = pieceMapper[move.prevPiece.piece];\n    const prevStyle = {\n        color: move.prevPiece.owner,\n        style: {\n            width: '10%',\n            filter: `drop-shadow(1px 1px 1px ${move.prevPiece.owner === 'white' ? 'black' : 'white'})`,\n        }\n    };\n\n    const prevPiece = (\n        <IconContext.Provider value={prevStyle}>\n            <PrevComponent />\n        </IconContext.Provider>\n    )\n\n    let NextComponent, nextStyle;\n\n    let nextPiece = (\n        <div style={{ width: '10%' }}/>\n    )\n\n    if(move.nextPiece.piece) {\n        NextComponent = pieceMapper[move.nextPiece.piece];\n        nextStyle = {\n            color: move.nextPiece.owner,\n            style: {\n                width: '10%',\n                filter: `drop-shadow(1px 1px 1px ${move.nextPiece.owner === 'white' ? 'black' : 'white'})`,\n            }\n        };\n        nextPiece = (\n            <IconContext.Provider value={nextStyle}>\n                <NextComponent />\n            </IconContext.Provider>\n        )\n    }\n\n    \n    return (\n        <PieceMoveBlock>\n            <IndexBlock>\n                {index + 1}\n            </IndexBlock>\n            <MoveBlock\n                onClick={() => onClick(index)}\n                checked={checked}\n            >\n                {prevPiece}\n                <TextBlock>\n                    {moveConverter(move.prev)}\n                </TextBlock>\n                <IconContext.Provider value={{ style: { color: 'rgb(169,169,169)' }}}>\n                    <IoIosArrowRoundForward />\n                </IconContext.Provider>\n                <TextBlock>\n                    {moveConverter(move.next)}\n                </TextBlock>\n                {nextPiece}\n            </MoveBlock>\n        </PieceMoveBlock>\n    )\n});\n\n\nconst PieceMoveList = ({ pieceMove, onClick, showIndex, listRef }) => {\n    return (\n        <PieceMoveListHiddenBlock>\n            <PieceMoveListBlock ref={listRef}>\n                {pieceMove.map((move, index) => (\n                    <PieceMove \n                        onClick={onClick}\n                        move={move}\n                        index={index}\n                        checked={index === showIndex}\n                    />\n                ))}\n            </PieceMoveListBlock>\n        </PieceMoveListHiddenBlock>\n    )\n};\n\nexport default React.memo(PieceMoveList);","import React, { useCallback, useRef, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport PieceMoveList from '../../components/gameplay/PieceMoveList';\nimport { replayValueThunk } from '../../modules/canvas';\n\nconst PieceMoveListContainer = () => {\n    \n    const dispatch = useDispatch();\n\n    const { pieceMove, showIndex } = useSelector(({ record }) => ({\n        pieceMove: record.pieceMove,\n        showIndex: record.showIndex,\n    }));\n\n    const listRef = useRef();\n    \n    useEffect(() => {\n        if(showIndex >= 0) {\n            if(listRef.current.scrollTop > showIndex * 30) {\n                listRef.current.scrollTop = showIndex * 30;\n            }\n            if(showIndex * 30 > listRef.current.scrollTop + 210) {\n                listRef.current.scrollTop = showIndex * 30 - 210;\n            }\n        } else {\n            listRef.current.scrollTop = 0;\n        }\n    }, [pieceMove, showIndex]);\n\n    const onClick = useCallback(index => {\n        dispatch(replayValueThunk({ index }));\n    }, [dispatch]);\n\n    return (\n        <PieceMoveList\n            onClick = {onClick}\n            pieceMove={pieceMove}\n            showIndex={showIndex}\n            listRef={listRef}\n        />\n    )\n};\n\nexport default PieceMoveListContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nconst TimeLineBlock = styled.div`\n    position: absolute;\n    height: 2px;\n    background-color: green;\n    transition-duration: 1s;\n    transition-timing-function: linear;\n\n    width: ${props => (props.time * 100) + '%'};\n    ${props => props.time <= 0.1 && css`\n        background-color: red;\n    `}\n`;\n\nconst TimeLine = ({ time }) => {\n    return (\n        <TimeLineBlock time={time}/>\n    )\n};\n\nexport default React.memo(TimeLine);","import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport TimeLine from '../../components/gameplay/TimeLine';\n\nconst TimeLineContainer = ({ white, black, init }) => {\n    const { whiteRatio, blackRatio, whiteNick, blackNick, participant } = useSelector(({ record, game }) => ({\n        whiteRatio: record.whiteRatio,\n        blackRatio: record.blackRatio,\n        whiteNick: game.white,\n        blackNick: game.black,\n        participant: game.participant,\n    }));\n\n    const [time, setTime] = useState(0);\n\n    //  default 0으로 초기 렌더링을 진행한 후 redux 값이 들어왔을 때 리렌더링 하는 방식\n    //  init 이후에만 리렌더링해야 css효과를 입힐 수 있음\n    useEffect(() => {\n        const participantSet = new Set(participant);\n        if((init && white && participantSet.has(whiteNick)) || (init && black && participantSet.has(blackNick))) {\n            let nextTime = white ? whiteRatio : blackRatio;\n            nextTime = Math.min(nextTime, 1);\n            setTime(nextTime);\n        } else {\n            setTime(0);\n        }\n    }, [init, white, black, whiteNick, blackNick, whiteRatio, blackRatio, participant]);\n\n    //  role값이 들어온 다음에는 다른 redux값이 들어온 경우도 있어 timeline bar가 완성된 상태로 렌더링 되버림\n    // let time = 0;\n    // if((white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick))) {\n    //     time = white ? whiteRatio : blackRatio;\n    // }\n    // time = Math.min(time, 1);\n\n    return (\n        <TimeLine\n            time={time}\n        />\n    )    \n};\n\nexport default TimeLineContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport { FaFastBackward, FaStepBackward, FaFastForward, FaStepForward } from 'react-icons/fa';\nimport { IconContext } from 'react-icons';\n\nconst UndoRedoBlock = styled.div`\n    position: absolute;\n    top: 300px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    background-color: rgb(247, 246, 245);\n    z-index: 10;\n    box-shadow: rgba(0, 0, 0, 0.14) 0px -2px 2px 0px, rgba(0, 0, 0, 0.2) 0px -3px 1px -2px, rgba(0, 0, 0, 0.12) 0px -1px 5px 0px;\n`;\n\nconst ButtonBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n`;\n\nconst buttonStyle = {\n    style: {\n        color: '#4d4d4d',\n        width: '50%',\n        height: '50%',\n        backgroundColor: 'transparent'\n    }\n}\n\nconst UndoRedo = ({ onStepUndo, onStepRedo, onFastUndo, onFastRedo}) => {\n    \n    return (\n        <UndoRedoBlock>\n            <ButtonBlock onClick={onFastUndo}>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaFastBackward/>\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock onClick={onStepUndo}>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaStepBackward/>\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock onClick={onStepRedo}>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaStepForward/>\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock onClick={onFastRedo}>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaFastForward/>\n                </IconContext.Provider>\n            </ButtonBlock>\n        </UndoRedoBlock>\n    )\n};\n\nexport default React.memo(UndoRedo);","import React, { useEffect, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport UndoRedo from '../../components/gameplay/UndoRedo';\nimport { replayValueThunk } from '../../modules/canvas';\n\nconst UndoRedoContainer = () => {\n    const { pieceMove } = useSelector(({ record }) => ({\n        pieceMove: record.pieceMove,\n    }));\n\n    const dispatch = useDispatch();\n \n    const onFastUndo = useCallback(() => {\n        dispatch(replayValueThunk({ index: -1 }));\n    }, [dispatch]);\n\n    const onStepUndo = useCallback(() => {\n        dispatch(replayValueThunk({ diff: -1 }));\n    }, [dispatch]);\n\n    const onStepRedo = useCallback(() => {\n        dispatch(replayValueThunk({ diff: +1 }));\n    }, [dispatch]);\n\n    const onFastRedo = useCallback(() => {\n        dispatch(replayValueThunk({ index: pieceMove.length-1 }));\n    }, [dispatch, pieceMove]);\n\n    return (\n        <UndoRedo\n            onStepUndo={onStepUndo}\n            onStepRedo={onStepRedo}\n            onFastUndo={onFastUndo}\n            onFastRedo={onFastRedo}\n        />\n    )\n};\n\nexport default UndoRedoContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nimport Spinner from '../../static/image/spinner.svg';\n\nconst ToolTipBlock = styled.div`\n    position: absolute;\n    top: -90px;\n    left: 0px;\n    height: 60px;\n    width: 84px;\n    opacity: 0;\n    visibility: hidden;\n    ${props => props.modal && css`\n        top: -70px;\n        opacity: 1;\n        visibility: visible;\n    `}\n    ${props => props.message && css`\n        transition: all 3s cubic-bezier(1.000, 0.015, 1.000, 0.030);\n        top: -90px;\n        opacity: 0;\n    `}\n    transition: 1s;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n    background-color: white;\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\n`;\n\nconst MessageBlock = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 40px;\n    font-size: 11px;\n`;\n\nconst SpinnerFrameBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 40px;\n    width: 100%;\n`;\n\nconst SpinnerBlock = styled.img`\n    height: 30px;\n    width: 30px;\n`;\n\nconst TitleBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 12px;\n    height: 20px;\n    width: 100%;\n`;\n\nconst ButtonBlock = styled.button`\n    background-color: transparent;\n    border: none;\n    outline: none;\n    cursor: pointer;\n    width: 30px;\n    height: 30px;\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\n\n    ${props => props.restrict && css`\n        pointer-events: none;\n    `}\n\n    &+& {\n        margin-left: 10px;\n    }\n\n    &:hover {\n        background-color: rgba(0, 0, 0, 0.2);\n    }\n`;\n\nconst TimeLineBlock = styled.div`\n    position: absolute;\n    top: -2px;\n    left: 0px;\n    width: 84px;\n    height: 2px;\n    background-color: blue;\n    visibility: hidden;\n    ${props => props.race && css`\n        visibility: visible;\n        transition: all 5s linear;\n        width: 0px;\n    `}\n`;\n\nconst ToolTip = ({ type, message, modal, race, restrict, onClick }) => {\n    let content;\n\n    if(modal === 'answer') {\n        content = (\n            <MessageBlock>\n                <ButtonBlock\n                    restrict={restrict}\n                    onClick={() => onClick(true)}\n                >\n                    Y\n                </ButtonBlock>\n                <ButtonBlock\n                    restrict={restrict}\n                    onClick={() => onClick(false)}\n                >\n                    N\n                </ButtonBlock>\n            </MessageBlock>\n        )\n    } else if(modal === 'ask') {\n        if(message) {\n            content = (\n                <MessageBlock>\n                    {message}\n                </MessageBlock>\n            );\n        } else {\n            content = (\n                <SpinnerFrameBlock>\n                    <SpinnerBlock src={Spinner} />\n                </SpinnerFrameBlock>\n            )\n        }\n    }\n\n    return (\n        <ToolTipBlock\n            message={message}\n            modal={modal}\n        >\n            <TimeLineBlock race={race} />\n            <TitleBlock>\n                {type}\n            </TitleBlock>\n            {content}\n        </ToolTipBlock>\n    )\n};\n\nexport default ToolTip;","import React, { useEffect, useCallback, useRef, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport ToolTip from '../../components/gameplay/ToolTip';\nimport { clearToolTip, answeringThunk } from '../../modules/record';\n\nconst ToolTipContainer = ({ type }) => {\n    const { socket, suggestion, start } = useSelector(({ record, game }) => ({\n        socket: record.socket,\n        suggestion: record[type],\n        start: game.start,\n    }));\n\n    const dispatch = useDispatch();\n    const [ race, setRace ] = useState(false);\n    const [ restrict, setRestrict ] = useState(false);\n\n    useEffect(() => {\n        if(suggestion.modal) {\n            setRestrict(false);\n            setRace(true);\n        }\n    }, [dispatch, suggestion.modal]);\n\n    useEffect(() => {\n        if(suggestion.message) {\n            setRace(false);\n        }\n    }, [suggestion.message])\n\n    useEffect(() => {\n        if(!start && suggestion.modal) {\n            setRace(false);\n            dispatch(clearToolTip());\n        }\n    }, [dispatch, start, suggestion.modal, type])\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearToolTip());\n        }\n    }, [dispatch, type])\n\n    const onClick = useCallback(response => {\n        dispatch(answeringThunk({\n            socket,\n            type,\n            response,\n        }));\n        setRestrict(true);\n    }, [dispatch, socket, type]);\n\n    return (\n        <ToolTip\n            type={type}\n            modal={suggestion.modal}\n            message={suggestion.message}\n            race={race}\n            restrict={restrict}\n            onClick={onClick}\n        />\n    )\n};\n\nexport default ToolTipContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport { FaExchangeAlt, FaFlag, FaHandRock } from 'react-icons/fa';\nimport { TiArrowBack } from 'react-icons/ti';\nimport { IconContext } from 'react-icons';\nimport ToolTipContainer from '../../containers/gameplay/ToolTipContainer';\n\nconst UtilBlock = styled.div`\n    position: absolute;\n    top: 30px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    z-index: 10;\n    background-color: rgb(247, 246, 245);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst ButtonBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n`;\n\nconst buttonStyle = {\n    style: {\n        color: '#4d4d4d',\n        width: '50%',\n        height: '50%',\n        backgroundColor: 'transparent'\n    }\n};\n\nconst Util = ({ onReverse, onClick }) => {\n    return (\n        <UtilBlock>\n            <ButtonBlock onClick={onReverse} >\n                <IconContext.Provider value={{ style: { ...buttonStyle.style, width: '60%', height:'60%' }} }>\n                    <FaExchangeAlt />\n                </IconContext.Provider>\n            </ButtonBlock>\n            <ButtonBlock onClick={() => onClick('undo')}>\n                <IconContext.Provider value={{ style: { ...buttonStyle.style, width: '80%', height:'80%' }} }>\n                    <TiArrowBack />\n                </IconContext.Provider>\n                <ToolTipContainer type='undo' />\n            </ButtonBlock>\n            <ButtonBlock onClick={() => onClick('draw')}>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaHandRock />\n                </IconContext.Provider>\n                <ToolTipContainer type='draw' />\n            </ButtonBlock>\n            <ButtonBlock onClick={() => onClick('surrender')}>\n                <IconContext.Provider value={buttonStyle}>\n                    <FaFlag />\n                </IconContext.Provider>\n                <ToolTipContainer type='surrender' />\n            </ButtonBlock>\n        </UtilBlock>\n    )\n};\n\nexport default React.memo(Util);","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { askingThunk } from '../../modules/record';\nimport Util from '../../components/gameplay/Util';\nimport { changeReverse, setBanClick } from '../../modules/record';\n\nconst UtilContainer = () => {\n    const { reversed, socket, start, blocked, banClick } = useSelector(({ record, game }) => ({\n        socket: record.socket,\n        reversed: record.reversed,\n        start: game.start,\n        blocked: record.blocked,\n        banClick: record.banClick,\n    }));\n\n    const dispatch = useDispatch();\n    \n    const onReverse = useCallback(() => {\n        dispatch(changeReverse({ reversed: !reversed }));\n    }, [dispatch, reversed]);\n\n    const onClick = useCallback(type => {\n        if(start && !blocked && !banClick) {\n            dispatch(askingThunk({\n                socket,\n                type,\n            }));\n            dispatch(setBanClick());\n        }\n    }, [dispatch, start, socket, blocked, banClick]);\n\n    return (\n        <Util\n            onReverse={onReverse}\n            onClick={onClick}\n        />\n    )\n};\n\nexport default UtilContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nimport TimerContainer from '../../containers/gameplay/TimerContainer';\nimport StatusContainer from '../../containers/gameplay/StatusContainer';\nimport PieceMoveListContainer from '../../containers/gameplay/PieceMoveListContainer';\nimport TimeLineContainer from '../../containers/gameplay/TimeLineContainer';\nimport UndoRedoContainer from '../../containers/gameplay/UndoRedoContainer';\nimport UtilContainer from '../../containers/gameplay/UtilContainer';\n\nconst RecordBlock = styled.div`\n    position: relative;\n    width: 100%;\n    height: 360px;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst Record = ({ reversal, init }) => {\n    return (\n        <>\n            {reversal ? (\n                <>\n                    <TimerContainer\n                        init={init}\n                        white\n                    />\n                </>\n            ) : (\n                <>\n                    <TimerContainer\n                        init={init}\n                        black\n                    />\n                </>\n            )}\n            <RecordBlock>\n                {reversal ? (\n                    <>\n                        <TimeLineContainer\n                            init={init}\n                            white\n                        />\n                        <StatusContainer\n                            init={init}\n                            white\n                        />\n                    </>\n                ) : (\n                    <>\n                        <TimeLineContainer\n                            init={init}\n                            black\n                        />\n                        <StatusContainer\n                            init={init}\n                            black\n                        />\n                    </>\n                )}\n                <UtilContainer />\n                <PieceMoveListContainer />\n                <UndoRedoContainer />\n                {reversal ? (\n                    <>\n                        <StatusContainer\n                            init={init}\n                            black\n                            beneath\n                        />\n                        <TimeLineContainer\n                            init={init}\n                            black\n                        />\n                    </>\n                ) : (\n                    <>\n                        <StatusContainer\n                            init={init}\n                            white\n                            beneath\n                        />\n                        <TimeLineContainer\n                            init={init}\n                            white\n                        />\n                    </>\n                )}\n                \n            </RecordBlock>\n            {reversal ? (\n                <>\n                    <TimerContainer\n                        init={init}\n                        black\n                    />\n                </>\n            ) : (\n                <>\n                    <TimerContainer\n                        init={init}\n                        white\n                    />\n                </>\n            )}\n        </>\n    )\n};\n\nexport default React.memo(Record);","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Record from '../../components/gameplay/Record';\nimport { clearValue } from '../../modules/record';\n\nconst RecordContainer = () => {\n    const { role, reversed } = useSelector(({ socketAuth, record }) => ({\n        role: socketAuth.role,\n        reversed: record.reversed,\n    }));\n\n    const dispatch = useDispatch();\n\n    const [ init, setInit ] = useState(false);\n\n    //  화면 깜박임 없이 렌더링을 한번만 하기 위한 장치\n    useEffect(() => {\n        if(role && !init) {\n            setInit(true);\n        }\n    }, [init, role]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearValue());\n        }\n    }, [dispatch]);\n\n    let reversal = false;\n    if(((role === 'white' || role === 'spectator') && reversed) || (role === 'black' && !reversed)) {\n        reversal = true;\n    }\n\n    return (\n        <Record\n            init={init}\n            reversal={reversal}\n        />\n    );\n};\n\nexport default RecordContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport CanvasContainer from '../../containers/gameplay/CanvasContainer';\nimport ChatContainer from '../../containers/gameplay/ChatContainer';\nimport RecordContainer from '../../containers/gameplay/RecordContainer';\n\nconst GamePlayLayoutBlock = styled.div`\n    height: 800px;\n    width: 100%;\n    background-color: rgb(237, 235, 233);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst sideBlockStyle = css`\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n`;\n\nconst LeftSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-right: 1%;\n`;\n\nconst RightSideBlock = styled.div`\n    ${sideBlockStyle}\n    margin-left: 1%;\n`;\n\nconst GamePlayLayout = () => {\n    return (\n        <GamePlayLayoutBlock>\n            <LeftSideBlock>\n                <ChatContainer />\n            </LeftSideBlock>\n            <CanvasContainer />\n            <RightSideBlock>\n                <RecordContainer />\n            </RightSideBlock>\n        </GamePlayLayoutBlock>\n    )\n};\n\nexport default React.memo(GamePlayLayout);","import { createAction, handleActions } from 'redux-actions';\nimport { connectNamespace } from '../lib/websocket/websocket';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nconst CONNECT_WEBSOCKET = 'socketAuth/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'socketAuth/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_SOCKET = 'socketAuth/INITIALIZE_SOCKET';\nconst INITIALIZE_VALUE = 'socketAuth/INITIALIZE_VALUE';\nconst CLEAR_VALUE = 'socketAuth/CLEAR_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nfunction* connectWebsocketSaga (action) {\n    const query = action.payload;\n    \n    const socketTask = yield fork(connectNamespace, {\n        url: '/socketAuth',\n        initializeSocket,\n        initializeValue,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* socketAuthSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    nickname: null,\n    role: null,\n    error: null,\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\n        ...state,\n        ...rest,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n}, initialState);","import { createAction, handleActions } from 'redux-actions';\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\n\nimport { connectNamespace } from '../lib/websocket/websocket';\n\nconst CONNECT_WEBSOCKET = 'game/CONNECT_WEBSOCKET';\nconst DISCONNECT_WEBSOCKET = 'game/DISCONNECT_WEBSOCKET';\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\n\nconst INITIALIZE_VALUE = 'game/INITIALIZE_VALUE';\nconst INITIALIZE_SOCKET = 'game/INITIALIZE_SOCKET';\nconst CLEAR_VALUE = 'game/CLEAR_VALUE';\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\nexport const clearValue = createAction(CLEAR_VALUE);\n\nfunction* connectWebsocketSaga (action) {\n    const query = action.payload;\n\n    const socketTask = yield fork(connectNamespace, { \n        url: '/game',\n        initializeSocket,\n        initializeValue,\n        query,\n    });\n    \n    yield take(DISCONNECT_WEBSOCKET);\n    yield cancel(socketTask);\n}\n\nexport function* gameSaga () {\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\n}\n\nconst initialState = {\n    socket: null,\n    error: null,\n    participant: [],\n};\n\nexport default handleActions({\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\n        ...state,\n        socket,\n    }),\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest }}) => ({\n        ...state,\n        ...rest,\n    }),\n    [CLEAR_VALUE]: state => initialState,\n}, initialState);","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport uuid from 'uuid/v1';\n\nimport useAsync from '../../lib/hook/useAsync';\nimport GamePlayLayout from '../../components/gameplay/GamePlayLayout';\nimport { setSessionThunk } from '../../modules/sessionAuth';\n\nimport { clearValue as clearAuthValue } from '../../modules/socketAuth';\nimport { clearValue as clearGameValue } from '../../modules/game';\n\nimport { connectWebsocket as connectAuthWebsocket } from '../../modules/socketAuth';\nimport { connectWebsocket as connectGameWebsocket } from '../../modules/game';\nimport { connectWebsocket as connectChatWebsocket } from '../../modules/chat';\nimport { connectWebsocket as connectCanvasWebsocket} from '../../modules/canvas';\nimport { connectWebsocket as connectRecordWebsocket } from '../../modules/record';\n\nimport { disconnectWebsocket as disconnectAuthWebsocket } from '../../modules/socketAuth';\nimport { disconnectWebsocket as disconnectGameWebsocket } from '../../modules/game';\nimport { disconnectWebsocket as disconnectChatWebsocket } from '../../modules/chat';\nimport { disconnectWebsocket as disconnectCanvasWebsocket } from '../../modules/canvas';\nimport { disconnectWebsocket as disconnectRecordWebsocket } from '../../modules/record';\n\nconst GamePlayLayoutContainer = ({ gameKey }) => {\n    const dispatch = useDispatch();\n\n    const connection = async () => {\n        await dispatch(setSessionThunk());\n        dispatch(disconnectGameWebsocket());\n        dispatch(disconnectAuthWebsocket());\n        dispatch(disconnectChatWebsocket());\n        dispatch(disconnectCanvasWebsocket());\n        dispatch(disconnectRecordWebsocket());\n        await Promise.resolve().then(() => {\n            const tabKey = uuid();\n            const param = {\n                gameKey,\n                tabKey,\n            }\n            dispatch(connectGameWebsocket(param));\n            dispatch(connectAuthWebsocket(param));\n            dispatch(connectChatWebsocket(param));\n            dispatch(connectCanvasWebsocket(param));\n            dispatch(connectRecordWebsocket(param));\n        })\n        return true;\n    };\n\n    useEffect(() => {\n        return () => {\n            dispatch(disconnectGameWebsocket());\n            dispatch(disconnectAuthWebsocket());\n            dispatch(disconnectChatWebsocket());\n            dispatch(disconnectCanvasWebsocket());\n            dispatch(disconnectRecordWebsocket());\n        }\n    }, [dispatch]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearAuthValue());\n            dispatch(clearGameValue());\n        }\n    }, [dispatch]);\n\n    const [state] = useAsync(connection, [ dispatch, gameKey ]);\n\n    const { loading, data, error } = state;\n\n    // if(loading) return null;\n    // if(error) return null;\n    // if(data) {\n    //     return (\n    //         <GamePlayLayout />\n    //     )\n    // }\n    // return null;\n\n    return (\n        <GamePlayLayout />\n    )\n};\n\nexport default GamePlayLayoutContainer;","import React, { useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\n\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport GamePlayLayoutContainer from '../containers/gameplay/GamePlayLayoutContainer';\nimport FooterContainer from '../containers/common/FooterContainer';\n\nconst GamePlayPage = ({ history, match }) => {\n    useEffect(() => {\n        if(!match.params.id) {\n            history.push('/');\n        }\n    }, [history, match]);\n\n    if(!match.params.id) return null;\n    const { id } = match.params;\n    if(!id) return null;\n    \n    return (\n        <>\n            <Helmet>\n                <title>GamePlay • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <GamePlayLayoutContainer gameKey={id}/>\n            <FooterContainer />\n        </>\n    )\n};\n\nexport default withRouter(GamePlayPage);","import React from 'react';\nimport { MdArrowForward, MdArrowBack } from 'react-icons/md';\nimport { IconContext } from 'react-icons';\nimport styled, { css } from 'styled-components';\n\nconst PaginationBlock = styled.div`\n    display: flex;\n    justify-content: flex-end;\n    width: 100%;\n    height: 100%;\n`;\n\nconst ButtonBlock = styled.button`\n    width: 30px;\n    height: 30px;\n    font-size: 10px;\n    background: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding: 0px;\n    border: none;\n    margin: 0px;\n    outline: none;\n    cursor: pointer;\n    \n    &:hover {\n        background: rgba(0, 0, 0, 0.05);\n    }\n\n    &:active {\n        background: rgba(0, 0, 0, 0.1);\n    }\n\n    ${props => props.page && css`\n        background: rgba(102, 204, 255, 0.1);\n\n        &:hover {\n            background: rgba(102, 204, 255, 0.2);\n        }\n\n        &:active {\n            background: rgba(102, 204, 255, 0.3);\n        }\n    }\n\n    `}\n\n    & + & {\n        margin-left: 5px;\n    }\n`;\n\nconst Pagination = ({ page, size, onClick, onForwardClick, onBackwardClick }) => {\n    const firstBlock = parseInt((page-1) / 5) * 5 + 1;\n    const lastBlock = firstBlock + 4;\n    \n    const buttons = [];\n    for(let i=firstBlock; i<=lastBlock; ++i) {\n        buttons.push(\n            <ButtonBlock\n                page={i===page}\n                onClick={() => onClick(i)}\n                disabled={i > size}\n            >\n                {i}\n            </ButtonBlock>\n        );\n    }\n\n    return (\n        <PaginationBlock>\n            <ButtonBlock onClick={onBackwardClick}>\n                <IconContext.Provider value={{ style: { width: '15px', height: '15px' } }}>\n                    <MdArrowBack />\n                </IconContext.Provider>\n            </ButtonBlock>\n            {buttons}\n            <ButtonBlock onClick={onForwardClick}>\n                <IconContext.Provider value={{ style: { width: '15px', height: '15px' } }}>\n                    <MdArrowForward />\n                </IconContext.Provider>\n            </ButtonBlock>\n        </PaginationBlock>\n    )\n};\n\nexport default React.memo(Pagination);","import { handleActions, createAction } from 'redux-actions';\nimport * as communityCtrl from '../lib/api/community';\nimport  createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\n\nconst CLEAR_ALL = 'community/CLEAR_ALL';\nconst SET_MENU = 'community/SET_MENU';\nconst SET_STATUS = 'community/SET_STATUS';\nconst SET_FORM = 'community/SET_FORM';\nconst CLEAR_FORM = 'community/CLEAR_FORM';\nconst CLEAR_FORM_ALL = 'community/CLEAR_FORM_ALL';\nconst [ CREATE_POST, CREATE_POST_SUCCESS, CREATE_POST_FAILURE ] = createRequestActionTypes('community/CREATE_POST');\nconst [ LIST_POST, LIST_POST_SUCCESS, LIST_POST_FAILURE ] = createRequestActionTypes('community/LIST_POST');\nconst [ READ_POST, READ_POST_SUCCESS, READ_POST_FAILURE ] = createRequestActionTypes('community/READ_POST');\nconst [ DELETE_POST, DELETE_POST_SUCCESS, DELETE_POST_FAILURE ] = createRequestActionTypes('community/DELETE_POST');\nconst [ UPDATE_POST, UPDATE_POST_SUCCESS, UPDATE_POST_FAILURE ] = createRequestActionTypes('community/UPDATE_POST');\nexport const clearAll = createAction(CLEAR_ALL);\nexport const setMenu = createAction(SET_MENU, payload => payload);\nexport const setStatus = createAction(SET_STATUS, payload => payload);\nexport const setForm = createAction(SET_FORM, payload => payload);\nexport const clearForm = createAction(CLEAR_FORM, payload => payload);\nexport const clearFormAll = createAction(CLEAR_FORM_ALL, payload => payload);\nexport const createPostThunk = createRequestThunk(CREATE_POST, communityCtrl.createPost);\nexport const listPostThunk = createRequestThunk(LIST_POST, communityCtrl.listPost);\nexport const readPostThunk = createRequestThunk(READ_POST, communityCtrl.readPost);\nexport const deletePostThunk = createRequestThunk(DELETE_POST, communityCtrl.deletePost);\nexport const updatePostThunk = createRequestThunk(UPDATE_POST, communityCtrl.updatePost);\n\nexport const setMenuThunk = index => (dispatch, getState) => {\n    const {\n        community: { menu },\n    } = getState();\n\n    const revisedMenu = menu.map(criteria => criteria.checked\n        ? { ...criteria, checked: false }\n        : criteria\n    );\n\n    revisedMenu[index] = {\n        ...revisedMenu[index],\n        checked: true,\n    }\n\n    dispatch(setMenu({\n        menu: revisedMenu,\n    }))\n};\n\nconst initialState = {\n    status: 'list',\n    menu: [\n        {\n            name: 'All Posts',\n            checked: true,\n        },\n        {\n            name: 'Small Talk',\n            checked: false,\n        },\n        {\n            name: 'Know How',\n            checked: false,\n        },\n        {\n            name: 'Notice',\n            checked: false,\n        },\n    ],\n    list: {\n        page: 1,\n        size: 1,\n        posts: [],\n    },\n    post: {\n        id: null,\n        post: null,\n    },\n    write: {\n        modify: false,\n        title: '',\n        content: '',\n    }\n};\n\n\nexport default handleActions({\n    [CLEAR_ALL]: state => initialState,\n    [SET_MENU]: (state, { payload: { menu } }) => ({\n        ...state,\n        menu,\n    }),\n    [SET_STATUS]: (state, { payload: { status } }) => ({\n        ...state,\n        status,\n    }),\n    [SET_FORM]: (state, { payload: { status, key, value } }) => ({\n        ...state,\n        [status]: {\n            ...state[status],\n            [key]: value,\n        }\n    }),\n    [CLEAR_FORM]: (state, { payload: { status, key } }) => ({\n        ...state,\n        [status]: {\n            ...state[status],\n            [key]: initialState[status][key],\n        }\n    }),\n    [CLEAR_FORM_ALL]: (state, { payload: { status } }) => ({\n        ...state,\n        [status]: {\n            ...initialState[status],\n        }\n    }),\n    [CREATE_POST_SUCCESS]: state => state,\n    [CREATE_POST_FAILURE]: state => state,\n    [LIST_POST_SUCCESS]: (state, { payload: { posts, size } }) => ({\n        ...state,\n        list: {\n            ...state.list,\n            posts,\n            size,\n        }\n    }),\n    [LIST_POST_FAILURE]: state => state,\n    [READ_POST_SUCCESS]: (state, { payload: { post } }) => ({\n        ...state,\n        post: {\n            ...state.post,\n            post,\n        }\n    }),\n    [READ_POST_FAILURE]: state => state,\n    [DELETE_POST_SUCCESS]: state => state,\n    [DELETE_POST_FAILURE]: state => state,\n    [UPDATE_POST_SUCCESS]: state => state,\n    [UPDATE_POST_FAILURE]: state => state,\n}, initialState);","import axios from 'axios';\nimport qs from 'qs';\n\nexport const createPost = params =>\n    axios.post('/api/community', params);\n\nexport const readPost = ({ id }) =>\n    axios.get(`/api/community/${id}`);\n\nexport const listPost = ({ kind, page }) => {\n    const queryString = qs.stringify({\n        kind,\n        page,\n    });\n\n    return axios.get(`/api/community?${queryString}`);\n}\n\nexport const updatePost = ({ id, ...rest }) =>\n    axios.patch(`/api/community/${id}`, rest);\n\nexport const deletePost = ({ id }) =>\n    axios.delete(`/api/community/${id}`);","import React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport Pagination from '../../components/community/Pagination';\nimport { setForm } from '../../modules/community';\n\nconst PaginationContainer = () => {\n    const { page, size } = useSelector(({ community }) => ({\n        page: community.list.page,\n        size: community.list.size,\n    }));\n\n    const dispatch = useDispatch();\n\n    const onClick = useCallback(pageNum => {\n        if(page !== pageNum) {\n            dispatch(setForm({\n                status: 'list',\n                key: 'page',\n                value: pageNum,\n            }))\n        }\n    }, [dispatch, page]);\n\n    const onForwardClick = useCallback(() => {\n        if(page < size) {\n            dispatch(setForm({\n                status: 'list',\n                key: 'page',\n                value: page+1,\n            }))\n        }\n    }, [dispatch, page, size]);\n\n    const onBackwardClick = useCallback(() => {\n        if(page > 1) {\n            dispatch(setForm({\n                status: 'list',\n                key: 'page',\n                value: page-1,\n            }))\n        }\n    }, [dispatch, page])\n\n    return (\n        <Pagination\n            page={page}\n            size={size}\n            onClick={onClick}\n            onForwardClick={onForwardClick}\n            onBackwardClick={onBackwardClick}\n        />\n    );\n};\n\nexport default PaginationContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport { GoPin } from 'react-icons/go';\nimport { IconContext } from 'react-icons';\n\nimport PaginationContainer from '../../containers/community/PaginationContainer';\n\nconst ListBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n    box-sizing: border-box;\n    padding-top: 5px;\n    width: 100%;\n    height: 100%;\n`;\n\nconst PostNoticeBlock = styled.div`\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 90%;\n    height: 30px;\n    background: rgba(102, 204, 255, 0.1);\n    cursor: pointer;\n    box-sizing: border-box;\n    padding: 0px 20px;\n    margin-bottom: 5px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst TextBlock = styled.div`\n    margin-left: 10px;\n    font-size: 12px;\n`;\n\nconst PostWrapper = styled.div`\n    width: 90%;\n    height: 479px;\n    box-sizing: border-box;\n    background: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst PostCompressionBlock = styled.div`\n    display: flex;\n    width: 100%;\n    height: 31px;\n    background: white;\n    cursor: pointer;\n    font-size: 12px;\n\n    &+& {\n        border-top: 1px solid rgba(0, 0, 0, 0.2);\n    }\n\n    &:last-child {\n        border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n    }\n\n    &:nth-child(15) {\n        border-bottom: 0px;\n    }\n    \n    &:hover {\n        background: rgba(0, 0, 0, 0.05);\n    }\n`;\n\nconst TitleBlock = styled.div`\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    height: 100%;\n    width: 50%;\n    padding-left: 30px;\n`;\n\nconst NumberBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-sizing: border-box;\n    font-size: 10px;\n    width: 50px;\n    height: 14px;\n    padding: 2px 5px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst EllipsisBlock = styled.div`\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    max-width: 300px;\n    margin-left: 20px;\n`;\n\nconst CommentCounter = styled.div`\n    font-size: 10px;\n    margin-left: 3px;\n    height: 30px;\n    padding-top: 5px;\n    color: rgba(0, 51, 204, 0.5);\n`;\n\nconst UserBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: flex-end;\n    height: 100%;\n    width: 50%;\n    padding-right: 30px;\n`;\n\nconst NameBlock = styled.div`\n    height: 50%;\n    font-size: 10px;\n    padding-right: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst DateBlock = styled.div`\n    height: 50%;\n    font-size: 10px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst PaginationFrameBlock = styled.div`\n    margin-top: 5px;\n    width: 90%;\n    height: 30px;\n`;\n\nconst PostCompression =  React.memo(({ post, onClick }) => {\n    const createdAt = new Date(Date.parse(post.createdAt));\n    const date = createdAt.getFullYear() + \" / \" + createdAt.getMonth() + \" / \" + createdAt.getDate();\n    \n    return (\n        <PostCompressionBlock\n            onClick={() => onClick(post._id)}\n        >\n            <TitleBlock>\n                <NumberBlock>\n                    No.{post.num}\n                </NumberBlock>\n                <EllipsisBlock>\n                    {post.title}\n                </EllipsisBlock>\n                <CommentCounter>\n                    15\n                </CommentCounter>\n            </TitleBlock>\n            <UserBlock>\n                <NameBlock>\n                    {post.user.username}\n                </NameBlock>\n                <DateBlock>\n                    {date}\n                </DateBlock>\n            </UserBlock>\n        </PostCompressionBlock>\n    )\n});\n\nconst List = ({ list, onClick }) => {\n    \n    return (\n        <ListBlock>\n            <PostNoticeBlock>\n                <IconContext.Provider value={{ style: { width: '20px', height: '20px' } }}>\n                    <GoPin />\n                </IconContext.Provider>\n                <TextBlock>\n                    Chesssup ver1 will be released soon.\n                </TextBlock>\n            </PostNoticeBlock>\n            <PostWrapper>\n                {list && list.posts.map(post => (\n                    <PostCompression\n                        key={post._id}\n                        post={post}\n                        onClick={onClick}\n                    />\n                ))}\n            </PostWrapper>\n            <PaginationFrameBlock>\n                <PaginationContainer />\n            </PaginationFrameBlock>\n        </ListBlock>\n    );\n};\n\nexport default React.memo(List);","import React, { useEffect, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport List from '../../components/community/List';\nimport { clearFormAll, listPostThunk, setStatus, setForm } from '../../modules/community';\n\nconst ListContainer = () => {\n    const { menu, list } = useSelector(({ community }) => ({\n        menu: community.menu,\n        list: community.list,\n    }));\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        const criteria = menu.find(criteria => criteria.checked);\n        dispatch(listPostThunk({\n            kind: criteria.name,\n            page: list.page,\n        }));\n    }, [dispatch, menu, list.page]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearFormAll({\n                status: 'list',\n            }));\n        }\n    }, [dispatch]);\n\n    const onClick = useCallback(id => {\n        dispatch(setStatus({\n            status: 'post',\n        }));\n        dispatch(setForm({\n            status: 'post',\n            key: 'id',\n            value: id,\n        }))\n    }, [dispatch]);\n\n    return (\n        <List\n            list={list}\n            onClick={onClick}\n        />\n    );\n};\n\nexport default ListContainer;\n","import React from 'react';\nimport 'quill/dist/quill.bubble.css';\n\nimport styled, { css } from 'styled-components';\n\nconst QuillFrameBlock = styled.div`\n    width: 90%;\n    height: 479px;\n    background: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst QuillWrapperBlock = styled.div``;\n\nconst WriteBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-start;\n    box-sizing: border-box;\n    padding-top: 5px;\n    width: 100%;\n    height: 100%;\n`;\n\nconst TitleInputBlock = styled.input`\n    width: 90%;\n    height: 30px;\n    padding: 0px 15px;\n    box-sizing: border-box;\n    border: none;\n    outline: none;\n    margin-bottom: 5px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    font-size: 13px;\n    /* font-family: Helvetica, Arial, sans-serif; */\n\n    ${props => props.holding && css`\n        font-style: italic;\n    `}\n`;\n\nconst SubmitFrameBlock = styled.div`\n    display: flex;\n    justify-content: flex-end;\n    width: 90%;\n    height: 30px;\n    margin-top: 5px;\n`;\n\nconst ButtonBlock = styled.button`\n    width: 100px;\n    height: 100%;\n    background: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding: 0px;\n    border: none;\n    margin: 0px;\n    outline: none;\n    cursor: pointer;\n\n    & + & {\n        margin-left: 5px;\n    }\n\n    &:hover {\n        background: rgba(0, 0, 0, 0.05);\n    }\n\n    &:active {\n        background: rgba(0, 0, 0, 0.1);\n    }\n`;\n\nconst Write = ({\n    quillElement,\n    onChangeTitle,\n    holding,\n    write,\n    onSubmit,\n    onCancel,\n}) => {\n    return (\n        <WriteBlock>\n            <TitleInputBlock\n                onChange={onChangeTitle}\n                value={write.title}\n                placeholder='title'\n                holding={holding}\n            />\n            <QuillFrameBlock>\n                <QuillWrapperBlock ref={quillElement} />\n            </QuillFrameBlock>\n            <SubmitFrameBlock>\n                <ButtonBlock onClick={onSubmit}>\n                    Submit\n                </ButtonBlock>\n                <ButtonBlock onClick={onCancel}>\n                    Cancel\n                </ButtonBlock>\n            </SubmitFrameBlock>\n        </WriteBlock>\n    );\n};\n\nexport default React.memo(Write);","import React, { useRef, useEffect, useCallback, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Quill from 'quill';\n\nimport Write from '../../components/community/Write';\nimport { setForm, createPostThunk, updatePostThunk, clearFormAll, setStatus } from '../../modules/community';\n\nconst WriteLayoutContainer = () => {\n    const { write, menu } = useSelector(({ community }) => ({\n        write: community.write,\n        menu: community.menu,\n    }));\n\n    const dispatch = useDispatch();\n\n    const quillElement = useRef();\n    const quillInstance = useRef();\n    const mounted = useRef(false);\n\n    const [ holding, setHolding ] = useState(!(write && write.title));\n\n    useEffect(() => {\n        quillInstance.current = new Quill(quillElement.current, {\n            theme: 'bubble',\n            placeholder: 'content',\n            modules: {\n                toolbar: [\n                    [{ header: '1' }, { header: '2' }],\n                    ['bold', 'italic', 'underline', 'strike'],\n                    [{ list: 'ordered' }, { list: 'bullet' }],\n                    ['blockquote', 'code-block', 'link', 'image'],\n                ]\n            },\n        });\n\n        const quill = quillInstance.current;\n        quill.on('text-change', (delta, oldDelta, source) => {\n            if(source === 'user') {\n                dispatch(setForm({\n                    status: 'write',\n                    key: 'content',\n                    value: quill.root.innerHTML,\n                }))\n            }\n        });\n    }, [dispatch]);\n\n    useEffect(() => {\n        if(mounted.current) return;\n        mounted.current = true;\n        quillInstance.current.root.innerHTML = write.content;\n    }, [write]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearFormAll({\n                status: 'write',\n            }));\n        }\n    }, [dispatch]);\n\n    const onChangeTitle = useCallback(e => {\n        if(holding && e.target.value !== '') {\n            setHolding(false);\n        } else if(!holding && e.target.value === ''){\n            setHolding(true);\n        }\n        \n        dispatch(setForm({\n            status: 'write',\n            key: 'title',\n            value: e.target.value,\n        }));\n    }, [dispatch, holding]);\n\n    const onSubmit = useCallback(async() => {\n        const criteria = menu.find(criteria => criteria.checked);\n\n        if(!write.modify) {\n            //  create\n            await dispatch(createPostThunk({\n                kind: criteria.name,\n                title: write.title,\n                content: write.content,\n            }));\n        } else {\n            //  update\n            await dispatch(updatePostThunk({\n                id: write.modify,\n                kind: criteria.name,\n                title: write.title,\n                content: write.content,\n            }));\n        }\n\n        dispatch(setStatus({\n            status: 'list',\n        }));\n    }, [dispatch, write, menu]);\n\n    const onCancel = useCallback(() => {\n        dispatch(setStatus({\n            status: 'list',\n        }));\n    }, [dispatch]);\n\n    return (\n        <Write\n            quillElement={quillElement}\n            onChangeTitle={onChangeTitle}\n            write={write}\n            holding={holding}\n            onSubmit={onSubmit}\n            onCancel={onCancel}\n        />\n    )\n};\n\nexport default WriteLayoutContainer;","import React from 'react';\nimport styled from 'styled-components';\n\nconst PostBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n    box-sizing: border-box;\n    padding-top: 5px;\n    width: 100%;\n    height: 100%;\n`;\n\nconst PostTitleFrameBlock = styled.div`\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 90%;\n    height: 30px;\n    background: white;\n    box-sizing: border-box;\n    padding: 0px 15px;\n    margin-bottom: 5px;\n    font-size: 13px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst PostTitleBlock = styled.div`\n    width: 50%;\n`;\n\nconst PostAuthFrameBlock = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    width: 50%;\n    font-size: 11px;\n`;\n\nconst PostAuthBlock = styled.div`\n    padding-right: 20px;\n`;\n\nconst PostDateBlock = styled.div`\n\n`;\n\nconst PostContentBlock = styled.div`\n    width: 90%;\n    height: 479px;\n    font-size: 13px;\n    box-sizing: border-box;\n    background: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    \n    line-height: 1.42;\n    outline: none;\n    overflow-y: auto;\n    padding: 12px 15px;\n    tab-size: 4;\n    -moz-tab-size: 4;\n    text-align: left;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    font-family: Helvetica, Arial, sans-serif;\n\n    p {\n        margin: 0px;\n    }\n`;\n\nconst UtilBlock = styled.div`\n    display: flex;\n    justify-content: flex-end;\n    width: 90%;\n    height: 30px;\n    margin-top: 5px;\n`;\n\nconst ButtonBlock = styled.button`\n    width: 100px;\n    height: 100%;\n    background: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding: 0px;\n    border: none;\n    margin: 0px;\n    outline: none;\n    cursor: pointer;\n\n    & + & {\n        margin-left: 5px;\n    }\n\n    &:hover {\n        background: rgba(0, 0, 0, 0.05);\n    }\n\n    &:active {\n        background: rgba(0, 0, 0, 0.1);\n    }\n`;\n\nconst Post = ({ post, auth, onUpdate, onDelete }) => {\n    let date = null;\n    if(post) {\n        const createdAt = new Date(Date.parse(post.createdAt));\n        date = createdAt.getFullYear() + \" / \" + createdAt.getMonth() + \" / \" + createdAt.getDate();\n    }\n    \n    return (\n        <PostBlock>\n            <PostTitleFrameBlock>\n                <PostTitleBlock>\n                    {post && post.title}\n                </PostTitleBlock>\n                <PostAuthFrameBlock>\n                    <PostAuthBlock>\n                        {post && post.user.username}\n                    </PostAuthBlock>\n                    <PostDateBlock>\n                        {date}\n                    </PostDateBlock>\n                </PostAuthFrameBlock>\n            </PostTitleFrameBlock>\n            <PostContentBlock dangerouslySetInnerHTML={{ __html: (post ? post.content : null) }} />\n            <UtilBlock>\n                <ButtonBlock\n                    disabled={!auth || !post || auth._id !== post.user._id}\n                    onClick={() => onUpdate(post)}\n                >\n                    Update\n                </ButtonBlock>\n                <ButtonBlock\n                    disabled={!auth || !post || auth._id !== post.user._id}\n                    onClick={() => onDelete(post._id)}\n                >\n                    Delete\n                </ButtonBlock>\n            </UtilBlock>\n        </PostBlock>\n    )\n};\n\nexport default React.memo(Post);","import React, { useEffect, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport Post from '../../components/community/Post';\nimport { readPostThunk, clearFormAll, setStatus, deletePostThunk, setForm } from '../../modules/community';\n\nconst PostContainer = () => {\n    const { id, post, auth } = useSelector(({ community, sessionAuth }) => ({\n        id: community.post.id,\n        post: community.post.post,\n        auth: sessionAuth.auth,\n    }));\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(readPostThunk({\n            id,\n        }))\n    }, [dispatch, id]);\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearFormAll({\n                status: 'post',\n            }));\n        };\n    }, [dispatch]);\n\n    const onUpdate = useCallback(async (post) => {\n        dispatch(setForm({\n            status: 'write',\n            key: 'title',\n            value: post.title,\n        }));\n        dispatch(setForm({\n            status: 'write',\n            key: 'content',\n            value: post.content,\n        }));\n        dispatch(setForm({\n            status: 'write',\n            key: 'modify',\n            value: post._id,\n        }));\n        dispatch(setStatus({\n            status: 'write',\n        }));\n    }, [dispatch]);\n\n    const onDelete = useCallback(async (id) => {\n        await dispatch(deletePostThunk({ id }));\n        dispatch(setStatus({\n            status: 'list',\n        }));\n    }, [dispatch]);\n\n    return (\n        <Post \n            post={post}\n            auth={auth}\n            onUpdate={onUpdate}\n            onDelete={onDelete}\n        />\n    )\n};\n\nexport default PostContainer;","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { FaPencilAlt } from 'react-icons/fa';\nimport { TiArrowBack } from 'react-icons/ti';\nimport { IconContext } from 'react-icons';\n\nimport ListContainer from '../../containers/community/ListContainer';\nimport WriteContainer from '../../containers/community/WriteContainer';\nimport PostContainer from '../../containers/community/PostContainer';\n\nconst CommunityLayoutFrameBlock = styled.div`\n    width: 100%;\n    height: 800px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst CommunityLayoutBlock = styled.div`\n    width: 1200px;\n    height: 720px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background: rgba(255, 255, 255, 0.5);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n`;\n\nconst HeaderBlock = styled.div`\n    position: relative;\n    display: flex;\n    margin-top: 20px;\n    width: 500px;\n    height: 30px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    background: white;\n`;\n\nconst SubTitleBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 125px;\n    height: 30px;\n    font-size: 15px;\n    cursor: pointer;\n`;\n\nconst MovingUnderline = styled.div`\n    position: absolute;\n    top: 30px;\n    left: 0px;\n    width: 125px;\n    height: 2px;\n    background: black;\n    transition: 0.5s;\n    left: ${props => (props.checkedIndex * 125) + 'px'};\n`;\n\nconst ContentBlock = styled.div`\n    display: flex;\n    justify-content: center;\n    width: 1000px;\n    height: 560px;\n    margin-top: 5px;\n    /* box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12); */\n    /* background: white; */\n    background: transparent;\n`;\n\nconst TabBlock = styled.div`\n    width: 900px;\n    margin-top: 30px;\n    height: 30px;\n    display: flex;\n    justify-content: flex-start;\n\n    ${props => props.status === 'list' && css`\n        justify-content: flex-end;\n    `}   \n`;\n\nconst WriteEventBlock = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: rgba(0, 0, 0, 0.4);\n    cursor: pointer;\n\n    &:hover {\n        color: rgba(0, 0, 0, 0.8);\n    }\n`;\n\nconst WriteBlock = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: 10px;\n    font-size: 14px;\n    height: 30px; \n`;\n\nconst BackEventBlock = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: rgba(0, 0, 0, 0.4);\n    cursor: pointer;\n\n    &:hover {\n        color: rgba(0, 0, 0, 0.8);\n    }\n`;\n\nconst BackBlock = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: 10px;\n    font-size: 14px;\n    height: 30px;\n`;\n\nconst CommunityLayout = ({\n    menu,\n    auth,\n    status,\n    onClick,\n    onCreatePost,\n    onGoBack,\n}) => {\n    const checkedIndex = menu.findIndex(criteria => criteria.checked);\n\n    return (\n        <CommunityLayoutFrameBlock>\n            <CommunityLayoutBlock>\n                <HeaderBlock>\n                    {menu.map((criteria, index) => (\n                        <SubTitleBlock\n                            checked={criteria.checked}\n                            onClick={() => onClick(index)}\n                        >\n                            {criteria.name}\n                        </SubTitleBlock>\n                    ))}\n                    <MovingUnderline checkedIndex={checkedIndex} />\n                </HeaderBlock>\n                <TabBlock status={status}>\n                    {status === 'list' && auth && checkedIndex !== 0 && checkedIndex !== 3 && (\n                        <WriteEventBlock onClick={onCreatePost}>\n                            <IconContext.Provider value={{ style: { width: '20px', height: '20px' }}}>\n                                <FaPencilAlt />\n                            </IconContext.Provider>\n                            <WriteBlock>\n                                New Post\n                            </WriteBlock>\n                        </WriteEventBlock>\n                    )}\n                    {(status === 'post' || status === 'write') && (\n                        <BackEventBlock onClick={onGoBack}>\n                            <IconContext.Provider value={{ style: { width: '25px', height: '25px' } }}>\n                                <TiArrowBack />\n                            </IconContext.Provider>\n                            <BackBlock>\n                                Go Back\n                            </BackBlock>\n                        </BackEventBlock>\n                    )}\n                </TabBlock>\n                <ContentBlock>\n                    {status && status === 'list' && <ListContainer />}\n                    {status && status === 'write' && <WriteContainer />}\n                    {status && status === 'post' && <PostContainer />}\n                </ContentBlock>\n            </CommunityLayoutBlock>\n        </CommunityLayoutFrameBlock>\n    )\n};\n\nexport default React.memo(CommunityLayout);","import React, { useCallback, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport CommunityLayout from '../../components/community/CommunityLayout';\nimport { setMenuThunk, setStatus, clearForm, clearAll } from '../../modules/community';\n\nconst CommunityLayoutContainer = () => {\n    const { menu, status, auth } = useSelector(({ community, sessionAuth }) => ({\n        menu: community.menu,\n        status: community.status,\n        auth: sessionAuth.auth,\n    }));\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        return () => {\n            dispatch(clearAll());\n        }\n    }, [dispatch]);\n\n    const onClick = useCallback(index => {\n        const checkedIndex = menu.findIndex(criteria => criteria.checked);\n        if(index === checkedIndex) return;\n\n        dispatch(setMenuThunk(index));\n\n        //  clear page before rendering\n        dispatch(clearForm({\n            status: 'list',\n            key: 'page',\n        }));\n        \n        dispatch(setStatus({\n            status: 'list',\n        }));\n    }, [dispatch, menu]);\n\n    const onCreatePost = useCallback(() => {\n        dispatch(setStatus({\n            status: 'write'\n        }));\n    }, [dispatch]);\n\n    const onGoBack = useCallback(() => {\n        dispatch(setStatus({\n            status: 'list'\n        }));\n    }, [dispatch]);\n\n    return (\n        <CommunityLayout\n            menu={menu}\n            auth={auth}\n            status={status}\n            onClick={onClick}\n            onCreatePost={onCreatePost}\n            onGoBack={onGoBack}\n        />\n    );\n};\n\nexport default CommunityLayoutContainer;","import React from 'react';\nimport { Helmet } from 'react-helmet-async';\n\nimport HeaderContainer from '../containers/common/HeaderContainer';\nimport CommunityLayoutContainer from '../containers/community/CommunityLayoutContainer';\nimport FooterContainer from '../containers/common/FooterContainer';\n\nconst CommunityPage = () => {\n\n    return (\n        <>\n            <Helmet>\n                <title>Community • Chesssup.com</title>\n            </Helmet>\n            <HeaderContainer />\n            <CommunityLayoutContainer />\n            <FooterContainer />\n        </>\n    )\n};\n\nexport default CommunityPage;","import React, { useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport BillBoardContainer from '../containers/billBoard/BillBoardContainer';\n\nconst BillBoardPage = ({ history, match }) => {\n    useEffect(() => {\n        if(!match.params.id) {\n            history.push('/');\n        }\n    }, [history, match]);\n\n    if(!match.params.id) return null;\n    const { id } = match.params;\n    if(!id) return null;\n\n    return (\n        <BillBoardContainer roomKey={id}/>\n    )\n};\n\nexport default withRouter(BillBoardPage);","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { Helmet } from 'react-helmet-async';\n\nimport MainPage from './pages/MainPage';\nimport LoginPage from './pages/LoginPage';\nimport RegisterPage from './pages/RegisterPage';\nimport GamePage from './pages/GamePage';\nimport GamePlayPage from './pages/GamePlayPage';\nimport CommunityPage from './pages/CommunityPage';\nimport BillBoardPage from './pages/BillBoardPage';\n\nconst ErrorPageDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 200px;\n  font-size: 50px;\n`;\n\n\nconst App = () => {\n  return (\n    <>\n      <Helmet>\n        <title>Chesssup.com</title>\n      </Helmet>\n      <Switch>\n        <Route component={MainPage} path='/' exact />\n        <Route component={LoginPage} path='/login' exact />\n        <Route component={RegisterPage} path='/register' exact />\n        <Route component={GamePage} path='/game' exact />\n        <Route component={GamePlayPage} path='/game/:id' exact />\n        <Route component={CommunityPage} path='/community' exact />\n        <Route component={BillBoardPage} path='/billBoard/:id' exact />\n        <Route \n          render={({ location }) => (\n            <ErrorPageDiv>\n              <h1>404 Error</h1>\n              <p>요청한 페이지를 찾을 수 없습니다.</p>\n            </ErrorPageDiv>\n          )}\n          />\n      </Switch>\n    </>\n  )\n}\n\nexport default App;\n","import { combineReducers } from 'redux';\nimport { all } from 'redux-saga/effects';\nimport game, { gameSaga } from './game';\nimport games, { gamesSaga } from './games';\nimport sessionAuth, { sessionAuthSaga } from './sessionAuth';\nimport socketAuth, { socketAuthSaga } from './socketAuth';\nimport canvas, { canvasSaga } from './canvas';\nimport chat, { chatSaga } from './chat';\nimport record, { recordSaga }  from './record';\nimport create from './create';\nimport ranking, { rankingSaga } from './ranking';\nimport billBoard, { billBoardSaga } from './billBoard';\nimport community from './community';\n\n\nconst rootReducer = combineReducers({\n    sessionAuth,\n    socketAuth,\n    game,\n    games,\n    canvas,\n    chat,\n    record,\n    create,\n    ranking,\n    billBoard,\n    community,\n})\n\n\nexport function* rootSaga() {\n    yield all([\n        sessionAuthSaga(),\n        socketAuthSaga(),\n        gameSaga(),\n        gamesSaga(),\n        canvasSaga(),\n        chatSaga(),\n        recordSaga(),\n        rankingSaga(),\n        billBoardSaga(),\n    ]);\n};\n\nexport default rootReducer;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst FixSizeBlock = styled.div`\n    width: 1680px;\n`;\n\nconst FixSize = props => {\n    return (\n        <FixSizeBlock {...props} />\n    )\n};\n\nexport default FixSize;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport ReduxThunk from 'redux-thunk';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport createSagaMiddleware from 'redux-saga';\nimport { HelmetProvider } from 'react-helmet-async';\n\nimport './index.css';\nimport App from './App';\nimport rootReducer, { rootSaga } from './modules';\nimport * as serviceWorker from './serviceWorker';\nimport { getLocalStorage, clearLocalStorage } from './lib/storage/storage';\nimport { checkThunk } from './modules/sessionAuth';\nimport FixSize from './components/common/FixSize';\n\nconst sagaMiddleware = createSagaMiddleware();\nconst store = createStore(\n    rootReducer,\n    composeWithDevTools(applyMiddleware(ReduxThunk, sagaMiddleware))\n)\n\nsagaMiddleware.run(rootSaga);\n\n(async() => {\n    const auth = getLocalStorage('auth');\n    if(!auth) {\n        return;\n    }\n\n    try {\n        const checkedAuth = await store.dispatch(checkThunk());\n        if(checkedAuth.username !== auth.username) {\n            clearLocalStorage();\n            //  eslint-disable-next-line\n            throw 'Auth mismatch';\n        }\n    } catch(e) {\n        console.dir('Check auth failed');\n    }\n})();\n\nReactDOM.render(\n    <Provider store={store}>\n        <BrowserRouter>\n            <HelmetProvider>\n                <FixSize>\n                    <App />\n                </FixSize>\n            </HelmetProvider>\n        </BrowserRouter>\n    </Provider>\n    ,document.getElementById('root')\n);\n\nserviceWorker.unregister();","module.exports = __webpack_public_path__ + \"static/media/spinner.390a617d.svg\";"],"sourceRoot":""}