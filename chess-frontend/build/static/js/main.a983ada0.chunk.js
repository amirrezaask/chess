(this["webpackJsonpchess-frontend"]=this["webpackJsonpchess-frontend"]||[]).push([[0],{195:function(e,n,t){e.exports=t(363)},205:function(e,n,t){},233:function(e,n){},262:function(e,n){},264:function(e,n){},296:function(e,n){},297:function(e,n){},363:function(e,n,t){"use strict";t.r(n);var r=t(7),a=t.n(r),c=t(1),o=t.n(c),u=t(78),i=t.n(u),l=t(32),s=t(12),b=t(45),f=t(182),d=t(183),p=t(81),m=t(30),v=(t(205),t(2)),h=t(48),x=t(3),g=t(17),O=t(24),j=t(20);function E(){var e=Object(v.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    height: 90%;\n    overflow-y: scroll;\n    background-color: rgb(0,0,0, 0.2);\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.4);\n"]);return E=function(){return e},e}function y(){var e=Object(v.a)(["\n    \n"]);return y=function(){return e},e}function k(){var e=Object(v.a)(["\n    \n"]);return k=function(){return e},e}function w(){var e=Object(v.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 24%;\n    height: 300px;\n    background-color: rgb(0,0,0, 0.4);\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.6);\n    cursor: pointer;\n    \n    & + & {\n        margin-left: 13%;\n    }\n\n    &:active {\n        background-color: rgb(0,0,0, 0.6);\n        box-shadow: 5px 5px 5px rgb(0,0,0,0.8);\n    }\n"]);return w=function(){return e},e}function C(){var e=Object(v.a)(["\n    display: flex;\n    width: 85%;\n\n    & + & {\n        margin-top: 50px;\n    }\n\n    &:first-child {\n        margin-top: 50px;\n    }\n\n    &:last-child {\n        margin-bottom: 50px;\n    }\n"]);return C=function(){return e},e}var I=x.b.div(C()),S=x.b.div(w()),A=x.b.div(k()),T=x.b.div(y()),N=o.a.memo((function(e){var n=e.game,t=Object(O.a)(e,["game"]);return console.dir("game~"),o.a.createElement(S,t,o.a.createElement(A,null,n.name),o.a.createElement(T,null,n.participant))})),L=x.b.div(E()),_=o.a.memo((function(e){var n=e.games,t=e.onGameClick;if(!n)return o.a.createElement(L,null);for(var r=Object(j.a)(n),a=[],c=Math.floor(r.length/3),u=0;u<=c;++u)a.push(o.a.createElement(I,{key:"GridRowBlock_".concat(u)},r.splice(0,3).map((function(e){return o.a.createElement(N,{key:"GridBox".concat(e.name),game:e,onClick:function(n){return t(n,e.key)}})}))));return o.a.createElement(L,null,a)})),D=function(e){return o.a.createElement(_,e)};function F(){var e=Object(v.a)(["\n    ","\n    margin-left: 20px;\n"]);return F=function(){return e},e}function R(){var e=Object(v.a)(["\n    ","\n"]);return R=function(){return e},e}function z(){var e=Object(v.a)(["\n    outline: none;\n    background-color: rgb(0,0,0, 0.2);\n    padding: 0px;\n    border: none;\n    width: 200px;\n    height: 30px;\n    cursor: pointer;\n    box-shadow: 5px 5px 5px rgb(0,0,0, 0.6);\n\n    &:hover {\n        background-color: rgb(0,0,0, 0.8);\n        color: white;\n        box-shadow: 5px 5px 5px rgb(0,0,0, 0.2);\n    }\n"]);return z=function(){return e},e}function P(){var e=Object(v.a)(["\n    display: flex;\n"]);return P=function(){return e},e}var U=x.b.form(P()),V=Object(x.a)(z()),G=x.b.button(R(),V),M=x.b.button(F(),V),K=o.a.memo((function(e){var n=e.onConfirmClick,t=e.onCancelClick;return o.a.createElement(U,{onSubmit:n},o.a.createElement(G,{type:"submit"},"Create Game"),o.a.createElement(M,{type:"button",onClick:t},"Cancel"))})),Z=t(6),B=t(5),q=t(365),W=t(364),H=t(10),J=t(188),X=t.n(J),Q=a.a.mark(Y),$=a.a.mark(ee);function Y(e){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(p.b)((function(n){return e.on("connect",(function(t){n({type:"socket",socket:e.id})})),e.on("message",(function(e){n(e)})),function(){e.close()}})));case 1:case"end":return n.stop()}}),Q)}function ee(e){var n,t,r,c,o,u,i,l,s;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.url,r=e.initializeSocket,c=e.initializeValue,o=e.changeValue,u=e.updateValue,i=e.query,console.dir(t),console.dir(i),a.prev=3,l=X()(t,{query:i,reconnection:!1,secure:!0}),a.next=7,Object(H.b)(Y,l);case 7:n=a.sent;case 8:return a.next=11,Object(H.g)(n);case 11:s=a.sent,a.t0=s.type,a.next="socket"===a.t0?15:"initialize"===a.t0?18:"change"===a.t0?21:"update"===a.t0?24:27;break;case 15:return a.next=17,Object(H.f)(r(s));case 17:return a.abrupt("break",28);case 18:return a.next=20,Object(H.f)(c(s));case 20:return a.abrupt("break",28);case 21:return a.next=23,Object(H.f)(o(s));case 23:return a.abrupt("break",28);case 24:return a.next=26,Object(H.f)(u(s));case 26:return a.abrupt("break",28);case 27:console.dir(s);case 28:a.next=8;break;case 30:a.next=35;break;case 32:a.prev=32,a.t1=a.catch(3),console.dir(a.t1);case 35:return a.prev=35,a.next=38,Object(H.d)();case 38:if(!a.sent){a.next=40;break}n.close();case 40:return a.finish(35);case 41:case"end":return a.stop()}}),$,null,[[3,32,35,41]])}var ne=function(e){return[e,"".concat(e,"_SUCCESS"),"".concat(e,"_FAILURE")]};function te(e,n){var t="".concat(e,"_SUCCESS"),r="".concat(e,"_FAILURE");return function(e){return function(c){var o;return a.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,a.a.awrap(n(e));case 3:return o=u.sent,c({type:t,payload:o.data}),u.abrupt("return",o.data);case 8:throw u.prev=8,u.t0=u.catch(0),console.dir(u.t0),c({type:r,payload:u.t0,error:!0}),u.t0;case 13:case"end":return u.stop()}}),null,null,[[0,8]])}}}var re,ae=t(39),ce=t.n(ae),oe=a.a.mark(Oe),ue=a.a.mark(je),ie="games/CONNECT_WEBSOCKET",le="games/DISCONNECT_WEBSOCKET",se=Object(q.a)(ie),be=Object(q.a)(le),fe=Object(q.a)("games/INITIALIZE_SOCKET",(function(e){return e})),de=Object(q.a)("games/INITIALIZE_VALUE",(function(e){return e})),pe=ne("games/CREATE_GAME"),me=Object(g.a)(pe,3),ve=me[0],he=me[1],xe=me[2],ge=te(ve,(function(){return ce.a.post("/api/games")}));function Oe(){var e;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(H.e)(ee,{url:"/games",initializeSocket:fe,initializeValue:de});case 2:return e=n.sent,n.next=5,Object(H.g)(le);case 5:return n.next=7,Object(H.c)(e);case 7:case"end":return n.stop()}}),oe)}function je(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.h)(ie,Oe);case 2:case"end":return e.stop()}}),ue)}var Ee=Object(W.a)((re={},Object(Z.a)(re,"games/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(B.a)({},e,{socket:t})})),Object(Z.a)(re,"games/INITIALIZE_VALUE",(function(e,n){var t=n.payload.games;return Object(B.a)({},e,{games:t})})),Object(Z.a)(re,he,(function(e){return e})),Object(Z.a)(re,xe,(function(e,n){var t=n.payload;return Object(B.a)({},e,{error:t})})),re),{socket:null,games:null,error:null}),ye=Object(h.f)((function(e){var n=e.history,t=e.onCancelClick,r=Object(O.a)(e,["history","onCancelClick"]),u=Object(s.b)(),i=Object(c.useCallback)((function(e){e.preventDefault(),function(){var e;a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return u(be()),r.next=3,a.a.awrap(u(ge()));case 3:e=r.sent,t(),n.push("/game/".concat(e));case 6:case"end":return r.stop()}}))}()}),[u,n,t]);return o.a.createElement(K,Object.assign({},r,{onConfirmClick:i,onCancelClick:t}))}));function ke(){var e=Object(v.a)(["\n    position: fixed;\n    top: 20%;\n    left: 20%;\n    height: 60%;\n    width: 60%;\n    padding: 2%;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    justify-content: space-between;\n    background-color: rgb(245,245,245, 0.8);\n    box-shadow: 10px 10px 10px;\n    z-index: 1000;\n"]);return ke=function(){return e},e}function we(){var e=Object(v.a)(["\n        opacity: 1;\n        visibility: visible;\n    "]);return we=function(){return e},e}function Ce(){var e=Object(v.a)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgb(0,0,0, 0.5);\n    z-index: 100;\n    opacity: 0;\n    visibility: hidden;\n    transition: 1s;\n\n    ","\n"]);return Ce=function(){return e},e}var Ie=x.b.div(Ce(),(function(e){return e.open&&Object(x.a)(we())})),Se=x.b.div(ke()),Ae=o.a.memo((function(e){var n=e.onBackgroundClick,t=e.onContentClick,r=e.onGameClick,a=e.games,c=Object(O.a)(e,["onBackgroundClick","onContentClick","onGameClick","games"]);return console.dir("game mooooodal"),o.a.createElement(Ie,Object.assign({},c,{onClick:n}),o.a.createElement(Se,{onClick:t},o.a.createElement(D,{games:a,onGameClick:r}),o.a.createElement(ye,{onCancelClick:n})))})),Te=Object(h.f)((function(e){var n=e.history,t=e.openModal,r=e.setOpenModal,a=Object(O.a)(e,["history","openModal","setOpenModal"]),u=Object(c.useState)(!1),i=Object(g.a)(u,2),l=i[0],b=i[1],f=Object(s.c)((function(e){return{games:e.games.games}})).games,d=Object(s.b)(),p=Object(c.useCallback)((function(e){b(!1),r(!1),d(be())}),[d,r]),m=Object(c.useCallback)((function(e){e.stopPropagation()}),[]),v=Object(c.useCallback)((function(e,t){b(!1),r(!1),d(be()),n.push("/game/".concat(t))}),[d,n,r]);return Object(c.useEffect)((function(){b(t)}),[t]),console.dir("gamesmodal~~"),Object(c.useEffect)((function(){return function(){d(be())}}),[d]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Ae,Object.assign({},a,{games:f,open:l,onBackgroundClick:p,onContentClick:m,onGameClick:v})))}));function Ne(){var e=Object(v.a)(["\n    position: absolute;\n    top: 10%;\n    left: 0%;\n    width: 100%;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.4);\n"]);return Ne=function(){return e},e}function Le(){var e=Object(v.a)(["\n    display: flex;\n    align-items: center;\n    margin-right: 8%;\n"]);return Le=function(){return e},e}function _e(){var e=Object(v.a)(["\n        display: none;\n        visibility: hidden;\n    "]);return _e=function(){return e},e}function De(){var e=Object(v.a)(["\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n    text-decoration: none;\n    \n    ",";\n"]);return De=function(){return e},e}function Fe(){var e=Object(v.a)(["\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n"]);return Fe=function(){return e},e}function Re(){var e=Object(v.a)(["\n    margin-left: 30px;\n    display: flex;\n"]);return Re=function(){return e},e}function ze(){var e=Object(v.a)(["\n    display: flex;\n    align-items: center;\n    margin-left: 8%;\n"]);return ze=function(){return e},e}function Pe(){var e=Object(v.a)(["\n    ","\n    color: rgb(0, 0, 0, 0.4);\n"]);return Pe=function(){return e},e}function Ue(){var e=Object(v.a)(["\n    ","\n    color: rgb(0, 0, 0, 0.6);\n"]);return Ue=function(){return e},e}function Ve(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n    height: 40px;\n    background-color: transparent;\n    cursor: pointer;\n    font-size: 30px;\n    text-decoration: none;\n    text-shadow: 2px 2px 2px rgb(0, 0, 0, 0.2);\n    font-style: italic;\n"]);return Ve=function(){return e},e}function Ge(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 50px;\n"]);return Ge=function(){return e},e}var Me,Ke=x.b.div(Ge()),Ze=Object(x.a)(Ve()),Be=Object(x.b)(l.b)(Ue(),Ze),qe=Object(x.b)(l.b)(Pe(),Ze),We=x.b.div(ze()),He=x.b.div(Re()),Je=x.b.div(Fe()),Xe=Object(x.b)(l.b)(De(),(function(e){return e.hidden&&Object(x.a)(_e())})),Qe=function(e){return e.to?o.a.createElement(Xe,e,e.children):o.a.createElement(Je,e,e.children)},$e=x.b.div(Le()),Ye=x.b.div(Ne()),en=o.a.memo((function(e){var n,t=e.onToggle,r=e.openModal,a=e.setOpenModal,c=e.onRecord,u=e.onLogout,i=e.onLogin,l=e.session,s=e.auth;return l&&(n=l.nickname),s&&(n=s.username),o.a.createElement(o.a.Fragment,null,o.a.createElement(Ke,null,o.a.createElement(We,null,o.a.createElement(Be,{to:"/"},"chessup"),o.a.createElement(qe,{to:"/"},".com"),o.a.createElement(He,null,o.a.createElement(Qe,{onClick:t},"Quickplay"),o.a.createElement(Qe,{to:"/game"},"Play"),o.a.createElement(Qe,{to:"/community"},"Community"))),o.a.createElement($e,null,o.a.createElement(Qe,{onClick:c},"Search"),s?o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe,{onClick:c},"Setting"),o.a.createElement(Qe,{onClick:c},"Record"),o.a.createElement(Qe,{onClick:u},"Logout",o.a.createElement(Ye,null,n))):o.a.createElement(Qe,{onClick:i},"Login",o.a.createElement(Ye,null,n)))),o.a.createElement(Te,{openModal:r,setOpenModal:a}))})),nn=t(190),tn=t(191),rn=function(e){var n=Object(tn.a)({},e);try{Object.keys(n).forEach((function(e){localStorage.setItem(e,JSON.stringify(n[e]))}))}catch(t){console.dir("Set localStorage failed"),console.dir(t)}},an=function(e){try{return JSON.parse(localStorage.getItem(e))}catch(n){console.dir("Get localStorage failed"),console.dir(n)}},cn=function(e){try{localStorage.removeItem(e)}catch(n){console.dir("Remove localStorage failed"),console.dir(n)}},on=function(){try{localStorage.clear()}catch(e){console.dir("Clear localStorage failed"),console.dir(e)}},un=a.a.mark(Jn),ln=a.a.mark(Xn),sn="auth/CONNECT_WEBSOCKET",bn="auth/DISCONNECT_WEBSOCKET",fn=Object(q.a)(sn),dn=Object(q.a)(bn),pn=Object(q.a)("auth/INITIALIZE_SOCKET",(function(e){return e})),mn=Object(q.a)("auth/INITIALIZE_VALUE",(function(e){return e})),vn=ne("auth/SET_SESSION"),hn=Object(g.a)(vn,3),xn=hn[0],gn=hn[1],On=hn[2],jn=te(xn,(function(){return ce.a.get("/api/auth/getSession")})),En=ne("auth/LOGIN"),yn=Object(g.a)(En,3),kn=yn[0],wn=yn[1],Cn=yn[2],In=ne("auth/REGISTER"),Sn=Object(g.a)(In,3),An=Sn[0],Tn=Sn[1],Nn=Sn[2],Ln=ne("auth/LOGOUT"),_n=Object(g.a)(Ln,3),Dn=_n[0],Fn=_n[1],Rn=_n[2],zn=ne("auth/CHECK"),Pn=Object(g.a)(zn,3),Un=Pn[0],Vn=Pn[1],Gn=Pn[2],Mn=te(kn,(function(e){var n=e.username,t=e.password;return ce.a.post("/api/auth/login",{username:n,password:t})})),Kn=te(An,(function(e){var n=e.username,t=e.password;return ce.a.post("/api/auth/register",{username:n,password:t})})),Zn=te(Dn,(function(){return ce.a.post("/api/auth/logout")})),Bn=te(Un,(function(){return ce.a.get("/api/auth/check")})),qn=Object(q.a)("auth/CHANGE_FIELD",(function(e){return e})),Wn=Object(q.a)("auth/CLEAR_FIELD",(function(e){return e})),Hn=Object(q.a)("auth/CLEAR_SPECIFIC_FIELD",(function(e){return e}));function Jn(e){var n,t,r;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.payload,t="key=".concat(n),a.next=4,Object(H.e)(ee,{url:"/auth",initializeSocket:pn,initializeValue:mn,query:t});case 4:return r=a.sent,a.next=7,Object(H.g)(bn);case 7:return a.next=9,Object(H.c)(r);case 9:case"end":return a.stop()}}),un)}function Xn(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.h)(sn,Jn);case 2:case"end":return e.stop()}}),ln)}var Qn={socket:null,tempAuth:null,session:null,error:null,auth:null,authError:null,login:{username:"",password:""},register:{username:"",password:"",passwordConfirm:""}},$n=Object(W.a)((Me={},Object(Z.a)(Me,"auth/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(B.a)({},e,{socket:t})})),Object(Z.a)(Me,"auth/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(O.a)(t,["type"]));return Object(B.a)({},e,{tempAuth:Object(B.a)({},r)})})),Object(Z.a)(Me,gn,(function(e,n){var t=n.payload;return Object(B.a)({},e,{session:t})})),Object(Z.a)(Me,On,(function(e,n){var t=n.payload;return Object(B.a)({},e,{session:null,error:t})})),Object(Z.a)(Me,"auth/CHANGE_FIELD",(function(e,n){var t=n.payload,r=t.form,a=t.key,c=t.value;return Object(nn.a)(e,(function(e){e[r][a]=c}))})),Object(Z.a)(Me,"auth/CLEAR_FIELD",(function(e,n){var t,r=n.payload.form;return Object(B.a)({},e,(t={},Object(Z.a)(t,r,Qn[r]),Object(Z.a)(t,"authError",Qn.authError),t))})),Object(Z.a)(Me,"auth/CLEAR_SPECIFIC_FIELD",(function(e,n){var t,r=n.payload,a=r.form,c=r.key;return Object(B.a)({},e,(t={},Object(Z.a)(t,a,Object(B.a)({},e[a],Object(Z.a)({},c,Qn[a][c]))),Object(Z.a)(t,"authError",Qn.authError),t))})),Object(Z.a)(Me,wn,(function(e,n){var t=n.payload;return Object(B.a)({},e,{auth:t,authError:null})})),Object(Z.a)(Me,Cn,(function(e,n){var t=n.payload;return Object(B.a)({},e,{auth:null,authError:t})})),Object(Z.a)(Me,Tn,(function(e,n){var t=n.payload;return Object(B.a)({},e,{auth:t,authError:null})})),Object(Z.a)(Me,Nn,(function(e,n){var t=n.payload;return Object(B.a)({},e,{auth:null,authError:t})})),Object(Z.a)(Me,Fn,(function(e){return Object(B.a)({},e,{auth:null,authError:null})})),Object(Z.a)(Me,Rn,(function(e,n){var t=n.payload;return Object(B.a)({},e,{auth:null,authError:t})})),Object(Z.a)(Me,Vn,(function(e,n){var t=n.payload;return Object(B.a)({},e,{auth:t,authError:null})})),Object(Z.a)(Me,Gn,(function(e,n){var t=n.payload;return Object(B.a)({},e,{auth:null,authError:t})})),Me),Qn),Yn=Object(h.f)((function(e){var n=e.history,t=Object(s.c)((function(e){var n=e.auth;return{session:n.session,auth:n.auth}})),r=t.session,u=t.auth,i=Object(s.b)(),l=Object(c.useState)(!1),b=Object(g.a)(l,2),f=b[0],d=b[1],p=Object(c.useCallback)((function(){d(!0),i(se())}),[i]),m=Object(c.useCallback)((function(){i((function(e,n){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.a.awrap(e(Zn()));case 3:cn("auth"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.dir("Logout failed");case 9:case"end":return n.stop()}}),null,null,[[0,6]])}))}),[i]),v=Object(c.useCallback)((function(){alert("onRecord")}),[]),h=Object(c.useCallback)((function(){i(Wn({form:"login"})),n.push("/login")}),[i,n]);return o.a.createElement(en,{onToggle:p,openModal:f,setOpenModal:d,onRecord:v,onLogout:m,onLogin:h,session:r,auth:u})}));function et(e,n){switch(n.type){case"LOADING":return{loading:!0,data:null,error:null};case"SUCCESS":return{loading:!1,data:n.data,error:null};case"FAILURE":return{loading:!1,data:null,error:n.error};default:throw new Error("Unhandled action type Error")}}var nt=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=Object(c.useReducer)(et,{loading:!1,data:null,error:!1}),r=Object(g.a)(t,2),o=r[0],u=r[1],i=function(){var n;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return u({type:"LOADING"}),t.prev=1,t.next=4,a.a.awrap(e());case 4:n=t.sent,u({type:"SUCCESS",data:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),u({type:"FAILURE",error:t.t0});case 11:case"end":return t.stop()}}),null,null,[[1,8]])};return Object(c.useEffect)((function(){i()}),n),[o,i]};function tt(){var e=Object(v.a)(["\n    width: 100%;\n    height: 800px;\n"]);return tt=function(){return e},e}var rt=x.b.div(tt()),at=function(){return o.a.createElement(rt,null)},ct=function(){var e=Object(s.b)(),n=nt((function(){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(e(jn()));case 2:return n.abrupt("return",!0);case 3:case"end":return n.stop()}}))}),[e]),t=Object(g.a)(n,1)[0],r=t.loading,c=t.data,u=t.error;return r?null:u?null:c?o.a.createElement(at,null):null},ot=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Yn,null),o.a.createElement(ct,null))},ut=t(34),it=t.n(ut),lt=t(57),st=t(28),bt=t(0);function ft(){var e=Object(v.a)(["\n    position: absolute;\n    top: 0;\n    left: 48%;\n    width: 50%;\n    display: flex;\n    justify-content: flex-end;\n    font-size: 12px;\n    @keyframes fontOpacity {\n        0%{\n            color: rgb(0, 0, 0, 0);\n        }\n        100%{\n            color: rgb(0, 0, 0, 0.4);\n        }\n      }\n    animation: fontOpacity 1s 1;\n    color: rgb(0, 0, 0, 0.4);\n"]);return ft=function(){return e},e}function dt(){var e=Object(v.a)(["\n    outline: none;\n    border: none;\n    font-size: 10px;\n    color: black;\n    text-decoration: none;\n    cursor: pointer;\n    margin-left: 5px;\n"]);return dt=function(){return e},e}function pt(){var e=Object(v.a)(["\n    color: rgb(0, 0, 0, 0.5);\n    font-size: 10px;\n"]);return pt=function(){return e},e}function mt(){var e=Object(v.a)(["\n    display: flex;\n    align-items: center;\n    margin-top: 10px;\n    height: 40px;\n"]);return mt=function(){return e},e}function vt(){var e=Object(v.a)(["\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    border: none;\n    outline: none;\n    width: 30%;\n    cursor: pointer;\n    height: 40px;\n\n    &:hover, :active {\n        background-color: rgb(0, 0, 0, 0.05);\n    }\n"]);return vt=function(){return e},e}function ht(){var e=Object(v.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 150px;\n"]);return ht=function(){return e},e}function xt(){var e=Object(v.a)(["\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.5);\n    cursor: pointer;\n"]);return xt=function(){return e},e}function gt(){var e=Object(v.a)(["\n    display: flex;\n    align-items: center;\n    height: 100%;\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.5);\n    cursor: pointer;\n    margin-left: 5px;\n"]);return gt=function(){return e},e}function Ot(){var e=Object(v.a)(["\n    height: 100%;\n    outline: none;\n    margin: 0px;\n"]);return Ot=function(){return e},e}function jt(){var e=Object(v.a)(["\n    display: flex;\n    align-content: center;\n    width: 30%;\n    height: 100%;\n"]);return jt=function(){return e},e}function Et(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 10px;\n    width: 60%;\n    height: 20px;\n"]);return Et=function(){return e},e}function yt(){var e=Object(v.a)(["\n    ","\n"]);return yt=function(){return e},e}function kt(){var e=Object(v.a)(["\n    ","\n"]);return kt=function(){return e},e}function wt(){var e=Object(v.a)(["\n    outline: none;\n    border: none;\n    height: 40px;\n    width: 80%;\n    padding-left: 5%;\n"]);return wt=function(){return e},e}function Ct(){var e=Object(v.a)(["\n        animation: blinking 1s 2;\n    "]);return Ct=function(){return e},e}function It(){var e=Object(v.a)(["\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding-left: 1%;\n    width: 60%;\n\n    &+& {\n        margin-top: 10px;\n    }\n\n    @keyframes blinking {\n        0%{\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        }\n        50% {\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.56), 0 3px 1px -2px rgba(0,0,0,0.8), 0 1px 5px 0 rgba(0,0,0,0.48);\n        }\n        100%{\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        }\n      }\n\n    ","\n"]);return It=function(){return e},e}function St(){var e=Object(v.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 150px;\n"]);return St=function(){return e},e}function At(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    font-size: 20px;\n    height: 100px;\n    text-shadow: 2px 2px 2px rgba(0,0,0,0.14);\n"]);return At=function(){return e},e}function Tt(){var e=Object(v.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 30%;\n    height: 400px;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Tt=function(){return e},e}function Nt(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 800px;\n"]);return Nt=function(){return e},e}var Lt=x.b.form(Nt()),_t=x.b.div(Tt()),Dt=x.b.div(At()),Ft=x.b.div(St()),Rt=x.b.div(It(),(function(e){return e.blink&&Object(x.a)(Ct())})),zt=Object(x.a)(wt()),Pt=x.b.input(kt(),zt),Ut=x.b.input(yt(),zt),Vt=x.b.div(Et()),Gt=x.b.div(jt()),Mt=x.b.input(Ot()),Kt=x.b.div(gt()),Zt=x.b.div(xt()),Bt=x.b.div(ht()),qt=x.b.button(vt()),Wt=x.b.div(mt()),Ht=x.b.div(pt()),Jt=x.b.button(dt()),Xt=x.b.div(ft()),Qt=o.a.memo((function(e){var n=e.login,t=e.register,r=e.form,a=e.error,u=e.onSubmit,i=e.onChange,l=e.onRegister,s=Object(c.useRef)({}),b=Object(c.useCallback)((function(e){s.current[e].focus()}),[]);return o.a.createElement(Lt,{autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",onSubmit:u},o.a.createElement(_t,null,o.a.createElement(Dt,null,n?"Sign In":t?"Sign Up":null),o.a.createElement(Ft,null,o.a.createElement(Rt,{onClick:b.bind(null,"username"),blink:a.username,key:"username_".concat(a.count)},o.a.createElement(bt.b.Provider,{value:{style:{width:"20px",height:"20px",cursor:"pointer"}}},o.a.createElement(lt.c,null)),o.a.createElement(Pt,{type:"text",name:"username",placeholder:"Email",onChange:i,value:r.username,ref:function(e){return s.current.username=e}}),o.a.createElement(Xt,null,a.username)),o.a.createElement(Rt,{onClick:b.bind(null,"password"),blink:a.password,key:"password_".concat(a.count)},o.a.createElement(bt.b.Provider,{value:{style:{width:"20px",height:"20px",cursor:"pointer"}}},o.a.createElement(st.g,null)),o.a.createElement(Ut,{type:"password",name:"password",placeholder:"Password",onChange:i,value:r.password,ref:function(e){return s.current.password=e}}),o.a.createElement(Xt,null,a.password)),t?o.a.createElement(Rt,{onClick:b.bind(null,"passwordConfirm"),blink:a.passwordConfirm,key:"passwordConfirm_".concat(a.count)},o.a.createElement(bt.b.Provider,{value:{style:{width:"20px",height:"20px",cursor:"pointer"}}},o.a.createElement(st.g,null)),o.a.createElement(Ut,{type:"password",name:"passwordConfirm",placeholder:"Confirm Password",onChange:i,value:r.passwordConfirm,ref:function(e){return s.current.passwordConfirm=e}}),o.a.createElement(Xt,null,a.passwordConfirm)):null,n?o.a.createElement(Vt,null,o.a.createElement(Gt,null,o.a.createElement(Mt,{type:"checkbox"}),o.a.createElement(Kt,null,"Remember Me")),o.a.createElement(Zt,null,"Forget password?")):null),o.a.createElement(Bt,null,o.a.createElement(qt,{type:"submit"},"Submit"),n?o.a.createElement(Wt,null,o.a.createElement(Ht,null,"Don't have an account?"),o.a.createElement(Jt,{type:"button",onClick:l},"Create")):o.a.createElement(Wt,null,o.a.createElement(Ht,null,"Don't have an account?"),o.a.createElement(Jt,{type:"button"},"Create")))))})),$t=Object(h.f)((function(e){var n=e.history,t=Object(s.c)((function(e){var n=e.auth;return{form:n.login,auth:n.auth,authError:n.authError}})),r=t.form,u=t.auth,i=t.authError,l=Object(s.b)(),b=Object(c.useState)({username:"",password:""}),f=Object(g.a)(b,2),d=f[0],p=f[1],m=Object(c.useCallback)((function(e){var n=e.target,t=n.name,r=n.value;""!==d[t]&&p((function(e){return Object(B.a)({},e,Object(Z.a)({},t,""))})),l(qn({form:"login",key:t,value:r}))}),[l,d]),v=Object(c.useCallback)((function(e){e.preventDefault();var n=r.username,t=r.password,c=Object.keys(r).reduce((function(e,n){return Object(B.a)({},e,Object(Z.a)({},n,!1))}),{});Object.keys(c).filter((function(e){return""===r[e]})).forEach((function(e){c=Object(B.a)({},c,Object(Z.a)({},e,"Required field"))}));var o,u=it.a.object().keys({username:it.a.string().max(80).email({minDomainAtoms:2}).required().error((function(){return{message:"Wrong format"}})),password:it.a.string().min(4).max(16).required().error((function(){return{message:"4 ~ 16 digits"}}))}),i=it.a.validate(r,u,{abortEarly:!1});if(i.error&&i.error.details.forEach((function(e){c[e.path[0]]||(c=Object(B.a)({},c,Object(Z.a)({},e.path[0],e.message)))})),Object.keys(c).filter((function(e){return c[e]})).length>0)return p((function(e){return Object(B.a)({},c,{count:e.count+1})})),void Object.keys(c).forEach((function(e){c[e]&&l(Hn({form:"login",key:e}))}));l((o={username:n,password:t},function(e,n){var t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.a.awrap(e(Mn(o)));case 3:(t=n.sent)&&rn({auth:t}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.dir("Login failed");case 10:case"end":return n.stop()}}),null,null,[[0,7]])})),l(Wn({form:"login"}))}),[l,r]);Object(c.useEffect)((function(){if(i){var e={},t=i.response.data;return Object.keys(t).forEach((function(n){e=Object(B.a)({},e,Object(Z.a)({},n,t[n]))})),void p(e)}u&&n.push("/")}),[n,u,i]),Object(c.useEffect)((function(){return function(){l(Wn({form:"login"}))}}),[l]);var h=Object(c.useCallback)((function(){l(Wn({form:"register"})),n.push("/register")}),[l,n]);return o.a.createElement(Qt,{login:!0,onSubmit:v,onChange:m,form:r,error:d,onRegister:h})})),Yt=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Sign In \u2022 Chesssup.com")),o.a.createElement(Yn,null),o.a.createElement($t,null))},er=Object(h.f)((function(e){var n=e.history,t=Object(s.c)((function(e){var n=e.auth;return{form:n.register,auth:n.auth,authError:n.authError}})),r=t.form,u=t.auth,i=t.authError,l=Object(s.b)(),b=Object(c.useState)({username:"",password:"",passwordConfirm:""}),f=Object(g.a)(b,2),d=f[0],p=f[1],m=Object(c.useCallback)((function(e){var n=e.target,t=n.name,r=n.value;""!==d[t]&&p((function(e){return Object(B.a)({},e,Object(Z.a)({},t,""))})),l(qn({form:"register",key:t,value:r}))}),[l,d]),v=Object(c.useCallback)((function(e){e.preventDefault();var n=r.username,t=r.password,c=Object.keys(r).reduce((function(e,n){return Object(B.a)({},e,Object(Z.a)({},n,!1))}),{});Object.keys(c).filter((function(e){return""===r[e]})).forEach((function(e){c=Object(B.a)({},c,Object(Z.a)({},e,"Required field"))}));var o,u=it.a.object().keys({username:it.a.string().max(80).email({minDomainAtoms:2}).required().error((function(){return{message:"Wrong format"}})),password:it.a.string().min(4).max(16).required().error((function(){return{message:"4 ~ 16 digits"}})),passwordConfirm:it.a.any().valid(it.a.ref("password")).required().error((function(){return{message:"Password mismatch"}}))}),i=it.a.validate(r,u,{abortEarly:!1});if(i.error&&i.error.details.forEach((function(e){c[e.path[0]]||(c=Object(B.a)({},c,Object(Z.a)({},e.path[0],e.message)))})),Object.keys(c).filter((function(e){return c[e]})).length>0)return p((function(e){return Object(B.a)({},c,{count:e.count+1})})),void Object.keys(c).forEach((function(e){c[e]&&l(Hn({form:"register",key:e}))}));l((o={username:n,password:t},function(e,n){var t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.a.awrap(e(Kn(o)));case 3:(t=n.sent)&&rn({auth:t}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.dir("Register failed");case 10:case"end":return n.stop()}}),null,null,[[0,7]])})),l(Wn({form:"register"}))}),[l,r]);return Object(c.useEffect)((function(){if(i){var e={},t=i.response.data;return Object.keys(t).forEach((function(n){e=Object(B.a)({},e,Object(Z.a)({},n,t[n]))})),void p(e)}u&&n.push("/")}),[n,u,i]),Object(c.useEffect)((function(){return function(){l(Wn({form:"register"}))}}),[l]),o.a.createElement(Qt,{register:!0,onSubmit:v,onChange:m,form:r,error:d})})),nr=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Sign Up \u2022 Chesssup.com")),o.a.createElement(Yn,null),o.a.createElement(er,null))},tr=t(115);function rr(){var e=Object(v.a)(["\n    width: 720px;\n    height: 720px;\n    background-color: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return rr=function(){return e},e}var ar=x.b.div(rr()),cr=o.a.memo((function(e){e.games,e.onGameClick;return o.a.createElement(ar,null)})),or=function(){return o.a.createElement(cr,null)},ur=o.a.memo((function(){return o.a.createElement(o.a.Fragment,null)})),ir=function(){return o.a.createElement(ur,null)},lr=o.a.memo((function(){return o.a.createElement(o.a.Fragment,null)})),sr=function(){return o.a.createElement(lr,null)};function br(){var e=Object(v.a)(["\n    height: 800px;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return br=function(){return e},e}var fr=x.b.div(br()),dr=o.a.memo((function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(fr,null,o.a.createElement(ir,null),o.a.createElement(or,null),o.a.createElement(sr,null)))})),pr=function(){var e=Object(s.c)((function(e){return Object(tr.a)(e),{}}));return Object(tr.a)(e),o.a.createElement(dr,null)},mr=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Game \u2022 Chesssup.com")),o.a.createElement(Yn,null),o.a.createElement(pr,null))},vr=t(49),hr={pawn:vr.d,king:vr.b,queen:vr.e,bishop:vr.a,knight:vr.c,rook:vr.f,covered:vr.g},xr={white:{color:"white",style:{filter:"drop-shadow(1px 1px 1px white)",width:"80%",height:"80%"}},black:{color:"black",style:{filter:"drop-shadow(1px 1px 1px black)",width:"80%",height:"80%"}},covered0:{style:{filter:"drop-shadow(1px 1px 1px black)",width:"30%",height:"30%",color:"rgb(130, 151, 105)"}},covered1:{style:{filter:"drop-shadow(1px 1px 1px black)",width:"30%",height:"30%",color:"rgb(100, 111, 64)"}}};function gr(){var e=Object(v.a)(["\n        pointer-events: none;\n    "]);return gr=function(){return e},e}function Or(){var e=Object(v.a)(["\n    ","\n"]);return Or=function(){return e},e}function jr(){var e=Object(v.a)(["\n            background-color: rgb(132, 121, 78);\n        "]);return jr=function(){return e},e}function Er(){var e=Object(v.a)(["\n            background-color: rgb(174, 177, 135);\n        "]);return Er=function(){return e},e}function yr(){var e=Object(v.a)(["\n        background-color: rgb(170, 162, 58);\n    "]);return yr=function(){return e},e}function kr(){var e=Object(v.a)(["\n        background-color: rgb(205, 210, 106);\n    "]);return kr=function(){return e},e}function wr(){var e=Object(v.a)(["\n        background-color: rgb(100, 111, 64);\n    "]);return wr=function(){return e},e}function Cr(){var e=Object(v.a)(["\n        background-color: rgb(130, 151, 105);\n    "]);return Cr=function(){return e},e}function Ir(){var e=Object(v.a)(["\n        background-color: rgb(181, 136, 99);\n    "]);return Ir=function(){return e},e}function Sr(){var e=Object(v.a)(["\n        background-color: rgb(240, 217, 181);\n    "]);return Sr=function(){return e},e}function Ar(){var e=Object(v.a)(["\n    display: flex;\n    cursor: pointer;\n    justify-content: center;\n    align-items: center;\n    width: 90px;\n    height: 90px;\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    &:hover {\n        ","\n\n        ","  \n    }\n"]);return Ar=function(){return e},e}function Tr(){var e=Object(v.a)(["\n    display: flex;\n"]);return Tr=function(){return e},e}function Nr(){var e=Object(v.a)(["\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Nr=function(){return e},e}var Lr,_r=function(e){var n=e.piece,t=e.owner,r=e.covered,a=e.cellNum,c=null;if(r){var u=hr.covered;c=o.a.createElement(bt.b.Provider,{value:xr["covered".concat(a)]},o.a.createElement(u,null))}if(!n||!t)return c;var i=hr[n],l=c?{opacity:.5,filter:"black"===t?"drop-shadow(1px 1px 1px white)":"drop-shadow(1px 1px 1px black)"}:null,s=Object(B.a)({},xr[t],{style:Object(B.a)({},xr[t].style,{},l)});return o.a.createElement(bt.b.Provider,{value:s},o.a.createElement(i,null))},Dr=x.b.div(Nr()),Fr=x.b.div(Tr()),Rr=x.b.div(Ar(),(function(e){return 0===e.cellNum&&Object(x.a)(Sr())}),(function(e){return 1===e.cellNum&&Object(x.a)(Ir())}),(function(e){return 0===e.cellNum&&e.clicked&&Object(x.a)(Cr())}),(function(e){return 1===e.cellNum&&e.clicked&&Object(x.a)(wr())}),(function(e){return 0===e.cellNum&&e.tracked&&Object(x.a)(kr())}),(function(e){return 1===e.cellNum&&e.tracked&&Object(x.a)(yr())}),(function(e){return 0===e.cellNum&&e.covered&&Object(x.a)(Er())}),(function(e){return 1===e.cellNum&&e.covered&&Object(x.a)(jr())})),zr=o.a.memo((function(e){var n=e.row,t=e.y,r=e.onClickCell,a=e.pieceConverter;return o.a.createElement(Fr,null,n.map((function(e,n){return o.a.createElement(Pr,{key:"cell_".concat(t,"_").concat(n),onClick:r.bind(null,{y:t,x:n}),pieceConverter:a,cellNum:(n+t)%2,cell:e})})))}),(function(e,n){return e.row===n.row})),Pr=o.a.memo((function(e){var n=e.cell,t=e.onClick,r=e.cellNum,a=e.pieceConverter;return o.a.createElement(Rr,Object.assign({onClick:t,cellNum:r},n),a({piece:n.piece,owner:n.owner,covered:n.covered,cellNum:r}))}),(function(e,n){return e.cell===n.cell})),Ur=x.b.div(Or(),(function(e){return e.blocked&&Object(x.a)(gr())})),Vr=function(e){var n=e.board,t=e.blocked,r=e.onClick,a=Object(c.useCallback)((function(e){var n=e.y,t=e.x;r(n,t)}),[r]);return o.a.createElement(Ur,{blocked:t},n.map((function(e,n){return o.a.createElement(zr,{key:"row_".concat(n),row:e,y:n,onClickCell:a,pieceConverter:_r})})))},Gr=o.a.memo((function(e){return o.a.createElement(Dr,null,o.a.createElement(Vr,e))})),Mr=[[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}]],Kr=(t(80),{pawn:{type:"onetime",move:[{dy:-1,dx:0,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!n[t][r].piece}},{dy:-2,dx:0,except:function(e){var n=e.board,t=e.y,r=e.x,a=e.owner;return!("black"===a&&1!==t||"white"===a&&6!==t)&&(!("black"===a&&n[2][r].piece||"white"===a&&n[5][r].piece)&&!("black"===a&&n[3][r].piece||"white"===a&&n[4][r].piece))}},{dy:-1,dx:-1,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!!n[t][r].piece}},{dy:-1,dx:1,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!!n[t][r].piece}}]},knight:{type:"onetime",move:[{dy:-2,dx:-1},{dy:-2,dx:1},{dy:2,dx:-1},{dy:2,dx:1},{dy:-1,dx:-2},{dy:-1,dx:2},{dy:1,dx:-2},{dy:1,dx:2}]},king:{type:"onetime",move:[{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:1},{dy:0,dx:-1},{dy:-1,dx:1},{dy:-1,dx:-1},{dy:1,dx:-1},{dy:1,dx:1},{dy:0,dx:2,except:function(e){var n=e.board,t=e.y,r=e.x,a="white"===e.owner?"black":"white";if(!n[t][r].piece||n[t][r].dirty)return!1;if(!n[t][r+3].piece||n[t][r+3].dirty)return!1;if(n[t][r+1].piece||n[t][r+2].piece)return!1;for(var c=Zr(a,n,!0),o=c.length,u=0;u<o;++u){var i=c[u];if(i.dy===t&&(i.dx===r||i.dx===r+1||i.dx===r+2))return!1}return!0}},{dy:0,dx:-2,except:function(e){var n=e.board,t=e.y,r=e.x,a="white"===e.owner?"black":"white";if(!n[t][r].piece||n[t][r].dirty)return!1;if(!n[t][r-4].piece||n[t][r-4].dirty)return!1;if(n[t][r-1].piece||n[t][r-2].piece||n[t][r-3].piece)return!1;for(var c=Zr(a,n,!0),o=c.length,u=0;u<o;++u){var i=c[u];if(i.dy===t&&(i.dx===r||i.dx===r-1||i.dx===r-2))return!1}return!0}}]},bishop:{type:"multitime",move:[{dy:1,dx:-1},{dy:1,dx:1},{dy:-1,dx:-1},{dy:-1,dx:1}]},rook:{type:"multitime",move:[{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:-1},{dy:0,dx:1}]},queen:{type:"multitime",move:[{dy:1,dx:-1},{dy:1,dx:1},{dy:-1,dx:-1},{dy:-1,dx:1},{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:-1},{dy:0,dx:1}]}}),Zr=function(e,n,t){for(var r=[],a=0;a<8;++a)for(var c=0;c<8;++c)if(n[a][c].owner===e){var o=Br(n,a,c,t);r=[].concat(Object(j.a)(r),Object(j.a)(o))}return r},Br=function(e,n,t,r){var a=e[n][t],c=a.piece,o=a.owner,u={board:e,y:n,x:t,owner:o};if(c){var i=Kr[c],l=i.type,s=i.move;return"onetime"===l?s.reduce((function(a,i){var l=n+("black"===o?-i.dy:+i.dy),s=t+i.dx;return l<0||s<0||l>7||s>7?a:(u=Object(B.a)({},u,{dy:l,dx:s}),i.except&&("king"===c&&r||!i.except||!i.except(u))||e[l][s].owner&&e[n][t].owner===e[l][s].owner||a.push({dy:l,dx:s}),a)}),[]):s.flatMap((function(r){for(var a=0,c=[];;){++a;var u=n+a*("black"===o?-r.dy:+r.dy),i=t+a*r.dx;if(u<0||i<0||u>7||i>7)break;if(e[u][i].owner&&e[u][i].owner===o)break;if(c.push({dy:u,dx:i}),e[u][i].owner&&e[u][i].owner!==o)break}return c}))}},qr=a.a.mark(fa),Wr=a.a.mark(da),Hr="canvas/CONNECT_WEBSOCKET",Jr="canvas/DISCONNECT_WEBSOCKET",Xr=Object(q.a)(Hr,(function(e){return e})),Qr=Object(q.a)(Jr),$r=Object(q.a)("canvas/INITIALIZE_SOCKET",(function(e){return e})),Yr=Object(q.a)("canvas/INITIALIZE_VALUE",(function(e){return e})),ea=Object(q.a)("canvas/CHANGE_VALUE",(function(e){return e})),na=Object(q.a)("canvas/CLEAR_VALUE"),ta=Object(q.a)("canvas/INITIALIZE_BLOCKED",(function(e){return e})),ra=Object(q.a)("canvas/CHANGE_BLOCKED",(function(e){return e})),aa=ne("canvas/SET_MOVE_PIECE"),ca=Object(g.a)(aa,3),oa=ca[0],ua=ca[1],ia=ca[2],la=te(oa,(function(e){return ce.a.post("/api/canvas/movePiece",e)})),sa=function(e){var n=e.move;return function(e,t){var r=n.prev,a=n.next,c=t(),o=c.canvas.board,u=c.auth.tempAuth,i=c.game.turn;u&&("white"===u.role&&i%2===0||"black"===u.role&&i%2===1?e(ra({blocked:!1})):e(ra({blocked:!0})));var l=o[r.y][r.x],s=ba(Object(j.a)(o),["covered","clicked","tracked"]);s[a.y]=Object(j.a)(s[a.y]),s[a.y][a.x]=Object(B.a)({},l,{tracked:!0,dirty:!0}),s[r.y]=Object(j.a)(s[r.y]),s[r.y][r.x]={covered:!1,tracked:!0};var b=s[a.y][a.x],f=b.owner,d=b.piece;if(("white"===f&&"pawn"===d&&0===a.y||"black"===f&&"pawn"===d&&7===a.y)&&(s[a.y][a.x]=Object(B.a)({},s[a.y][a.x],{piece:"queen"})),"king"===s[a.y][a.x].piece){if(a.x-r.x===2){s[r.y]=Object(j.a)(s[r.y]);var p=Object(B.a)({},s[r.y][r.x+3]);s[r.y][r.x+3]={covered:!1},s[r.y][r.x+1]=Object(B.a)({},p,{dirty:!0})}if(a.x-r.x===-2){s[r.y]=Object(j.a)(s[r.y]);var m=Object(B.a)({},s[r.y][r.x-4]);s[r.y][r.x-4]={covered:!1},s[r.y][r.x-1]=Object(B.a)({},m,{dirty:!0})}}e(ea({board:s,clicked:null}))}},ba=function(e,n){for(var t=[],r=e.length,a=function(a){for(var c=function(r){var c=!1;n.forEach((function(n){c|=e[a][r][n]})),c&&t.push({y:a,x:r})},o=0;o<r;++o)c(o)},c=0;c<r;++c)a(c);return t.forEach((function(t){e[t.y]=Object(j.a)(e[t.y]);var r=e[t.y][t.x],a=Object(B.a)({},r);n.forEach((function(e){a[e]=!1})),e[t.y].splice(t.x,1,a)})),e};function fa(e){var n,t,r;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.payload,t="key=".concat(n),a.next=4,Object(H.e)(ee,{url:"/canvas",initializeSocket:$r,initializeValue:Yr,changeValue:sa,query:t});case 4:return r=a.sent,a.next=7,Object(H.g)(Jr);case 7:return a.next=9,Object(H.c)(r);case 9:case"end":return a.stop()}}),qr)}function da(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.h)(Hr,fa);case 2:case"end":return e.stop()}}),Wr)}var pa,ma={socket:null,error:null,board:Mr,clicked:null,blocked:!1},va=Object(W.a)((Lr={},Object(Z.a)(Lr,"canvas/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(B.a)({},e,{socket:t})})),Object(Z.a)(Lr,"canvas/INITIALIZE_VALUE",(function(e,n){var t=n.payload.board;return Object(B.a)({},e,{board:t})})),Object(Z.a)(Lr,"canvas/CHANGE_VALUE",(function(e,n){var t=n.payload,r=t.board,a=t.clicked;return Object(B.a)({},e,{board:r,clicked:a})})),Object(Z.a)(Lr,"canvas/CLEAR_VALUE",(function(e){return ma})),Object(Z.a)(Lr,"canvas/INITIALIZE_BLOCKED",(function(e,n){var t=n.payload.blocked;return Object(B.a)({},e,{blocked:t})})),Object(Z.a)(Lr,"canvas/CHANGE_BLOCKED",(function(e,n){var t=n.payload.blocked;return Object(B.a)({},e,{blocked:t})})),Object(Z.a)(Lr,ua,(function(e){return e})),Object(Z.a)(Lr,ia,(function(e){return e})),Lr),ma),ha=function(){var e=Object(s.c)((function(e){var n=e.canvas,t=e.auth,r=e.game;return{board:n.board,blocked:n.blocked,turn:r.turn,tempAuth:t.tempAuth}})),n=e.board,t=e.blocked,r=e.turn,a=e.tempAuth,u=Object(s.b)();Object(c.useEffect)((function(){a&&("white"===a.role&&r%2===0||"black"===a.role&&r%2===1?u(ta({blocked:!1})):u(ta({blocked:!0})))}),[u,r,a]),Object(c.useEffect)((function(){return function(){u(na())}}),[u]);var i=Object(c.useCallback)((function(e,n){u(function(e){var n=e.y,t=e.x;return function(e,r){var a=r().canvas,c=a.board,o=a.clicked;if(o&&c[n][t].covered){var u=r().canvas.socket;e(la({socket:u,move:{prev:o,next:{y:n,x:t}}}))}else{var i=Br(c,n,t),l=ba(Object(j.a)(c),["covered","clicked"]);i.forEach((function(e){l[e.dy]=Object(j.a)(l[e.dy]);var n=l[e.dy][e.dx];l[e.dy].splice(e.dx,1,Object(B.a)({},n,{covered:!0}))})),l[n]=Object(j.a)(l[n]),l[n][t]=Object(B.a)({},l[n][t],{clicked:!0}),e(ea({board:l,clicked:{y:n,x:t}}))}}}({y:e,x:n}))}),[u]);return o.a.createElement(Gr,{board:n,blocked:t,onClick:i})},xa=a.a.mark(Fa),ga=a.a.mark(Ra),Oa="chat/CONNECT_WEBSOCKET",ja="chat/DISCONNECT_WEBSOCKET",Ea=Object(q.a)(Oa,(function(e){return e})),ya=Object(q.a)(ja),ka=Object(q.a)("chat/INITIALIZE_SOCKET",(function(e){return e})),wa=Object(q.a)("chat/INITIALIZE_VALUE",(function(e){return e})),Ca=Object(q.a)("chat/CHANGE_VALUE",(function(e){return e})),Ia=Object(q.a)("chat/CHANGE_TEXTFIELD",(function(e){return e})),Sa=Object(q.a)("chat/INITIALIZE_TEXTFIELD"),Aa=ne("chat/SEND_MESSAGE"),Ta=Object(g.a)(Aa,3),Na=Ta[0],La=Ta[1],_a=Ta[2],Da=te(Na,(function(e){return ce.a.post("/api/chat/sendMessage",e)}));function Fa(e){var n,t,r;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.payload,t="key=".concat(n),a.next=4,Object(H.e)(ee,{url:"/chat",initializeSocket:ka,initializeValue:wa,changeValue:Ca,query:t});case 4:return r=a.sent,a.next=7,Object(H.g)(ja);case 7:return a.next=9,Object(H.c)(r);case 9:case"end":return a.stop()}}),xa)}function Ra(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.h)(Oa,Fa);case 2:case"end":return e.stop()}}),ga)}var za=Object(W.a)((pa={},Object(Z.a)(pa,"chat/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(B.a)({},e,{socket:t})})),Object(Z.a)(pa,"chat/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=t.nickname,a=t.color,c=t.message;return Object(B.a)({},e,{messages:[{nickname:r,color:a,message:c}]})})),Object(Z.a)(pa,"chat/CHANGE_VALUE",(function(e,n){var t=n.payload,r=t.nickname,a=t.color,c=t.message;return Object(B.a)({},e,{messages:[].concat(Object(j.a)(e.messages),[{nickname:r,color:a,message:c}])})})),Object(Z.a)(pa,La,(function(e){return e})),Object(Z.a)(pa,_a,(function(e){return e})),Object(Z.a)(pa,"chat/INITIALIZE_TEXTFIELD",(function(e){return Object(B.a)({},e,{text:""})})),Object(Z.a)(pa,"chat/CHANGE_TEXTFIELD",(function(e,n){var t=n.payload;return Object(B.a)({},e,{text:t})})),pa),{socket:null,messages:[],text:""});function Pa(){var e=Object(v.a)(["\n        background: rgb(247,246,245);\n\n        &:after {\n            content: '';\n            position: absolute;\n            left: 0;\n            top: 50%;\n            width: 0;\n            height: 0;\n            border: 8px solid transparent;\n            border-top: 0;\n            margin-top: -5px;\n            border-right-color: rgb(247,246,245);\n            border-left: 0;\n            margin-left: -8px;\n        }\n    "]);return Pa=function(){return e},e}function Ua(){var e=Object(v.a)(["\n    position: relative;\n    background: #ffff80;\n    padding: 5px;\n\n    &:after {\n        content: '';\n        position: absolute;\n        right: 0;\n        top: 50%;\n        width: 0;\n        height: 0;\n        border: 8px solid transparent;\n        border-left-color: #ffff80;\n        border-right: 0;\n        border-top: 0;\n        margin-top: -5px;\n        margin-right: -8px;\n    }\n\n    \n    ","\n"]);return Ua=function(){return e},e}function Va(){var e=Object(v.a)(["\n        justify-content: center;\n    "]);return Va=function(){return e},e}function Ga(){var e=Object(v.a)(["\n        justify-content: flex-start;\n    "]);return Ga=function(){return e},e}function Ma(){var e=Object(v.a)(["\n        justify-content: flex-end;\n    "]);return Ma=function(){return e},e}function Ka(){var e=Object(v.a)(["\n    display: flex;\n    align-items: center;\n    width: 90%;\n    height : 36px;\n    min-height : 36px;\n    font-size : 12px;\n    background-color: white;\n\n    ",";\n\n    ",";\n\n    ",";\n"]);return Ka=function(){return e},e}function Za(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 20%;\n    font-size: 12px;\n    background-color: rgb(247,246,245);\n    border: none;\n    cursor: pointer;\n\n    &:hover, &:focus {\n        background-color: #D3D3D3;\n    } \n"]);return Za=function(){return e},e}function Ba(){var e=Object(v.a)(["\n    outline: none;\n    border: none;\n    align-items : center;\n    color: black;\n    background-color: transparent;\n    font-size: 12px;\n    width: 80%;\n    height : 30px;\n    padding-left: 10px;\n"]);return Ba=function(){return e},e}function qa(){var e=Object(v.a)(["\n    position: absolute;\n    width: 100%;\n    display: flex;\n    background-color: white;\n    top: 365px;\n    /* box-shadow: rgba(0,0,0,0.05) 0px -2px 2px 0px, rgba(0,0,0,0.08) 0px -3px 1px -2px, rgba(0,0,0,0.04) 0px -1px 5px 0px; */\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\n"]);return qa=function(){return e},e}function Wa(){var e=Object(v.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 360px;\n    width: 100%;\n    padding-right: 20px;\n    overflow-y: overlay;\n"]);return Wa=function(){return e},e}function Ha(){var e=Object(v.a)(["\n    height: 360px;\n    width: 100%;\n    overflow: hidden;\n"]);return Ha=function(){return e},e}function Ja(){var e=Object(v.a)(["\n    position: relative;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Ja=function(){return e},e}function Xa(){var e=Object(v.a)(["\n"]);return Xa=function(){return e},e}var Qa=x.b.form(Xa()),$a=x.b.div(Ja()),Ya=x.b.div(Ha()),ec=x.b.div(Wa()),nc=x.b.div(qa()),tc=x.b.input(Ba()),rc=x.b.button(Za()),ac=x.b.div(Ka(),(function(e){return"my"===e.owner&&Object(x.a)(Ma())}),(function(e){return"other"===e.owner&&Object(x.a)(Ga())}),(function(e){return"server"===e.owner&&Object(x.a)(Va())})),cc=x.b.div(Ua(),(function(e){return"other"===e.owner&&Object(x.a)(Pa())})),oc=function(e){var n,t=e.owner,r=e.children;return"my"===t?n=o.a.createElement(cc,{owner:t},r):"other"===t?n=o.a.createElement(cc,{owner:t},r):"server"===t&&(n=o.a.createElement(o.a.Fragment,null,r)),o.a.createElement(o.a.Fragment,null,n)},uc=o.a.memo((function(e){var n=e.message,t=e.myName,r=Object(O.a)(e,["message","myName"]),a=n.nickname?n.nickname===t?"my":"other":"server",c="other"===a?n.nickname+" : "+n.message:n.message;return o.a.createElement(ac,Object.assign({},r,{color:n.color,owner:a}),o.a.createElement(oc,{owner:a},c))})),ic=o.a.memo((function(e){var n=e.messages,t=e.onSubmit,r=e.onChange,a=e.text,u=e.tempAuth,i=Object(c.useRef)();return Object(c.useEffect)((function(){i.current.scrollTop=i.current.scrollHeight}),[n]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Qa,{onSubmit:t},o.a.createElement($a,null,o.a.createElement(Ya,null,o.a.createElement(ec,{ref:i},n.map((function(e){return o.a.createElement(uc,{myName:u.nickname,message:e})})))),o.a.createElement(nc,null,o.a.createElement(tc,{onChange:r,value:a}),o.a.createElement(rc,{onSubmit:t},o.a.createElement(bt.b.Provider,{value:{style:{width:"40%",height:"40%"}}},o.a.createElement(lt.b,null)))))))})),lc=function(){var e=Object(s.b)(),n=Object(s.c)((function(e){var n=e.chat,t=e.auth;return{socket:n.socket,messages:n.messages,text:n.text,tempAuth:t.tempAuth}})),t=n.socket,r=n.messages,a=n.text,u=n.tempAuth,i=Object(c.useCallback)((function(n){n.preventDefault(),e(Da({socket:t,message:a})),e(Sa())}),[e,a,t]),l=Object(c.useCallback)((function(n){e(Ia(n.target.value))}),[e]);return o.a.createElement(ic,{messages:r,onSubmit:i,onChange:l,text:a,tempAuth:u})};function sc(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 100%;\n    width: 6%;\n    color: black;\n    opacity: 0.5;\n    font-size: 50px;\n"]);return sc=function(){return e},e}function bc(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 47%;\n    color: black;\n    font-size: 50px;\n"]);return bc=function(){return e},e}function fc(){var e=Object(v.a)(["\n        background-color: rgb(230, 153, 153);\n    "]);return fc=function(){return e},e}function dc(){var e=Object(v.a)(["\n        background-color: rgb(208, 224, 189);\n    "]);return dc=function(){return e},e}function pc(){var e=Object(v.a)(["\n    width: 50%;\n    height: 60px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    background-color: white;\n    ","\n    ","\n"]);return pc=function(){return e},e}var mc=x.b.div(pc(),(function(e){return e.color&&Object(x.a)(dc())}),(function(e){return e.time<=1e4&&Object(x.a)(fc())})),vc=x.b.div(bc()),hc=x.b.div(sc()),xc=function(e){var n="";return n+=String(Math.floor(e/10)),n+=String(Math.floor(e%10))},gc=function(e){var n=e.time,t=e.color,r=Math.floor(n/1e3),a=Math.floor(n%1e3/10);return void 0==n||null===n?o.a.createElement(mc,null):o.a.createElement(mc,{time:n,color:t?1:0},o.a.createElement(vc,null,xc(r)),o.a.createElement(hc,null,":"),o.a.createElement(vc,null,xc(a)))},Oc=function(e){var n=e.white,t=Object(s.c)((function(e){var n=e.record,t=e.game;return{whiteTime:n.whiteTime,blackTime:n.blackTime,start:t.start,order:t.order}})),r=t.whiteTime,a=t.blackTime,c=t.start,u=t.order,i=n?r:a,l=n?c&&"white"===u:c&&"black"===u;return o.a.createElement(gc,{time:i,color:l})};function jc(){var e=Object(v.a)(["\n    font-size: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return jc=function(){return e},e}function Ec(){var e=Object(v.a)(["\n        margin-top: 30px;\n    "]);return Ec=function(){return e},e}function yc(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 30px;\n    background-color: white;\n\n    ","\n"]);return yc=function(){return e},e}var kc=x.b.div(yc(),(function(e){return e.white&&Object(x.a)(Ec())})),wc=x.b.div(jc()),Cc=o.a.memo((function(e){var n=e.light,t=e.name,r=e.white,a={style:{height:"15px",width:"10%",color:"green",display:"flex",justifyContent:"center",alignItems:"center"}};return o.a.createElement(kc,{white:r?1:0},n?o.a.createElement(bt.b.Provider,{value:a},o.a.createElement(st.a,null)):o.a.createElement(bt.b.Provider,{value:{style:Object(B.a)({},a.style,{color:"black"})}},o.a.createElement(st.h,null)),o.a.createElement(wc,null,t))})),Ic=function(e){var n=e.black,t=e.white,r=Object(s.c)((function(e){var n=e.game;return{blackNick:n.black,whiteNick:n.white,participant:n.participant}})),a=r.blackNick,c=r.whiteNick,u=r.participant,i=new Set(u),l=t&&i.has(c)||n&&i.has(a),b=t&&c||n&&a;return o.a.createElement(Cc,{light:l,name:b,white:t})};function Sc(){var e=Object(v.a)(["\n    width: 20%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 18px;\n    background-color: rgb(247, 246, 245);\n"]);return Sc=function(){return e},e}function Ac(){var e=Object(v.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20%;\n    font-size: 18px;\n"]);return Ac=function(){return e},e}function Tc(){var e=Object(v.a)(["\n    width: 80%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    &:hover {\n        background-color: rgb(209, 228, 246);\n    }\n"]);return Tc=function(){return e},e}function Nc(){var e=Object(v.a)(["\n    width: 100%;\n    height: 30px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n\n    &:first-child {\n        margin-top: 30px;\n    }\n"]);return Nc=function(){return e},e}function Lc(){var e=Object(v.a)(["\n    height: 270px;\n    width: 100%;\n    overflow-y: overlay;\n    padding-right: 20px;\n"]);return Lc=function(){return e},e}function _c(){var e=Object(v.a)(["\n    height: 270px;\n    width: 100%;\n    overflow: hidden;\n"]);return _c=function(){return e},e}var Dc=x.b.div(_c()),Fc=x.b.div(Lc()),Rc=x.b.div(Nc()),zc=function(e){var n=e.x,t=e.y;return String.fromCharCode(97+n)+(8-t)},Pc=x.b.div(Tc()),Uc=x.b.div(Ac()),Vc=x.b.div(Sc()),Gc=o.a.memo((function(e){var n=e.move,t=e.index,r=e.onClickBlock;console.dir("PieceMove"),console.dir(n);var a,c,u=hr[n.prevPiece.piece],i={color:n.prevPiece.owner,style:{width:"10%",filter:"drop-shadow(1px 1px 1px ".concat("white"===n.prevPiece.owner?"black":"white",")")}},l=o.a.createElement(bt.b.Provider,{value:i},o.a.createElement(u,null)),s=o.a.createElement("div",{style:{width:"10%"}});return n.nextPiece.piece&&(a=hr[n.nextPiece.piece],c={color:n.nextPiece.owner,style:{width:"10%",filter:"drop-shadow(1px 1px 1px ".concat("white"===n.nextPiece.owner?"black":"white",")")}},s=o.a.createElement(bt.b.Provider,{value:c},o.a.createElement(a,null))),o.a.createElement(Rc,null,o.a.createElement(Vc,null,t+1),o.a.createElement(Pc,{onClick:r},l,o.a.createElement(Uc,null,zc(n.prev)),o.a.createElement(bt.b.Provider,{value:{style:{color:"rgb(169,169,169)"}}},o.a.createElement(lt.a,null)),o.a.createElement(Uc,null,zc(n.next)),s))})),Mc=o.a.memo((function(e){var n=e.pieceMove,t=e.onClickBlock,r=Object(c.useRef)();return Object(c.useEffect)((function(){r.current.scrollTop=r.current.scrollHeight}),[n]),o.a.createElement(Dc,null,o.a.createElement(Fc,{ref:r},n.map((function(e,n){return o.a.createElement(Gc,{onClick:t,move:e,index:n})}))))})),Kc=function(){var e=Object(s.c)((function(e){return{pieceMove:e.record.pieceMove}})).pieceMove,n=Object(c.useCallback)((function(){}),[]);return o.a.createElement(Mc,{onClickBlock:n,pieceMove:e})};function Zc(){var e=Object(v.a)(["\n        background-color: red;\n    "]);return Zc=function(){return e},e}function Bc(){var e=Object(v.a)(["\n    position: absolute;\n    height: 2px;\n    background-color: green;\n    transition-duration: 1s;\n    transition-timing-function: linear;\n\n    width: ",";\n    ","\n"]);return Bc=function(){return e},e}var qc,Wc=x.b.div(Bc(),(function(e){return 100*e.time+"%"}),(function(e){return e.time<=.1&&Object(x.a)(Zc())})),Hc=o.a.memo((function(e){var n=e.time;return o.a.createElement(Wc,{time:n})})),Jc=a.a.mark(uo),Xc=a.a.mark(io),Qc="record/CONNECT_WEBSOCKET",$c="record/DISCONNECT_WEBSOCKET",Yc=Object(q.a)(Qc),eo=Object(q.a)($c),no=Object(q.a)("record/INITIALIZE_SOCKET",(function(e){return e})),to=Object(q.a)("record/INITIALIZE_VALUE",(function(e){return e})),ro=Object(q.a)("record/CHANGE_VALUE",(function(e){return e})),ao=Object(q.a)("record/UPDATE_VALUE",(function(e){return e})),co=Object(q.a)("record/CLEAR_VALUE"),oo=function(e){return function(n,t){var r=t().record,a=Object(B.a)({},r);Object.keys(e).forEach((function(n){"object"===typeof e[n]&&(a=Object(B.a)({},a,Object(Z.a)({},n,[].concat(Object(j.a)(a[n]),[e[n]]))))})),n(ao({record:a}))}};function uo(e){var n,t,r;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.payload,t="key=".concat(n),a.next=4,Object(H.e)(ee,{url:"/record",initializeSocket:no,initializeValue:to,changeValue:ro,updateValue:oo,query:t});case 4:return r=a.sent,a.next=7,Object(H.g)($c);case 7:return a.next=9,Object(H.c)(r);case 9:case"end":return a.stop()}}),Jc)}function io(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.h)(Qc,uo);case 2:case"end":return e.stop()}}),Xc)}var lo={socket:null,error:null,startTime:null,endTime:null,blackTime:null,whiteTime:null,blackMaxTime:null,whiteMaxTime:null,whiteRatio:0,blackRatio:0,pieceMove:[]},so=Object(W.a)((qc={},Object(Z.a)(qc,"record/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(B.a)({},e,{socket:t})})),Object(Z.a)(qc,"record/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(O.a)(t,["type"]));return Object(B.a)({},e,{},r)})),Object(Z.a)(qc,"record/CHANGE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(O.a)(t,["type"]));return Object(B.a)({},e,{},r)})),Object(Z.a)(qc,"record/UPDATE_VALUE",(function(e,n){var t=n.payload.record;return Object(B.a)({},t)})),Object(Z.a)(qc,"record/CLEAR_VALUE",(function(e){return lo})),qc),lo),bo=function(e){var n=e.white,t=e.black,r=Object(s.c)((function(e){var n=e.record,t=e.game;return{whiteRatio:n.whiteRatio,blackRatio:n.blackRatio,whiteNick:t.white,blackNick:t.black,participant:t.participant}})),a=r.whiteRatio,u=r.blackRatio,i=r.whiteNick,l=r.blackNick,b=r.participant,f=Object(s.b)();Object(c.useEffect)((function(){return function(){f(co())}}),[f]);var d=new Set(b),p=0;return(n&&d.has(i)||t&&d.has(l))&&(p=n?a:u),p=Math.min(p,1),o.a.createElement(Hc,{time:p})};function fo(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n"]);return fo=function(){return e},e}function po(){var e=Object(v.a)(["\n    position: absolute;\n    top: 300px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    background-color: rgb(247, 246, 245);\n    z-index: 10;\n    box-shadow: rgba(0, 0, 0, 0.14) 0px -2px 2px 0px, rgba(0, 0, 0, 0.2) 0px -3px 1px -2px, rgba(0, 0, 0, 0.12) 0px -1px 5px 0px;\n"]);return po=function(){return e},e}var mo=x.b.div(po()),vo=x.b.div(fo()),ho={style:{color:"#4d4d4d",width:"50%",height:"50%",backgroundColor:"transparent"}},xo=o.a.memo((function(){return o.a.createElement(mo,null,o.a.createElement(vo,null,o.a.createElement(bt.b.Provider,{value:ho},o.a.createElement(st.c,null))),o.a.createElement(vo,null,o.a.createElement(bt.b.Provider,{value:ho},o.a.createElement(st.i,null))),o.a.createElement(vo,null,o.a.createElement(bt.b.Provider,{value:ho},o.a.createElement(st.j,null))),o.a.createElement(vo,null,o.a.createElement(bt.b.Provider,{value:ho},o.a.createElement(st.d,null))))})),go=function(){return o.a.createElement(xo,null)},Oo=t(192);function jo(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n"]);return jo=function(){return e},e}function Eo(){var e=Object(v.a)(["\n    position: absolute;\n    top: 30px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    z-index: 10;\n    background-color: rgb(247, 246, 245);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Eo=function(){return e},e}var yo=x.b.div(Eo()),ko=x.b.div(jo()),wo={style:{color:"#4d4d4d",width:"50%",height:"50%",backgroundColor:"transparent"}},Co=o.a.memo((function(){return o.a.createElement(yo,null,o.a.createElement(ko,null,o.a.createElement(bt.b.Provider,{value:{style:Object(B.a)({},wo.style,{width:"60%",height:"60%"})}},o.a.createElement(st.b,null))),o.a.createElement(ko,null,o.a.createElement(bt.b.Provider,{value:{style:Object(B.a)({},wo.style,{width:"80%",height:"80%"})}},o.a.createElement(Oo.a,null))),o.a.createElement(ko,null,o.a.createElement(bt.b.Provider,{value:wo},o.a.createElement(st.f,null))),o.a.createElement(ko,null,o.a.createElement(bt.b.Provider,{value:wo},o.a.createElement(st.e,null))))})),Io=function(){return o.a.createElement(Co,null)};function So(){var e=Object(v.a)(["\n    position: relative;\n    width: 100%;\n    height: 360px;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return So=function(){return e},e}var Ao=x.b.div(So()),To=o.a.memo((function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Oc,{black:!0}),o.a.createElement(Ao,null,o.a.createElement(bo,{black:!0}),o.a.createElement(Ic,{black:!0}),o.a.createElement(Io,null),o.a.createElement(Kc,null),o.a.createElement(go,null),o.a.createElement(Ic,{white:!0}),o.a.createElement(bo,{white:!0})),o.a.createElement(Oc,{white:!0}))})),No=function(){return o.a.createElement(To,null)};function Lo(){var e=Object(v.a)(["\n    ","\n    margin-left: 1%;\n"]);return Lo=function(){return e},e}function _o(){var e=Object(v.a)(["\n    ","\n    margin-right: 1%;\n"]);return _o=function(){return e},e}function Do(){var e=Object(v.a)(["\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n"]);return Do=function(){return e},e}function Fo(){var e=Object(v.a)(["\n    height: 800px;\n    width: 100%;\n    background-color: rgb(237, 235, 233);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Fo=function(){return e},e}var Ro,zo=x.b.div(Fo()),Po=Object(x.a)(Do()),Uo=x.b.div(_o(),Po),Vo=x.b.div(Lo(),Po),Go=o.a.memo((function(){return o.a.createElement(zo,null,o.a.createElement(Uo,null,o.a.createElement(lc,null)),o.a.createElement(ha,null),o.a.createElement(Vo,null,o.a.createElement(No,null)))})),Mo=a.a.mark(Xo),Ko=a.a.mark(Qo),Zo="game/CONNECT_WEBSOCKET",Bo="game/DISCONNECT_WEBSOCKET",qo=Object(q.a)(Zo),Wo=Object(q.a)(Bo),Ho=Object(q.a)("game/INITIALIZE_SOCKET",(function(e){return e})),Jo=Object(q.a)("game/INITIALIZE_VALUE",(function(e){return e}));function Xo(e){var n,t,r;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.payload,t="key=".concat(n),a.next=4,Object(H.e)(ee,{url:"/game",initializeSocket:Ho,initializeValue:Jo,query:t});case 4:return r=a.sent,a.next=7,Object(H.g)(Bo);case 7:return a.next=9,Object(H.c)(r);case 9:case"end":return a.stop()}}),Mo)}function Qo(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.h)(Zo,Xo);case 2:case"end":return e.stop()}}),Ko)}var $o=Object(W.a)((Ro={},Object(Z.a)(Ro,"game/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(B.a)({},e,{socket:t})})),Object(Z.a)(Ro,"game/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(O.a)(t,["type"]));return Object(B.a)({},e,{},r)})),Ro),{socket:null,error:null,participant:[]}),Yo=function(e){var n=e.gameId,t=Object(s.b)();Object(c.useEffect)((function(){return function(){t(dn()),t(Wo()),t(ya()),t(Qr()),t(eo())}}),[t]);var r=nt((function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(t(jn()));case 2:return t(dn()),t(Wo()),t(ya()),t(Qr()),t(eo()),setTimeout((function(){t(fn(n)),t(qo(n)),t(Ea(n)),t(Xr(n)),t(Yc(n))}),0),e.abrupt("return",!0);case 9:case"end":return e.stop()}}))}),[t,n]),u=Object(g.a)(r,1)[0],i=u.loading,l=u.data,b=u.error;return i?null:b?null:l?o.a.createElement(Go,null):null},eu=Object(h.f)((function(e){var n=e.history,t=e.match;if(Object(c.useEffect)((function(){t.params.id||n.push("/")}),[n,t]),!t.params.id)return null;var r=t.params.id;return r?o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"GamePlay \u2022 Chesssup.com")),o.a.createElement(Yn,null),o.a.createElement(Yo,{gameId:r})):null}));function nu(){var e=Object(v.a)(["\n    width: 100%;\n    height: 100px;\n    &:nth-child(odd) {\n        background: #F7F6F4;\n    }\n"]);return nu=function(){return e},e}var tu=x.b.tr(nu()),ru=function(e){var n=e.title,t=e.count,r=e.comments,a=e.time;return o.a.createElement(tu,null,o.a.createElement("td",null,n),o.a.createElement("td",null,t),o.a.createElement("td",null,r),o.a.createElement("td",null,a))};function au(){var e=Object(v.a)(["\n    width: 100%;\n    background-color: #F1F1F1;\n"]);return au=function(){return e},e}function cu(){var e=Object(v.a)(["\n    width: 100%;\n    height: 700px;\n    background-color: white;\n"]);return cu=function(){return e},e}function ou(){var e=Object(v.a)(["\n    width: 100%;\n    height: 50px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return ou=function(){return e},e}function uu(){var e=Object(v.a)(["\n    width: 100%;\n    height: 150px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin: 0px 0px 0px 0px;\n"]);return uu=function(){return e},e}function iu(){var e=Object(v.a)(["\n    width: 80%;\n    height: 1000px;\n    background-color:lightblue;\n    display: flex;\n    flex-direction: column;\n"]);return iu=function(){return e},e}function lu(){var e=Object(v.a)(["\n    width: 100%;\n    height: 1000px;\n    background-color:#EDEBE9;\n    display: flex;\n    justify-content: center;\n    /* flex-direction: column; */\n"]);return lu=function(){return e},e}var su=x.b.div(lu()),bu=x.b.main(iu()),fu=x.b.h1(uu()),du=x.b.div(ou()),pu=x.b.table(cu()),mu=x.b.thead(au()),vu=function(){return o.a.createElement(su,null,o.a.createElement(bu,null,o.a.createElement(fu,null,"General Chess Discussion"),o.a.createElement(du,null,"< 1 2 3 4 ... >"),o.a.createElement(pu,null,o.a.createElement(mu,null,o.a.createElement("tr",{height:"60px"},o.a.createElement("th",{width:"70%"}),o.a.createElement("th",null,"\uc870\ud68c"),o.a.createElement("th",null,"\ub2f5\uae00"),o.a.createElement("th",null,"\ucd5c\uadfc \uae00"))),[{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5441",count:250,comments:7,time:"1\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5442",count:251,comments:8,time:"2\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5443",count:252,comments:9,time:"3\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5444",count:253,comments:10,time:"4\uc2dc\uac04 \uc804"}].map((function(e){return o.a.createElement(ru,{title:e.title,count:e.count,comments:e.comments,time:e.time})}))),o.a.createElement(du,null,"< 1 2 3 4 ... >")))},hu=function(){return o.a.createElement(vu,null)},xu=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Community \u2022 Chesssup.com")),o.a.createElement(Yn,null),o.a.createElement(hu,null))};function gu(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 200px;\n  font-size: 50px;\n"]);return gu=function(){return e},e}var Ou=x.b.div(gu()),ju=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Chesssup.com")),o.a.createElement(h.c,null,o.a.createElement(h.a,{component:ot,path:"/",exact:!0}),o.a.createElement(h.a,{component:Yt,path:"/login",exact:!0}),o.a.createElement(h.a,{component:nr,path:"/register",exact:!0}),o.a.createElement(h.a,{component:mr,path:"/game",exact:!0}),o.a.createElement(h.a,{component:eu,path:"/game/:id",exact:!0}),o.a.createElement(h.a,{component:xu,path:"/community",exact:!0}),o.a.createElement(h.a,{render:function(e){e.location;return o.a.createElement(Ou,null,o.a.createElement("h1",null,"404 Error"),o.a.createElement("p",null,"\uc694\uccad\ud55c \ud398\uc774\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))}})))},Eu=a.a.mark(yu);function yu(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.a)([Xn(),Qo(),je(),da(),Ra(),io()]);case 2:case"end":return e.stop()}}),Eu)}var ku=Object(b.combineReducers)({auth:$n,game:$o,games:Ee,canvas:va,chat:za,record:so});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var wu=Object(p.a)(),Cu=Object(b.createStore)(ku,Object(d.composeWithDevTools)(Object(b.applyMiddleware)(f.a,wu)));wu.run(yu),function(){var e;a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=an("auth")){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,a.a.awrap(Cu.dispatch(Bn()));case 6:if(n.sent.username===e.username){n.next=10;break}throw on(),"Auth mismatch";case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(3),console.dir("Check auth failed");case 15:case"end":return n.stop()}}),null,null,[[3,12]])}(),i.a.render(o.a.createElement(s.a,{store:Cu},o.a.createElement(l.a,null,o.a.createElement(m.b,null,o.a.createElement(ju,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[195,1,2]]]);
//# sourceMappingURL=main.a983ada0.chunk.js.map