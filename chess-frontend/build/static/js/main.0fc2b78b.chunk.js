(this["webpackJsonpchess-frontend"]=this["webpackJsonpchess-frontend"]||[]).push([[0],{194:function(e,n,t){e.exports=t(362)},204:function(e,n,t){},232:function(e,n){},261:function(e,n){},263:function(e,n){},295:function(e,n){},296:function(e,n){},362:function(e,n,t){"use strict";t.r(n);var r=t(7),a=t.n(r),c=t(1),o=t.n(c),i=t(79),u=t.n(i),l=t(27),s=t(8),b=t(45),f=t(181),d=t(182),p=t(81),m=t(31),v=(t(204),t(3)),x=t(46),h=t(2),g=t(15),O=t(19),j=t(18);function E(){var e=Object(v.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    height: 90%;\n    overflow-y: scroll;\n    background-color: rgb(0,0,0, 0.2);\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.4);\n"]);return E=function(){return e},e}function y(){var e=Object(v.a)(["\n    \n"]);return y=function(){return e},e}function k(){var e=Object(v.a)(["\n    \n"]);return k=function(){return e},e}function w(){var e=Object(v.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 24%;\n    height: 300px;\n    background-color: rgb(0,0,0, 0.4);\n    box-shadow: 5px 5px 5px rgb(0,0,0,0.6);\n    cursor: pointer;\n    \n    & + & {\n        margin-left: 13%;\n    }\n\n    &:active {\n        background-color: rgb(0,0,0, 0.6);\n        box-shadow: 5px 5px 5px rgb(0,0,0,0.8);\n    }\n"]);return w=function(){return e},e}function C(){var e=Object(v.a)(["\n    display: flex;\n    width: 85%;\n\n    & + & {\n        margin-top: 50px;\n    }\n\n    &:first-child {\n        margin-top: 50px;\n    }\n\n    &:last-child {\n        margin-bottom: 50px;\n    }\n"]);return C=function(){return e},e}var I=h.b.div(C()),S=h.b.div(w()),A=h.b.div(k()),L=h.b.div(y()),N=o.a.memo((function(e){var n=e.game,t=Object(O.a)(e,["game"]);return console.dir("game~"),o.a.createElement(S,t,o.a.createElement(A,null,n.name),o.a.createElement(L,null,n.participant))})),T=h.b.div(E()),_=o.a.memo((function(e){var n=e.games,t=e.onGameClick;if(!n)return o.a.createElement(T,null);for(var r=Object(j.a)(n),a=[],c=Math.floor(r.length/3),i=0;i<=c;++i)a.push(o.a.createElement(I,{key:"GridRowBlock_".concat(i)},r.splice(0,3).map((function(e){return o.a.createElement(N,{key:"GridBox".concat(e.name),game:e,onClick:function(n){return t(n,e.key)}})}))));return o.a.createElement(T,null,a)})),z=function(e){return o.a.createElement(_,e)};function R(){var e=Object(v.a)(["\n    ","\n    margin-left: 20px;\n"]);return R=function(){return e},e}function D(){var e=Object(v.a)(["\n    ","\n"]);return D=function(){return e},e}function V(){var e=Object(v.a)(["\n    outline: none;\n    background-color: rgb(0,0,0, 0.2);\n    padding: 0px;\n    border: none;\n    width: 200px;\n    height: 30px;\n    cursor: pointer;\n    box-shadow: 5px 5px 5px rgb(0,0,0, 0.6);\n\n    &:hover {\n        background-color: rgb(0,0,0, 0.8);\n        color: white;\n        box-shadow: 5px 5px 5px rgb(0,0,0, 0.2);\n    }\n"]);return V=function(){return e},e}function F(){var e=Object(v.a)(["\n    display: flex;\n"]);return F=function(){return e},e}var U=h.b.form(F()),P=Object(h.a)(V()),B=h.b.button(D(),P),G=h.b.button(R(),P),M=o.a.memo((function(e){var n=e.onConfirmClick,t=e.onCancelClick;return o.a.createElement(U,{onSubmit:n},o.a.createElement(B,{type:"submit"},"Create Game"),o.a.createElement(G,{type:"button",onClick:t},"Cancel"))})),K=t(6),Z=t(5),H=t(364),q=t(363),W=t(11),J=t(187),X=t.n(J),$=a.a.mark(Y),Q=a.a.mark(ee);function Y(e){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(p.b)((function(n){return e.on("connect",(function(t){n({type:"socket",socket:e.id})})),e.on("message",(function(e){n(e)})),function(){e.close()}})));case 1:case"end":return n.stop()}}),$)}function ee(e){var n,t,r,c,o,i,u,l,s;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.url,r=e.initializeSocket,c=e.initializeValue,o=e.changeValue,i=e.updateValue,u=e.query,console.dir(t),console.dir(u),a.prev=3,l=X()(t,{query:u,reconnection:!1,secure:!0}),a.next=7,Object(W.b)(Y,l);case 7:n=a.sent;case 8:return a.next=11,Object(W.g)(n);case 11:s=a.sent,a.t0=s.type,a.next="socket"===a.t0?15:"initialize"===a.t0?18:"change"===a.t0?21:"update"===a.t0?24:27;break;case 15:return a.next=17,Object(W.f)(r(s));case 17:return a.abrupt("break",28);case 18:return a.next=20,Object(W.f)(c(s));case 20:return a.abrupt("break",28);case 21:return a.next=23,Object(W.f)(o(s));case 23:return a.abrupt("break",28);case 24:return a.next=26,Object(W.f)(i(s));case 26:return a.abrupt("break",28);case 27:console.dir(s);case 28:a.next=8;break;case 30:a.next=35;break;case 32:a.prev=32,a.t1=a.catch(3),console.dir(a.t1);case 35:return a.prev=35,a.next=38,Object(W.d)();case 38:if(!a.sent){a.next=40;break}n.close();case 40:return a.finish(35);case 41:case"end":return a.stop()}}),Q,null,[[3,32,35,41]])}var ne=function(e){return[e,"".concat(e,"_SUCCESS"),"".concat(e,"_FAILURE")]};function te(e,n){var t="".concat(e,"_SUCCESS"),r="".concat(e,"_FAILURE");return function(e){return function(c){var o;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,a.a.awrap(n(e));case 3:return o=i.sent,c({type:t,payload:o.data}),i.abrupt("return",o.data);case 8:throw i.prev=8,i.t0=i.catch(0),console.dir(i.t0),c({type:r,payload:i.t0,error:!0}),i.t0;case 13:case"end":return i.stop()}}),null,null,[[0,8]])}}}var re,ae=t(39),ce=t.n(ae),oe=a.a.mark(je),ie=a.a.mark(Ee),ue="games/CONNECT_WEBSOCKET",le="games/DISCONNECT_WEBSOCKET",se=Object(H.a)(ue),be=Object(H.a)(le),fe=Object(H.a)("games/INITIALIZE_SOCKET",(function(e){return e})),de=Object(H.a)("games/INITIALIZE_VALUE",(function(e){return e})),pe=Object(H.a)("games/CLEAR_VALUE"),me=ne("games/CREATE_GAME"),ve=Object(g.a)(me,3),xe=ve[0],he=ve[1],ge=ve[2],Oe=te(xe,(function(){return ce.a.post("/api/games")}));function je(){var e;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(W.e)(ee,{url:"/games",initializeSocket:fe,initializeValue:de});case 2:return e=n.sent,n.next=5,Object(W.g)(le);case 5:return n.next=7,Object(W.c)(e);case 7:case"end":return n.stop()}}),oe)}function Ee(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.h)(ue,je);case 2:case"end":return e.stop()}}),ie)}var ye={socket:null,games:null,error:null},ke=Object(q.a)((re={},Object(K.a)(re,"games/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(Z.a)({},e,{socket:t})})),Object(K.a)(re,"games/INITIALIZE_VALUE",(function(e,n){var t=n.payload.games;return Object(Z.a)({},e,{games:t})})),Object(K.a)(re,"games/CLEAR_VALUE",(function(e){return ye})),Object(K.a)(re,he,(function(e){return e})),Object(K.a)(re,ge,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{error:t})})),re),ye),we=Object(x.f)((function(e){var n=e.history,t=e.onCancelClick,r=Object(O.a)(e,["history","onCancelClick"]),i=Object(s.b)(),u=Object(c.useCallback)((function(e){e.preventDefault(),function(){var e;a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return i(be()),r.next=3,a.a.awrap(i(Oe()));case 3:e=r.sent,t(),n.push("/game/".concat(e));case 6:case"end":return r.stop()}}))}()}),[i,n,t]);return o.a.createElement(M,Object.assign({},r,{onConfirmClick:u,onCancelClick:t}))}));function Ce(){var e=Object(v.a)(["\n    position: fixed;\n    top: 20%;\n    left: 20%;\n    height: 60%;\n    width: 60%;\n    padding: 2%;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    justify-content: space-between;\n    background-color: rgb(245,245,245, 0.8);\n    box-shadow: 10px 10px 10px;\n    z-index: 1000;\n"]);return Ce=function(){return e},e}function Ie(){var e=Object(v.a)(["\n        opacity: 1;\n        visibility: visible;\n    "]);return Ie=function(){return e},e}function Se(){var e=Object(v.a)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgb(0,0,0, 0.5);\n    z-index: 100;\n    opacity: 0;\n    visibility: hidden;\n    transition: 1s;\n\n    ","\n"]);return Se=function(){return e},e}var Ae=h.b.div(Se(),(function(e){return e.open&&Object(h.a)(Ie())})),Le=h.b.div(Ce()),Ne=o.a.memo((function(e){var n=e.onBackgroundClick,t=e.onContentClick,r=e.onGameClick,a=e.games,c=Object(O.a)(e,["onBackgroundClick","onContentClick","onGameClick","games"]);return console.dir("game mooooodal"),o.a.createElement(Ae,Object.assign({},c,{onClick:n}),o.a.createElement(Le,{onClick:t},o.a.createElement(z,{games:a,onGameClick:r}),o.a.createElement(we,{onCancelClick:n})))}));Object(x.f)((function(e){var n=e.history,t=e.openModal,r=e.setOpenModal,a=Object(O.a)(e,["history","openModal","setOpenModal"]),i=Object(c.useState)(!1),u=Object(g.a)(i,2),l=u[0],b=u[1],f=Object(s.c)((function(e){return{games:e.games.games}})).games,d=Object(s.b)(),p=Object(c.useCallback)((function(e){b(!1),r(!1),d(be())}),[d,r]),m=Object(c.useCallback)((function(e){e.stopPropagation()}),[]),v=Object(c.useCallback)((function(e,t){b(!1),r(!1),d(be()),n.push("/game/".concat(t))}),[d,n,r]);return Object(c.useEffect)((function(){b(t)}),[t]),console.dir("gamesmodal~~"),Object(c.useEffect)((function(){return function(){d(be())}}),[d]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Ne,Object.assign({},a,{games:f,open:l,onBackgroundClick:p,onContentClick:m,onGameClick:v})))}));function Te(){var e=Object(v.a)(["\n    position: absolute;\n    top: 10%;\n    left: 0%;\n    width: 100%;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.4);\n"]);return Te=function(){return e},e}function _e(){var e=Object(v.a)(["\n    display: flex;\n    align-items: center;\n    margin-right: 8%;\n"]);return _e=function(){return e},e}function ze(){var e=Object(v.a)(["\n        display: none;\n        visibility: hidden;\n    "]);return ze=function(){return e},e}function Re(){var e=Object(v.a)(["\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n    text-decoration: none;\n    \n    ",";\n"]);return Re=function(){return e},e}function De(){var e=Object(v.a)(["\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    font-size: 16px;\n    cursor: pointer;\n    color: rgb(0, 0, 0, 0.4);\n    margin-left: 20px;\n"]);return De=function(){return e},e}function Ve(){var e=Object(v.a)(["\n    margin-left: 30px;\n    display: flex;\n"]);return Ve=function(){return e},e}function Fe(){var e=Object(v.a)(["\n    display: flex;\n    align-items: center;\n    margin-left: 8%;\n"]);return Fe=function(){return e},e}function Ue(){var e=Object(v.a)(["\n    ","\n    color: rgb(0, 0, 0, 0.4);\n"]);return Ue=function(){return e},e}function Pe(){var e=Object(v.a)(["\n    ","\n    color: rgb(0, 0, 0, 0.6);\n"]);return Pe=function(){return e},e}function Be(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n    height: 40px;\n    background-color: transparent;\n    cursor: pointer;\n    font-size: 30px;\n    text-decoration: none;\n    text-shadow: 2px 2px 2px rgb(0, 0, 0, 0.2);\n    font-style: italic;\n"]);return Be=function(){return e},e}function Ge(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 50px;\n"]);return Ge=function(){return e},e}var Me,Ke=h.b.div(Ge()),Ze=Object(h.a)(Be()),He=Object(h.b)(l.b)(Pe(),Ze),qe=Object(h.b)(l.b)(Ue(),Ze),We=h.b.div(Fe()),Je=h.b.div(Ve()),Xe=h.b.div(De()),$e=Object(h.b)(l.b)(Re(),(function(e){return e.hidden&&Object(h.a)(ze())})),Qe=function(e){return e.to?o.a.createElement($e,e,e.children):o.a.createElement(Xe,e,e.children)},Ye=h.b.div(_e()),en=h.b.div(Te()),nn=o.a.memo((function(e){var n,t=e.onRecord,r=e.onLogout,a=e.onLogin,c=e.session,i=e.auth;return c&&(n=c.nickname),i&&(n=i.username),o.a.createElement(o.a.Fragment,null,o.a.createElement(Ke,null,o.a.createElement(We,null,o.a.createElement(He,{to:"/"},"chesssup"),o.a.createElement(qe,{to:"/"},".com"),o.a.createElement(Je,null,o.a.createElement(Qe,{to:"/game"},"Play"),o.a.createElement(Qe,{to:"/community"},"Community"))),o.a.createElement(Ye,null,o.a.createElement(Qe,{onClick:t},"Search"),i?o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe,{onClick:t},"Setting"),o.a.createElement(Qe,{onClick:t},"Record"),o.a.createElement(Qe,{onClick:r},"Logout",o.a.createElement(en,null,n))):o.a.createElement(Qe,{onClick:a},"Login",o.a.createElement(en,null,n)))))})),tn=t(189),rn=t(190),an=function(e){var n=Object(rn.a)({},e);try{Object.keys(n).forEach((function(e){localStorage.setItem(e,JSON.stringify(n[e]))}))}catch(t){console.dir("Set localStorage failed"),console.dir(t)}},cn=function(e){try{return JSON.parse(localStorage.getItem(e))}catch(n){console.dir("Get localStorage failed"),console.dir(n)}},on=function(e){try{localStorage.removeItem(e)}catch(n){console.dir("Remove localStorage failed"),console.dir(n)}},un=function(){try{localStorage.clear()}catch(e){console.dir("Clear localStorage failed"),console.dir(e)}},ln=a.a.mark($n),sn=a.a.mark(Qn),bn="auth/CONNECT_WEBSOCKET",fn="auth/DISCONNECT_WEBSOCKET",dn=Object(H.a)(bn),pn=Object(H.a)(fn),mn=Object(H.a)("auth/INITIALIZE_SOCKET",(function(e){return e})),vn=Object(H.a)("auth/INITIALIZE_VALUE",(function(e){return e})),xn=Object(H.a)("auth/CLEAR_VALUE"),hn=ne("auth/SET_SESSION"),gn=Object(g.a)(hn,3),On=gn[0],jn=gn[1],En=gn[2],yn=te(On,(function(){return ce.a.get("/api/auth/getSession")})),kn=ne("auth/LOGIN"),wn=Object(g.a)(kn,3),Cn=wn[0],In=wn[1],Sn=wn[2],An=ne("auth/REGISTER"),Ln=Object(g.a)(An,3),Nn=Ln[0],Tn=Ln[1],_n=Ln[2],zn=ne("auth/LOGOUT"),Rn=Object(g.a)(zn,3),Dn=Rn[0],Vn=Rn[1],Fn=Rn[2],Un=ne("auth/CHECK"),Pn=Object(g.a)(Un,3),Bn=Pn[0],Gn=Pn[1],Mn=Pn[2],Kn=te(Cn,(function(e){var n=e.username,t=e.password;return ce.a.post("/api/auth/login",{username:n,password:t})})),Zn=te(Nn,(function(e){var n=e.username,t=e.password;return ce.a.post("/api/auth/register",{username:n,password:t})})),Hn=te(Dn,(function(){return ce.a.post("/api/auth/logout")})),qn=te(Bn,(function(){return ce.a.get("/api/auth/check")})),Wn=Object(H.a)("auth/CHANGE_FIELD",(function(e){return e})),Jn=Object(H.a)("auth/CLEAR_FIELD",(function(e){return e})),Xn=Object(H.a)("auth/CLEAR_SPECIFIC_FIELD",(function(e){return e}));function $n(e){var n,t,r;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.payload,t="key=".concat(n),a.next=4,Object(W.e)(ee,{url:"/auth",initializeSocket:mn,initializeValue:vn,query:t});case 4:return r=a.sent,a.next=7,Object(W.g)(fn);case 7:return a.next=9,Object(W.c)(r);case 9:case"end":return a.stop()}}),ln)}function Qn(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.h)(bn,$n);case 2:case"end":return e.stop()}}),sn)}var Yn={socket:null,tempAuth:null,session:null,error:null,auth:null,authError:null,login:{username:"",password:""},register:{username:"",password:"",passwordConfirm:""}},et=Object(q.a)((Me={},Object(K.a)(Me,"auth/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(Z.a)({},e,{socket:t})})),Object(K.a)(Me,"auth/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(O.a)(t,["type"]));return Object(Z.a)({},e,{tempAuth:Object(Z.a)({},r)})})),Object(K.a)(Me,"auth/CLEAR_VALUE",(function(e){return Object(Z.a)({},e,{tempAuth:Yn.tempAuth})})),Object(K.a)(Me,jn,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{session:t})})),Object(K.a)(Me,En,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{session:null,error:t})})),Object(K.a)(Me,"auth/CHANGE_FIELD",(function(e,n){var t=n.payload,r=t.form,a=t.key,c=t.value;return Object(tn.a)(e,(function(e){e[r][a]=c}))})),Object(K.a)(Me,"auth/CLEAR_FIELD",(function(e,n){var t,r=n.payload.form;return Object(Z.a)({},e,(t={},Object(K.a)(t,r,Yn[r]),Object(K.a)(t,"authError",Yn.authError),t))})),Object(K.a)(Me,"auth/CLEAR_SPECIFIC_FIELD",(function(e,n){var t,r=n.payload,a=r.form,c=r.key;return Object(Z.a)({},e,(t={},Object(K.a)(t,a,Object(Z.a)({},e[a],Object(K.a)({},c,Yn[a][c]))),Object(K.a)(t,"authError",Yn.authError),t))})),Object(K.a)(Me,In,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{auth:t,authError:null})})),Object(K.a)(Me,Sn,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{auth:null,authError:t})})),Object(K.a)(Me,Tn,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{auth:t,authError:null})})),Object(K.a)(Me,_n,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{auth:null,authError:t})})),Object(K.a)(Me,Vn,(function(e){return Object(Z.a)({},e,{auth:null,authError:null})})),Object(K.a)(Me,Fn,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{auth:null,authError:t})})),Object(K.a)(Me,Gn,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{auth:t,authError:null})})),Object(K.a)(Me,Mn,(function(e,n){var t=n.payload;return Object(Z.a)({},e,{auth:null,authError:t})})),Me),Yn),nt=Object(x.f)((function(e){var n=e.history,t=Object(s.c)((function(e){var n=e.auth;return{session:n.session,auth:n.auth}})),r=t.session,i=t.auth,u=Object(s.b)(),l=Object(c.useCallback)((function(){u((function(e,n){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.a.awrap(e(Hn()));case 3:on("auth"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.dir("Logout failed");case 9:case"end":return n.stop()}}),null,null,[[0,6]])}))}),[u]),b=Object(c.useCallback)((function(){alert("onRecord")}),[]),f=Object(c.useCallback)((function(){u(Jn({form:"login"})),n.push("/login")}),[u,n]);return o.a.createElement(nn,{onRecord:b,onLogout:l,onLogin:f,session:r,auth:i})}));function tt(e,n){switch(n.type){case"LOADING":return{loading:!0,data:null,error:null};case"SUCCESS":return{loading:!1,data:n.data,error:null};case"FAILURE":return{loading:!1,data:null,error:n.error};default:throw new Error("Unhandled action type Error")}}var rt=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=Object(c.useReducer)(tt,{loading:!1,data:null,error:!1}),r=Object(g.a)(t,2),o=r[0],i=r[1],u=function(){var n;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return i({type:"LOADING"}),t.prev=1,t.next=4,a.a.awrap(e());case 4:n=t.sent,i({type:"SUCCESS",data:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),i({type:"FAILURE",error:t.t0});case 11:case"end":return t.stop()}}),null,null,[[1,8]])};return Object(c.useEffect)((function(){u()}),n),[o,u]};function at(){var e=Object(v.a)(["\n    width: 100%;\n    height: 800px;\n"]);return at=function(){return e},e}var ct=h.b.div(at()),ot=function(){return o.a.createElement(ct,null)},it=function(){var e=Object(s.b)(),n=rt((function(){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(e(yn()));case 2:return n.abrupt("return",!0);case 3:case"end":return n.stop()}}))}),[e]),t=Object(g.a)(n,1)[0],r=t.loading,c=t.data,i=t.error;return r?null:i?null:c?o.a.createElement(ot,null):null},ut=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(nt,null),o.a.createElement(it,null))},lt=t(34),st=t.n(lt),bt=t(59),ft=t(25),dt=t(0);function pt(){var e=Object(v.a)(["\n    position: absolute;\n    top: 0;\n    left: 48%;\n    width: 50%;\n    display: flex;\n    justify-content: flex-end;\n    font-size: 12px;\n    @keyframes fontOpacity {\n        0%{\n            color: rgb(0, 0, 0, 0);\n        }\n        100%{\n            color: rgb(0, 0, 0, 0.4);\n        }\n      }\n    animation: fontOpacity 1s 1;\n    color: rgb(0, 0, 0, 0.4);\n"]);return pt=function(){return e},e}function mt(){var e=Object(v.a)(["\n    outline: none;\n    border: none;\n    font-size: 10px;\n    color: black;\n    text-decoration: none;\n    cursor: pointer;\n    margin-left: 5px;\n"]);return mt=function(){return e},e}function vt(){var e=Object(v.a)(["\n    color: rgb(0, 0, 0, 0.5);\n    font-size: 10px;\n"]);return vt=function(){return e},e}function xt(){var e=Object(v.a)(["\n    display: flex;\n    align-items: center;\n    margin-top: 10px;\n    height: 40px;\n"]);return xt=function(){return e},e}function ht(){var e=Object(v.a)(["\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    border: none;\n    outline: none;\n    width: 30%;\n    cursor: pointer;\n    height: 40px;\n\n    &:hover, :active {\n        background-color: rgb(0, 0, 0, 0.05);\n    }\n"]);return ht=function(){return e},e}function gt(){var e=Object(v.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 150px;\n"]);return gt=function(){return e},e}function Ot(){var e=Object(v.a)(["\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.5);\n    cursor: pointer;\n"]);return Ot=function(){return e},e}function jt(){var e=Object(v.a)(["\n    display: flex;\n    align-items: center;\n    height: 100%;\n    font-size: 10px;\n    color: rgb(0, 0, 0, 0.5);\n    cursor: pointer;\n    margin-left: 5px;\n"]);return jt=function(){return e},e}function Et(){var e=Object(v.a)(["\n    height: 100%;\n    outline: none;\n    margin: 0px;\n"]);return Et=function(){return e},e}function yt(){var e=Object(v.a)(["\n    display: flex;\n    align-content: center;\n    width: 30%;\n    height: 100%;\n"]);return yt=function(){return e},e}function kt(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 10px;\n    width: 60%;\n    height: 20px;\n"]);return kt=function(){return e},e}function wt(){var e=Object(v.a)(["\n    ","\n"]);return wt=function(){return e},e}function Ct(){var e=Object(v.a)(["\n    ","\n"]);return Ct=function(){return e},e}function It(){var e=Object(v.a)(["\n    outline: none;\n    border: none;\n    height: 40px;\n    width: 80%;\n    padding-left: 5%;\n"]);return It=function(){return e},e}function St(){var e=Object(v.a)(["\n        animation: blinking 1s 2;\n    "]);return St=function(){return e},e}function At(){var e=Object(v.a)(["\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding-left: 1%;\n    width: 60%;\n\n    &+& {\n        margin-top: 10px;\n    }\n\n    @keyframes blinking {\n        0%{\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        }\n        50% {\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.56), 0 3px 1px -2px rgba(0,0,0,0.8), 0 1px 5px 0 rgba(0,0,0,0.48);\n        }\n        100%{\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        }\n      }\n\n    ","\n"]);return At=function(){return e},e}function Lt(){var e=Object(v.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 150px;\n"]);return Lt=function(){return e},e}function Nt(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    font-size: 20px;\n    height: 100px;\n    text-shadow: 2px 2px 2px rgba(0,0,0,0.14);\n"]);return Nt=function(){return e},e}function Tt(){var e=Object(v.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 30%;\n    height: 400px;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Tt=function(){return e},e}function _t(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 800px;\n"]);return _t=function(){return e},e}var zt,Rt=h.b.form(_t()),Dt=h.b.div(Tt()),Vt=h.b.div(Nt()),Ft=h.b.div(Lt()),Ut=h.b.div(At(),(function(e){return e.blink&&Object(h.a)(St())})),Pt=Object(h.a)(It()),Bt=h.b.input(Ct(),Pt),Gt=h.b.input(wt(),Pt),Mt=h.b.div(kt()),Kt=h.b.div(yt()),Zt=h.b.input(Et()),Ht=h.b.div(jt()),qt=h.b.div(Ot()),Wt=h.b.div(gt()),Jt=h.b.button(ht()),Xt=h.b.div(xt()),$t=h.b.div(vt()),Qt=h.b.button(mt()),Yt=h.b.div(pt()),er=o.a.memo((function(e){var n=e.login,t=e.register,r=e.form,a=e.error,i=e.onSubmit,u=e.onChange,l=e.onRegister,s=Object(c.useRef)({}),b=Object(c.useCallback)((function(e){s.current[e].focus()}),[]);return o.a.createElement(Rt,{autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",onSubmit:i},o.a.createElement(Dt,null,o.a.createElement(Vt,null,n?"Sign In":t?"Sign Up":null),o.a.createElement(Ft,null,o.a.createElement(Ut,{onClick:b.bind(null,"username"),blink:a.username,key:"username_".concat(a.count)},o.a.createElement(dt.b.Provider,{value:{style:{width:"20px",height:"20px",cursor:"pointer"}}},o.a.createElement(bt.c,null)),o.a.createElement(Bt,{type:"text",name:"username",placeholder:"Email",onChange:u,value:r.username,ref:function(e){return s.current.username=e}}),o.a.createElement(Yt,null,a.username)),o.a.createElement(Ut,{onClick:b.bind(null,"password"),blink:a.password,key:"password_".concat(a.count)},o.a.createElement(dt.b.Provider,{value:{style:{width:"20px",height:"20px",cursor:"pointer"}}},o.a.createElement(ft.h,null)),o.a.createElement(Gt,{type:"password",name:"password",placeholder:"Password",onChange:u,value:r.password,ref:function(e){return s.current.password=e}}),o.a.createElement(Yt,null,a.password)),t?o.a.createElement(Ut,{onClick:b.bind(null,"passwordConfirm"),blink:a.passwordConfirm,key:"passwordConfirm_".concat(a.count)},o.a.createElement(dt.b.Provider,{value:{style:{width:"20px",height:"20px",cursor:"pointer"}}},o.a.createElement(ft.h,null)),o.a.createElement(Gt,{type:"password",name:"passwordConfirm",placeholder:"Confirm Password",onChange:u,value:r.passwordConfirm,ref:function(e){return s.current.passwordConfirm=e}}),o.a.createElement(Yt,null,a.passwordConfirm)):null,n?o.a.createElement(Mt,null,o.a.createElement(Kt,null,o.a.createElement(Zt,{type:"checkbox"}),o.a.createElement(Ht,null,"Remember Me")),o.a.createElement(qt,null,"Forget password?")):null),o.a.createElement(Wt,null,o.a.createElement(Jt,{type:"submit"},"Submit"),n?o.a.createElement(Xt,null,o.a.createElement($t,null,"Don't have an account?"),o.a.createElement(Qt,{type:"button",onClick:l},"Create")):o.a.createElement(Xt,null,o.a.createElement($t,null,"Don't have an account?"),o.a.createElement(Qt,{type:"button"},"Create")))))})),nr=Object(x.f)((function(e){var n=e.history,t=Object(s.c)((function(e){var n=e.auth;return{form:n.login,auth:n.auth,authError:n.authError}})),r=t.form,i=t.auth,u=t.authError,l=Object(s.b)(),b=Object(c.useState)({username:"",password:""}),f=Object(g.a)(b,2),d=f[0],p=f[1],m=Object(c.useCallback)((function(e){var n=e.target,t=n.name,r=n.value;""!==d[t]&&p((function(e){return Object(Z.a)({},e,Object(K.a)({},t,""))})),l(Wn({form:"login",key:t,value:r}))}),[l,d]),v=Object(c.useCallback)((function(e){e.preventDefault();var n=r.username,t=r.password,c=Object.keys(r).reduce((function(e,n){return Object(Z.a)({},e,Object(K.a)({},n,!1))}),{});Object.keys(c).filter((function(e){return""===r[e]})).forEach((function(e){c=Object(Z.a)({},c,Object(K.a)({},e,"Required field"))}));var o,i=st.a.object().keys({username:st.a.string().max(80).email({minDomainAtoms:2}).required().error((function(){return{message:"Wrong format"}})),password:st.a.string().min(4).max(16).required().error((function(){return{message:"4 ~ 16 digits"}}))}),u=st.a.validate(r,i,{abortEarly:!1});if(u.error&&u.error.details.forEach((function(e){c[e.path[0]]||(c=Object(Z.a)({},c,Object(K.a)({},e.path[0],e.message)))})),Object.keys(c).filter((function(e){return c[e]})).length>0)return p((function(e){return Object(Z.a)({},c,{count:e.count+1})})),void Object.keys(c).forEach((function(e){c[e]&&l(Xn({form:"login",key:e}))}));l((o={username:n,password:t},function(e,n){var t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.a.awrap(e(Kn(o)));case 3:(t=n.sent)&&an({auth:t}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.dir("Login failed");case 10:case"end":return n.stop()}}),null,null,[[0,7]])})),l(Jn({form:"login"}))}),[l,r]);Object(c.useEffect)((function(){if(u){var e={},t=u.response.data;return Object.keys(t).forEach((function(n){e=Object(Z.a)({},e,Object(K.a)({},n,t[n]))})),void p(e)}i&&n.push("/")}),[n,i,u]),Object(c.useEffect)((function(){return function(){l(Jn({form:"login"}))}}),[l]);var x=Object(c.useCallback)((function(){l(Jn({form:"register"})),n.push("/register")}),[l,n]);return o.a.createElement(er,{login:!0,onSubmit:v,onChange:m,form:r,error:d,onRegister:x})})),tr=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Sign In \u2022 Chesssup.com")),o.a.createElement(nt,null),o.a.createElement(nr,null))},rr=Object(x.f)((function(e){var n=e.history,t=Object(s.c)((function(e){var n=e.auth;return{form:n.register,auth:n.auth,authError:n.authError}})),r=t.form,i=t.auth,u=t.authError,l=Object(s.b)(),b=Object(c.useState)({username:"",password:"",passwordConfirm:""}),f=Object(g.a)(b,2),d=f[0],p=f[1],m=Object(c.useCallback)((function(e){var n=e.target,t=n.name,r=n.value;""!==d[t]&&p((function(e){return Object(Z.a)({},e,Object(K.a)({},t,""))})),l(Wn({form:"register",key:t,value:r}))}),[l,d]),v=Object(c.useCallback)((function(e){e.preventDefault();var n=r.username,t=r.password,c=Object.keys(r).reduce((function(e,n){return Object(Z.a)({},e,Object(K.a)({},n,!1))}),{});Object.keys(c).filter((function(e){return""===r[e]})).forEach((function(e){c=Object(Z.a)({},c,Object(K.a)({},e,"Required field"))}));var o,i=st.a.object().keys({username:st.a.string().max(80).email({minDomainAtoms:2}).required().error((function(){return{message:"Wrong format"}})),password:st.a.string().min(4).max(16).required().error((function(){return{message:"4 ~ 16 digits"}})),passwordConfirm:st.a.any().valid(st.a.ref("password")).required().error((function(){return{message:"Password mismatch"}}))}),u=st.a.validate(r,i,{abortEarly:!1});if(u.error&&u.error.details.forEach((function(e){c[e.path[0]]||(c=Object(Z.a)({},c,Object(K.a)({},e.path[0],e.message)))})),Object.keys(c).filter((function(e){return c[e]})).length>0)return p((function(e){return Object(Z.a)({},c,{count:e.count+1})})),void Object.keys(c).forEach((function(e){c[e]&&l(Xn({form:"register",key:e}))}));l((o={username:n,password:t},function(e,n){var t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.a.awrap(e(Zn(o)));case 3:(t=n.sent)&&an({auth:t}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.dir("Register failed");case 10:case"end":return n.stop()}}),null,null,[[0,7]])})),l(Jn({form:"register"}))}),[l,r]);return Object(c.useEffect)((function(){if(u){var e={},t=u.response.data;return Object.keys(t).forEach((function(n){e=Object(Z.a)({},e,Object(K.a)({},n,t[n]))})),void p(e)}i&&n.push("/")}),[n,i,u]),Object(c.useEffect)((function(){return function(){l(Jn({form:"register"}))}}),[l]),o.a.createElement(er,{register:!0,onSubmit:v,onChange:m,form:r,error:d})})),ar=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Sign Up \u2022 Chesssup.com")),o.a.createElement(nt,null),o.a.createElement(rr,null))},cr=t(52),or=t.n(cr),ir=[[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}],[{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1},{covered:!1}]],ur={pawn:{type:"onetime",move:[{dy:-1,dx:0,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!n[t][r].piece}},{dy:-2,dx:0,except:function(e){var n=e.board,t=e.y,r=e.x,a=e.owner;return!("black"===a&&1!==t||"white"===a&&6!==t)&&(!("black"===a&&n[2][r].piece||"white"===a&&n[5][r].piece)&&!("black"===a&&n[3][r].piece||"white"===a&&n[4][r].piece))}},{dy:-1,dx:-1,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!!n[t][r].piece}},{dy:-1,dx:1,except:function(e){var n=e.board,t=e.dy,r=e.dx;return!!n[t][r].piece}}]},knight:{type:"onetime",move:[{dy:-2,dx:-1},{dy:-2,dx:1},{dy:2,dx:-1},{dy:2,dx:1},{dy:-1,dx:-2},{dy:-1,dx:2},{dy:1,dx:-2},{dy:1,dx:2}]},king:{type:"onetime",move:[{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:1},{dy:0,dx:-1},{dy:-1,dx:1},{dy:-1,dx:-1},{dy:1,dx:-1},{dy:1,dx:1},{dy:0,dx:2,except:function(e){var n=e.board,t=e.y,r=e.x,a="white"===e.owner?"black":"white";if(!n[t][r].piece||n[t][r].dirty)return!1;if(!n[t][r+3].piece||n[t][r+3].dirty)return!1;if(n[t][r+1].piece||n[t][r+2].piece)return!1;for(var c=lr(a,n,!0),o=c.length,i=0;i<o;++i){var u=c[i];if(u.dy===t&&(u.dx===r||u.dx===r+1||u.dx===r+2))return!1}return!0}},{dy:0,dx:-2,except:function(e){var n=e.board,t=e.y,r=e.x,a="white"===e.owner?"black":"white";if(!n[t][r].piece||n[t][r].dirty)return!1;if(!n[t][r-4].piece||n[t][r-4].dirty)return!1;if(n[t][r-1].piece||n[t][r-2].piece||n[t][r-3].piece)return!1;for(var c=lr(a,n,!0),o=c.length,i=0;i<o;++i){var u=c[i];if(u.dy===t&&(u.dx===r||u.dx===r-1||u.dx===r-2))return!1}return!0}}]},bishop:{type:"multitime",move:[{dy:1,dx:-1},{dy:1,dx:1},{dy:-1,dx:-1},{dy:-1,dx:1}]},rook:{type:"multitime",move:[{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:-1},{dy:0,dx:1}]},queen:{type:"multitime",move:[{dy:1,dx:-1},{dy:1,dx:1},{dy:-1,dx:-1},{dy:-1,dx:1},{dy:1,dx:0},{dy:-1,dx:0},{dy:0,dx:-1},{dy:0,dx:1}]}},lr=function(e,n,t){for(var r=[],a=0;a<8;++a)for(var c=0;c<8;++c)if(n[a][c].owner===e){var o=sr(n,a,c,t);r=[].concat(Object(j.a)(r),Object(j.a)(o))}return r},sr=function(e,n,t,r){var a=e[n][t],c=a.piece,o=a.owner,i={board:e,y:n,x:t,owner:o};if(c){var u=ur[c],l=u.type,s=u.move;return"onetime"===l?s.reduce((function(a,u){var l=n+("black"===o?-u.dy:+u.dy),s=t+u.dx;return l<0||s<0||l>7||s>7?a:(i=Object(Z.a)({},i,{dy:l,dx:s}),u.except&&("king"===c&&r||!u.except||!u.except(i))||e[l][s].owner&&e[n][t].owner===e[l][s].owner||a.push({dy:l,dx:s}),a)}),[]):s.flatMap((function(r){for(var a=0,c=[];;){++a;var i=n+a*("black"===o?-r.dy:+r.dy),u=t+a*r.dx;if(i<0||u<0||i>7||u>7)break;if(e[i][u].owner&&e[i][u].owner===o)break;if(c.push({dy:i,dx:u}),e[i][u].owner&&e[i][u].owner!==o)break}return c}))}},br=a.a.mark(Tr),fr=a.a.mark(_r),dr="canvas/CONNECT_WEBSOCKET",pr="canvas/DISCONNECT_WEBSOCKET",mr=Object(H.a)(dr,(function(e){return e})),vr=Object(H.a)(pr),xr=Object(H.a)("canvas/INITIALIZE_SOCKET",(function(e){return e})),hr=Object(H.a)("canvas/INITIALIZE_VALUE",(function(e){return e})),gr=Object(H.a)("canvas/CHANGE_VALUE",(function(e){return e})),Or=Object(H.a)("canvas/CLEAR_VALUE"),jr=Object(H.a)("canvas/INITIALIZE_BLOCKED",(function(e){return e})),Er=Object(H.a)("canvas/CHANGE_BLOCKED",(function(e){return e})),yr=ne("canvas/SET_MOVE_PIECE"),kr=Object(g.a)(yr,3),wr=kr[0],Cr=kr[1],Ir=kr[2],Sr=te(wr,(function(e){return ce.a.post("/api/canvas/movePiece",e)})),Ar=function(e,n){var t=function(e){var n=or.a.cloneDeep(e);return n.reverse(),n.forEach((function(e){e.reverse()})),n}(n);e=Object(j.a)(e);for(var r=function(n){for(var r=function(r){var a=t[n][r],c=e[n][r];console.dir(a),console.dir(c),Object.keys(a).every((function(t){return console.dir(t),!(!c[t]||c[t]!==a[t])||(console.dir(c[t]),console.dir(a[t]),e[n]=Object(j.a)(e[n]),e[n][r]=Object(Z.a)({},a),!1)}))},a=0;a<8;++a)r(a)},a=0;a<8;++a)r(a);return e},Lr=function(e){var n=e.move;return function(e,t){var r=n.prev,a=n.next,c=t(),o=c.canvas,i=o.board,u=o.reverseBoard,l=c.auth.tempAuth,s=c.game.turn;l&&(("white"===l.role||"spectator"===l.role)&&s%2===0||"black"===l.role&&s%2===1?e(Er({blocked:!1})):e(Er({blocked:!0})));var b=i[r.y][r.x],f=Nr(Object(j.a)(i),["covered","clicked","tracked"]);f[a.y]=Object(j.a)(f[a.y]),f[a.y][a.x]=Object(Z.a)({},b,{tracked:!0,dirty:!0}),f[r.y]=Object(j.a)(f[r.y]),f[r.y][r.x]={covered:!1,tracked:!0};var d=f[a.y][a.x],p=d.owner,m=d.piece;if(("white"===p&&"pawn"===m&&0===a.y||"black"===p&&"pawn"===m&&7===a.y)&&(f[a.y][a.x]=Object(Z.a)({},f[a.y][a.x],{piece:"queen"})),"king"===f[a.y][a.x].piece){if(a.x-r.x===2){f[r.y]=Object(j.a)(f[r.y]);var v=Object(Z.a)({},f[r.y][r.x+3]);f[r.y][r.x+3]={covered:!1},f[r.y][r.x+1]=Object(Z.a)({},v,{dirty:!0})}if(a.x-r.x===-2){f[r.y]=Object(j.a)(f[r.y]);var x=Object(Z.a)({},f[r.y][r.x-4]);f[r.y][r.x-4]={covered:!1},f[r.y][r.x-1]=Object(Z.a)({},x,{dirty:!0})}}var h=Ar(u,f);e(gr({board:f,reverseBoard:h,clicked:null}))}},Nr=function(e,n){for(var t=[],r=e.length,a=function(a){for(var c=function(r){var c=!1;n.forEach((function(n){c|=e[a][r][n]})),c&&t.push({y:a,x:r})},o=0;o<r;++o)c(o)},c=0;c<r;++c)a(c);return t.forEach((function(t){e[t.y]=Object(j.a)(e[t.y]);var r=e[t.y][t.x],a=Object(Z.a)({},r);n.forEach((function(e){a[e]=!1})),e[t.y].splice(t.x,1,a)})),e};function Tr(e){var n,t,r;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.payload,t="key=".concat(n),a.next=4,Object(W.e)(ee,{url:"/canvas",initializeSocket:xr,initializeValue:hr,changeValue:Lr,query:t});case 4:return r=a.sent,a.next=7,Object(W.g)(pr);case 7:return a.next=9,Object(W.c)(r);case 9:case"end":return a.stop()}}),br)}function _r(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.h)(dr,Tr);case 2:case"end":return e.stop()}}),fr)}var zr=or.a.cloneDeep(ir);zr.reverse(),zr.forEach((function(e){e.reverse()}));var Rr={socket:null,error:null,board:ir,reverseBoard:zr,clicked:null,blocked:!0,reversed:!1},Dr=Object(q.a)((zt={},Object(K.a)(zt,"canvas/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(Z.a)({},e,{socket:t})})),Object(K.a)(zt,"canvas/INITIALIZE_VALUE",(function(e,n){var t=n.payload.board;return Object(Z.a)({},e,{board:t,reverseBoard:Ar(e.reverseBoard,t)})})),Object(K.a)(zt,"canvas/CHANGE_VALUE",(function(e,n){var t=n.payload,r=t.board,a=t.reverseBoard,c=t.clicked;return Object(Z.a)({},e,{board:r,reverseBoard:a,clicked:c})})),Object(K.a)(zt,"canvas/CLEAR_VALUE",(function(e){return Rr})),Object(K.a)(zt,"canvas/INITIALIZE_BLOCKED",(function(e,n){var t=n.payload.blocked;return Object(Z.a)({},e,{blocked:t})})),Object(K.a)(zt,"canvas/CHANGE_BLOCKED",(function(e,n){var t=n.payload.blocked;return Object(Z.a)({},e,{blocked:t})})),Object(K.a)(zt,Cr,(function(e){return e})),Object(K.a)(zt,Ir,(function(e){return e})),zt),Rr),Vr=t(49),Fr={pawn:Vr.d,king:Vr.b,queen:Vr.e,bishop:Vr.a,knight:Vr.c,rook:Vr.f,covered:Vr.g},Ur={white:{color:"white",style:{filter:"drop-shadow(1px 1px 1px white)",width:"80%",height:"80%"}},black:{color:"black",style:{filter:"drop-shadow(1px 1px 1px black)",width:"80%",height:"80%"}},covered0:{style:{filter:"drop-shadow(1px 1px 1px black)",width:"30%",height:"30%",color:"rgb(130, 151, 105)"}},covered1:{style:{filter:"drop-shadow(1px 1px 1px black)",width:"30%",height:"30%",color:"rgb(100, 111, 64)"}}};function Pr(){var e=Object(v.a)(["\n        pointer-events: none;\n    "]);return Pr=function(){return e},e}function Br(){var e=Object(v.a)(["\n    ","\n"]);return Br=function(){return e},e}function Gr(){var e=Object(v.a)(["\n            background-color: rgb(132, 121, 78);\n        "]);return Gr=function(){return e},e}function Mr(){var e=Object(v.a)(["\n            background-color: rgb(174, 177, 135);\n        "]);return Mr=function(){return e},e}function Kr(){var e=Object(v.a)(["\n        background-color: rgb(170, 162, 58);\n    "]);return Kr=function(){return e},e}function Zr(){var e=Object(v.a)(["\n        background-color: rgb(205, 210, 106);\n    "]);return Zr=function(){return e},e}function Hr(){var e=Object(v.a)(["\n        background-color: rgb(100, 111, 64);\n    "]);return Hr=function(){return e},e}function qr(){var e=Object(v.a)(["\n        background-color: rgb(130, 151, 105);\n    "]);return qr=function(){return e},e}function Wr(){var e=Object(v.a)(["\n        background-color: rgb(181, 136, 99);\n    "]);return Wr=function(){return e},e}function Jr(){var e=Object(v.a)(["\n        background-color: rgb(240, 217, 181);\n    "]);return Jr=function(){return e},e}function Xr(){var e=Object(v.a)(["\n    display: flex;\n    cursor: pointer;\n    justify-content: center;\n    align-items: center;\n    /* width: 90px;\n    height: 90px; */\n    \n    width: ",";\n\n    height: ",";\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n\n    &:hover {\n        ","\n\n        ","  \n    }\n"]);return Xr=function(){return e},e}function $r(){var e=Object(v.a)(["\n    display: flex;\n"]);return $r=function(){return e},e}function Qr(){var e=Object(v.a)(["\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Qr=function(){return e},e}var Yr=function(e){var n=e.piece,t=e.owner,r=e.covered,a=e.cellNum,c=null;if(r){var i=Fr.covered;c=o.a.createElement(dt.b.Provider,{value:Ur["covered".concat(a)]},o.a.createElement(i,null))}if(!n||!t)return c;var u=Fr[n],l=c?{opacity:.5,filter:"black"===t?"drop-shadow(1px 1px 1px white)":"drop-shadow(1px 1px 1px black)"}:null,s=Object(Z.a)({},Ur[t],{style:Object(Z.a)({},Ur[t].style,{},l)});return o.a.createElement(dt.b.Provider,{value:s},o.a.createElement(u,null))},ea=h.b.div(Qr()),na=h.b.div($r()),ta=h.b.div(Xr(),(function(e){return e.cellSize?e.cellSize:"90px"}),(function(e){return e.cellSize?e.cellSize:"90px"}),(function(e){return 0===e.cellNum&&Object(h.a)(Jr())}),(function(e){return 1===e.cellNum&&Object(h.a)(Wr())}),(function(e){return 0===e.cellNum&&e.clicked&&Object(h.a)(qr())}),(function(e){return 1===e.cellNum&&e.clicked&&Object(h.a)(Hr())}),(function(e){return 0===e.cellNum&&e.tracked&&Object(h.a)(Zr())}),(function(e){return 1===e.cellNum&&e.tracked&&Object(h.a)(Kr())}),(function(e){return 0===e.cellNum&&e.covered&&Object(h.a)(Mr())}),(function(e){return 1===e.cellNum&&e.covered&&Object(h.a)(Gr())})),ra=o.a.memo((function(e){var n=e.row,t=e.y,r=e.cellSize,a=e.onClickCell,c=e.pieceConverter;return console.dir("Canvas Row"),o.a.createElement(na,null,n.map((function(e,n){return o.a.createElement(aa,{key:"cell_".concat(t,"_").concat(n),onClick:a.bind(null,{y:t,x:n}),pieceConverter:c,cellNum:(n+t)%2,cellSize:r,cell:e,y:t,x:n})})))}),(function(e,n){return e.row===n.row})),aa=o.a.memo((function(e){var n=e.cell,t=e.cellSize,r=e.cellNum,a=e.onClick,c=e.pieceConverter,i=e.y,u=e.x;return console.dir("Canvas Cell ".concat(i,"_").concat(u)),o.a.createElement(ta,Object.assign({onClick:a,cellNum:r,cellSize:t},n),c({piece:n.piece,owner:n.owner,covered:n.covered,cellNum:r}))}),(function(e,n){return e.cell===n.cell})),ca=h.b.div(Br(),(function(e){return e.blocked&&Object(h.a)(Pr())})),oa=function(e){var n=e.board,t=e.blocked,r=e.cellSize,a=e.onClick,i=Object(c.useCallback)((function(e){var n=e.y,t=e.x;a(n,t)}),[a]);return o.a.createElement(ca,{blocked:t},n.map((function(e,n){return o.a.createElement(ra,{key:"row_".concat(n),row:e,y:n,cellSize:r,onClickCell:i,pieceConverter:Yr})})))},ia=o.a.memo((function(e){return o.a.createElement(ea,null,o.a.createElement(oa,e))})),ua=function(e){var n=e.cellSize,t=Object(s.c)((function(e){var n=e.canvas,t=e.auth,r=e.game,a=e.record;return{board:n.board,reverseBoard:n.reverseBoard,reversed:a.reversed,blocked:n.blocked,turn:r.turn,tempAuth:t.tempAuth}})),r=t.board,a=t.reverseBoard,i=t.reversed,u=t.blocked,l=t.turn,b=t.tempAuth,f=Object(s.b)();Object(c.useEffect)((function(){b&&("white"===b.role&&l%2===0||"black"===b.role&&l%2===1?f(jr({blocked:!1})):f(jr({blocked:!0})))}),[f,l,b]),Object(c.useEffect)((function(){return function(){f(Or())}}),[f]);var d=Object(c.useCallback)((function(e,n){f(function(e){var n=e.y,t=e.x;return function(e,r){var a=r(),c=a.canvas,o=c.board,i=c.reverseBoard,u=c.clicked,l=a.record.reversed,s=a.auth.tempAuth,b=!1;s&&("white"===s.role&&l||"black"===s.role&&!l)&&(b=!0);var f=n,d=t;if(b&&(f=7-n,d=7-t),u&&o[f][d].covered){var p=r().canvas.socket;e(Sr({socket:p,move:{prev:u,next:{y:f,x:d}}}))}else{var m=sr(o,f,d),v=Nr(Object(j.a)(o),["covered","clicked"]);m.forEach((function(e){v[e.dy]=Object(j.a)(v[e.dy]);var n=v[e.dy][e.dx];v[e.dy].splice(e.dx,1,Object(Z.a)({},n,{covered:!0}))})),v[f]=Object(j.a)(v[f]),v[f][d]=Object(Z.a)({},v[f][d],{clicked:!0});var x=Ar(i,v);e(gr({board:v,reverseBoard:x,clicked:{y:f,x:d}}))}}}({y:e,x:n}))}),[f]),p=!1;b&&(("white"===b.role||"spectator"===b.role)&&i||"black"===b.role&&!i)&&(p=!0);var m=r;return p&&(m=a),o.a.createElement(ia,{board:m,blocked:u,onClick:d,cellSize:n})};function la(){var e=Object(v.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* pointer-events: none; */\n"]);return la=function(){return e},e}function sa(){var e=Object(v.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    transition: 0.5s;\n    opacity: 0;\n\n    &:hover {\n        opacity: 1;\n    }\n"]);return sa=function(){return e},e}var ba=h.b.div(sa()),fa=h.b.div(la()),da=function(e){var n=e.cellSize;return o.a.createElement(ba,null,o.a.createElement(fa,null,o.a.createElement(ua,{cellSize:n})))},pa=function(e){var n=e.gameId,t=e.cellSize,r=Object(s.b)();Object(c.useEffect)((function(){return function(){r(vr())}}),[r]);var i=rt((function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return r(vr()),e.next=3,a.a.awrap(Promise.resolve().then((function(){r(mr(n))})));case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}))}),[r]),u=Object(g.a)(i,1)[0],l=u.loading,b=u.data,f=u.error;return l?null:f?null:b?o.a.createElement(da,{cellSize:t}):null};function ma(){var e=Object(v.a)(["\n    \n"]);return ma=function(){return e},e}function va(){var e=Object(v.a)(["\n    \n"]);return va=function(){return e},e}function xa(){var e=Object(v.a)(["\n    z-index: 1;\n    display: flex;\n    position: relative;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 216px;\n    height: 216px;\n    background-color: rgb(255,255,255, 0.6);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    cursor: pointer;\n    transition: 0.5s;\n\n    &:hover {\n        background-color: rgb(255,255,255, 0.1);\n    }\n\n    &:first-child {\n        margin-left: 18px;\n    }\n\n    & + & {\n        margin-left: 18px;\n    }\n"]);return xa=function(){return e},e}var ha=h.b.div(xa()),ga=h.b.div(va()),Oa=h.b.div(ma()),ja=o.a.memo((function(e){var n=e.game,t=e.canvas,r=e.onClick,a=e.onMouseEnter,c=e.onMouseLeave,i=Object(O.a)(e,["game","canvas","onClick","onMouseEnter","onMouseLeave"]);return console.dir("game~"),o.a.createElement(ha,Object.assign({onClick:function(){return r(n.key)},onMouseEnter:a,onMouseLeave:c},i),o.a.createElement(ga,null,n.name),o.a.createElement(Oa,null,n.participant),t?o.a.createElement(pa,{gameId:n.key,cellSize:"27px"}):null)})),Ea=Object(x.f)((function(e){var n=e.history,t=Object(O.a)(e,["history"]),r=Object(c.useState)(!1),a=Object(g.a)(r,2),i=a[0],u=a[1],l=Object(c.useCallback)((function(){u(!0)}),[]),s=Object(c.useCallback)((function(){u(!1)}),[]),b=Object(c.useCallback)((function(e){n.push("/game/".concat(e))}),[n]);return o.a.createElement(ja,Object.assign({},t,{canvas:i,onClick:b,onMouseEnter:l,onMouseLeave:s}))}));function ya(){var e=Object(v.a)(["\n    width: 720px;\n    height: 720px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    overflow-y: overlay;\n    padding-right: 20px;\n"]);return ya=function(){return e},e}function ka(){var e=Object(v.a)(["\n    width: 720px;\n    height: 720px;\n    overflow: hidden;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return ka=function(){return e},e}function wa(){var e=Object(v.a)(["\n    position: relative;\n    background-color: rgba(255, 255, 255, 0.5);\n"]);return wa=function(){return e},e}function Ca(){var e=Object(v.a)(["\n    display: flex;\n    width: 100%;\n\n    &:first-child {\n        margin-top: 18px;\n    }\n\n    &:last-child {\n        margin-bottom: 18px;\n    }\n\n    & + & {\n        margin-top: 18px;\n    }\n"]);return Ca=function(){return e},e}var Ia=h.b.div(Ca()),Sa=h.b.div(wa()),Aa=h.b.div(ka()),La=h.b.div(ya()),Na=o.a.memo((function(e){var n=e.games,t=e.onGameClick;if(!n)return o.a.createElement(La,null);for(var r=Object(j.a)(n),a=[],c=Math.floor(r.length/3),i=0;i<=c;++i)a.push(o.a.createElement(Ia,{key:"GridRowBlock_".concat(i)},r.splice(0,3).map((function(e){return o.a.createElement(Ea,{key:"GridBox".concat(e.name),game:e,onClick:function(n){return t(n,e.key)}})}))));return o.a.createElement(Sa,null,o.a.createElement(Aa,null,o.a.createElement(La,null,a)),o.a.createElement(dt.b.Provider,{value:{style:{position:"absolute",top:"0",left:"0",width:"720px",height:"720px",opacity:"0.2",zIndex:-1}}},o.a.createElement(ft.a,null)))})),Ta=function(){var e=Object(s.c)((function(e){return{games:e.games.games}})).games;return o.a.createElement(Na,{games:e})},_a=o.a.memo((function(){return o.a.createElement(o.a.Fragment,null)})),za=function(){return o.a.createElement(_a,null)},Ra=function(e){var n=Object(c.useState)(e),t=Object(g.a)(n,2),r=t[0],a=t[1],o=Object(c.useRef)(null),i=Object(c.useCallback)((function(e){o.current&&!o.current.contains(e.target)&&a(!1)}),[]);return Object(c.useEffect)((function(){return document.addEventListener("click",i),function(){document.removeEventListener("click",i)}}),[i]),{ref:o,componentState:r,setComponentState:a}};function Da(){var e=Object(v.a)(["\n    width: 100%;\n    box-sizing: border-box;\n    height: 30px;\n    padding-left: 10px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    font-size: 13px;\n\n    &:hover {\n        background-color: rgba(0,0,0,0.1);\n    }\n"]);return Da=function(){return e},e}function Va(){var e=Object(v.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    margin-top: 40px;\n    z-index: 10;\n    background-color: white;\n    display: flex;\n    flex-direction: column;\n    width: 130px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Va=function(){return e},e}function Fa(){var e=Object(v.a)(["\n    width: 130px;\n    height: 30px;\n    box-sizing: border-box;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    padding-left: 10px;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    font-size: 13px;\n    \n    cursor: pointer;\n    &:active {\n        background-color: rgba(0,0,0,0.1);\n    }\n"]);return Fa=function(){return e},e}function Ua(){var e=Object(v.a)(["\n    position: absolute;\n    top: -10px;\n    left: 70%;\n    width: 30%;\n    display: flex;\n    justify-content: flex-end;\n    font-weight: 500;\n    font-size: 15px;\n    color: rgba(0,0,0,0.3);\n"]);return Ua=function(){return e},e}function Pa(){var e=Object(v.a)(["\n    position: relative;\n"]);return Pa=function(){return e},e}var Ba=h.b.div(Pa()),Ga=h.b.div(Ua()),Ma=h.b.div(Fa()),Ka=h.b.div(Va()),Za=h.b.div(Da()),Ha=function(e){var n=e.kind,t=e.name,r=e.list,a=e.reference,c=e.componentState,i=e.onClickSelection,u=e.onClickOption;return o.a.createElement(Ba,null,o.a.createElement(Ga,null,n),o.a.createElement(Ma,{ref:a,onClick:i},t),c&&o.a.createElement(Ka,null,r.map((function(e){return o.a.createElement(Za,{key:e,onClick:function(){return u(e)}},e)}))))},qa=Object(H.a)("create/CHANGE_FIELD",(function(e){return e})),Wa=Object(q.a)(Object(K.a)({},"create/CHANGE_FIELD",(function(e,n){var t=n.payload,r=t.key,a=t.value;return Object(Z.a)({},e,Object(K.a)({},r,a))})),{map:"Classical",mapList:["Classical","Crazy House","Racing Kings"],type:"Normal",typeList:["Normal","Rank"],defaultTime:15,extraTime:15,piece:null}),Ja=function(e){var n=e.kind,t=Object(s.c)((function(e){var t=e.create;return{name:t[n],list:t["".concat(n,"List")]}})),r=t.name,a=t.list,i=Object(s.b)(),u=Ra(!1),l=u.ref,b=u.componentState,f=u.setComponentState,d=Object(c.useCallback)((function(){f((function(e){return!e}))}),[f]),p=Object(c.useCallback)((function(e){i(qa({key:n,value:e}))}),[i,n]);return o.a.createElement(Ha,{kind:n,name:r,list:a,reference:l,componentState:b,onClickSelection:d,onClickOption:p})};function Xa(){var e=Object(v.a)(['\n    -webkit-appearance: none;\n    width: 160px;\n    height: 30px;\n    margin: 10px 50px;\n    background: linear-gradient(to right, #16a085 0%, black 100%);\n    /* background: linear-gradient(to right, rgb(22,160,133, 0.5) 0%, rgba(0,0,0,0.14) 100%); */\n    background-size: 150px 10px;\n    background-position: center;\n    background-repeat: no-repeat;\n    overflow: hidden;\n    outline: none;\n    zoom: 130%;\n    display: block;\n    margin: auto;\n    margin-bottom: 30px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n\n    &::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n        position: relative;\n        background-color: rgba(255,255,255, 0.8);\n        z-index: 3;\n    }\n\n    &::-webkit-slider-thumb:after {\n        content: " ";\n        width: 160px;\n        height: 10px;\n        position: absolute;\n        z-index: 1;\n        right: 20px;\n        top: 5px;\n        background: #2ecc71;\n    }\n\n']);return Xa=function(){return e},e}var $a=h.b.input(Xa()),Qa=function(e){var n=e.onChange,t=e.kind,r=e.time;return o.a.createElement($a,{type:"range",onChange:n,defaultValue:0,kind:t,value:r})},Ya=function(e){var n=e.kind,t=Object(s.c)((function(e){return{time:e.create[n]}})).time,r=Object(s.b)(),a=Object(c.useCallback)((function(e){r(qa({key:n,value:e.target.value}))}),[r,n]);return o.a.createElement(Qa,{onChange:a,kind:n,time:t})};function ec(){var e=Object(v.a)(["\n    margin-top: 20px;\n    display: flex;\n    justify-content: space-between;\n"]);return ec=function(){return e},e}function nc(){var e=Object(v.a)(["\n    width: 100%;\n    height: 50px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    margin-top: 20px;\n"]);return nc=function(){return e},e}function tc(){var e=Object(v.a)(["\n    font-size: 24px;\n    font-weight: 700;\n"]);return tc=function(){return e},e}function rc(){var e=Object(v.a)(["\n    width: 300px;\n    height: 100px;\n    background: transparent;\n    cursor: pointer;\n    border: none;\n    outline: none;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return rc=function(){return e},e}function ac(){var e=Object(v.a)(["\n    padding: 30px;\n    box-sizing: border-box;\n    width: 100%;\n    height: 420px;\n    background-color: white;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return ac=function(){return e},e}var cc=h.b.form(ac()),oc=h.b.button(rc()),ic=h.b.div(tc()),uc=(h.b.div(nc()),h.b.div(ec())),lc=o.a.memo((function(e){var n=e.onSubmit;return o.a.createElement(cc,{onSubmit:n},o.a.createElement(ic,null,"New Game"),o.a.createElement(uc,null,o.a.createElement(Ja,{kind:"map"}),o.a.createElement(Ja,{kind:"type"})),o.a.createElement(Ya,{kind:"defaultTime"}),o.a.createElement(Ya,{kind:"extraTime"}),o.a.createElement(oc,{type:"submit"},"Create"))})),sc=Object(x.f)((function(e){var n=e.history,t=Object(s.b)(),r=Object(c.useCallback)((function(e){e.preventDefault(),function(){var e;a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.a.awrap(t(Oe()));case 2:e=r.sent,n.push("/game/".concat(e));case 4:case"end":return r.stop()}}))}()}),[t,n]);return o.a.createElement(lc,{onSubmit:r})}));function bc(){var e=Object(v.a)(["\n    ","\n    margin-left: 1%;\n"]);return bc=function(){return e},e}function fc(){var e=Object(v.a)(["\n    ","\n    margin-right: 1%;\n"]);return fc=function(){return e},e}function dc(){var e=Object(v.a)(["\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n"]);return dc=function(){return e},e}function pc(){var e=Object(v.a)(["\n    height: 800px;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return pc=function(){return e},e}var mc,vc=h.b.div(pc()),xc=Object(h.a)(dc()),hc=h.b.div(fc(),xc),gc=h.b.div(bc(),xc),Oc=o.a.memo((function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(vc,null,o.a.createElement(hc,null,o.a.createElement(za,null)),o.a.createElement(Ta,null),o.a.createElement(gc,null,o.a.createElement(sc,null))))})),jc=function(){var e=Object(s.b)();Object(c.useEffect)((function(){return function(){e(pe())}}),[e]);var n=rt((function(){return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(e(yn()));case 2:return e(be()),n.next=5,a.a.awrap(Promise.resolve().then((function(){e(se())})));case 5:return n.abrupt("return",!0);case 6:case"end":return n.stop()}}))}),[e]),t=Object(g.a)(n,1)[0],r=t.loading,i=t.data,u=t.error;return r?null:u?null:i?o.a.createElement(Oc,null):null},Ec=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Game \u2022 Chesssup.com")),o.a.createElement(nt,null),o.a.createElement(jc,null))},yc=a.a.mark(Bc),kc=a.a.mark(Gc),wc="chat/CONNECT_WEBSOCKET",Cc="chat/DISCONNECT_WEBSOCKET",Ic=Object(H.a)(wc,(function(e){return e})),Sc=Object(H.a)(Cc),Ac=Object(H.a)("chat/INITIALIZE_SOCKET",(function(e){return e})),Lc=Object(H.a)("chat/INITIALIZE_VALUE",(function(e){return e})),Nc=Object(H.a)("chat/CHANGE_VALUE",(function(e){return e})),Tc=Object(H.a)("chat/CLEAR_VALUE"),_c=Object(H.a)("chat/CHANGE_TEXTFIELD",(function(e){return e})),zc=Object(H.a)("chat/INITIALIZE_TEXTFIELD"),Rc=ne("chat/SEND_MESSAGE"),Dc=Object(g.a)(Rc,3),Vc=Dc[0],Fc=Dc[1],Uc=Dc[2],Pc=te(Vc,(function(e){return ce.a.post("/api/chat/sendMessage",e)}));function Bc(e){var n,t,r;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.payload,t="key=".concat(n),a.next=4,Object(W.e)(ee,{url:"/chat",initializeSocket:Ac,initializeValue:Lc,changeValue:Nc,query:t});case 4:return r=a.sent,a.next=7,Object(W.g)(Cc);case 7:return a.next=9,Object(W.c)(r);case 9:case"end":return a.stop()}}),yc)}function Gc(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.h)(wc,Bc);case 2:case"end":return e.stop()}}),kc)}var Mc={socket:null,messages:[],text:""},Kc=Object(q.a)((mc={},Object(K.a)(mc,"chat/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(Z.a)({},e,{socket:t})})),Object(K.a)(mc,"chat/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=t.nickname,a=t.color,c=t.message;return Object(Z.a)({},e,{messages:[{nickname:r,color:a,message:c}]})})),Object(K.a)(mc,"chat/CHANGE_VALUE",(function(e,n){var t=n.payload,r=t.nickname,a=t.color,c=t.message;return Object(Z.a)({},e,{messages:[].concat(Object(j.a)(e.messages),[{nickname:r,color:a,message:c}])})})),Object(K.a)(mc,Fc,(function(e){return e})),Object(K.a)(mc,Uc,(function(e){return e})),Object(K.a)(mc,"chat/INITIALIZE_TEXTFIELD",(function(e){return Object(Z.a)({},e,{text:""})})),Object(K.a)(mc,"chat/CHANGE_TEXTFIELD",(function(e,n){var t=n.payload;return Object(Z.a)({},e,{text:t})})),Object(K.a)(mc,"chat/CLEAR_VALUE",(function(e){return Mc})),mc),Mc);function Zc(){var e=Object(v.a)(["\n        background: rgb(247,246,245);\n\n        &:after {\n            content: '';\n            position: absolute;\n            left: 0;\n            top: 50%;\n            width: 0;\n            height: 0;\n            border: 8px solid transparent;\n            border-top: 0;\n            margin-top: -5px;\n            border-right-color: rgb(247,246,245);\n            border-left: 0;\n            margin-left: -8px;\n        }\n    "]);return Zc=function(){return e},e}function Hc(){var e=Object(v.a)(["\n    position: relative;\n    background: #ffff80;\n    padding: 5px;\n\n    &:after {\n        content: '';\n        position: absolute;\n        right: 0;\n        top: 50%;\n        width: 0;\n        height: 0;\n        border: 8px solid transparent;\n        border-left-color: #ffff80;\n        border-right: 0;\n        border-top: 0;\n        margin-top: -5px;\n        margin-right: -8px;\n    }\n\n    \n    ","\n"]);return Hc=function(){return e},e}function qc(){var e=Object(v.a)(["\n        justify-content: center;\n    "]);return qc=function(){return e},e}function Wc(){var e=Object(v.a)(["\n        justify-content: flex-start;\n    "]);return Wc=function(){return e},e}function Jc(){var e=Object(v.a)(["\n        justify-content: flex-end;\n    "]);return Jc=function(){return e},e}function Xc(){var e=Object(v.a)(["\n    display: flex;\n    align-items: center;\n    width: 90%;\n    height : 36px;\n    min-height : 36px;\n    font-size : 12px;\n    background-color: white;\n\n    ",";\n\n    ",";\n\n    ",";\n"]);return Xc=function(){return e},e}function $c(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 20%;\n    font-size: 12px;\n    background-color: rgb(247,246,245);\n    border: none;\n    cursor: pointer;\n\n    &:hover, &:focus {\n        background-color: #D3D3D3;\n    } \n"]);return $c=function(){return e},e}function Qc(){var e=Object(v.a)(["\n    outline: none;\n    border: none;\n    align-items : center;\n    color: black;\n    background-color: transparent;\n    font-size: 12px;\n    width: 80%;\n    height : 30px;\n    padding-left: 10px;\n"]);return Qc=function(){return e},e}function Yc(){var e=Object(v.a)(["\n    position: absolute;\n    width: 100%;\n    display: flex;\n    background-color: white;\n    top: 365px;\n    /* box-shadow: rgba(0,0,0,0.05) 0px -2px 2px 0px, rgba(0,0,0,0.08) 0px -3px 1px -2px, rgba(0,0,0,0.04) 0px -1px 5px 0px; */\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\n"]);return Yc=function(){return e},e}function eo(){var e=Object(v.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 360px;\n    width: 100%;\n    padding-right: 20px;\n    overflow-y: overlay;\n"]);return eo=function(){return e},e}function no(){var e=Object(v.a)(["\n    height: 360px;\n    width: 100%;\n    overflow: hidden;\n"]);return no=function(){return e},e}function to(){var e=Object(v.a)(["\n    position: relative;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return to=function(){return e},e}function ro(){var e=Object(v.a)(["\n"]);return ro=function(){return e},e}var ao=h.b.form(ro()),co=h.b.div(to()),oo=h.b.div(no()),io=h.b.div(eo()),uo=h.b.div(Yc()),lo=h.b.input(Qc()),so=h.b.button($c()),bo=h.b.div(Xc(),(function(e){return"my"===e.owner&&Object(h.a)(Jc())}),(function(e){return"other"===e.owner&&Object(h.a)(Wc())}),(function(e){return"server"===e.owner&&Object(h.a)(qc())})),fo=h.b.div(Hc(),(function(e){return"other"===e.owner&&Object(h.a)(Zc())})),po=function(e){var n,t=e.owner,r=e.children;return"my"===t?n=o.a.createElement(fo,{owner:t},r):"other"===t?n=o.a.createElement(fo,{owner:t},r):"server"===t&&(n=o.a.createElement(o.a.Fragment,null,r)),o.a.createElement(o.a.Fragment,null,n)},mo=o.a.memo((function(e){var n=e.message,t=e.myName,r=Object(O.a)(e,["message","myName"]),a=n.nickname?n.nickname===t?"my":"other":"server",c="other"===a?n.nickname+" : "+n.message:n.message;return o.a.createElement(bo,Object.assign({},r,{color:n.color,owner:a}),o.a.createElement(po,{owner:a},c))})),vo=o.a.memo((function(e){var n=e.messages,t=e.onSubmit,r=e.onChange,a=e.text,i=e.tempAuth,u=Object(c.useRef)();Object(c.useEffect)((function(){u.current.scrollTop=u.current.scrollHeight}),[n]);var l="";return i&&(l=i.nickname),o.a.createElement(o.a.Fragment,null,o.a.createElement(ao,{onSubmit:t},o.a.createElement(co,null,o.a.createElement(oo,null,o.a.createElement(io,{ref:u},n.map((function(e){return o.a.createElement(mo,{myName:l,message:e})})))),o.a.createElement(uo,null,o.a.createElement(lo,{onChange:r,value:a}),o.a.createElement(so,{onSubmit:t},o.a.createElement(dt.b.Provider,{value:{style:{width:"40%",height:"40%"}}},o.a.createElement(bt.b,null)))))))})),xo=function(){var e=Object(s.b)(),n=Object(s.c)((function(e){var n=e.chat,t=e.auth;return{socket:n.socket,messages:n.messages,text:n.text,tempAuth:t.tempAuth}})),t=n.socket,r=n.messages,a=n.text,i=n.tempAuth,u=Object(c.useCallback)((function(n){n.preventDefault(),e(Pc({socket:t,message:a})),e(zc())}),[e,a,t]),l=Object(c.useCallback)((function(n){e(_c(n.target.value))}),[e]);return Object(c.useEffect)((function(){return function(){e(Tc())}}),[e]),o.a.createElement(vo,{messages:r,onSubmit:u,onChange:l,text:a,tempAuth:i})};function ho(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    height: 100%;\n    width: 6%;\n    color: black;\n    opacity: 0.5;\n    font-size: 50px;\n"]);return ho=function(){return e},e}function go(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 47%;\n    color: black;\n    font-size: 50px;\n"]);return go=function(){return e},e}function Oo(){var e=Object(v.a)(["\n        background-color: rgb(230, 153, 153);\n    "]);return Oo=function(){return e},e}function jo(){var e=Object(v.a)(["\n        background-color: rgb(208, 224, 189);\n    "]);return jo=function(){return e},e}function Eo(){var e=Object(v.a)(["\n    width: 50%;\n    height: 60px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n    background-color: white;\n    ","\n    ","\n"]);return Eo=function(){return e},e}var yo=h.b.div(Eo(),(function(e){return e.color&&Object(h.a)(jo())}),(function(e){return e.time<=1e4&&Object(h.a)(Oo())})),ko=h.b.div(go()),wo=h.b.div(ho()),Co=function(e){var n="";return n+=String(Math.floor(e/10)),n+=String(Math.floor(e%10))},Io=function(e){var n=e.time,t=e.color,r=Math.floor(n/1e3),a=Math.floor(n%1e3/10);return void 0==n||null===n?o.a.createElement(yo,null):o.a.createElement(yo,{time:n,color:t?1:0},o.a.createElement(ko,null,Co(r)),o.a.createElement(wo,null,":"),o.a.createElement(ko,null,Co(a)))},So=function(e){var n=e.white,t=Object(s.c)((function(e){var n=e.record,t=e.game;return{whiteTime:n.whiteTime,blackTime:n.blackTime,start:t.start,order:t.order}})),r=t.whiteTime,a=t.blackTime,c=t.start,i=t.order,u=n?r:a,l=n?c&&"white"===i:c&&"black"===i;return o.a.createElement(Io,{time:u,color:l})};function Ao(){var e=Object(v.a)(["\n    font-size: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Ao=function(){return e},e}function Lo(){var e=Object(v.a)(["\n        margin-top: 30px;\n    "]);return Lo=function(){return e},e}function No(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 30px;\n    background-color: white;\n\n    ","\n"]);return No=function(){return e},e}var To=h.b.div(No(),(function(e){return e.beneath&&Object(h.a)(Lo())})),_o=h.b.div(Ao()),zo=o.a.memo((function(e){var n=e.light,t=e.name,r=e.beneath,a={style:{height:"15px",width:"10%",color:"green",display:"flex",justifyContent:"center",alignItems:"center"}};return o.a.createElement(To,{beneath:r?1:0},n?o.a.createElement(dt.b.Provider,{value:a},o.a.createElement(ft.b,null)):o.a.createElement(dt.b.Provider,{value:{style:Object(Z.a)({},a.style,{color:"black"})}},o.a.createElement(ft.i,null)),o.a.createElement(_o,null,t))})),Ro=function(e){var n=e.black,t=e.white,r=e.beneath,a=Object(s.c)((function(e){var n=e.game;return{blackNick:n.black,whiteNick:n.white,participant:n.participant}})),c=a.blackNick,i=a.whiteNick,u=a.participant,l=new Set(u),b=t&&l.has(i)||n&&l.has(c),f=t&&i||n&&c;return o.a.createElement(zo,{light:b,name:f,beneath:r})};function Do(){var e=Object(v.a)(["\n    width: 20%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 18px;\n    background-color: rgb(247, 246, 245);\n"]);return Do=function(){return e},e}function Vo(){var e=Object(v.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20%;\n    font-size: 18px;\n"]);return Vo=function(){return e},e}function Fo(){var e=Object(v.a)(["\n    width: 80%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    &:hover {\n        background-color: rgb(209, 228, 246);\n    }\n"]);return Fo=function(){return e},e}function Uo(){var e=Object(v.a)(["\n    width: 100%;\n    height: 30px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n\n    &:first-child {\n        margin-top: 30px;\n    }\n"]);return Uo=function(){return e},e}function Po(){var e=Object(v.a)(["\n    height: 270px;\n    width: 100%;\n    overflow-y: overlay;\n    padding-right: 20px;\n"]);return Po=function(){return e},e}function Bo(){var e=Object(v.a)(["\n    height: 270px;\n    width: 100%;\n    overflow: hidden;\n"]);return Bo=function(){return e},e}var Go=h.b.div(Bo()),Mo=h.b.div(Po()),Ko=h.b.div(Uo()),Zo=function(e){var n=e.x,t=e.y;return String.fromCharCode(97+n)+(8-t)},Ho=h.b.div(Fo()),qo=h.b.div(Vo()),Wo=h.b.div(Do()),Jo=o.a.memo((function(e){var n=e.move,t=e.index,r=e.onClickBlock;console.dir("PieceMove"),console.dir(n);var a,c,i=Fr[n.prevPiece.piece],u={color:n.prevPiece.owner,style:{width:"10%",filter:"drop-shadow(1px 1px 1px ".concat("white"===n.prevPiece.owner?"black":"white",")")}},l=o.a.createElement(dt.b.Provider,{value:u},o.a.createElement(i,null)),s=o.a.createElement("div",{style:{width:"10%"}});return n.nextPiece.piece&&(a=Fr[n.nextPiece.piece],c={color:n.nextPiece.owner,style:{width:"10%",filter:"drop-shadow(1px 1px 1px ".concat("white"===n.nextPiece.owner?"black":"white",")")}},s=o.a.createElement(dt.b.Provider,{value:c},o.a.createElement(a,null))),o.a.createElement(Ko,null,o.a.createElement(Wo,null,t+1),o.a.createElement(Ho,{onClick:r},l,o.a.createElement(qo,null,Zo(n.prev)),o.a.createElement(dt.b.Provider,{value:{style:{color:"rgb(169,169,169)"}}},o.a.createElement(bt.a,null)),o.a.createElement(qo,null,Zo(n.next)),s))})),Xo=o.a.memo((function(e){var n=e.pieceMove,t=e.onClickBlock,r=Object(c.useRef)();return Object(c.useEffect)((function(){r.current.scrollTop=r.current.scrollHeight}),[n]),o.a.createElement(Go,null,o.a.createElement(Mo,{ref:r},n.map((function(e,n){return o.a.createElement(Jo,{onClick:t,move:e,index:n})}))))})),$o=function(){var e=Object(s.c)((function(e){return{pieceMove:e.record.pieceMove}})).pieceMove,n=Object(c.useCallback)((function(){}),[]);return o.a.createElement(Xo,{onClickBlock:n,pieceMove:e})};function Qo(){var e=Object(v.a)(["\n        background-color: red;\n    "]);return Qo=function(){return e},e}function Yo(){var e=Object(v.a)(["\n    position: absolute;\n    height: 2px;\n    background-color: green;\n    transition-duration: 1s;\n    transition-timing-function: linear;\n\n    width: ",";\n    ","\n"]);return Yo=function(){return e},e}var ei=h.b.div(Yo(),(function(e){return 100*e.time+"%"}),(function(e){return e.time<=.1&&Object(h.a)(Qo())})),ni=o.a.memo((function(e){var n=e.time;return o.a.createElement(ei,{time:n})})),ti=function(e){var n=e.white,t=e.black,r=Object(s.c)((function(e){var n=e.record,t=e.game;return{whiteRatio:n.whiteRatio,blackRatio:n.blackRatio,whiteNick:t.white,blackNick:t.black,participant:t.participant}})),a=r.whiteRatio,c=r.blackRatio,i=r.whiteNick,u=r.blackNick,l=r.participant,b=new Set(l),f=0;return(n&&b.has(i)||t&&b.has(u))&&(f=n?a:c),f=Math.min(f,1),o.a.createElement(ni,{time:f})};function ri(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n"]);return ri=function(){return e},e}function ai(){var e=Object(v.a)(["\n    position: absolute;\n    top: 300px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    background-color: rgb(247, 246, 245);\n    z-index: 10;\n    box-shadow: rgba(0, 0, 0, 0.14) 0px -2px 2px 0px, rgba(0, 0, 0, 0.2) 0px -3px 1px -2px, rgba(0, 0, 0, 0.12) 0px -1px 5px 0px;\n"]);return ai=function(){return e},e}var ci=h.b.div(ai()),oi=h.b.div(ri()),ii={style:{color:"#4d4d4d",width:"50%",height:"50%",backgroundColor:"transparent"}},ui=o.a.memo((function(){return o.a.createElement(ci,null,o.a.createElement(oi,null,o.a.createElement(dt.b.Provider,{value:ii},o.a.createElement(ft.d,null))),o.a.createElement(oi,null,o.a.createElement(dt.b.Provider,{value:ii},o.a.createElement(ft.j,null))),o.a.createElement(oi,null,o.a.createElement(dt.b.Provider,{value:ii},o.a.createElement(ft.k,null))),o.a.createElement(oi,null,o.a.createElement(dt.b.Provider,{value:ii},o.a.createElement(ft.e,null))))})),li=function(){return o.a.createElement(ui,null)},si=t(191);function bi(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 25%;\n    height: 100%;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #D3D3D3;\n    }\n"]);return bi=function(){return e},e}function fi(){var e=Object(v.a)(["\n    position: absolute;\n    top: 30px;\n    display: flex;\n    width: 100%;\n    height: 30px;\n    z-index: 10;\n    background-color: rgb(247, 246, 245);\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return fi=function(){return e},e}var di,pi=h.b.div(fi()),mi=h.b.div(bi()),vi={style:{color:"#4d4d4d",width:"50%",height:"50%",backgroundColor:"transparent"}},xi=o.a.memo((function(e){var n=e.onReverse;return o.a.createElement(pi,null,o.a.createElement(mi,{onClick:n},o.a.createElement(dt.b.Provider,{value:{style:Object(Z.a)({},vi.style,{width:"60%",height:"60%"})}},o.a.createElement(ft.c,null))),o.a.createElement(mi,null,o.a.createElement(dt.b.Provider,{value:{style:Object(Z.a)({},vi.style,{width:"80%",height:"80%"})}},o.a.createElement(si.a,null))),o.a.createElement(mi,null,o.a.createElement(dt.b.Provider,{value:vi},o.a.createElement(ft.g,null))),o.a.createElement(mi,null,o.a.createElement(dt.b.Provider,{value:vi},o.a.createElement(ft.f,null))))})),hi=a.a.mark(Ni),gi=a.a.mark(Ti),Oi="record/CONNECT_WEBSOCKET",ji="record/DISCONNECT_WEBSOCKET",Ei=Object(H.a)(Oi),yi=Object(H.a)(ji),ki=Object(H.a)("record/INITIALIZE_SOCKET",(function(e){return e})),wi=Object(H.a)("record/INITIALIZE_VALUE",(function(e){return e})),Ci=Object(H.a)("record/CHANGE_VALUE",(function(e){return e})),Ii=Object(H.a)("record/UPDATE_VALUE",(function(e){return e})),Si=Object(H.a)("record/CLEAR_VALUE"),Ai=Object(H.a)("record/CHANGE_REVERSE",(function(e){return e})),Li=function(e){return function(n,t){var r=t().record,a=Object(Z.a)({},r);Object.keys(e).forEach((function(n){"object"===typeof e[n]&&(a=Object(Z.a)({},a,Object(K.a)({},n,[].concat(Object(j.a)(a[n]),[e[n]]))))})),n(Ii({record:a}))}};function Ni(e){var n,t,r;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.payload,t="key=".concat(n),a.next=4,Object(W.e)(ee,{url:"/record",initializeSocket:ki,initializeValue:wi,changeValue:Ci,updateValue:Li,query:t});case 4:return r=a.sent,a.next=7,Object(W.g)(ji);case 7:return a.next=9,Object(W.c)(r);case 9:case"end":return a.stop()}}),hi)}function Ti(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.h)(Oi,Ni);case 2:case"end":return e.stop()}}),gi)}var _i={socket:null,error:null,startTime:null,endTime:null,blackTime:null,whiteTime:null,blackMaxTime:null,whiteMaxTime:null,whiteRatio:0,blackRatio:0,pieceMove:[],reversed:!1},zi=Object(q.a)((di={},Object(K.a)(di,"record/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(Z.a)({},e,{socket:t})})),Object(K.a)(di,"record/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(O.a)(t,["type"]));return Object(Z.a)({},e,{},r)})),Object(K.a)(di,"record/CHANGE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(O.a)(t,["type"]));return Object(Z.a)({},e,{},r)})),Object(K.a)(di,"record/UPDATE_VALUE",(function(e,n){var t=n.payload.record;return Object(Z.a)({},t)})),Object(K.a)(di,"record/CLEAR_VALUE",(function(e){return _i})),Object(K.a)(di,"record/CHANGE_REVERSE",(function(e,n){var t=n.payload.reversed;return Object(Z.a)({},e,{reversed:t})})),di),_i),Ri=function(){var e=Object(s.c)((function(e){return{reversed:e.record.reversed}})).reversed,n=Object(s.b)(),t=Object(c.useCallback)((function(){n(Ai({reversed:!e}))}),[n,e]);return o.a.createElement(xi,{onReverse:t})};function Di(){var e=Object(v.a)(["\n    position: relative;\n    width: 100%;\n    height: 360px;\n    background-color: white;\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Di=function(){return e},e}var Vi=h.b.div(Di()),Fi=o.a.memo((function(e){var n=e.reversal;return o.a.createElement(o.a.Fragment,null,n?o.a.createElement(o.a.Fragment,null,o.a.createElement(So,{white:!0})):o.a.createElement(o.a.Fragment,null,o.a.createElement(So,{black:!0})),o.a.createElement(Vi,null,n?o.a.createElement(o.a.Fragment,null,o.a.createElement(ti,{white:!0}),o.a.createElement(Ro,{white:!0})):o.a.createElement(o.a.Fragment,null,o.a.createElement(ti,{black:!0}),o.a.createElement(Ro,{black:!0})),o.a.createElement(Ri,null),o.a.createElement($o,null),o.a.createElement(li,null),n?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ro,{black:!0,beneath:!0}),o.a.createElement(ti,{black:!0})):o.a.createElement(o.a.Fragment,null,o.a.createElement(Ro,{white:!0,beneath:!0}),o.a.createElement(ti,{white:!0}))),n?o.a.createElement(o.a.Fragment,null,o.a.createElement(So,{black:!0})):o.a.createElement(o.a.Fragment,null,o.a.createElement(So,{white:!0})))})),Ui=function(){var e=Object(s.c)((function(e){var n=e.auth,t=e.record;return{tempAuth:n.tempAuth,reversed:t.reversed}})),n=e.tempAuth,t=e.reversed,r=Object(s.b)();Object(c.useEffect)((function(){return function(){r(Si())}}),[r]);var a=!1;return n&&(("white"===n.role||"spectator"===n.role)&&t||"black"===n.role&&!t)&&(a=!0),o.a.createElement(Fi,{reversal:a})};function Pi(){var e=Object(v.a)(["\n    ","\n    margin-left: 1%;\n"]);return Pi=function(){return e},e}function Bi(){var e=Object(v.a)(["\n    ","\n    margin-right: 1%;\n"]);return Bi=function(){return e},e}function Gi(){var e=Object(v.a)(["\n    height: 90%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 20%;\n"]);return Gi=function(){return e},e}function Mi(){var e=Object(v.a)(["\n    height: 800px;\n    width: 100%;\n    background-color: rgb(237, 235, 233);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Mi=function(){return e},e}var Ki,Zi=h.b.div(Mi()),Hi=Object(h.a)(Gi()),qi=h.b.div(Bi(),Hi),Wi=h.b.div(Pi(),Hi),Ji=o.a.memo((function(){return o.a.createElement(Zi,null,o.a.createElement(qi,null,o.a.createElement(xo,null)),o.a.createElement(ua,null),o.a.createElement(Wi,null,o.a.createElement(Ui,null)))})),Xi=a.a.mark(cu),$i=a.a.mark(ou),Qi="game/CONNECT_WEBSOCKET",Yi="game/DISCONNECT_WEBSOCKET",eu=Object(H.a)(Qi),nu=Object(H.a)(Yi),tu=Object(H.a)("game/INITIALIZE_SOCKET",(function(e){return e})),ru=Object(H.a)("game/INITIALIZE_VALUE",(function(e){return e})),au=Object(H.a)("game/CLEAR_VALUE");function cu(e){var n,t,r;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.payload,t="key=".concat(n),a.next=4,Object(W.e)(ee,{url:"/game",initializeSocket:tu,initializeValue:ru,query:t});case 4:return r=a.sent,a.next=7,Object(W.g)(Yi);case 7:return a.next=9,Object(W.c)(r);case 9:case"end":return a.stop()}}),Xi)}function ou(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.h)(Qi,cu);case 2:case"end":return e.stop()}}),$i)}var iu={socket:null,error:null,participant:[]},uu=Object(q.a)((Ki={},Object(K.a)(Ki,"game/INITIALIZE_SOCKET",(function(e,n){var t=n.payload.socket;return Object(Z.a)({},e,{socket:t})})),Object(K.a)(Ki,"game/INITIALIZE_VALUE",(function(e,n){var t=n.payload,r=(t.type,Object(O.a)(t,["type"]));return Object(Z.a)({},e,{},r)})),Object(K.a)(Ki,"game/CLEAR_VALUE",(function(e){return iu})),Ki),iu),lu=function(e){var n=e.gameId,t=Object(s.b)();Object(c.useEffect)((function(){return function(){t(pn()),t(nu()),t(Sc()),t(vr()),t(yi())}}),[t]),Object(c.useEffect)((function(){return function(){t(xn()),t(au())}}),[t]);var r=rt((function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(t(yn()));case 2:return t(pn()),t(nu()),t(Sc()),t(vr()),t(yi()),e.next=9,a.a.awrap(Promise.resolve().then((function(){t(dn(n)),t(eu(n)),t(Ic(n)),t(mr(n)),t(Ei(n))})));case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}))}),[t,n]),i=Object(g.a)(r,1)[0],u=i.loading,l=i.data,b=i.error;return u?null:b?null:l?o.a.createElement(Ji,null):null},su=Object(x.f)((function(e){var n=e.history,t=e.match;if(Object(c.useEffect)((function(){t.params.id||n.push("/")}),[n,t]),!t.params.id)return null;var r=t.params.id;return r?o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"GamePlay \u2022 Chesssup.com")),o.a.createElement(nt,null),o.a.createElement(lu,{gameId:r})):null})),bu=function(){return o.a.createElement(o.a.Fragment,null)},fu=[{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5441",count:250,comments:7,time:"1\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5442",count:251,comments:8,time:"2\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5443",count:252,comments:9,time:"3\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5444",count:253,comments:10,time:"4\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5441",count:250,comments:7,time:"1\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5441",count:250,comments:7,time:"1\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5441",count:250,comments:7,time:"1\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5441",count:250,comments:7,time:"1\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5441",count:250,comments:7,time:"1\uc2dc\uac04 \uc804"},{title:"\uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc544 \uac00\uc988\uc5441",count:250,comments:7,time:"1\uc2dc\uac04 \uc804"}];function du(){var e=Object(v.a)(["\n    text-align: center;\n    height : 1em;\n    width : 100%;\n"]);return du=function(){return e},e}function pu(){var e=Object(v.a)(["\n    width: ",";\n    height: 50px; \n    display:flex;\n    justify-content:center;\n    align-items:center;\n    font-size: 15px;\n"]);return pu=function(){return e},e}function mu(){var e=Object(v.a)(["\n    display:flex;\n    flex-direction: row;\n    justify-content:center;\n    width: 100%;\n    transition-duration:0.1s;\n    &:nth-child(odd) {\n        background: #F7F6F4;\n    }\n    &:hover {\n            background: #add8e6;\n            cursor:pointer;\n        }\n"]);return mu=function(){return e},e}var vu=h.b.div(mu()),xu=h.b.div(pu(),(function(e){return e.width?e.width:"20%"})),hu=h.b.div(du()),gu=Object(x.f)((function(e){var n=e.history,t=e.title,r=e.count,a=e.comments,c=e.time;return o.a.createElement(vu,{onClick:function(){n.push("/Contents")}},o.a.createElement(xu,{width:"70%"},o.a.createElement(hu,null,t)),o.a.createElement(xu,{width:"10%"},o.a.createElement(hu,null,r)),o.a.createElement(xu,{width:"10%"},o.a.createElement(hu,null,a)),o.a.createElement(xu,{width:"10%"},o.a.createElement(hu,null,c)))}));function Ou(){var e=Object(v.a)(["\n    width: ",";\n    height: 50px; \n    text-align: center;\n    font-size: 15px;\n"]);return Ou=function(){return e},e}function ju(){var e=Object(v.a)(["\n    display:flex;\n    flex-direction: row;\n    width: 100%;\n    height: 30px;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return ju=function(){return e},e}var Eu=h.b.div(ju()),yu=h.b.div(Ou(),(function(e){return e.width?e.width:"20%"})),ku=function(){return o.a.createElement(Eu,null,o.a.createElement(yu,{width:"70%"},"Title"),o.a.createElement(yu,{width:"10%"},"View Counts"),o.a.createElement(yu,{width:"10%"},"Comments"),o.a.createElement(yu,{width:"10%"},"Post Time"))};function wu(){var e=Object(v.a)(["\n    ","\n"]);return wu=function(){return e},e}function Cu(){var e=Object(v.a)(["\n    outline: none;\n    border: none;\n    height: 25px;\n    width: 70%;\n    padding-left: 5%;\n    box-shadow :  0 3px 1px -2px rgba(0,0,0,0.2);\n    "]);return Cu=function(){return e},e}function Iu(){var e=Object(v.a)(["\n    width: ",";\n    height: 50px; \n    text-align: center;\n    font-size: 15px;\n"]);return Iu=function(){return e},e}function Su(){var e=Object(v.a)(["\n    display:flex;\n    flex-direction: row;\n    width: 100%;\n    height: 30px;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Su=function(){return e},e}var Au=h.b.div(Su()),Lu=h.b.div(Iu(),(function(e){return e.width?e.width:"20%"})),Nu=Object(h.a)(Cu()),Tu=h.b.input(wu(),Nu),_u=function(){return o.a.createElement(Au,null,o.a.createElement(Lu,{width:"70%"},o.a.createElement(Tu,null)),o.a.createElement(Lu,{width:"30%"},"ETCS"))},zu=function(){return o.a.createElement(o.a.Fragment,null,"this is Test block")};function Ru(){var e=Object(v.a)(["\n    width: 90%;\n    height: auto;\n    align-self:center;\n    justify-content:center;\n    align-items:center;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Ru=function(){return e},e}function Du(){var e=Object(v.a)(["\n    width: 100%;\n    height: 100px;\n    background-color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin: 0px 0px 0px 0px;\n"]);return Du=function(){return e},e}function Vu(){var e=Object(v.a)(["\n    width: 80%;\n    min-height: 720px;\n    background-color:lightblue;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    background-color: rgba(255, 255, 255);\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\n"]);return Vu=function(){return e},e}function Fu(){var e=Object(v.a)(["\n    width: 100%;\n    min-height: 700px;\n    background-color:#EDEBE9;\n    display: flex;\n    justify-content: center;\n"]);return Fu=function(){return e},e}var Uu=h.b.div(Fu()),Pu=h.b.main(Vu()),Bu=h.b.h1(Du()),Gu=h.b.div(Ru()),Mu=function(){var e=Object(c.useState)(fu),n=Object(g.a)(e,2),t=n[0];n[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(x.a,{path:"/Community",exact:!0,render:function(){return o.a.createElement(Uu,null,o.a.createElement(Pu,null,o.a.createElement(Bu,null,"General Chess Discussion"),o.a.createElement(Gu,null,o.a.createElement(ku,null),t.map((function(e){return o.a.createElement(gu,{title:e.title,count:e.count,comments:e.comments,time:e.time})})),o.a.createElement(_u,null))))}}),o.a.createElement(x.a,{path:"/Community/Contents",component:zu}))},Ku=function(){return o.a.createElement(Mu,null)},Zu=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Community \u2022 Chesssup.com")),o.a.createElement(nt,null),o.a.createElement(Ku,null))};function Hu(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 200px;\n  font-size: 50px;\n"]);return Hu=function(){return e},e}var qu=h.b.div(Hu()),Wu=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement("title",null,"Chesssup.com")),o.a.createElement(x.c,null,o.a.createElement(x.a,{component:ut,path:"/",exact:!0}),o.a.createElement(x.a,{component:tr,path:"/login",exact:!0}),o.a.createElement(x.a,{component:ar,path:"/register",exact:!0}),o.a.createElement(x.a,{component:Ec,path:"/game",exact:!0}),o.a.createElement(x.a,{component:su,path:"/game/:id",exact:!0}),o.a.createElement(x.a,{component:bu,path:"/game/canvas/:id",exact:!0}),o.a.createElement(x.a,{component:Zu,path:"/community",exact:!0}),o.a.createElement(x.a,{render:function(e){e.location;return o.a.createElement(qu,null,o.a.createElement("h1",null,"404 Error"),o.a.createElement("p",null,"\uc694\uccad\ud55c \ud398\uc774\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))}})))},Ju=a.a.mark(Xu);function Xu(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.a)([Qn(),ou(),Ee(),_r(),Gc(),Ti()]);case 2:case"end":return e.stop()}}),Ju)}var $u=Object(b.combineReducers)({auth:et,game:uu,games:ke,canvas:Dr,chat:Kc,record:zi,create:Wa});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qu=Object(p.a)(),Yu=Object(b.createStore)($u,Object(d.composeWithDevTools)(Object(b.applyMiddleware)(f.a,Qu)));Qu.run(Xu),function(){var e;a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=cn("auth")){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,a.a.awrap(Yu.dispatch(qn()));case 6:if(n.sent.username===e.username){n.next=10;break}throw un(),"Auth mismatch";case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(3),console.dir("Check auth failed");case 15:case"end":return n.stop()}}),null,null,[[3,12]])}(),u.a.render(o.a.createElement(s.a,{store:Yu},o.a.createElement(l.a,null,o.a.createElement(m.b,null,o.a.createElement(Wu,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[194,1,2]]]);
//# sourceMappingURL=main.0fc2b78b.chunk.js.map